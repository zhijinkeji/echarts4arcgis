// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore",["dojo/_base/declare","esri/dijit/geoenrichment/when"],function(d,e){var f={fromJson:function(a){function c(b){return a.imageDataCache&&a.imageDataCache[b]||b}a.areaAttachments=a.areaAttachments||a.areaAttachements;delete a.areaAttachements;return{getImagesForAreaAt:function(b){b=a.supportsMultipleAreas?b:0;return(a.areaAttachments[b]&&(a.areaAttachments[b].images||a.areaAttachments[b].attachments)||
[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return c(a.thumbnail)},getUrl:function(){return c(a.url)}}})},getAttributesForAreaAt:function(b){b=a.supportsMultipleAreas?b:0;return a.areaAttachments[b]&&a.areaAttachments[b].attributes||[]},getNotesForAreaAt:function(b){b=a.supportsMultipleAreas?b:0;return a.areaAttachments[b]&&a.areaAttachments[b].notes||[]}}}};return d(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,
_provider:null,constructor:function(a){(this._provider=a.getAttachmentsForAreaAt||a.getImagesForAreaAt||a.getAttributesForAreaAt||a.getNotesForAreaAt?a:f.fromJson(a))&&this._provider.getAttachmentsForAreaAt&&(a.getImagesForAreaAt=function(c){return a.getAttachmentsForAreaAt(c)});this.supportsMultipleAreas=a.supportsMultipleAreas},initialize:function(){},getImages:function(){function a(a){a.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var c=
this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return c?Array.isArray(c)?(a(c),c):e(c,function(b){a(b);return b}):c},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(a){this._currentAreaIndex=a}})});