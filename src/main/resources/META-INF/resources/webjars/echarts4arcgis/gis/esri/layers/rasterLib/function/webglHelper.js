// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/layers/rasterLib/function/webglHelper",[],function(){var m={getUniforms:function(a,d){var b=a.getProgramParameter(d,a.ACTIVE_UNIFORMS),e,f,k={};for(e=0;e<b;e++)(f=a.getActiveUniform(d,e))&&(k[f.name]={location:a.getUniformLocation(d,f.name),info:f});return k},setUniform:function(a,d,b){var e=d.info,f=d.location,k=e.type;if(null==b)console.log("uniform "+d.info.name+" has null or undefined value");else switch(k){case a.FLOAT:1<e.size?0===b.length?console.log("uniform "+d.info.name+" has length 0"):
a.uniform1fv(f,b):a.uniform1f(f,b);break;case a.FLOAT_VEC2:if(0===b.length){console.log("uniform "+d.info.name+" has length 0");break}a.uniform2fv(f,b);break;case a.FLOAT_VEC3:if(0===b.length){console.log("uniform "+d.info.name+" has length 0");break}a.uniform3fv(f,b);break;case a.FLOAT_VEC4:if(0===b.length){console.log("uniform "+d.info.name+" has length 0");break}a.uniform4fv(f,b);break;case a.INT:case a.BOOL:1<e.size?0===b.length?console.log("uniform "+d.info.name+" has length 0"):a.uniform1iv(f,
b):a.uniform1i(f,b);break;case a.INT_VEC2:case a.BOOL_VEC2:if(0===b.length){console.log("uniform "+d.info.name+" has length 0");break}a.uniform2iv(f,b);break;case a.INT_VEC3:case a.BOOL_VEC3:if(0===b.length){console.log("uniform "+d.info.name+" has length 0");break}a.uniform3iv(f,b);break;case a.INT_VEC4:case a.BOOL_VEC4:0===b.length?console.log("uniform "+d.info.name+" has length 0"):a.uniform4iv(f,b)}},createTexture:function(a,d){var b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d?a.LINEAR:a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d?a.LINEAR:a.NEAREST);return b},createBufferTexture:function(a,d,b){d=m.createTexture(a,d);a.getExtension("OES_texture_float");b=b||[a.drawingBufferWidth,a.drawingBufferHeight];a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b[0],b[1],0,a.RGBA,a.FLOAT,null);b=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,
b);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,d,0);return{texture:d,frameBuffer:b}},getShader:function(a,d,b){b=b?a.createShader(a.VERTEX_SHADER):a.createShader(a.FRAGMENT_SHADER);a.shaderSource(b,d);a.compileShader(b);a.getShaderParameter(b,a.COMPILE_STATUS)||(console.log(a.getShaderInfoLog(b)),b=null);return b},loadProgram:function(a,d,b){var e=a.createProgram();a.attachShader(e,d);a.attachShader(e,b);a.linkProgram(e);a.getProgramParameter(e,a.LINK_STATUS)||(console.warn("failed to load webgl program: "+
a.getProgramInfoLog(e)),a.deleteProgram(e),e=null);return e},createMesh:function(a,d){if(!a||1===a[0]&&1===a[1])return new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);var b;b=a&&d?new Float32Array(a[0]*a[1]*20):new Float32Array(a[0]*a[1]*12);var e=.9998/a[1],f=.9998/a[0],k,l,g,h,c=0;for(k=0;k<a[1];k++)for(l=0;l<a[0];l++)g=1E-4+e*k,h=1E-4+f*l,a&&!d?(b[c++]=g,b[c++]=h,b[c++]=g+e,b[c++]=h,b[c++]=g,b[c++]=h+f,b[c++]=g,b[c++]=h+f,b[c++]=g+e,b[c++]=h,b[c++]=g+e,b[c++]=h+f):(b[c++]=g,b[c++]=h,b[c++]=g,b[c++]=
h+f,b[c++]=g,b[c++]=h+f,b[c++]=g+e,b[c++]=h+f,b[c++]=g+e,b[c++]=h+f,b[c++]=g+e,b[c++]=h,b[c++]=g,b[c++]=h,b[c++]=g+e,b[c++]=h,b[c++]=g,b[c++]=h+f,b[c++]=g+e,b[c++]=h);return b}};return m});