// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/VisualsCollector",["dojo/_base/Color","./dom-style","./TransformUtil","./VisibilityChecker"],function(h,b,q,r){var t=/.+(px|pt)$/;return{getNodeVisuals:function(a,c){if(!r.checkNode(a))return null;var g=b.cacheComputedStyle(a),k=c?c.style.opacity:1,d=c&&c.isLink,u=c&&c.isB,v=c&&c.isI,w=c&&c.isU,x=b.get(a,"width"),y=b.get(a,"height"),z=b.toPixelValue(a,b.get(a,"fontSize")),A=b.get(a,"textAlign"),B=b.get(a,"whiteSpace"),C=b.get(a,"letterSpacing"),
D=b.get(a,"wordSpacing"),m=q.measureNode(a,c),n=b.get(a,"position"),p=new h(b.get(a,"color")),d={node:a,parentVs:c,box:m.box,style:{styleCache:g,cw:x,ch:y,boxSizing:b.get(a,"boxSizing"),_paddings:null,getPaddings:function(){if(this._paddings)return this._paddings;b.setComputedStyleCache(a,g);var e={l:b.get(a,"paddingLeft"),r:b.get(a,"paddingRight"),t:b.get(a,"paddingTop"),b:b.get(a,"paddingBottom")};e.ew=e.l+e.r;e.eh=e.t+e.b;e.bw=this.cw+e.l+e.r;e.bh=this.ch+e.t+e.b;b.clearCache(a);return this._paddings=
e},_border:null,getBorder:function(){function e(e,c){var d=new h(b.get(a,"border"+c+"Color"));f[e]={color:d.toHex(),opacity:d.a*k,width:b.get(a,"border"+c+"Width"),style:b.get(a,"border"+c+"Style")}}if(this._border)return this._border;b.setComputedStyleCache(a,g);var f={radius:b.toPixelValue(a,b.get(a,"borderBottomLeftRadius"))};e("l","Left");e("r","Right");e("t","Top");e("b","Bottom");f.ew=f.l.width+f.r.width;f.eh=f.t.width+f.b.width;b.clearCache(a);return this._border=f},_background:null,getBackground:function(){function e(a){return"string"===
typeof a&&t.test(a)?b.toPixelValue(document.body,a):0}if(this._background)return this._background;b.setComputedStyleCache(a,g);var c=new h(b.get(a,"backgroundColor")),d=b.get(a,"backgroundRepeat"),l=b.get(a,"backgroundSize"),c={color:c.toHex(),opacity:c.a*k,image:b.get(a,"backgroundImage"),size:l,positionX:b.get(a,"backgroundPositionX"),positionY:b.get(a,"backgroundPositionY"),repeatX:"cover"!==l&&("repeat"===d||"repeat-x"===d),repeatY:"cover"!==l&&("repeat"===d||"repeat-y"===d)};c.sizePx=e(c.size);
c.positionXPx=e(c.positionX);c.positionYPx=e(c.positionY);b.clearCache(a);return this._background=c},color:p.toHex(),colorOpacity:p.a,fontSize:z,textAlign:A,whiteSpace:B,letterSpacing:C,wordSpacing:D,transform:m.transform,parentHasTransform:!(!c||!c.style.transform),opacity:b.get(a,"opacity")*k,overflow:b.get(a,"overflow"),spanFlowStartOffset:0,spanFlowEndOffset:0,display:b.get(a,"display"),isRelAbs:"relative"===n||"absolute"===n},isLink:"A"===a.nodeName||d,isB:"B"===a.nodeName||"H"===a.nodeName.charAt(0)||
u,isI:"I"===a.nodeName||v,isU:"U"===a.nodeName||w};"border-box"===d.style.boxSizing&&(d.style.cw-=d.style.getBorder().ew+d.style.getPaddings().ew,d.style.ch-=d.style.getBorder().eh+d.style.getPaddings().eh,d.style._paddings=null);d.isLink&&(d.href=a.href||c.href,d.target=a.target||c.target);b.clearCache(a);return d}}});