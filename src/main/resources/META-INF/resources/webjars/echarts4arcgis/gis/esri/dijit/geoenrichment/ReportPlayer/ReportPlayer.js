// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],function(g){return g})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(g){return g})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(g){return g})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(g){function f(e){e=e.split(".");return Number((Number(e[0])+Number(e[1])/100).toFixed(2))}g=Math.max(f("3.32"),
f(g.version)).toFixed(2);return{jsapiVersion:g,esriDijitCssUrl:"https://js.arcgis.com/"+g+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+g+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+g+"/",runReportTask:{ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1},
createPlayerCommand:{prettifyDataJson:!0},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(g,f,e,k,c,b,a){return g(null,{_initCommands:function(){a.isMobileDevice()||!b.modules.exportCommands?this.playerToolbar.notifyCommandButtonsAdded():k(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(a){this._createCommandButtons(a);this.playerToolbar.notifyCommandButtonsAdded()}.bind(this))},_lastNonPrintCommandId:null,_executeExportCallback:null,_executePrintCallback:null,_createCommandButtons:function(a){function b(a){var b=new e,h=new e;d.onCommandSettingsShown(b.promise);
d._saveVisualState();k(d._getPrintableContainer({commandId:a,showDialog:!0}),function(a){if(a){var b=a.getSelectedCommandId();b&&b!==c.PRINT&&(d._lastNonPrintCommandId=b);k(d._executeCommand(b,{printableContainer:a}),h.resolve,h.reject)}else k(d._applySavedVisualState(),function(){d.onCommandCanceled();h.resolve()})}).always(b.resolve);return h.promise}var d=this;if(a&&a.length){var m,n=a.filter(function(a){return a.id===c.PRINT?(m=a,!1):!0});n.length&&(this._executeExportCallback=function(){return b(d._lastNonPrintCommandId||
n[0].id)},this._createCommandButton(n[0],this._executeExportCallback));m&&(this._executePrintCallback=function(){return b(m.id)},this._createCommandButton(m,this._executePrintCallback))}},executeExport:function(){return this._executeExportCallback&&this._executeExportCallback()},executePrint:function(){return this._executePrintCallback&&this._executePrintCallback()},_createCommandButton:function(a,b){return this.playerToolbar.createCommandButton(a,b)},getCommandExportDialogSettings:function(){return this._getPrintDialogSettings()},
executeCommand:function(a,b){this._saveVisualState();var d=this;return k(this._getPrintableContainer({commandId:a,showDialog:!1,exportSettings:b&&b.exportSettings}),function(h){return d._executeCommand(a,f.mixin({printableContainer:h},b))})},_executeCommand:function(a,b){var d=this;a!==c.PDF&&a!==c.DYNAMIC_HTML||!this._viewModel.dynamicReportInfo.fieldData.runReportTaskIDs||(b.creditsTaskIDs=this._viewModel.dynamicReportInfo.fieldData.runReportTaskIDs);var h=new e;setTimeout(function(){k(d.dataProvider.executeCommand&&
d.dataProvider.executeCommand(a,d,b,function(a){d.onCommandProgress(a)}),h.resolve,h.reject)});var n=h.promise.then(function(a){return k(d._applySavedVisualState(),function(){return a})});this.onCommandStart(n,a);this._showWaiting(n,"executeCommand");n.always(function(){d.onCommandEnd(n)});return n},_visualStateMemo:null,_saveVisualState:function(){this._visualStateMemo=this.getVisualState()},_applySavedVisualState:function(){var a=this;return this.setVisualState(this._visualStateMemo).then(function(){a._visualStateMemo=
null})},onCommandSettingsShown:function(a){},onCommandCanceled:function(){},onCommandStart:function(a,b){},onCommandProgress:function(a){},onCommandEnd:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],function(){var g={HTML:"createHTML",PDF:"createPDF",PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1}};return g})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff"],
function(g){var f={},e=function(){var e=window,c=document,b=e.navigator.platform,a=e.navigator.userAgent,d={ios:!1,android:!1,androidChrome:!1,desktop:!1,windowsPhone:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!e.cordova&&!e.phonegap),phonegap:!(!e.cordova&&!e.phonegap)},h=e.screen.width,l=e.screen.height,m=a.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),n=a.match(/(Android);?[\s\/]+([\d.]+)?/),p=a.match(/(iPad).*OS\s([\d_]+)/),f=a.match(/(iPod)(.*OS\s([\d_]+))?/),
q=!p&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=q&&(375===h&&812===l||414===h&&896===l),l=0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/"),g=0<=a.indexOf("Edge/"),r=0<=a.indexOf("Gecko/")&&0<=a.indexOf("Firefox/"),u="MacIntel"===b,b="Win32"===b;d.ie=l;d.edge=g;d.firefox=r;m&&(d.os="windows",d.osVersion=m[2],d.windowsPhone=!0);n&&!b&&(d.os="android",d.osVersion=n[2],d.android=!0,d.androidChrome=0<=a.toLowerCase().indexOf("chrome"));if(p||q||f)d.os="ios",d.ios=!0;q&&!f&&(d.osVersion=q[2].replace(/_/g,
"."),d.iphone=!0,d.iphoneX=h);p&&(d.osVersion=p[2].replace(/_/g,"."),d.ipad=!0);f&&(d.osVersion=f[3]?f[3].replace(/_/g,"."):null,d.iphone=!0);d.ios&&d.osVersion&&0<=a.indexOf("Version/")&&"10"===d.osVersion.split(".")[0]&&(d.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]);d.webView=!(!(q||p||f)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!e.navigator.standalone)||e.matchMedia&&e.matchMedia("(display-mode: standalone)").matches;d.standalone=d.webView;d.desktop=!(d.os||d.android||d.webView);
d.desktop&&(d.macos=u,d.windows=b);d.os&&"ios"===d.os&&(a=d.osVersion.split("."),c=c.querySelector('meta[name\x3d"viewport"]'),d.minimalUi=!d.webView&&(f||q)&&(7===1*a[0]?1<=1*a[1]:7<1*a[0])&&c&&0<=c.getAttribute("content").indexOf("minimal-ui"));d.needsStatusbarOverlay=function(){return(d.webView||d.android&&d.cordova)&&e.innerWidth*e.innerHeight===e.screen.width*e.screen.height?!d.iphoneX||90!==e.orientation&&-90!==e.orientation?!0:!1:!1};d.statusbar=d.needsStatusbarOverlay();d.pixelRatio=e.devicePixelRatio||
1;return d}();f.device=e;f.isMobileDevice=function(){return!e.desktop&&!e.ipad};f.isPCWithTouchScreen=function(){return e.desktop&&g("touch")};f.isLandscape=function(){return 90===Math.abs(window.orientation)};f.press=e.desktop?"mousedown":"touchstart";f.release=e.desktop?"mouseup":"touchend";f.click=e.desktop?"click":"touchend";f.clickOrRelease=e.desktop?"click, mouseup":"touchend";f.move=e.desktop?"mousemove":"touchmove";return f})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_LogoSupport":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when","../core/annotations/supportClasses/DynamicBehaviors","../core/supportClasses/images/DefaultLogoLoader"],function(g,f,e,k){return g(null,{_getReportLogo:function(c,b,a){function d(){return f(h._reportData.attachmentsStore&&h._reportData.attachmentsStore.getImages(),function(d){return f(d&&d[0]&&d[0].getThumbnail(),function(d){return d||h._getDefaultLogo(b,a)})})}var h=this;switch(c){case e.ATTACHMENTS:return d();default:return this._getDefaultLogo(b,a)}},_getDefaultLogo:function(c,
b){return this._reportData.customLogo||b||k.getDefaultLogo(this._viewModel.getDocumentDefaultStyles())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/annotations/supportClasses/DynamicBehaviors":function(){define([],function(){var g={ATTACHMENTS:"attachments",LOGO:"logo",toSupportedValue:function(f,e){return f===g.ATTACHMENTS?f:f||e?g.LOGO:null}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/DefaultLogoLoader":function(){define(["require","esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/utils/ColorUtil"],function(g,f,e){return{_identifyDefaultLogoBackground:function(f){return!f||e.isTransparent(f.backgroundColor)?"transparent":e.isLightColor(f.backgroundColor)?"light":"dark"},_loadLogo:function(e){var c=new f;g(["./"+e],function(b){c.resolve(b)});return c.promise},getDefaultLogo:function(e){switch(this._identifyDefaultLogoBackground(e)){case "light":return this._loadLogo("DefaultLogoGraphicReportDark");case "dark":return this._loadLogo("DefaultLogoGraphicReportLight");
default:return this._loadLogo("DefaultLogoGraphicReportGeneric")}}}})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color","dojox/color/_base","dojox/color/Palette"],function(g,f,e){function k(b,a,d){return Math.round((b&255)*(1-d)+(a&255)*d)}var c={toCSSColor:function(b,a,d){"string"!==typeof b||/^0x/i.test(b)||(b=g.fromString(b));if(b instanceof g)return a||1===b.a?b.toHex():b.toCss(!0);if(null==b||isNaN(b))return d?c.toCSSColor(d,a):"#000000";b="00000"+Number(b).toString(16);
return"#"+b.substr(b.length-6)},toColor:function(b,a){return"object"===typeof b?(new g).setColor(b):g.fromString(c.toCSSColor(b,!1,a))},getCSSColorWithAlpha:function(b,a){return c.toCSSColor(c.getColorWithAlpha(b,a))},getColorWithAlpha:function(b,a){b=(new g).setColor(b);b.a=a;return b},transform:function(b,a){var d=new e;d.colors=[new g(b)];return d.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(b,a,d){return e.generators.analogous({base:b,
high:a,low:d}).colors},applyColorHue:function(b,a){b=new f.Color(b);a=new f.Color(a);b=b.toHsl();var d=a.toHsl();b=f.fromHsl({h:b.h,s:0===b.s?0:0===d.s?b.s:d.s,l:d.l});b.a=a.a;return b},getColorParams:function(b){b=new f.Color(b);var a=b.toHsv();a.l=b.toHsl().l;return a},generateGradient:function(b,a){b=b.map(c.toRGBColor);var d=[];if(0===b.length-1||1===a){b=b[0];for(var h=0;h<a;h++)d.push(b);return d}for(var l=1/(a-1),h=0;h<a;h++)d.push(c.getGradientRGBColor(b,h*l));return d},getGradientRGBColor:function(b,
a,d){var h=b.length-1,l=1>h||0>=a?0:1<=a?h:-1;if(0<=l)return b[l];a*=h;l=Math.floor(a);l===h&&l--;return c.mixRGBColors(b[l],b[l+1],a-l,d)},mixRGBColors:function(b,a,d,h){1<d?d=1:0>d&&(d=0);var l=k(b,a,d),c=k(b>>8,a>>8,d),n=k(b>>16,a>>16,d);return((h?k(b>>24,a>>24,d):0)<<24)+(n<<16)+(c<<8)+l},toRGBColor:function(b,a){b=c.toCSSColor(b,!0,a);return parseInt("0x"+b.substr(1))},getContrastColor:function(b,a,d,h){return c.isLightColor(b,h)?c.toColor(a,"#000000"):c.toColor(d,"#FFFFFF")},getHighlightColor:function(b,
a){a=a||{};b=new f.Color(b);x=b.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var d=a.saturation||100,h=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>x.l?x.l+30:x.l-20:(x.s=d,x.l=x.l<a?h:x.l>h?a:x.l-a>h-x.l?a:h)}a=f.fromHsl(x);a.a=b.a;return a},getLightness:function(b){b=c.toRGBColor(b);return(299*(b>>16&255)+587*(b>>8&255)+114*(b&255))/1E3},isLightColor:function(b,a){return c.getLightness(b)>=(void 0===a?128:a)},colorsEqual:function(b,a){b instanceof g||(b=
c.toColor(b));a instanceof g||(a=c.toColor(a));return b.a==a.a&&b.r==a.r&&b.g==a.g&&b.b==a.b},isTransparent:function(b){b=c.toCSSColor(b);return"rgba(0,0,0,0)"===b.toLowerCase().replace(/\s/g,"")},generateRandomColor:function(b){function a(){return d+Math.round((h-d)*Math.random())}b=b||{};var d=b.min||0,h=b.max||255,l=b.randomizeAlpha?a():1;return b.grayScheme?(b=a(),new g([b,b,b,l])):new g([a(),a(),a(),l])}};return c})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color",
"dojo/colors"],function(g,f,e,k){g=f.getObject("color",!0,g);g.Color=e;g.blend=e.blendColors;g.fromRgb=e.fromRgb;g.fromHex=e.fromHex;g.fromArray=e.fromArray;g.fromString=e.fromString;g.greyscale=k.makeGrey;f.mixin(g,{fromCmy:function(c,b,a){f.isArray(c)?(b=c[1],a=c[2],c=c[0]):f.isObject(c)&&(b=c.m,a=c.y,c=c.c);return new e({r:Math.round(255*(1-c/100)),g:Math.round(255*(1-b/100)),b:Math.round(255*(1-a/100))})},fromCmyk:function(c,b,a,d){f.isArray(c)?(b=c[1],a=c[2],d=c[3],c=c[0]):f.isObject(c)&&(b=
c.m,a=c.y,d=c.b,c=c.c);d/=100;return new e({r:Math.round(255*(1-Math.min(1,c/100*(1-d)+d))),g:Math.round(255*(1-Math.min(1,b/100*(1-d)+d))),b:Math.round(255*(1-Math.min(1,a/100*(1-d)+d)))})},fromHsl:function(c,b,a){f.isArray(c)?(b=c[1],a=c[2],c=c[0]):f.isObject(c)&&(b=c.s,a=c.l,c=c.h);b/=100;for(a/=100;0>c;)c+=360;for(;360<=c;)c-=360;var d,h;120>c?(d=(120-c)/60,h=c/60,c=0):240>c?(d=0,h=(240-c)/60,c=(c-120)/60):(d=(c-240)/60,h=0,c=(360-c)/60);d=2*b*Math.min(d,1)+(1-b);h=2*b*Math.min(h,1)+(1-b);c=2*
b*Math.min(c,1)+(1-b);.5>a?(d*=a,h*=a,c*=a):(d=(1-a)*d+2*a-1,h=(1-a)*h+2*a-1,c=(1-a)*c+2*a-1);return new e({r:Math.round(255*d),g:Math.round(255*h),b:Math.round(255*c)})}});g.fromHsv=function(c,b,a){f.isArray(c)?(b=c[1],a=c[2],c=c[0]):f.isObject(c)&&(b=c.s,a=c.v,c=c.h);360==c&&(c=0);b/=100;a/=100;var d,h,l;if(0==b)h=l=d=a;else{var m=c/60;c=Math.floor(m);var n=m-c,m=a*(1-b),p=a*(1-b*n);b=a*(1-b*(1-n));switch(c){case 0:d=a;h=b;l=m;break;case 1:d=p;h=a;l=m;break;case 2:d=m;h=a;l=b;break;case 3:d=m;h=
p;l=a;break;case 4:d=b;h=m;l=a;break;case 5:d=a,h=m,l=p}}return new e({r:Math.round(255*d),g:Math.round(255*h),b:Math.round(255*l)})};f.extend(e,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var c,b=this.r/255,a=this.g/255,d=this.b/255;c=Math.min(1-b,1-a,1-d);return{c:Math.round((1-b-c)/(1-c)*100),m:Math.round((1-a-c)/(1-c)*100),y:Math.round((1-d-c)/(1-c)*100),b:Math.round(100*c)}},toHsl:function(){var c=
this.r/255,b=this.g/255,a=this.b/255,d=Math.min(c,a,b),h=Math.max(c,b,a),l=h-d,m=0,n=0,d=(d+h)/2;0<d&&1>d&&(n=l/(.5>d?2*d:2-2*d));0<l&&(h==c&&h!=b&&(m+=(b-a)/l),h==b&&h!=a&&(m+=2+(a-c)/l),h==a&&h!=c&&(m+=4+(c-b)/l),m*=60);return{h:m,s:Math.round(100*n),l:Math.round(100*d)}},toHsv:function(){var c=this.r/255,b=this.g/255,a=this.b/255,d=Math.max(c,b,a),h=d-Math.min(c,a,b),l=null,m=0==d?0:h/d;0==m?l=0:(l=c==d?60*(b-a)/h:b==d?120+60*(a-c)/h:240+60*(c-b)/h,0>l&&(l+=360));return{h:l,s:Math.round(100*m),
v:Math.round(100*d)}}});return g})},"dojox/main":function(){define(["dojo/_base/kernel"],function(g){return g.dojox})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(g,f,e,k){var c={};f.setObject("dojo.colors",c);var b=function(a,b,l){0>l&&++l;1<l&&--l;var d=6*l;return 1>d?a+(b-a)*d:1>2*l?b:2>3*l?a+(b-a)*(2/3-l)*6:a};g.colorFromRgb=e.fromRgb=function(a,h){var d=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(d){a=d[2].split(/\s*,\s*/);
var c=a.length,d=d[1];if("rgb"==d&&3==c||"rgba"==d&&4==c)return d=a[0],"%"==d.charAt(d.length-1)?(d=k.map(a,function(a){return 2.56*parseFloat(a)}),4==c&&(d[3]=a[3]),e.fromArray(d,h)):e.fromArray(a,h);if("hsl"==d&&3==c||"hsla"==d&&4==c){var d=(parseFloat(a[0])%360+360)%360/360,n=parseFloat(a[1])/100,f=parseFloat(a[2])/100,n=.5>=f?f*(n+1):f+n-f*n,f=2*f-n,d=[256*b(f,n,d+1/3),256*b(f,n,d),256*b(f,n,d-1/3),1];4==c&&(d[3]=a[3]);return e.fromArray(d,h)}}return null};var a=function(a,b,l){a=Number(a);return isNaN(a)?
l:a<b?b:a>l?l:a};e.prototype.sanitize=function(){this.r=Math.round(a(this.r,0,255));this.g=Math.round(a(this.g,0,255));this.b=Math.round(a(this.b,0,255));this.a=a(this.a,0,1);return this};c.makeGrey=e.makeGrey=function(a,b){return e.fromArray([a,a,a,b])};f.mixin(e.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],
cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],
darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,
92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,
153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,
245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,
82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return e})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(g,f,e){function k(a,b,d){var h=new e.Palette;h.colors=
[];f.forEach(a.colors,function(a){h.colors.push(new e.Color({r:Math.min(255,Math.max(0,"dr"==b?a.r+d:a.r)),g:Math.min(255,Math.max(0,"dg"==b?a.g+d:a.g)),b:Math.min(255,Math.max(0,"db"==b?a.b+d:a.b)),a:Math.min(1,Math.max(0,"da"==b?a.a+d:a.a))}))});return h}function c(a,b,d){var h=new e.Palette;h.colors=[];f.forEach(a.colors,function(a){a=a.toCmy();h.colors.push(e.fromCmy(Math.min(100,Math.max(0,"dc"==b?a.c+d:a.c)),Math.min(100,Math.max(0,"dm"==b?a.m+d:a.m)),Math.min(100,Math.max(0,"dy"==b?a.y+d:a.y))))});
return h}function b(a,b,d){var h=new e.Palette;h.colors=[];f.forEach(a.colors,function(a){a=a.toCmyk();h.colors.push(e.fromCmyk(Math.min(100,Math.max(0,"dc"==b?a.c+d:a.c)),Math.min(100,Math.max(0,"dm"==b?a.m+d:a.m)),Math.min(100,Math.max(0,"dy"==b?a.y+d:a.y)),Math.min(100,Math.max(0,"dk"==b?a.b+d:a.b))))});return h}function a(a,b,d){var h=new e.Palette;h.colors=[];f.forEach(a.colors,function(a){a=a.toHsl();h.colors.push(e.fromHsl(("dh"==b?a.h+d:a.h)%360,Math.min(100,Math.max(0,"ds"==b?a.s+d:a.s)),
Math.min(100,Math.max(0,"dl"==b?a.l+d:a.l))))});return h}function d(a,b,d){var h=new e.Palette;h.colors=[];f.forEach(a.colors,function(a){a=a.toHsv();h.colors.push(e.fromHsv(("dh"==b?a.h+d:a.h)%360,Math.min(100,Math.max(0,"ds"==b?a.s+d:a.s)),Math.min(100,Math.max(0,"dv"==b?a.v+d:a.v))))});return h}e.Palette=function(a){this.colors=[];a instanceof e.Palette?this.colors=a.colors.slice(0):a instanceof e.Color?this.colors=[null,null,a,null,null]:g.isArray(a)?this.colors=f.map(a.slice(0),function(a){return g.isString(a)?
new e.Color(a):a}):g.isString(a)&&(this.colors=[null,null,new e.Color(a),null,null])};g.extend(e.Palette,{transform:function(h){var l=k;if(h.use){var m=h.use.toLowerCase();0==m.indexOf("hs")?l="l"==m.charAt(2)?a:d:0==m.indexOf("cmy")&&(l="k"==m.charAt(3)?b:c)}else if("dc"in h||"dm"in h||"dy"in h)l="dk"in h?b:c;else if("dh"in h||"ds"in h)l="dv"in h?d:a;var m=this,n;for(n in h)"use"!=n&&(m=l(m,n,h[n]));return m},clone:function(){return new e.Palette(this)}});g.mixin(e.Palette,{generators:{analogous:function(a){var b=
a.high||60,d=a.low||18;a=(g.isString(a.base)?new e.Color(a.base):a.base).toHsv();var h=Math.max(10,95>=a.s?a.s+5:100-(a.s-95)),c=92<=a.v?a.v-9:Math.max(a.v+9,20),k=90>=a.v?Math.max(a.v+5,20):95+Math.ceil((a.v-90)/2),q=[h,1<a.s?a.s-1:21-a.s,a.s,h,h],v=[c,k,a.v,c,k];return new e.Palette(f.map([(a.h+d+360)%360,(a.h+Math.round(d/2)+360)%360,a.h,(a.h-Math.round(b/2)+360)%360,(a.h-b+360)%360],function(a,b){return e.fromHsv(a,q[b],v[b])}))},monochromatic:function(a){a=g.isString(a.base)?new e.Color(a.base):
a.base;var b=a.toHsv(),d=9<b.s-30?b.s-30:b.s+30,h=b.s,c=20<b.v-20?b.v-20:b.v+60,f=20<b.v-50?b.v-50:b.v+30;return new e.Palette([e.fromHsv(b.h,d,100-.8*(100-b.v)),e.fromHsv(b.h,h,f),a,e.fromHsv(b.h,d,f),e.fromHsv(b.h,h,c)])},triadic:function(a){a=g.isString(a.base)?new e.Color(a.base):a.base;var b=a.toHsv(),d=(b.h-157+360)%360,h=90<b.s?b.s-10:b.s+10,c=95<b.s?b.s-5:b.s+5,f=20<b.v-20?b.v-20:b.v+20,k=20<b.v-30?b.v-30:b.v+30,v=70<b.v-30?b.v-30:b.v+30;return new e.Palette([e.fromHsv((b.h+57+360)%360,20<
b.s?b.s-10:b.s+10,b.v),e.fromHsv(b.h,h,k),a,e.fromHsv(d,h,f),e.fromHsv(d,c,v)])},complementary:function(a){a=g.isString(a.base)?new e.Color(a.base):a.base;var b=a.toHsv(),d=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,h=100-.9*(100-b.s),c=Math.min(100,b.s+20),f=20<b.v?b.v-30:b.v+30;return new e.Palette([e.fromHsv(b.h,Math.max(b.s-10,0),Math.min(100,b.v+30)),e.fromHsv(b.h,h,f),a,e.fromHsv(d,c,f),e.fromHsv(d,b.s,b.v)])},splitComplementary:function(a){var b=g.isString(a.base)?new e.Color(a.base):a.base,
d=a.da||30;a=b.toHsv();var h=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,c=(h-d+360)%360,d=(h+d)%360,h=100-.9*(100-a.s),f=Math.min(100,a.s+20),k=20<a.v?a.v-30:a.v+30;return new e.Palette([e.fromHsv(c,Math.max(a.s-10,0),Math.min(100,a.v+30)),e.fromHsv(c,h,k),b,e.fromHsv(d,f,k),e.fromHsv(d,a.s,a.v)])},compound:function(a){a=g.isString(a.base)?new e.Color(a.base):a.base;var b=a.toHsv(),d=360>2*b.h+18?2*b.h+18:Math.floor(b.h/2)-18,h=360>2*b.h+120?2*b.h+120:Math.floor(b.h/2)-120,c=360>2*b.h+99?2*b.h+
99:Math.floor(b.h/2)-99,f=80<b.s-10?b.s-10:b.s+10,k=10<b.s-25?b.s-25:b.s+25,v=80<b.v-20?b.v-20:b.v+20,r=Math.max(b.v,20);return new e.Palette([e.fromHsv(d,10<b.s-40?b.s-40:b.s+40,10<b.v-40?b.v-40:b.v+40),e.fromHsv(d,f,v),a,e.fromHsv(h,k,r),e.fromHsv(c,f,v)])},shades:function(a){a=g.isString(a.base)?new e.Color(a.base):a.base;var b=a.toHsv(),d=100==b.s&&0==b.v?0:b.s,h=20<=b.v-25?b.v-25:b.v+55,c=20<=b.v-75?b.v-75:b.v+5,f=Math.max(b.v-10,20);return new e.Palette([new e.fromHsv(b.h,d,20<b.v-50?b.v-50:
b.v+30),new e.fromHsv(b.h,d,h),a,new e.fromHsv(b.h,d,c),new e.fromHsv(b.h,d,f)])}},generate:function(a,b){if(g.isFunction(b))return b({base:a});if(e.Palette.generators[b])return e.Palette.generators[b]({base:a});throw Error("dojox.color.Palette.generate: the specified generator ('"+b+"') does not exist.");}});return e.Palette})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/graphic esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(g,f,e,k,c,b){return f(null,{_initBuilderPromise:null,_mapBuilder:null,_initMapBuilder:function(){var a=this;if(this._initBuilderPromise)return this._initBuilderPromise;var b=new e;g(["../core/supportClasses/map/MapBuilder"],function(d){a._mapBuilder=new d({renderMapsFromCalculators:a.isPlayerOnServer,getPlayerZoomScale:function(b){var d=a.getCurrentReportContainer();return d&&d.getPanelZoomScale?d.getPanelZoomScale(b):d&&d.getZoomInfo&&d.getZoomInfo().scale}});b.resolve()});return this._initBuilderPromise=
b.promise},collectMaps:function(a){return this._mapBuilder?a&&a.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(a,d){d=d||{};var h,l={},m=d.areaIndex||0,n=this._reportData;this.isPlayerOnServer&&(n.analysisAreas.forEach(function(a){!a.location&&a.feature.attributes&&a.feature.attributes.STORE_LAT&&a.feature.attributes.STORE_LONG&&(a.location=
new c({geometry:{x:a.feature.attributes.STORE_LONG,y:a.feature.attributes.STORE_LAT,spatialReference:{wkid:b.WGS_84_WKID}}}))}),n.combinedAreasInfo.groups&&n.combinedAreasInfo.groups.forEach(function(a){var b=n.analysisAreas[a.indexes[0]];!a.location&&b.location&&(a.location=new c({geometry:b.location.geometry.toJson()}))}));if(n.isMultiFeature){h=[];var e=n.reverseAnalysisAreasOnMap?n.analysisAreas.slice().reverse():n.analysisAreas;e.forEach(function(a,b){var d=n.reverseAnalysisAreasOnMap?e.length-
b-1:b;l[h.length]=d;h.push(a.feature);b=n.combinedAreasInfo.groups;b&&b.length&&b.some(function(a){return-1!==a.indexes.indexOf(d)})||(a.location&&(l[h.length]=d,h.push(a.location)),a.additionalFeatures&&a.additionalFeatures.forEach(function(a){l[h.length]=d;h.push(a)}))});n.combinedAreasInfo.groups&&n.combinedAreasInfo.groups.forEach(function(a){a.location&&(l[h.length]=a.indexes[0],h.push(a.location),a.location.locationName=a.locationName);a.additionalFeatures&&a.additionalFeatures.forEach(function(b){l[h.length]=
a.indexes[0];h.push(b)})})}else{var f=n.analysisAreas[m];h=[f.feature];f.location&&h.push(f.location);f.additionalFeatures&&(h=h.concat(f.additionalFeatures));h.forEach(function(a,b){l[b]=m})}return k(this._initMapBuilder(),function(){this._mapBuilder.setArcgisUrl(n.config.portalUrl);this._mapBuilder.setFallbackMapImageInfos(n.mapImageInfos);return this._mapBuilder.createMap(a,{features:h,featureIndexToAreaIndexMap:l,analysisAreas:n.analysisAreas,areaIndex:m,defaultBasemapId:this._getDefaultBasemapId()||
d.defaultBasemapId,webMapId:d.webMapId,additionalLayerInfos:d.additionalLayerInfos,calculatorFieldName:d.calculatorFieldName,pinSymbolJson:d.pinSymbolJson,areaSymbolJsons:d.areaSymbolJsons,areaSymbolRamp:d.areaSymbolRamp,locatorPointsControllers:d.locatorPointsControllers,stdPolygonsControllers:d.stdPolygonsControllers,thisAreasHighlightController:d.thisAreasHighlightController,legendController:d.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,geClient:this._viewModel.dynamicReportInfo.geClient,
countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:d.waitForLoad,extent:d.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(a,b){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})})},"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(g,f){var e={},k=[4326,102100,102113,3857];e.WGS_84_WKID=
4326;e.WEB_MERCATOR_WKID=102100;e.getSupportedWKIDs=function(){return k.slice()};e.testSpatialReferenceWKID=function(c){c=k.indexOf(Number(c&&"object"===typeof c?c.wkid:c));return 0<=c?k[0===c?0:1]:0};e.isWebMercator=function(c){return 102100===e.testSpatialReferenceWKID(c)};e.isWGS84=function(c){return 4326===e.testSpatialReferenceWKID(c)};e.getGeometryConverter=function(c,b){c=e.testSpatialReferenceWKID(c);b=e.testSpatialReferenceWKID(b);return c&&b&&c!==b?4326===c?g.geographicToWebMercator:g.webMercatorToGeographic:
null};e.toWGS84=function(c){return e.toSpatialReference(c,4326)};e.toWebMercator=function(c){return e.toSpatialReference(c,102100)};e.toSpatialReference=function(c,b){c&&!c.toJson&&(c=f.fromJson(c));b=e.getGeometryConverter(c&&c.spatialReference,b);return null!=b?b(c):c};return e})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PageNavigationSupport":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-geometry dojo/dom-style ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l){l=l.geoenrichment.dijit.ReportPlayer.ReportPlayer;return g(null,{_currentPageIndex:null,_initPageNavigationControls:function(){var a=this;f(this.prevPageButton,"click",function(){a._showPrevPage()});f(this.nextPageButton,"click",function(){a._showNextPage()});d.hide(this.sidePageNavigator);h.setTooltipToNode(this.prevPageButton,l.previousPage);h.setTooltipToNode(this.nextPageButton,l.nextPage)},showPageAt:function(b){this.viewMode===a.FULL_PAGES&&(b=Math.max(0,b),this._currentPageIndex=
b=Math.min(this.getCurrentReportContainer().getNumberOfPages()-1,b),this.getCurrentReportContainer().showPageAt(b),this._updatePageNavigator())},_updatePageNavigator:function(){var h=this.getCurrentReportContainer()&&this.getCurrentReportContainer().getNumberOfPages&&this.viewMode===a.FULL_PAGES;this.playerToolbar.setPageControlsVisible(h);if(h){h=this.getCurrentReportContainer().getNumberOfPages();d[1===h?"hide":"show"]([this.sidePageNavigator]);e[0===this._currentPageIndex?"add":"remove"](this.prevPageButton,
"disabled");e[this._currentPageIndex===h-1?"add":"remove"](this.nextPageButton,"disabled");if(this.resizeMode===b.FIT_WINDOW){var l=k.position(this.getCurrentReportContainer().stackContainer);c.set(this.sidePageNavigator,"left",Math.min(l.x+l.w+20,document.body.clientWidth-70)+"px");c.set(this.sidePageNavigator,"top",Math.max(60,l.y+10)+"px")}this.playerToolbar.updatePageSelect(h,this._currentPageIndex)}else d.hide([this.sidePageNavigator])},_showPrevPage:function(){0!==this._currentPageIndex&&(this._currentPageIndex--,
this.showPageAt(this._currentPageIndex))},_showNextPage:function(){this._currentPageIndex!==this.getCurrentReportContainer().getNumberOfPages()-1&&(this._currentPageIndex++,this.showPageAt(this._currentPageIndex))}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes":function(){define([],function(){var g={AUTO:"auto",FIT_WINDOW:"fitWindow",MANUAL:"manual",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.FIT_WINDOW}};
return g})},"esri/dijit/geoenrichment/ReportPlayer/PlayerViewModes":function(){define([],function(){var g={FULL_PAGES:"fullPages",PANELS_IN_SLIDES:"panelsInSlides",PANELS_IN_STACK:"panelsInStack",PANELS_IN_STACK_ALL:"panelsInStackAll",PANELS_IN_ROW:"panelsInRow",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.FULL_PAGES},isMobileSupported:function(f){return f===g.PANELS_IN_SLIDES||f===g.PANELS_IN_STACK||f===g.PANELS_IN_STACK_ALL||
f===g.PANELS_IN_ROW},isStackLike:function(f){return f===g.PANELS_IN_STACK||f===g.PANELS_IN_STACK_ALL||f===g.PANELS_IN_ROW},isStack:function(f){return f===g.PANELS_IN_STACK||f===g.PANELS_IN_STACK_ALL}};return g})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(g,f,e,k,c,b,a,d){function h(){m||(m=k.create("div",
{"class":"esriGEOffscreen"},document.body));return m}var l={isHidden:function(a){return a&&e.contains(a,"esriGEHidden")},hasVisibleChildren:function(a){if(!a||!a.children.length)return!1;for(var b=0;b<a.children.length;b++)if(!l.isHidden(a.children[b]))return!0;return!1},hide:function(a){return l.addTag(a,"esriGEHidden")},show:function(a){return l.removeTag(a,"esriGEHidden")},display:function(a,b){return l[b?"show":"hide"](a)},addTag:function(a,b){return l.applyCallback(a,function(a){a&&e.add(a,b)})},
removeTag:function(a,b){return l.applyCallback(a,function(a){a&&e.remove(a,b)})},applyCallback:function(a,b,d){d&&(b=g.hitch(d,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,b){if(!a||!a.children||!b)return-1;for(var d=0;d<a.children.length;d++)if(a.children[d]===b)return d;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],d=0;d<a.children.length;d++)b.push(a.children[d]);return b},getChildNodes:function(a){if(!a||!a.childNodes)return null;for(var b=
[],d=0;d<a.childNodes.length;d++)b.push(a.childNodes[d]);return b},isChildOf:function(a,b,d){var h=!1,c=function(a){if(d&&!d(a))return!1;a.parentNode===b?h=!0:a.parentNode&&c(a.parentNode)};a&&c(a);return h},isNodeInLayout:function(a){return l.isChildOf(a,document.body,function(a){return!l.isHidden(a)&&"none"!=b.get(a,"display")&&!e.contains(a,"dijitHidden")})},isNodeVisible:function(a){return l.isChildOf(a,document.body,function(a){return!e.contains(a,"dijitHidden")&&"hidden"!=b.get(a,"visibility")})},
isNodeOnscreen:function(a){return l.isChildOf(a,document.body,function(a){return!e.contains(a,"esriGEOffscreen")})},enableContent:function(a,d,h){if(a){h=h||{};var l=a.children.length-1;if(!(0>l)){l=a.children[l];e.contains(l,"esriGEDisabledContent")||(l=null);if(d)l&&a.removeChild(l);else if(l=l||k.create("div",{"class":"esriGEDisabledContent"+(h.overlayClass?" "+h.overlayClass:"")},a),h.textContent&&(l.textContent=h.textContent),!1!==h.fitParent&&(a=c[h.marginBox?"getMarginBox":"getContentBox"](a).h))a=
a.toString()+"px",b.set(l,{height:a,marginTop:"-"+a});return l}}},enableContentAbsolute:function(a,d,h){if(a){h=h||{};var c=b.get(a,"position");"relative"!==c&&"absolute"!==c&&b.set(a,"position","relative");return l.enableContent(a,d,{overlayClass:"esriGEAbsoluteStretched "+(h.overlayClass||"")+(h.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:h.textContent})}}},m;l.hideNodeInBackground=function(a,b){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;
var d=k.create("div",null,a,"after"),c=k.create("div",{style:"position: absolute; left: 0px; top: 0px;"},h());k.place(a,c);b="DomUtil.hideNodeInBackground"+(b?"."+b:"");f.set(d,"_bg_memo_node",b);f.set(c,"_bg_temp_node",b);b={undo:function(){d&&(d.parentNode&&k.place(a,d,"replace"),k.destroy(d),k.destroy(c),m.children.length||(k.destroy(m),m=null),d=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=b}};l.showNodeFromBackground=
function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};l.noTransformPosition=function(a){function d(a){for(var d={x:0,y:0};a.offsetParent;)d.x+=a.offsetLeft,d.y+=a.offsetTop,a=a.offsetParent,d.x+=b.get(a,"borderLeftWidth"),d.y+=b.get(a,"borderTopWidth");return d}function h(a){return b.get(a,"width")+b.get(a,"paddingLeft")+b.get(a,"paddingRight")+b.get(a,"borderLeftWidth")+b.get(a,"borderRightWidth")}function c(a){return b.get(a,"height")+b.get(a,"paddingTop")+
b.get(a,"paddingBottom")+b.get(a,"borderTopWidth")+b.get(a,"borderBottomWidth")}if(a){var l;if(a instanceof SVGElement&&a.getBBox)return l=(l=a.ownerSVGElement&&a.ownerSVGElement.parentNode)&&d(l),a=a.getBBox(),{x:(a.x||0)+l.x,y:(a.y||0)+l.y,w:a.width||0,h:a.height||0};l=d(a);return{x:l.x,y:l.y,w:h(a),h:c(a)}}};l.uniteNodeBoxes=function(a,b){var d=1E6,h=1E6,c=-1E6,n=-1E6;a.forEach(function(a){a=l.noTransformPosition(a);d=Math.min(d,a.x);h=Math.min(h,a.y);c=Math.max(c,a.x+a.w);n=Math.max(n,a.y+a.h)});
a={x:d,y:h,w:c-d,h:n-h};b&&(b=l.noTransformPosition(b),a.x-=b.x,a.y-=b.y);return a};l.getNodesBox=function(a,b){if(!a||!a.length)return null;for(var d=1E6,h=-1E6,n=1E6,m=-1E6,e=0;e<a.length;e++)var f=a[e],f=b&&b.ignoreTranformation?l.noTransformPosition(f):c.position(f),d=Math.min(d,f.x),n=Math.min(n,f.y),h=Math.max(h,f.x+f.w),m=Math.max(m,f.y+f.h);return{x:d,y:n,w:h-d,h:m-n}};l.traverseChildren=function(a,b){function d(a){if(a&&a.children)for(var h=0;h<a.children.length;h++){var c=a.children[h];
if(b(c))break;d(c)}}d(a)};l.scrollToListNode=function(a,b,d){var h=b.offsetTop+b.clientHeight,c=h-(a.scrollTop+a.clientHeight);0<c&&(a.scrollTop+=c);d&&(h-=b.clientHeight-d.offsetTop,c=a.scrollTop-h,0<c&&(a.scrollTop-=c))};var n;l.getScrollbarSize=function(){if(!n){var a=k.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";n={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};k.destroy(a)}return n};
l.hasScrollbars=function(a){var d=b.getComputedStyle(a);return{w:"scroll"===d.overflowX||a.offsetWidth>a.clientWidth&&"auto"===d.overflowX,h:"scroll"===d.overflowY||a.offsetHeight>a.clientHeight&&"auto"===d.overflowY}};l.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:k.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=c.getMarginBox(this.div);delete a.l;delete a.t;return a},
destroy:function(){k.destroy(this.div)}}};l.getTextBox=function(a,b){b=l.getMeasureContext(b);a=b.measureText(a);b.destroy();return a};l.getNodeFontFamily=function(a){return(a=b.get(a,"fontFamily")||b.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};l.getNodeFontSize=function(a){return b.toPixelValue(a,b.get(a,"fontSize"))};l.stealFocus=function(){var a=new d;try{var b=k.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});k.place(b,document.body);
b.select();k.destroy(b)}catch(q){}setTimeout(a.resolve,0);return a.promise};l.getWindowBox=function(){for(var a=[],b=0,d=document.body.children.length;b<d;b++){var h=document.body.children[b];l.isHidden(h)||(l.hide(h),a.push(h))}b={w:document.body.clientWidth,h:document.body.clientHeight};a.forEach(function(a){l.show(a)});return b};l.getBorder=function(a){return{t:b.toPixelValue(a,b.get(a,"borderTopWidth")),r:b.toPixelValue(a,b.get(a,"borderRightWidth")),b:b.toPixelValue(a,b.get(a,"borderBottomWidth")),
l:b.toPixelValue(a,b.get(a,"borderLeftWidth"))}};l.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};l.setAttribute=function(a,b,d){return 2===arguments.length?f.set(a,b):f.set(a,b,d)};l.getAttribute=function(a,b,d){return 2===arguments.length?f.get(a,b):f.get(a,b,d)};l.addClass=function(a,b){return e.add(a,b)};l.removeClass=function(a,b){return e.remove(a,b)};l.toggleClass=function(a,b,d){return e[d?"add":"remove"](a,b)};l.replaceClass=function(a,b,d){return e.replace(a,
b,d)};l.containsClass=function(a,b){return e.contains(a,b)};l.getStyle=function(a,d){return b.get(a,d)};l.setStyle=function(a,d,h){return 2===arguments.length?b.set(a,d):b.set(a,d,h)};l.toPixelValue=function(a,b){return parseFloat(b)||0};l.getComputedStyle=function(a){return a&&1===a.nodeType&&window.getComputedStyle(a)};l.position=function(a,b){return c.position(a,b)};l.getMarginBox=function(a,b){return c.getMarginBox(a,b)};l.setMarginBox=function(a,b){return c.setMarginBox(a,b)};l.getMarginExtents=
function(a,b){return c.getMarginExtents(a,b)};l.getContentBox=function(a,b){return c.getContentBox(a,b)};l.getPadBorderExtents=function(a,b){return c.getPadBorderExtents(a,b)};l.getPadExtents=function(a,b){return c.getPadExtents(a,b)};l.getBorderExtents=function(a,b){return c.getBorderExtents(a,b)};l.create=function(a,b,d,h){return k.create(a,b,d,h)};l.toDom=function(a){return k.toDom(a)};l.place=function(a,b,d){return k.place(a,b,d)};l.empty=function(a){return k.empty(a)};l.destroy=function(a){return k.destroy(a)};
l.query=function(b,d){return a(b,d)};return l})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil dojo/domReady!".split(" "),function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q){function v(){}var r={},u=g(l._MasterTooltip,{_customClasses:null,addCustomClasses:function(a){a&&(e.add(this.domNode,a),
this._customClasses=a)},show:function(a,b,d,h,c,n,e){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof a?this.containerNode.innerHTML=a:(this.containerNode.innerHTML="",k.place(a.domNode||a,this.containerNode));c&&this.set("textDir",c);this.containerNode.align=h?"right":"left";var p=m.around(this.domNode,b,d&&d.length?d:l.defaultPosition,!h,f.hitch(this,"orient")),q=p.aroundNodePos;"M"==p.corner.charAt(0)&&
"M"==p.aroundCorner.charAt(0)?(this.connectorNode.style.top=q.y+(q.h-this.connectorNode.offsetHeight>>1)-p.y+"px",this.connectorNode.style.left=""):"M"==p.corner.charAt(1)&&"M"==p.aroundCorner.charAt(1)?this.connectorNode.style.left=q.x+(q.w-this.connectorNode.offsetWidth>>1)-p.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=n||v;this.onMouseLeave=e||v}},orient:function(a,
b,d,l,n){this.connectorNode.style.top="";var m=l.h;l=l.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+d];this.addCustomClasses(this._customClasses);this.domNode.style.width=
"auto";var e=c.position(this.domNode);if(h("ie")||h("trident"))e.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(l,1),e.w)});"B"==d.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=this.connectorNode.offsetHeight,a.h>m?(this.connectorNode.style.top=m-(n.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(n.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,
e.w-l)}}),y={show:function(a,b,d,h){"string"===typeof d&&(d=[d]);d=d&&d.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var c=new u;c.addCustomClasses(h);c.show(a,b,d);return c}};r.setTooltipToNode=function(b,h,c){function l(){!m&&r.showTooltipForNode(b,h,c)}c=c||{};if(b&&(r.hideTooltipForNode(b),b.__setTooltipToNodeMouseEnterHandle&&b.__setTooltipToNodeMouseEnterHandle.remove(),h)){var m=!1;n.isMobileDevice()?b.__setTooltipToNodeMouseEnterHandle=p.addNoDragClickHandler(b,
l):b.__setTooltipToNodeMouseEnterHandle=a(b,d.enter,l);c.showTooltip&&l();return{remove:function(){h=null;r.hideTooltipForNode(b)},suspend:function(){r.hideTooltipForNode(b);m=!0},resume:function(){m=!1},refresh:function(){b._shownTooltip&&l()}}}};r.showTooltipForNode=function(b,h,c){function l(){r.hideTooltipForNode(b);var a=Array.isArray(c.classes)?c.classes.join(" "):c.classes,a=(a||"")+" esriGETooltip";c.notRestricted&&(a+=" notRestricted");b._shownTooltip=f=y.show(m,b,c.position||["after","before"],
a)}if(b){r.hideTooltipForNode(b);var m="function"==typeof h?h():h;if(m){c.textAlign&&(m="\x3cdiv class\x3d'"+("start"===c.textAlign?"esriGEStart":"end"===c.textAlign?"esriGEEnd":"")+"'\x3e"+m+"\x3c/div\x3e");e.add(b,"esriGESimpleTextTooltip");var f;l();var k=r.hideTooltipForNode.bind(r,b);n.isMobileDevice()?b.__setTooltipToNodeMouseLeaveHandle=a(document.body,"touchstart",function(a){q.isMouseOver(b,{event:a})||k()}):b.__setTooltipToNodeMouseLeaveHandle=a.once(b,d.leave,function(){!c.stayOnHover&&
k()});c.ignoreNodeRemoval||(b.__setTooltipToNodeInLayoutHandle=setInterval(function(){!t.isNodeInLayout(b)&&k()},300));n.isMobileDevice()||(b.__setTooltipToNodeMouseOverHandle=setInterval(function(){c.stayOnHover&&q.isMouseOver(f.domNode)||q.isMouseOver(b)||k()},300),b.__setTooltipToNodeClickHandle=a(b,"click",function(a){c.hideOnClick?k():!b._shownTooltip&&l()}),c.stayOnHover&&(b.__setTooltipToNodeMouseLeaveMasterHandle=a(f.domNode,d.leave,k)));return b._shownTooltip}}};r.hideTooltipForNode=function(a){a&&
(delete a.title,e.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var w,A;r.autoTooltip=function(b){a(b,
".TrimWithEllipses:mouseover",function(){if(this!==w&&this.offsetWidth<this.scrollWidth){var b=function(){w=null;A&&(A.tooltip.destroy(),A.mouseOutH.remove(),A.mouseMoveH.remove(),A=null)};b();w=this;A={tooltip:y.show(w.textContent,w,["above","below"]),mouseOutH:a.once(w,"mouseout, mousedown, touchstart",b),mouseMoveH:a(document.body,"mousemove",function(){q.isMouseOver(w)||b()})}}})};r.showClosableTooltip=function(a){var b=r._createClosableTooltip(a.message,a.tooltipClass,a.position);return r._placeClosableTooltip(b,
a.node,a.timeout,a.position,a.onClosed)};r.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};r._createClosableTooltip=function(a,b,d){function h(){var a=k.create("div",{"class":"esriGEClosableTooltipTip"},l);e.add(a,"right"===d?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function c(){n=k.create("div",{"class":"esriGEClosableTooltipBody"},l);k.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},n);m=k.create("div",{"class":"esriGEClosableTooltipCloseButton"},
n)}var l=k.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),n,m;"right"!==d?(c(),h()):(h(),c());l.style.position="fixed";return{tooltip:l,body:n,closeButton:m}};r._placeClosableTooltip=function(d,h,l,n,m){function e(){var a=c.position(h),l=a.x+";"+a.y+";"+a.w+";"+a.h;l!==k&&(k=l,l=c.getMarginBox(d.tooltip),b.set(d.tooltip,{left:(f?a.x+a.w:a.x-l.w)+"px",top:a.y+a.h/2-l.h/2+"px"}))}var f="rtl"===document.dir&&"right"!==n||"rtl"!==document.dir&&"right"===n,k;
e();var p,q,g,v,r,u=function(){p&&clearTimeout(p);q&&clearInterval(q);g&&clearInterval(g);v&&v.remove();d.tooltip.parentNode&&d.tooltip.parentNode.removeChild(d.tooltip)};q=setInterval(function(){t.isNodeInLayout(h)&&h.parentNode||(r=!1,u());t.isNodeVisible(h)&&t.isNodeOnscreen(h)?(r=!0,t.show(d.tooltip)):(r=!1,t.hide(d.tooltip))},0);g=setInterval(function(){r&&e()},0);l&&(p=setTimeout(u,l));v=a(d.closeButton,"click",function(){u();m&&m()});d.tooltip._removeFunc=u;return d.tooltip};return r})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on",
"dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(g,f,e,k){var c={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(b,a,d){d=d||{};return e.isMobileDevice()?c._addMobile(b,a,d):c._addPC(b,a,d)},_addPC:function(b,a,d){var h=d.tolerance||0,c,m,n=g(b,"mousedown",function(b){m&&m.remove();var d=b.clientX,l=b.clientY,n;c=g(document.body,"mousemove",function(a){if(!a.shiftKey&&!k.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-d)||0<Math.abs(b-l))n=!0}});m=g.once(document.body,
"mouseup",function(b){c.remove();var m=b.clientX,e=b.clientY;!n&&Math.abs(m-d)<=h&&Math.abs(e-l)<=h&&a(b)})});return{remove:function(){c&&c.remove();m&&m.remove();n&&n.remove()}}},_addMobile:function(b,a,d){function h(){n&&n.remove();e&&e.remove();f&&f.remove();clearTimeout(k)}var l=d.tolerance||c.MOBILE_TOLERANCE,m,n,e,f,k;m=g(b,"touchstart",function(m){function p(a){return Math.abs(m.clientX-a.clientX)<l&&Math.abs(m.clientY-a.clientY)<l}h();var q;if(d.detectLongPress){var t;e=g(b,"touchmove",function(a){t=
a});k=setTimeout(function(){p(t||m)&&(d.ignoreReleaseIfLongPressHappened&&(q=!0),d.longPressCallback(m))},d.longPressTimeout||c.LONG_PRESS_TIMEOUT)}n=g.once(b,"touchend",function(b){!q&&p(b)&&a(b);h()});f=g.once(b,"touchcancel",h)});return{remove:function(){m&&m.remove();h()}}},addGlobalDragHanlder:function(b){function a(){d&&d.remove();h&&h.remove();c&&c.remove();m&&m.remove();n&&b.destroyDnDBox&&b.destroyDnDBox(n)}b.tolerance=0<b.tolerance?b.tolerance:5;var d,h,c,m,n;return g(b.node,b.downEventName||
e.press,function(l){a();if(!b.onMouseDown||b.onMouseDown(l)){var p=l.clientX,q=l.clientY,v=p,r=q;d=g(document.body,e.move,function(l){l.shiftKey||k.isCtrl(l)||!(Math.abs(p-l.clientX)>=b.tolerance||Math.abs(q-l.clientY)>=b.tolerance)||(d.remove(),b.dragStarted&&!b.dragStarted(l,l.clientX-v,l.clientY-r))||(v=l.clientX,r=l.clientY,n=b.createDnDBox&&b.createDnDBox(),h=g(document.body,e.move,function(a){b.dragMoved&&b.dragMoved(a,a.clientX-v,a.clientY-r);v=a.clientX;r=a.clientY}),c=g.once(document.body,
f("ie")||f("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){a();b.dragEnded&&b.dragEnded()}),m=g(document.body,"keyup",function(d){27==d.keyCode&&(a(),b.dragCanceled&&b.dragCanceled())}))});g.once(document.body,f("ie")||f("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){d.remove()})}})}};return c})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(g,f,e){var k={listenToKeyboardCombinationOverNode:function(c){return g(document.body,
"keydown",function(b){if(!c.isCtrl||k.isCtrl(b))if(!c.isShift||b.shiftKey)if(!c.isAlt||b.altKey)String.fromCharCode(b.keyCode).toLowerCase()!==c["char"]||c.node&&!e.isNodeInLayout(c.node)||c.callback(b)})},isCtrl:function(c){return f("mac")?c.metaKey:c.ctrlKey}};return k})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(g,f,e,k,c,b){var a={_latestEvent:null,_setLatestEvent:function(b){a._latestEvent=
b}};e("touch")?(f(document.body,k.press,function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))}),f(document.body,k.move,function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))})):f(document.body,"mousemove",function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))});var d;f(document.body,"mousedown",function(){d||(d=!0,f.once(document.body,"mouseup, click",function(){d=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(d,l){var h=l&&l.event||a._latestEvent;if(!(d&&d.parentNode&&
d.getBoundingClientRect&&h))return!1;if(l&&l.checkAllChildren){l=g.mixin({},l);delete l.checkAllChildren;var n=!1;b.traverseChildren(d,function(b){if(a.isMouseOver(b,l))return n=!0});return n}return a.isMouseOverBox(c.position(d),l)};a.isMouseOverBox=function(b,d){if(!b)return!1;var h=d&&d.event||a._latestEvent;d&&d.ignoreBorderTolerance&&(d=d.ignoreBorderTolerance,b=g.mixin({},b),b.x+=d,b.y+=d,b.w-=2*d,b.h-=2*d);return b.x<=h.clientX&&b.x+b.w>=h.clientX&&b.y<=h.clientY&&b.y+b.h>=h.clientY};a.fixTouchEvent=
function(a,b){a=b?g.mixin({},a):a;a.touches&&1===a.touches.length?(b=a.touches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY):a.changedTouches&&1===a.changedTouches.length&&(b=a.changedTouches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY);return a};a.isBeingDragged=function(){return d};a.addOverOutHandler=function(b){function d(){clearTimeout(c);h&&h.remove()}var h,c,e=f(b.node,"mouseover",function(l){function n(){a.isMouseOver(b.node)&&(b.onMouseOver(l),
h=f(document.body,"mousemove",function(h){a.isMouseOver(b.node)||(d(),b.onMouseOut(h))}))}d();b.delayTimeout?c=setTimeout(n,b.delayTimeout):n()});return{remove:function(){e.remove();d()}}};a.addOutHandler=function(b,d){return f(document.body,"mousemove",function(h){a.isMouseOver(b,{checkAllChildren:!0})||d(h)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PrintSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when",
"../ReportPlayerState"],function(g,f,e,k,c){function b(){var a=new e;g(["../printing/PrintableContainer"],function(b){a.resolve(b)});return a.promise}return f(null,{_getPrintableContainer:function(a){var d=this;c.isAnimationSuspended=!0;return d._showWaiting(b(),"loadPrintModules").then(function(b){var h=new b(d,d._viewModel);a.onShowWaiting=function(a){d._showWaiting(a,"initPrintContainer")};return k(h.initialize(a),function(a){c.isAnimationSuspended=!1;return a?a:k(h.stop(),function(){return null})})})},
_getPrintDialogSettings:function(){var a=this;return b().then(function(b){return(new b(a,a._viewModel)).getPrintDialogSettings()})}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState":function(){define([],function(){return{isImageViewerShown:!1,isViewingDataDrillingZoom:!1,isViewingDynamicSettings:!1,isAnimationSuspended:!1}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ReportContainersSwitcher":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(g,f,e,k,c,b,a){var d={createContainer:function(a,d){var h=a.getCurrentAnalysisAreaIndex();a.viewMode===b.PANELS_IN_STACK_ALL&&(h=0);var c=d.getContainer(h);if(!c){switch(a.viewMode){case b.PANELS_IN_SLIDES:c=this._createPaginationReportContainer(a);break;case b.PANELS_IN_STACK:case b.PANELS_IN_ROW:c=this._createStackReportContainer(a);break;case b.PANELS_IN_STACK_ALL:c=this._createStackReportContainerAll(a);break;default:c=this._createFullPageReportContainer(a)}c.isCurrentContainer=function(){return a.getCurrentReportContainer()===
c};a.own(c)}d.setContainer(c,h);return c},_createPaginationReportContainer:function(a){var b=a._viewModel;return b.layoutBuilder.createElement("reportContainerPagination",{viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),scaleSectionsToFit:a.scaleSlidesToFitWindow,onResized:function(b){a.playerToolbar.update();a._emitResizedEvent(b)},onPendingDataApplied:function(){a._emitResizedEvent()}},a.reportContainerDiv)},_createStackReportContainer:function(a){var d=a._viewModel,
h=a.viewMode===b.PANELS_IN_ROW,l;l=a.resizeMode!==c.AUTO?{center:!0,minLeft:h?10:0}:{center:!0,minRight:10,minBottom:10,minLeft:10};l.minTop=a.showToolbarInPopup?h?50:43:10;return d.layoutBuilder.createElement("reportContainerStack",{viewModel:d,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),isVertical:!h,renderOptions:l,onPendingDataApplied:function(){a._emitResizedEvent()}},a.reportContainerDiv)},_createStackReportContainerAll:function(a){var b=a._viewModel,d;d=a.resizeMode!==
c.AUTO?{minLeft:0}:{minRight:10,minBottom:10,minLeft:10};d.minTop=a.showToolbarInPopup?43:0;return b.layoutBuilder.createElement("reportContainerStackAll",{viewModel:b,parentWidget:a,isVertical:!0,renderOptions:d,onPendingDataApplied:function(){a._emitResizedEvent()},onSwitchToSingleAreaView:function(){a.showAnalysisAreaAt(0)}},a.reportContainerDiv)},_createFullPageReportContainer:function(a){var b=a._viewModel,d={viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),onPendingDataApplied:function(){a._emitResizedEvent()}};
d.renderOptions=a.resizeMode!==c.AUTO?{center:!0,minTop:10}:{center:!0,minTop:10,minRight:10,minBottom:10,minLeft:10};return b.layoutBuilder.createElement(a.getReportData().isClassic?"reportContainer":"reportContainerGrid",d,a.reportContainerDiv)}},h=g(null,{_containerInfos:null,constructor:function(){this._containerInfos=[]},getContainer:function(a){return this._getInfo(a,"container")},getContainers:function(){return this._containerInfos.map(function(a){return a.container})},getContainerIndex:function(a){return this.getContainers().indexOf(a)},
setContainer:function(a,b){f.set(a.domNode,"area-index",b);this._getInfo(b,null,a)},isLoaded:function(a){return this._getInfo(a,"loaded")},setLoaded:function(a){if(a=this._getInfo(a))a.loaded=!0},resetAllLoaded:function(){this._containerInfos.forEach(function(a){a.loaded=!1})},destroyAllContainers:function(){this._containerInfos.forEach(function(a){a.container.destroy()});this._containerInfos.length=0},_getInfo:function(a,b,d){var h=this._containerInfos[a];!h&&d&&(h=this._containerInfos[a]={container:d,
loaded:!1});return b?h&&h[b]:h}}),l=g(null,{_lastVisuals:null,reset:function(){this._lastVisuals=null},rememberCurrentContainerVisuals:function(a){this._lastVisuals=a?{scrollTop:a.getScrollableContainer&&a.getScrollableContainer().scrollTop||0,pageIndex:a.getCurrentPageIndex&&a.getCurrentPageIndex()||0,slideIndex:a.getCurrentSlideIndex&&a.getCurrentSlideIndex()||0,zoomInfo:a.getZoomInfo&&a.getZoomInfo()}:null},applyCurrentContainerVisuals:function(a){this._lastVisuals&&(a.getScrollableContainer&&
(a.getScrollableContainer().scrollTop=this._lastVisuals.scrollTop||0),a.showSlideAt&&a.showSlideAt(this._lastVisuals.slideIndex||0),a.showPageAt?a.showPageAt(this._lastVisuals.pageIndex||0):a.notifyShown(),a.setZoomInfo&&a.setZoomInfo(this._lastVisuals.zoomInfo))}});return g(null,{_containerDict:null,_visualsHelper:null,_initContainerSwither:function(){this._containerDict=new h;this._visualsHelper=new l},getCurrentReportContainer:function(){return this._currentReportContainer},getAllReportContainers:function(){return this._containerDict.getContainers()},
_destroyAllContainers:function(){this._containerDict.destroyAllContainers();this._currentReportContainer=null},_setReportContainer:function(a){a?this._resetLoadedFlags():this._visualsHelper.rememberCurrentContainerVisuals(this._currentReportContainer);this._switchToCurrentReportContainer();return!a&&this._containerDict.isLoaded(this.getCurrentAnalysisAreaIndex())?(this._resize({isPaginating:!0}),this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer),!1):!0},_switchToCurrentReportContainer:function(){this._currentReportContainer&&
this._hideContainer(this._currentReportContainer);this._currentReportContainer=d.createContainer(this,this._containerDict);e.remove(this.domNode,"esriGEReportPlayerFullView esriGEReportPlayerPaginationView esriGEReportPlayerStackView esriGEReportPlayerRowView");switch(this.viewMode){case b.PANELS_IN_SLIDES:e.add(this.domNode,"esriGEReportPlayerPaginationView");break;case b.PANELS_IN_STACK:e.add(this.domNode,"esriGEReportPlayerStackView");break;case b.PANELS_IN_STACK_ALL:e.add(this.domNode,"esriGEReportPlayerStackAllView");
break;case b.PANELS_IN_ROW:e.add(this.domNode,"esriGEReportPlayerRowView");break;default:e.add(this.domNode,"esriGEReportPlayerFullView")}this._showContainer(this._currentReportContainer);this._connectZoomToCurrentContainer();this.notifyShown()},_hideContainer:function(b){b.__undoHideContainerHandle=a.hideNodeInBackground(b.domNode,"reportContainer_"+this._containerDict.getContainerIndex(b));b.own(b.__undoHideContainerHandle)},_showContainer:function(a){a.__undoHideContainerHandle&&(a.__undoHideContainerHandle.undo(),
delete a.__undoHideContainerHandle)},_showAllContainers:function(){var a=this;this.getAllReportContainers().forEach(function(b){a._showContainer(b);a.reportContainerDiv.removeChild(b.domNode);k.place(b.domNode,a.reportContainerDiv)});return{undo:function(){a.getAllReportContainers().forEach(function(b){a._hideContainer(b)});a._switchToCurrentReportContainer()}}},_resetLoadedFlags:function(){this._visualsHelper.reset();this._containerDict.resetAllLoaded()},_setCurrentContainerLoaded:function(){this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer);
this._containerDict.setLoaded(this.getCurrentAnalysisAreaIndex())}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_SmartLayoutSupport":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/on","esri/dijit/geoenrichment/utils/DomUtil","../PlayerResizeModes"],function(g,f,e,k,c){return g(null,{_width:0,_height:0,_measuredWinBox:null,_initSmartLayout:function(){var b=this;this.resizeMode===c.FIT_WINDOW&&this.own(e(window,"resize, orientationchange",function(){setTimeout(function(){b._measuredWinBox=
null;b.resize()})}));this._resize()},_resize:function(b){b=b||{};f.remove(this.domNode,"esriGEReportPlayerFullScreen esriGEReportPlayerAutoResize esriGEReportPlayerManualResize");switch(this.resizeMode){case c.FIT_WINDOW:return this._resize_fitWindow(b);case c.AUTO:return this._resize_auto(b);case c.MANUAL:return this._resize_manual(b)}},_resize_fitWindow:function(b){this._measuredWinBox=this._measuredWinBox||k.getWindowBox();this._width=this._maxWidth=this._measuredWinBox.w;this._height=this._maxHeight=
this._measuredWinBox.h;f.add(this.domNode,"esriGEReportPlayerFullScreen");this.domNode.style.width=this._width+"px";this.domNode.style.height=this._height+"px";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),
this._emitResizedEvent(b.isPaginating))},_resize_auto:function(b){this._height=this._width=0;f.add(this.domNode,"esriGEReportPlayerAutoResize");this.domNode.style.width="auto";this.domNode.style.height="auto";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),this._currentReportContainer.resize(0,
0),this._emitResizedEvent(b.isPaginating))},_resize_manual:function(b){this._width=void 0!==b.width?b.width:this._width;this._height=void 0!==b.height?b.height:this._height;this._width&&this._height&&(this._maxWidth&&(this._width=Math.min(this._maxWidth,this._width)),this._maxHeight&&(this._height=Math.min(this._maxHeight,this._height)),f.add(this.domNode,"esriGEReportPlayerManualResize"),this.domNode.style.width=this._width+"px",this.domNode.style.height=this._height+"px",this._currentReportContainer&&
(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth||this._width),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight((this._maxHeight||this._height)-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating)))},_getToolbarHeight:function(){return this.showToolbarInPopup?0:50},_maxWidth:0,_maxHeight:0,setMaxWidth:function(b){this._maxWidth=
b},setMaxHeight:function(b){this._maxHeight=b}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport":function(){define(["dojo/_base/declare","dojo/aspect","../PlayerResizeModes","../PlayerViewModes","../PlayerZoomBehaviors"],function(g,f,e,k,c){return g(null,{_initZoomControls:function(){var b=this;this.playerToolbar.onZoomToFitPage=function(){b.getCurrentReportContainer().zoomToFitPage({showAnimation:!0})};this.playerToolbar.onZoomToFitPageWidth=function(){b.getCurrentReportContainer().zoomToFitPageWidth({showAnimation:!0})};
this.playerToolbar.onZoomToFitPageHeight=function(){b.getCurrentReportContainer().zoomToFitPageHeight({showAnimation:!0})};this.playerToolbar.onSetZoomPercent=function(a){b.getCurrentReportContainer().setZoomPercent(a,{showAnimation:!0})};this._refreshZoomControls()},_refreshZoomControls:function(){this.playerToolbar.setZoomSupportsInfo(this._getZoomSupportsInfo())},setBestZoom:function(){this._callZoomMethod("setBestZoom")},zoomToFitPage:function(){this._callZoomMethod("zoomToFitPage")},zoomToFitPageWidth:function(){this._callZoomMethod("zoomToFitPageWidth")},
zoomToFitPageHeight:function(){this._callZoomMethod("zoomToFitPageHeight")},resetZoom:function(){this._callZoomMethod("resetZoom")},_callZoomMethod:function(b){if(this._getZoomSupportsInfo().supported){var a=this.getCurrentReportContainer();a&&a[b]&&a[b]()}},_getZoomSupportsInfo:function(){var b={supported:!1,canFitPage:!1,canFitPageWidth:!1,canFitPageHeight:!1};this.viewMode!==k.PANELS_IN_SLIDES&&(b.supported=!0,this.resizeMode!==e.AUTO&&(b.canFitPage=!k.isStackLike(this.viewMode),b.canFitPageWidth=
this.viewMode!==k.PANELS_IN_ROW,b.canFitPageHeight=this.viewMode===k.PANELS_IN_ROW));return b},_updateZoomControls:function(){this._connectZoomToCurrentContainer();this._applyDefaultZoomBehavior()},_reportContainerZoomChangedHandle:null,_connectZoomToCurrentContainer:function(){var b=this.getCurrentReportContainer();this._reportContainerZoomChangedHandle&&this._reportContainerZoomChangedHandle.remove();this._reportContainerZoomChangedHandle=b&&f.after(b,"onZoomChanged",function(){var a=this.getCurrentReportContainer();
a&&a.getZoomInfo&&this.playerToolbar.setZoomInfo(this.getCurrentReportContainer().getZoomInfo());this._updatePageNavigator();this.playerToolbar.update()}.bind(this));b&&b.own(this._reportContainerZoomChangedHandle)},_applyDefaultZoomBehavior:function(){var b=this._getZoomSupportsInfo();b.supported&&b.canFitPage&&this.defaultZoomBehavior===c.FIT_PAGE?this.zoomToFitPage():b.supported&&b.canFitPageWidth&&this.defaultZoomBehavior===c.FIT_PAGE_WIDTH?this.zoomToFitPageWidth():b.supported&&b.canFitPageHeight&&
this.defaultZoomBehavior===c.FIT_PAGE_HEIGHT?this.zoomToFitPageHeight():this.resetZoom()}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerZoomBehaviors":function(){define([],function(){var g={RESET:"reset",FIT_PAGE:"fitPage",FIT_PAGE_WIDTH:"fitPageWidth",FIT_PAGE_HEIGHT:"fitPageHeight",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.RESET}};return g})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_WaitingSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct ../PlayerResizeModes esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/progress/SmoothProgress".split(" "),
function(g,f,e,k,c,b,a,d,h,l){var m=g(null,{_dataProgress:0,_areaProgresses:null,_numAreas:0,constructor:function(a){f.mixin(this,a);this.reset()},reset:function(){this._dataProgress=0;this._areaProgresses={};this._fireProgress()},setLoadDataProgress:function(a){this._dataProgress=a;this._fireProgress()},setNumAreas:function(a){this._numAreas=a},setProgressForAreaAt:function(a,b){this._areaProgresses[b]=a;this._fireProgress()},finalize:function(){this.onChange(1);return a.delay(300)},_fireProgress:function(){var a=
.25*this._dataProgress,b=.75/this._numAreas,d;for(d in this._areaProgresses)a+=b*(this._areaProgresses[d]||0);a=Math.min(.999999,Math.max(0,a));this.onChange(a);this._printProgress()},_printProgress:function(){},onChange:function(a){}});return g(null,{_progressController:null,_initProgressController:function(){var a=this;this.showProgressBar&&(this._progressController=new m,(new l(this._progressController)).onChange=function(b){h.showProgressBar({value:b,node:a.domNode,position:"top"})})},_waitingCount:0,
_hideUndoHandle:null,_waitNode:null,getWaitingPromise:function(){return h.getProgressPromiseForNode(this._waitNode||this.domNode)},_showWaiting:function(a,l){var n=this;this.onWaitingShown(a);return this.resizeMode!==b.FIT_WINDOW?(0===this._waitingCount++&&(this._waitNode=c.create("div",{"class":"esriGEReportPlayerWaitingNode"},this.domNode.parentNode),this._waitNode.style.width=this.domNode.clientWidth?this.domNode.clientWidth+"px":"",this._waitNode.style.height=this.domNode.clientHeight?this.domNode.clientHeight+
"px":"",this._waitNode.style.position="relative",this._hideUndoHandle=d.hideNodeInBackground(this.domNode)),e(a)["finally"](function(){0===--n._waitingCount&&(n._hideUndoHandle.undo(),n._hideUndoHandle=null,c.destroy(n._waitNode))}),h.showProgressPromise(this._waitNode,a,{progressClass:"esriGEReportPlayerProgress"})):this._showWaitingFullScreen(a,l)},_showWaitingFullScreen:function(a,b){return h.showProgressPromise(this.domNode,a,{progressClass:"esriGEReportPlayerProgress",onShowProgress:this._onShowWaiting.bind(this),
onRemoveProgress:this._onRemoveWaiting.bind(this)})},_onShowWaiting:function(){this.normalViewDiv.style.opacity="0.001";this.sidePageNavigator.style.opacity="0.001"},_onRemoveWaiting:function(){if(this.domNode){this.normalViewDiv.style.opacity="";this.sidePageNavigator.style.opacity="";var b=this.getCurrentReportContainer();b&&!b.__isBeingAnimated&&(b.__isBeingAnimated=!0,b.domNode&&k.add(b.domNode,"esriGEReportPlayer_fadeIn1000"),b.notifyShown(),a.delay(1500).then(function(){b.__isBeingAnimated=
!1;b.domNode&&k.remove(b.domNode,"esriGEReportPlayer_fadeIn1000")}))}},onWaitingShown:function(a){}})})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred"],function(g){return{delay:function(f,e){var k=new g,c="function"===typeof f?f:null;setTimeout(k.resolve,("number"===typeof f?f:e)||0);return k.promise.then(function(){return c&&c()})}}})},"esri/dijit/geoenrichment/utils/WaitingUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when",
"dojo/dom-construct","dojo/dom-geometry","dojo/dom-style"],function(g,f,e,k,c){var b={showProgress:function(a,b){a&&!a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]=e.create("div",{"class":"esriGEProgress esriGEProgressAbsolute "+(b||"")},a))},removeProgress:function(a){a&&a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(e.destroy(a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]),delete a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"])},
showProgressBar:function(a){var b=a.node;if(b){b._progressBar&&e.destroy(b._progressBar);delete b._progressBar;var h=Number(a.value);0>=h||isNaN(h)||(h=Math.min(h,1),b._progressBar=e.create("div",{"class":"esriGEWaitingMessageProgressBar esriGEWaitingMessageProgressBar_"+(a.position||"bottom")},b),c.set(b._progressBar,"width",k.position(b).w*h+"px"))}},showProgressPromise:function(a,d,h){if(!a)return d;h=h||{};void 0===a.__progressIndex&&(a.__progressIndex=0);0===a.__progressIndex&&(a.__progressDfd=
new g,b.showProgress(a,h.progressClass),h.onShowProgress&&h.onShowProgress());a.__progressIndex++;f(d)["finally"](function(){a.__progressIndex=Math.max(0,--a.__progressIndex);0===a.__progressIndex&&(a.__progressDfd&&a.__progressDfd.resolve(),delete a.__progressDfd,b.removeProgress(a),h.onRemoveProgress&&h.onRemoveProgress())});return d},getProgressPromiseForNode:function(a){return a&&a.__progressDfd&&a.__progressDfd.promise}};return b})},"esri/dijit/geoenrichment/utils/progress/SmoothProgress":function(){define(["dojo/_base/declare",
"dojo/aspect"],function(g,f){return g(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(e){0<e.fireInterval&&(this.fireInterval=e.fireInterval);0<e.elasticTime&&(this.elasticTime=e.elasticTime);0<e.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/e.timeEstimate,.5));var k=this;this._progressHandle=f.after(e,"onChange",function(c){1<=c?k._finalize():k._updateProgress(c)},
!0)},start:function(){this._updateProgress(0,!0)},_updateProgress:function(e,f){this._realProgress=Math.max(e,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!f))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(e){e!==!!this._intervalHandle&&(e?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),
this.fireInterval):(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=this._realProgress=1;this.onChange(1)},onChange:function(e){},destroy:function(){this._progressHandle.remove();
this._setIntervalHandle(!1)}})})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerConfigurator":function(){define("../PlayerResizeModes ../PlayerZoomBehaviors ../PlayerThemes ../PlayerViewModes ../config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(g,f,e,k,c,b){var a={configurePlayer:function(d){d.theme=d.theme&&e.toSupportedValue(d.theme);d.viewMode=d.viewMode&&k.toSupportedValue(d.viewMode);d.resizeMode=d.resizeMode&&g.toSupportedValue(d.resizeMode);d.defaultZoomBehavior=
d.defaultZoomBehavior&&f.toSupportedValue(d.defaultZoomBehavior);b.isMobileDevice()?a._configureMobile(d):a._configurePC(d);d._viewModel.setAnimationSuspended(d.viewMode===k.PANELS_IN_STACK_ALL)},getDefaultViewMode:function(a){return b.isMobileDevice()?a.allowAutoOrientation?b.isLandscape()?a.mobileLandscapeViewMode||k.PANELS_IN_SLIDES:k.PANELS_IN_STACK:k.PANELS_IN_STACK:k.FULL_PAGES},_configureMobile:function(b){b.allowAutoOrientation&&(b.viewMode=a.getDefaultViewMode(b));b.theme=b.theme||e.DARK;
b.viewMode=k.isMobileSupported(b.viewMode)?b.viewMode:k.PANELS_IN_STACK;b.resizeMode=b.resizeMode||g.FIT_WINDOW;b.enableDataDrilling=!1!==b.enableDataDrilling;b.showAreaTitle=!1;b.showToolbarInPopup=!0;b.defaultZoomBehavior=k.isStack(b.viewMode)?f.FIT_PAGE_WIDTH:b.viewMode===k.PANELS_IN_ROW?f.FIT_PAGE_HEIGHT:void 0;b.showDataDrillingInsidePanel=!1;b.scaleSlidesToFitWindow=b.viewMode===k.PANELS_IN_SLIDES;c.modules.exportCommands=!1;c.modules.complexCellTooltips=!1},_configurePC:function(b){b.theme=
b.theme||e.DARK;b.viewMode=b.viewMode||a.getDefaultViewMode(b);b.resizeMode=b.resizeMode||g.FIT_WINDOW;b.showToolbarInPopup=!!b.showToolbarInPopup;b.enableDataDrilling=!1!==b.enableDataDrilling;b.showDataDrillingInsidePanel=!!b.showDataDrillingInsidePanel;c.modules.complexCellTooltips=b.viewMode===k.FULL_PAGES;switch(b.viewMode){case k.FULL_PAGES:a._configurePC_fullPages(b);break;case k.PANELS_IN_SLIDES:a._configurePC_panelsInSlides(b);break;case k.PANELS_IN_STACK:a._configurePC_panelsInStack(b);
break;case k.PANELS_IN_STACK_ALL:a._configurePC_panelsInStackAll(b);break;case k.PANELS_IN_ROW:a._configurePC_panelsInRow(b)}},_configurePC_fullPages:function(a){a.showAreaTitle=!1!==a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case g.FIT_WINDOW:a.defaultZoomBehavior=a.defaultZoomBehavior||f.FIT_PAGE;break;case g.AUTO:a.defaultZoomBehavior=f.RESET;break;case g.MANUAL:a.defaultZoomBehavior=a.defaultZoomBehavior||f.FIT_PAGE}},_configurePC_panelsInSlides:function(a){a.showAreaTitle=
!!a.showAreaTitle;a.defaultZoomBehavior=null;switch(a.resizeMode){case g.FIT_WINDOW:a.scaleSlidesToFitWindow=!1!==a.scaleSlidesToFitWindow;break;case g.AUTO:a.scaleSlidesToFitWindow=!1;break;case g.MANUAL:a.scaleSlidesToFitWindow=!1!==a.scaleSlidesToFitWindow}},_configurePC_panelsInStack:function(a){a.showAreaTitle=!!a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case g.FIT_WINDOW:a.defaultZoomBehavior=f.FIT_PAGE_WIDTH;break;case g.AUTO:a.defaultZoomBehavior=f.RESET;break;case g.MANUAL:a.defaultZoomBehavior=
f.FIT_PAGE_WIDTH}},_configurePC_panelsInStackAll:function(a){a.showAreaTitle=!1!==a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case g.FIT_WINDOW:a.defaultZoomBehavior=f.FIT_PAGE_WIDTH;break;case g.AUTO:a.defaultZoomBehavior=f.RESET;break;case g.MANUAL:a.defaultZoomBehavior=f.FIT_PAGE_WIDTH}},_configurePC_panelsInRow:function(a){a.showAreaTitle=!!a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case g.FIT_WINDOW:a.defaultZoomBehavior=f.FIT_PAGE_HEIGHT;break;case g.AUTO:a.defaultZoomBehavior=
f.RESET;break;case g.MANUAL:a.defaultZoomBehavior=f.FIT_PAGE_HEIGHT}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/PlayerThemes":function(){define([],function(){var g={LIGHT:"light",DARK:"dark",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.DARK}};return g})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerToFullScreenAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/AnimationUtil",
"esri/dijit/geoenrichment/utils/DelayUtil"],function(g,f){return{animateTo:function(e){if(!e._isAnimatedTo){e._isAnimatedTo=!0;var k=g.animateResize({duration:300,domNode:e.domNode,startScaleX:.3,startScaleY:.3,fromOffset:{x:"c",y:"c"},toBox:{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}});g.animateFadeIn({domNode:e.domNode,duration:300});return k.then(function(){return f.delay(100)})}},animateFrom:function(e){if(e._isAnimatedTo){e._isAnimatedTo=!1;var k=g.animateResize({duration:300,
domNode:e.domNode,endScaleX:.3,endScaleY:.3,toOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-300)/2,y:(document.body.clientHeight-200)/2,w:300,h:200}});g.animateFadeOut({domNode:e.domNode,duration:300});return k.then(function(){return f.delay(100)})}}}})},"esri/dijit/geoenrichment/utils/animation/AnimationUtil":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/sniff","./Animator","esri/dijit/geoenrichment/utils/DomUtil"],function(g,f,e,k,c){var b={animateResize:function(a){function b(b){a.domNode=
g.create("div",{"class":a.ghostClass},document.body);f.set(a.domNode,{width:b.w+"px",height:b.h+"px"})}function h(b,d,h){var c,l=a.fromOffset.x,e=a.fromOffset.y;if("number"!==typeof l)switch(c=d.w*h.x,l){case "l":l=0;break;case "r":l=(b.w||0)-c;break;default:l=((b.w||0)-c)/2}if("number"!==typeof e)switch(c=d.h*h.y,e){case "t":e=0;break;case "b":e=(b.h||0)-c;break;default:e=((b.h||0)-c)/2}return{x:b.x+l,y:b.y+e}}function l(b,d,h){var c,l=a.toOffset.x,e=a.toOffset.y;if("number"!==typeof l)switch(c=
b.w*h.x,l){case "l":l=0;break;case "r":l=(d.w||0)-c;break;default:l=((d.w||0)-c)/2}if("number"!==typeof e)switch(c=b.h*h.y,e){case "t":e=0;break;case "b":e=(d.h||0)-c;break;default:e=((d.h||0)-c)/2}return{x:d.x+l,y:d.y+e}}var m=a.fromBox||(a.domFrom||a.domNode)&&c.noTransformPosition(a.domFrom||a.domNode);a.animateGhost&&b(m);var n=a.toBox||c.noTransformPosition(a.domTo);if(m&&n){var p=function(b,d){var h={x:a.startScaleX,y:a.startScaleY},c=0;"fit"===h.x&&(b.w?c=h.x=b.w/d.w:h.x=0);"fit"===h.y&&(b.h?
c=Math.max(h.y=b.h/d.h,c):h.y=0);h.x=h.x||c||1;h.y=h.y||c||1;return h}(m,n),t=function(b,d){var h={x:a.endScaleX,y:a.endScaleY},c=0;"fit"===h.x&&(d.w?c=h.x=d.w/b.w:h.x=0);"fit"===h.y&&(d.h?c=Math.max(h.y=d.h/b.h,c):h.y=0);h.x=h.x||c||1;h.y=h.y||c||1;return h}(m,n);a.fromOffset&&(m=h(m,n,p));a.toOffset&&(n=l(m,n,t));var q=e("webkit")?"webkitTransformOrigin":"transformOrigin";a.domNode.style[q]="0% 0%";return k.animateProperty({obj:a.domNode,duration:a.duration||250,properties:{__x:{start:m.x,end:n.x},
__y:{start:m.y,end:n.y},__scaleX:{start:p.x||1,end:t.x},__scaleY:{start:p.y||1,end:t.y}},endFunction:function(){a.animateGhost&&g.destroy(a.domNode);a.onEnd&&a.onEnd()},progressFunction:function(b,d){var h=e("webkit")?"webkitTransform":"transform";"__x"==b?a.domNode.style.left=d+"px":"__y"==b?a.domNode.style.top=d+"px":"__scaleX"==b?a.domNode.style[h]="scaleX("+d+") scaleY("+(a.domNode.__scaleY||1)+")":"__scaleY"==b&&(a.domNode.style[h]="scaleX("+(a.domNode.__scaleX||1)+") scaleY("+d+")")}}).promise}a.onEnd&&
a.onEnd()},animateShrinkResize:function(a){a.endScaleX=a.endScaleX||.1;a.endScaleY=a.endScaleY||.05;return b.animateResize(a)},animateFadeIn:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:0,end:1}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateFadeOut:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:1,end:0}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},
animateSlide:function(a,b,h){var d=h.width;k.animateProperty({obj:a.style,duration:h.duration||250,properties:{left:{start:h.leftToRight?0:-d,end:h.leftToRight?-d:0,units:"px"},right:{start:h.leftToRight?0:d,end:h.leftToRight?d:0,units:"px"}},endFunction:function(){h.onEnd&&h.onEnd()}});return k.animateProperty({obj:b.style,duration:h.duration||250,properties:{left:{start:h.leftToRight?d:0,end:h.leftToRight?0:d,units:"px"},right:{start:h.leftToRight?-d:0,end:h.leftToRight?0:-d,units:"px"}}}).promise},
animateExpand:function(a,b,h){h=h||{};a.style.overflow="hidden";b&&c.show(a);var d=f.get(a,"height");return k.animateProperty({obj:a.style,duration:h.duration,properties:{height:{start:b?0:d,end:b?d:0,units:"px"}},progressFunction:h.progressFunction,endFunction:function(){!b&&c.hide(a);f.set(a,"height","");f.set(a,"overflow","")}}).promise}};return b})},"esri/dijit/geoenrichment/utils/animation/Animator":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/fx/easing","dojox/gfx/matrix"],function(g,
f,e){function k(b){1>b.progress&&!b.isStopped?a.setTimeout(function(){if(b.isStopped)b.endFunction();else{var a=(new Date).getTime();b.progress=1-(b.endTime-a)/b.duration;b.progress=Math.min(1,b.progress);c(b);k(b)}}):b.endFunction()}function c(a){for(var b in a.params.properties){var d=a.params.properties[b],c=d.easing?"function"===typeof d.easing?d.easing:f[d.easing]:null,c=c?c(a.progress):a.progress,e=d.start+c*(d.end-d.start);a.obj[b]=d.units?e+d.units:e;a.progressFunction&&a.progressFunction(b,
e,c)}}var b={},a={_funcs:null,setTimeout:function(a){var b=this;this._funcs?this._funcs.push(a):(this._funcs=[a],setTimeout(function(){var a=b._funcs;b._funcs=null;a.forEach(function(a){a()})},33))}};b.animateProperty=function(a){var b={},d=new g;b.promise=d.promise;b.params=a;b.obj=a.obj||a.node||{};b.duration=void 0!==a.duration?a.duration:1E3;b.startTime=(new Date).getTime();b.endTime=b.startTime+b.duration;b.progress=0;b.endFunction=function(){a.endFunction&&a.endFunction();d.resolve()};b.progressFunction=
a.progressFunction;b.stop=function(){b.isStopped=!0};c(b);k(b);return b};b.animateTransform=function(a){var d=a.shape;d.setTransform(null);return b.animateProperty({duration:a.duration,properties:{p:{start:0,end:1,easing:a.easing}},progressFunction:function(b,h,c){var l,n,f,m;a.transform.forEach(function(a){var b=a.start[0]+(a.end[0]-a.start[0])*c,d=a.start[1]+(a.end[1]-a.start[1])*c;"translate"===a.name?(l=b,n=d):"scale"===a.name&&(f=b,m=d)});d.setTransform(new e.Matrix2D({dx:l,dy:n,xx:f,yy:m}))},
endFunction:function(){d.setTransform(null);a.onEnd&&a.onEnd()}}).promise};return b})},"dojo/fx/easing":function(){define(["../_base/lang"],function(g){var f={linear:function(e){return e},quadIn:function(e){return Math.pow(e,2)},quadOut:function(e){return e*(e-2)*-1},quadInOut:function(e){e*=2;return 1>e?Math.pow(e,2)/2:-1*(--e*(e-2)-1)/2},cubicIn:function(e){return Math.pow(e,3)},cubicOut:function(e){return Math.pow(e-1,3)+1},cubicInOut:function(e){e*=2;return 1>e?Math.pow(e,3)/2:(Math.pow(e-2,3)+
2)/2},quartIn:function(e){return Math.pow(e,4)},quartOut:function(e){return-1*(Math.pow(e-1,4)-1)},quartInOut:function(e){e*=2;return 1>e?Math.pow(e,4)/2:-.5*(Math.pow(e-2,4)-2)},quintIn:function(e){return Math.pow(e,5)},quintOut:function(e){return Math.pow(e-1,5)+1},quintInOut:function(e){e*=2;return 1>e?Math.pow(e,5)/2:(Math.pow(e-2,5)+2)/2},sineIn:function(e){return-1*Math.cos(Math.PI/2*e)+1},sineOut:function(e){return Math.sin(Math.PI/2*e)},sineInOut:function(e){return-1*(Math.cos(Math.PI*e)-
1)/2},expoIn:function(e){return 0==e?0:Math.pow(2,10*(e-1))},expoOut:function(e){return 1==e?1:-1*Math.pow(2,-10*e)+1},expoInOut:function(e){if(0==e)return 0;if(1==e)return 1;e*=2;if(1>e)return Math.pow(2,10*(e-1))/2;--e;return(-1*Math.pow(2,-10*e)+2)/2},circIn:function(e){return-1*(Math.sqrt(1-Math.pow(e,2))-1)},circOut:function(e){return Math.sqrt(1-Math.pow(e-1,2))},circInOut:function(e){e*=2;return 1>e?-.5*(Math.sqrt(1-Math.pow(e,2))-1):.5*(Math.sqrt(1-Math.pow(e-2,2))+1)},backIn:function(e){return Math.pow(e,
2)*(2.70158*e-1.70158)},backOut:function(e){--e;return Math.pow(e,2)*(2.70158*e+1.70158)+1},backInOut:function(e){e*=2;if(1>e)return Math.pow(e,2)*(3.5949095*e-2.5949095)/2;e-=2;return(Math.pow(e,2)*(3.5949095*e+2.5949095)+2)/2},elasticIn:function(e){if(0==e||1==e)return e;--e;return-1*Math.pow(2,10*e)*Math.sin(2*(e-.075)*Math.PI/.3)},elasticOut:function(e){return 0==e||1==e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},elasticInOut:function(e){if(0==e)return 0;e*=2;if(2==e)return 1;var f=
.3*1.5,c=f/4;if(1>e)return--e,-.5*Math.pow(2,10*e)*Math.sin(2*(e-c)*Math.PI/f);--e;return.5*Math.pow(2,-10*e)*Math.sin(2*(e-c)*Math.PI/f)+1},bounceIn:function(e){return 1-f.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*Math.pow(e,2):e<2/2.75?7.5625*Math.pow(e-1.5/2.75,2)+.75:e<2.5/2.75?7.5625*Math.pow(e-2.25/2.75,2)+.9375:7.5625*Math.pow(e-2.625/2.75,2)+.984375},bounceInOut:function(e){return.5>e?f.bounceIn(2*e)/2:f.bounceOut(2*e-1)/2+.5}};g.setObject("dojo.fx.easing",f);return f})},
"esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar":function(){define("dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A,B,C){C=C.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var z=g([a,d],{templateString:B,nls:C,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){r.hide(this.commandButtonsContainer);this._toolbarArranger=new t({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();A.autoTooltip(this.domNode)},_initAreaSelect:function(){var a=
this;this.areasSelect=(new n({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(b){a.onShowAnalysisAreaAt(b.value);a.onClosePopup()},onAddMoreAreas:function(){a.onAddMoreAreas();a.onClosePopup()},onRemoveAreas:function(b,d){a.onRemoveAreas(b);d&&a.onClosePopup()},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.onClosePopup()},onStopComparison:function(b){a.onShowAnalysisAreaAt(b);a.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(a){var b=a.analysisAreas,d=a.combinedAreasInfo,h=a.currentAreaIndex,c=a.isMultiFeature;this.areasSelect.buildAreaOptions(a);this.areasSelect.set("value",h);r[1<this.areasSelect.get("options").length&&!c?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();c?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,d):this._formatAreaTitleMulti(d):(a=b["all"===h?0:h],this.areaTitleFormatter?
this.areaTitleFormatter(this.areaTitleInnerDiv,a):this._formatAreaTitle(a,h))},_formatAreaTitle:function(a,b){this.areaTitleInnerDiv.innerHTML="all"===b?C.allAreas:a.locationName||a.name},_formatAreaTitleMulti:function(a){this.areaTitleInnerDiv.innerHTML=a.locationName||a.name||a.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var a=this;this.pageSelect=(new m({onChange:function(b){a.onShowPageAt(b.value);a.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},
setPageControlsVisible:function(a){this._pageControlsVisible=a;r[a?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(a,b){for(var d=[],h=0;h<a;h++)d.push({label:e.substitute(C.pageIndex,{index:h+1}),value:h});this.pageSelect.set("options",d);this.pageSelect.set("value",b);r[this._pageControlsVisible&&1<a?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var a=this;this.zoomSelect=(new p({onChange:function(b){if(b.value===q.FIT_PAGE)a.onZoomToFitPage();else if(b.value===q.FIT_PAGE_WIDTH)a.onZoomToFitPageWidth();
else if(b.value===q.FIT_PAGE_HEIGHT)a.onZoomToFitPageHeight();else a.onSetZoomPercent(b.value);a.onClosePopup()}})).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect)},setZoomSupportsInfo:function(a){r[a.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.store.data.forEach(function(b){b.hidden=!1;b.value!==q.FIT_PAGE||a.canFitPage?b.value!==q.FIT_PAGE_WIDTH||a.canFitPageWidth?b.value!==q.FIT_PAGE_HEIGHT||a.canFitPageHeight||(b.hidden=!0):
b.hidden=!0:b.hidden=!0})},setZoomInfo:function(a){a=a.isFitPageScale?q.FIT_PAGE:a.isFitPageWidthScale?q.FIT_PAGE_WIDTH:a.isFitPageHeightScale?q.FIT_PAGE_HEIGHT:q.getClosestZoomAndUpdateOptions(100*a.scale,this.zoomSelect.get("options"));a!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",a)},createCommandButton:function(a,b){return this.createCustomCommandButton({callback:b,buttonClass:a.id===h.PRINT?"playerPrintButton":"playerExportButton",tooltip:a.id===h.PRINT?C.printInfographic:C.exportInfographic,
visibleOnError:!1})},createCustomCommandButton:function(a){r.show(this.commandButtonsContainer);var d=b.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},this.commandButtonsContainer,a.addFirst?"first":"last");d.__visibleOnError=a.visibleOnError;d=b.create("div",{"class":"playerToolbar_commandButton"},d);a.buttonClass&&c.add(d,a.buttonClass);a.tooltip&&A.setTooltipToNode(d,a.tooltip);f(d,"click",a.callback);return d},setTheme:function(a){c.remove(this.domNode,"playerThemeDark playerThemeLight");
c.add(this.domNode,a===l.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(a);this.pageSelect.setTheme(a);this.zoomSelect.setTheme(a)},setErrorShown:function(a){if(a)for(r.hide([this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),a=0;a<this.commandButtonsContainer.children.length;a++){var b=this.commandButtonsContainer.children[a];r[b.__visibleOnError?"show":"hide"](b)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},
addInfographicsSelect:function(a){this._infographicSelect=a;a.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return y.isMouseOver(this.domNode)||this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(a){r.enableContentAbsolute(this.commandButtonsContainer,!1);r.enableContentAbsolute(this.infographicsSelectDiv,
!1);k(a,function(){r.enableContentAbsolute(this.commandButtonsContainer,!0);r.enableContentAbsolute(this.infographicsSelectDiv,!0)}.bind(this))},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(a){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}});return g([a,d],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",
player:null,popupButtonDiv:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var a=this;this.inherited(arguments);this.toolbarHolder=(new z({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(b){a.onShowPageAt(b)},
onShowAnalysisAreaAt:function(b){a.onShowAnalysisAreaAt(b)},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide()},onZoomToFitPage:function(){a.onZoomToFitPage()},onZoomToFitPageWidth:function(){a.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){a.onZoomToFitPageHeight()},onSetZoomPercent:function(b){a.onSetZoomPercent(b)},onClosePopup:function(){a.closePopup()},onAddMoreAreas:function(){a.onAddMoreAreas()},onRemoveAreas:function(b){a.onRemoveAreas(b)}})).placeAt(this.domNode);
this.own(this.toolbarHolder)},updateAreaSelect:function(a){this.toolbarHolder.areaTitleFormatter=this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(a)},setPageControlsVisible:function(a){this.toolbarHolder.setPageControlsVisible(a)},updatePageSelect:function(a,b){this.toolbarHolder.updatePageSelect(a,b)},setZoomSupportsInfo:function(a){this.toolbarHolder.setZoomSupportsInfo(a)},setZoomInfo:function(a){this.toolbarHolder.setZoomInfo(a)},
createCommandButton:function(a,b){return this.toolbarHolder.createCommandButton(a,b)},setTheme:function(a){this.toolbarHolder.setTheme(a)},setErrorShown:function(a){this.toolbarHolder.setErrorShown(a);this._arrangeControls()},_arrangeControls:function(){r.show(this.domNode);this.toolbarHolder.arrangeControls();r[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){u.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){c[this.isScrollShown()?
"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");c[v.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");c[v.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var a=w.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=b.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,
"first"),this._popupHandle=w.makePopup(this.toolbarHolder,this,this._popupButton,{orient:["before","below"],openPopup:a})):b.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);b.empty(this.domNode);this._popupButton&&b.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&w.close(this.toolbarHolder)},
isScrollShown:function(){return!1},createCustomCommandButton:function(a){return this.toolbarHolder.createCustomCommandButton(a)},notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var a=b.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);A.setTooltipToNode(a,C.close);f(a,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:C.close,
callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(a){this.toolbarHolder.addInfographicsSelect(a)},isMouseOver:function(){return y.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(a){this.toolbarHolder.setContentLoadPromise(a)},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},
onSetZoomPercent:function(a){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/Select":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/OnDemandSelect","../PlayerThemes"],function(g,f,e,k){return g(e,{"class":"esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList esriGEOnDemandSelectSpacedOut",allowRepetitiveSelection:!1,setTheme:function(c){f[c===k.DARK?"add":
"remove"](this.domNode,"esriGEOnDemandSelectWhite")}})})},"esri/dijit/geoenrichment/OnDemandSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin ./lists/FlowList ./lists/FlowListDefaultItemRenderer ./lists/_FlowListHoverSupport ./utils/DeviceUtil ./utils/DomUtil ./utils/MouseUtil ./utils/PopupUtil ./utils/TooltipUtil dojo/text!./templates/OnDemandSelect.html".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y){var w=g([m,p]),A={_currentSelect:null,_keyHandler:null,_mouseMoveHandler:null,_currentItemIndex:-1,_currentSearchLetter:null,setFocusedSelect:function(a){this._currentSelect=a;this._updateHandlers()},_updateHandlers:function(){var a=this;this._keyHandler&&this._keyHandler.remove();this._keyHandler=null;this._mouseMoveHandler&&this._mouseMoveHandler.remove();this._mouseMoveHandler=null;this._currentItemIndex=-1;this._currentSearchLetter=null;this._setNodeFocused(null);
this._currentSelect&&(this._keyHandler=e(document.body,"keyup",function(b){b=String.fromCharCode(b.keyCode);1===b.length&&(b=b.toLowerCase(),a._tryHighlightNextItemForKey(b))}),this._mouseMoveHandler=e(this._currentSelect.popupList.domNode,"mousemove",function(){a._setNodeFocused(null)}))},_tryHighlightNextItemForKey:function(a){a===this._currentSearchLetter?this._currentItemIndex++:this._currentItemIndex=0;this._currentSearchLetter=a;var b=this,d=this._currentSelect.store.query(function(d){return(d=
d[b._currentSelect.labelProperty])&&d.toLowerCase().charAt(0)===a});if(d.length){this._currentItemIndex>d.length-1&&(this._currentItemIndex=0);var h=(d=d[this._currentItemIndex])&&this._currentSelect.popupList.getItemNode(d);d&&this._currentSelect.popupList.scrollToItem(d);this._setNodeFocused(h)}},_currentFocusedNode:null,_setNodeFocused:function(a){this._currentFocusedNode&&(c.remove(this._currentFocusedNode,"listItemFocused"),this._currentFocusedNode=null);a&&(c.add(a,"listItemFocused"),this._currentFocusedNode=
a)}};return g([h,l],{templateString:y,value:null,popupList:null,listClass:null,placeHolderClass:"placeHolder",idProperty:"value",labelProperty:"label",options:null,store:null,itemRenderer:null,itemClass:null,placeHolder:null,requireSelection:!0,renderSelectionAsItem:!1,makePopupListWidthMatchOpenButtonWidth:!0,orient:null,noPopupOverflow:!1,stopOpenEventPropagation:!1,stopPopupInteractionEventPropagation:!0,onClickComponent:null,clearPopupOnClose:!0,detectItemHover:!1,hasSelectableItems:!0,allowRepetitiveSelection:!0,
labelTextToKeep:null,nodeToKeepAsSelected:null,openMouseEvent:null,toggleOnClick:!0,supportsKeyNavigation:!0,_closePopupOnChangeFunc:null,_lastPopupListScrollTop:0,postCreate:function(){var a=this;this.inherited(arguments);this._normalizeValue();this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:this.requireSelection||this._tryAssignPlaceholder();this.nodeToKeepAsSelected?this._updateSelection():q.hide(this.selectedItemHolder);this._createPopupList();this.own(this.popupList);this.listClass&&
c.add(this.popupList.domNode,this.listClass);this._popupCreationHandler=e(this.openButton,this.openMouseEvent||t.click,function(b){a.stopOpenEventPropagation&&("function"===typeof a.stopOpenEventPropagation?a.stopOpenEventPropagation(b):b.stopPropagation());a.openPopup()});this.popupList.startup();this._trySelectValue();e(this.popupList.domNode,t.clickOrRelease,function(b){a.stopPopupInteractionEventPropagation&&b.stopPropagation()});e(this.popupList.domNode,"scroll",function(b){a._lastPopupListScrollTop=
a.popupList.domNode.scrollTop});u.autoTooltip(this.domNode)},_createPopupList:function(){var a=this,b=this.itemRenderer||new n;this.popupList=new (this.detectItemHover?w:m)(f.mixin({"class":"esriGEOnDemandSelectFlowList",idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:b,itemClass:this.itemClass,stopMouseEventPropagation:this.stopPopupInteractionEventPropagation,hasSelectableItems:this.hasSelectableItems,allowRepetitiveSelection:this.allowRepetitiveSelection,onChange:function(){a._processOnChangeEvent()},
onItemHovered:function(b){a.onItemHovered(b)}},this._buildAdditionalPopupListProperties()))},_buildAdditionalPopupListProperties:function(){return null},_processOnChangeEvent:function(){if(this.popupList.selectedItem){var a=this.value,b=this.popupList.selectedItem;this.value=b[this.idProperty];this._updateSelection();this.onChange&&this.onChange({type:"change",value:this.value,previousValue:a,selectedItem:b})}this._closePopupOnChangeFunc&&!this._closePopupOnChangeFunc(this.value)||r.close(this.popupList)},
_makePopup:function(){if(this._popupCreationHandler){this._popupCreationHandler.remove();delete this._popupCreationHandler;var d=this;r.makePopup(this.popupList,this,this.openButton,{openMouseEvent:this.openMouseEvent,stopEventPropagation:this.stopOpenEventPropagation,toggleOnClick:this.toggleOnClick,wrapperClass:this.listClass?this.listClass.split(" ").map(function(a){return a+"Popup"}).join(" "):null,orient:this.orient,allowAutoOrientation:this.allowAutoOrientation,noOverflow:this.noPopupOverflow,
onClickComponent:this.onClickComponent,onPreShow:function(){d.onPopupListPreBuild();d.makePopupListWidthMatchOpenButtonWidth&&b.set(d.popupList.domNode,"minWidth",a.getContentBox(d.domNode).w+"px");d._updatePopupListStore();d.onPopupPreOpened()},onShow:function(){d.onPopupOpened();A.setFocusedSelect(d)},onClose:function(){d.onPopupClosed();A.setFocusedSelect(null);d.clearPopupOnClose&&d._clearPopup()},isMouseOver:function(){return d.isMouseOverList()}})}},_clearPopup:function(){this.popupList&&this.popupList.clear&&
this.popupList.clear()},_tryAssignPlaceholder:function(){if(this.placeHolder&&null===this.value)return this.selectedLabel.innerHTML=this.placeHolder,c.add(this.selectedLabel,this.placeHolderClass),!0;c.remove(this.selectedLabel,this.placeHolderClass);return!1},_normalizeValue:function(){null!==this.value&&(void 0===this.value?this.value=null:("string"===typeof this.value&&(this.value=this.value.trim()),String(this.value)||(this.value=null)))},_trySelectValue:function(){var a=this;if((null===this.value||
!this._setValueAttr(this.value,!0))&&this.requireSelection){var b=this.store&&this.store.query();b&&b.length&&(this.value&&b.some(function(b){return a.value===b[a.idProperty]})?this._setValueAttr(this.value,!0):this._setValueAttr(b[0][this.idProperty],!0))}},_setValueAttr:function(a,b){this.value=a;this._normalizeValue();if(!this.store||!this.popupList)return!1;var d=this;(a=this.store.query(function(a){return a[d.idProperty]===d.value})[0])&&this.popupList.setSelectedItem(a);this._updateSelection(a);
return!!a},_setOptionsAttr:function(a){this.options=a;this.store=this._createStore(a);this._updatePopupListStore();this._trySelectValue()},_setStoreAttr:function(a){this.options=(this.store=this._createStore(a))&&this.store.query();a.idProperty&&(this.idProperty=a.idProperty);this._updatePopupListStore();this._trySelectValue()},_createStore:function(a){return a instanceof Array?new d({data:a,idProperty:this.idProperty}):a},_updatePopupListStore:function(){this.popupList&&(this.popupList.store&&this.popupList.store===
this.store&&!this.clearPopupOnClose||this.popupList.setStore(this.store,!0),this.popupList.setSelectedItem(this.getSelectedItem()),this._lastPopupListScrollTop&&(this.popupList.domNode.scrollTop=this._lastPopupListScrollTop))},getSelectedItem:function(){if(!this.store)return null;var a=this.get("value"),b=this;return void 0!==a&&this.store.query(function(d){return d[b.idProperty]===a})[0]},setSelectedItem:function(a){this.store&&this.popupList&&a&&this._setValueAttr(a[this.idProperty],!0)},getSelectedIndex:function(){var a=
this,b=-1;if(this.store){var d=this.get("value");void 0!==d&&this.store.query().some(function(h,c){if(h[a.idProperty]==d)return b=c,!0})}return b},setSelectedIndex:function(a){this.setSelectedItem(this.store&&this.store.data[a])},_nodeToKeepAsSelectedPlacedFlag:!1,_updateSelection:function(a){a=a||this.getSelectedItem();this.nodeToKeepAsSelected?this._nodeToKeepAsSelectedPlacedFlag||(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),k.empty(this.selectedItemHolder),k.place(this.nodeToKeepAsSelected,
this.selectedItemHolder),this._nodeToKeepAsSelectedPlacedFlag=!0):this.renderSelectionAsItem?(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),k.empty(this.selectedItemHolder),a&&this.popupList.itemRenderer.createPresentation(a,!1,this.selectedItemHolder,this.popupList)):(q.hide(this.selectedItemHolder),this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:(this.selectedLabel.innerHTML=a?a[this.labelProperty]:"",this.selectedLabel.innerHTML&&c.remove(this.selectedLabel,
this.placeHolderClass),q[this.selectedLabel.innerHTML||this._tryAssignPlaceholder()?"show":"hide"](this.selectedLabel)))},refresh:function(){this.popupList.refresh();this._updateSelection()},isPopupOpen:function(){return r.isOpen(this.popupList)},openPopup:function(){this.isPopupOpen()||(this._makePopup(),r.open(this.popupList))},closePopup:function(){this._popupCreationHandler||r.close(this.popupList)},refreshPopup:function(){this.isPopupOpen()&&r.refresh(this.popupList)},isMouseOver:function(a){return v.isMouseOver(this.domNode,
{event:a})||this.isMouseOverList(a)},isMouseOverList:function(a){return this.popupList&&v.isMouseOver(this.popupList.domNode,{event:a})},onPopupListPreBuild:function(){},onPopupPreOpened:function(){},onPopupOpened:function(){},onPopupClosed:function(){},onChange:function(a){},onItemHovered:function(a){},destroy:function(){this._popupCreationHandler&&this._popupCreationHandler.remove();this.closePopup(this.popupList);this.popupList.destroy();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/lists/FlowList":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on ../utils/DeviceUtil ../utils/DnDUtil ../utils/MouseUtil ../utils/TooltipUtil ./FlowListDefaultItemRenderer ../utils/PopupUtil dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p){var t=g([n,p],{templateString:"\x3cdiv class\x3d'esriGEFlowList esriGENonSelectable'\x3e\x3c/div\x3e",idProperty:"value",labelProperty:"label",selectedIndex:-1,selectedItem:null,items:null,store:null,defaultItemRendererClass:l,itemRenderer:null,itemClass:null,itemClassSelected:null,keepScrollPosition:!1,allowRepetitiveSelection:!0,selectOnMouseDown:!1,noDragTolerance:0,selectionValidator:null,allowManualSelection:!0,stopMouseEventPropagation:!0,hasSelectableItems:!0,
autoDetectUrlsInLabels:!1,storeItemsInInnerDiv:!1,_addedWrappers:null,_clickHandles:null,_valueOnCreation:null,_isCreated:!1,itemsDiv:null,postCreate:function(){this.inherited(arguments);this.itemsDiv=this.storeItemsInInnerDiv?e.create("div",{"class":"esriGEFlowList_innerDiv"},this.domNode):this.domNode;this._clearHandlers();this._setUpItemRenderer();h.autoTooltip(this.domNode);this._isCreated=!0;this._valueOnCreation?this._setValueAttr(this._valueOnCreation):this.refresh()},_setUpItemRenderer:function(){this.itemRenderer||
(this.itemRenderer=new this.defaultItemRendererClass);this.itemClass&&(this.itemRenderer.itemClass=this.itemClass);this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)},_getValueAttr:function(){return this.selectedItem&&this.selectedItem[this.idProperty]},_setValueAttr:function(a){var b=this;if(this._isCreated){var d=this.items||this.store&&this.store.data;d&&d.some(function(d){if(d[b.idProperty]==a)return b.setSelectedItem(d),!0})}else this._valueOnCreation=a},_scrollTopMemo:0,
memoScroll:function(){this._scrollTopMemo=this.domNode.scrollTop},applyScrollFromMemo:function(){this.domNode.scrollTop=this._scrollTopMemo||0},_setItemsAttr:function(a){this.setItems(a)},setItems:function(a,b){this.keepScrollPosition&&this.memoScroll();this.clear();this.items=a;b||(this.items&&this._isCreated?(this._addItems(a),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo()):this._checkIfStillSelected())},_checkIfStillSelected:function(){if(-1!=this.selectedIndex||
this.selectedItem){var a=this;this._addedWrappers&&this._addedWrappers.some(function(b,d){return a._isItemSelected(b,d)})||(this.selectedIndex=-1,this.selectedItem=null)}},refresh:function(){this.store?this.setStore(this.store):this.setItems(this.items)},setSelectedItem:function(a,b){this.hasSelectableItems&&(this.selectedItem=a,this.selectedIndex=-1,this.refresh(),b&&this._dispatchChangeEvent())},setSelectedIndex:function(a,b){this.hasSelectableItems&&(this.selectedIndex=a,this.selectedItem=null,
this.refresh(),b&&this._dispatchChangeEvent())},getItemNode:function(a){var b;this._addedWrappers&&this._addedWrappers.some(function(d){if(d.itemRef===a)return b=d.__itemPresentation,!0});return b},getItemByNode:function(a){var b;this._addedWrappers&&this._addedWrappers.some(function(d){if(d.__itemPresentation===a)return b=d.itemRef,!0});return b},getItemByValue:function(a){var b,d=this;this._addedWrappers&&this._addedWrappers.some(function(h){if(h[d.idProperty]===a)return b=h.itemRef,!0});return b},
__selectedPresentation:null,_addItems:function(a){this._addedWrappers=this._addedWrappers||[];var b=this;a.forEach(function(a){var d=f.mixin({},a);d.itemRef=a;b.__addWrapper(d)})},__addWrapper:function(a){var b=this._addedWrappers.length,d=this.itemRenderer.createPresentation(a.itemRef,this._isItemSelected(a,b),this.itemsDiv,this,a);d&&(d.index=b,d.item=a.itemRef,a.__itemPresentation=d,this._isItemSelected(a,b)&&(this.selectedItem=a.itemRef,this.selectedIndex=b,this.__selectedPresentation=d),this._addClickHandler(d),
this._addedWrappers.push(a),a=this._addedWrappers.length-1,k.add(d,"listItem_"+a),k.add(d,"listItem_"+(0==a%2?"even":"odd")))},_isItemSelected:function(a,b){return this.hasSelectableItems&&this._isItemClickable(a)?b==this.selectedIndex||a.itemRef===this.selectedItem?!0:a.itemRef&&this.selectedItem?(a=a.itemRef[this.idProperty],b=this.selectedItem[this.idProperty],void 0!==a&&a===b):!1:!1},_isItemClickable:function(a){return this.selectionValidator?this.selectionValidator(a):this._selectionValidatorDefault(a)},
_selectionValidatorDefault:function(a){return!!a&&!a.isSeparator&&!1!==a.enabled},_addClickHandler:function(d){function h(){(l.allowRepetitiveSelection||l.__selectedPresentation!=d)&&l._isItemClickable(d.item)&&(l.__selectedPresentation&&l.itemRenderer.selectPresentation&&l.itemRenderer.selectPresentation(l.__selectedPresentation,!1,l.__selectedPresentation.item),l.itemRenderer.selectPresentation&&l.itemRenderer.selectPresentation(d,l.hasSelectableItems,d.item),l.__selectedPresentation=d,l.selectedIndex=
d.index,l.selectedItem=d.item,l._dispatchChangeEvent())}var l=this;if(this.allowManualSelection){var e;e=this.selectOnMouseDown||!this.noDragTolerance?c(d,this.selectOnMouseDown?b.press:b.click,function(a){l.stopMouseEventPropagation&&a.stopPropagation();h()}):a.addNoDragClickHandler(d,h,{tolerance:this.noDragTolerance});this._clickHandles.push(e)}},_dispatchChangeEvent:function(){this.onChange({type:"change",selectedIndex:this.selectedIndex,selectedItem:this.selectedItem,value:this.selectedItem&&
this.selectedItem[this.idProperty]})},clear:function(){this.__selectedPresentation=null;this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach(function(a){a.destroyPresentation&&a.destroyPresentation()});this._addedWrappers.length=0;this.itemsDiv&&e.empty(this.itemsDiv);this._clearHandlers()},_clearHandlers:function(){this._clickHandles=this._clickHandles||[];this._clickHandles.forEach(function(a){a.remove()});this._clickHandles.length=0},scrollToItem:function(a){if(a=this.getItemNode(a))this.domNode.scrollTop=
a.offsetTop},store:null,onDemandModeLoadStep:1E3,onDemandPopulateLimit:1E3,onDemandPopulatePeriod:200,_storeScrollHandler:null,_setStoreAttr:function(a){this.setStore(a)},setStore:function(a){if(this.domNode)if(this.keepScrollPosition&&this._memoScroll(),this.clear(),this.idProperty=(this.store=a)&&a.idProperty,this.store&&this._isCreated){this._loadNextPart();this._checkIfStillSelected();this.keepScrollPosition&&this.applyScrollFromMemo();var b=this;this._storeScrollHandler=this._storeScrollHandler||
c(this.domNode,"scroll",function(){var a=b._addedWrappers[b._addedWrappers.length-30];(a=a?a.__itemPresentation:null)&&a.offsetTop<b.domNode.scrollTop&&b._loadNextPart()})}else this._checkIfStillSelected()},_loadNextPart:function(){if(this.store&&this.store.query().length!=this._addedWrappers.length){var a=this.store.query(null,{start:this._addedWrappers.length,count:this.onDemandModeLoadStep});delete a.total;this._addItems(a);a.length&&this._addedWrappers.length<this.onDemandPopulateLimit&&(a=this._loadNextPart.bind(this),
setTimeout(a,this.onDemandPopulatePeriod))}},isMouseOver:function(a){return d.isMouseOver(this.domNode,{event:a})},onChange:function(a){},destroy:function(){this.clear();this.inherited(arguments)}});t.createPopup=function(a){function b(){d||(d=new t({"class":a.listClass,itemRenderer:a.itemRenderer,items:a.options,onChange:function(b){a.onChange(b);!a.keepSelection&&d.setSelectedItem(null);m.close(d)}}),a.doNotOwn||a.wizard.own(d),a.isDeferred&&a.isDeferred(d));return d}var d;m.makePopup(a.isDeferred?
b:b(),a.wizard,a.aroundNode,a.popupOptions||{});return d};return t})},"esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct ../utils/DomUtil ../utils/TooltipUtil ../utils/RegExpUtil ../utils/UrlUtil".split(" "),function(g,f,e,k,c,b,a,d){return g(null,{itemClass:"",itemClassSelected:"",labelClass:"",createLabelNode:!1,createImageAfterLabel:!1,constructor:function(a){f.mixin(this,a)},createPresentation:function(a,
b,d,n,f){if(a.isSeparator)return b=k.create("div",{"class":"flowList_listSeparator"},d),a.hidden&&c.hide(b),b;d=k.create("div",{"class":"listItem "+(this.itemClass||" ")+(a.itemClass||""),style:a.style},d);a.isLink&&e.add(d,"esriGELink");!1===a.enabled&&e.add(d,"disabled");this._createParts(a,d,n);this._setTooltip(a,d,n);this.selectPresentation(d,b,a);a.hidden&&c.hide(d);return d},_setTooltip:function(a,d,c){a.tooltip&&c.own(b.setTooltipToNode(d,a.tooltip))},_createParts:function(a,b,d){var h;this.createImageAfterLabel&&
(this._createLabel(a,b,d),h=!0);this._createImage(a,b,d);!h&&this._createLabel(a,b,d)},_createImage:function(a,b,d){if(b=this._createImageNode(a,b,d))a.imageClass&&e.add(b,a.imageClass),a.imageUrl&&(b.style="background-image: url("+a.imageUrl+");")},_createImageNode:function(a,b,d){return b},_createLabel:function(a,b,d){if(this.createLabelNode)return b=k.create("div",{innerHTML:a[d.labelProperty],"class":"dijitInline TrimWithEllipses listItemLabel"},b),a.labelClass&&e.add(b,a.labelClass),this.labelClass&&
e.add(b,this.labelClass),d.autoDetectUrlsInLabels&&this._tryConvertToUrls(b),b;a[d.labelProperty]&&(b.innerHTML=a[d.labelProperty],d.autoDetectUrlsInLabels&&this._tryConvertToUrls(b))},_tryConvertToUrls:function(b){var h=b.innerHTML.match(a.IS_URL_RE);if(h=h&&h[0])b.innerHTML=b.innerHTML.replace(h,"\x3ca href\x3d'"+d.toHttpsUrl(h)+"' target\x3d'_blank'\x3e"+h+"\x3c/a\x3e")},selectPresentation:function(a,b,d){e[b?"add":"remove"](a,"listItemSelected "+this.itemClassSelected)}})})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],
function(){var g={createRegExp:function(a,b,c){a=g.trimText(a);return!a&&c?null:new RegExp(a,b)},trimText:function(a){return a?a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(a,b,c){return null==a?"":(""+a).replace(b,function(a){return c[a]||""})}},f=/&|<|>/g,e=/&|<|>|"|'/g,k={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;"};g.encodeXML=function(a,b){return g.replace(a,b?e:f,k)};var c=/&amp;|&lt;|&gt;|&quot;|&apos;/g,b={"\x26amp;":"\x26",
"\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};g.decodeXML=function(a){return g.replace(a,c,b)};g.IS_RICH_TEXT_RE=/<\w/;g.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;g.isRichText=function(a){return a&&g.IS_RICH_TEXT_RE.test(a)};g.isUrl=function(a){return a&&g.IS_URL_RE.test(a)};var a=/^[0-9a-fA-F]{32}$/;g.isId=function(b){return b&&a.test(b)};return g})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url",
"esri/config","esri/kernel","esri/urlUtils"],function(g,f,e,k){var c={getDomain:function(b){if("string"!==typeof b)return null;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");var a=b.indexOf("/");return 0>a?b:b.substr(0,a)},getPortalUrl:function(b){if("string"!==typeof b)return null;var a=b;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");a=a.substr(0,a.indexOf(b));if(-1!==b.indexOf("/sharing"))return a+b.substr(0,b.indexOf("/sharing"));if(-1!==b.indexOf("/portal"))return a+b.substr(0,b.indexOf("/portal"))+
"/portal";var d=b.indexOf("/");return a+(0>d?b:b.substr(0,d))},getProxyUrl:function(b){var a=f.defaults.io.proxyUrl;a&&!/^http/i.test(a)&&(a=k.getAbsoluteUrl(a));a&&b&&(a=c.toHttpsUrl(a));return a},registerCORS:function(b){(b=c.getDomain(b))&&-1==f.defaults.io.corsEnabledServers.indexOf(b)&&f.defaults.io.corsEnabledServers.push(b);c._fixCORS()},_fixCORS:function(){f.defaults.io.corsEnabledServers=f.defaults.io.corsEnabledServers.filter(function(b){return b.indexOf&&0===b.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+
b),!1):!0})},indexOfQuery:function(b){var a=b.indexOf("?");0<=a&&(b=b.substr(a+1),/^(http:\/\/|https:\/\/)/i.test(b)&&(b=b.indexOf("?"),a=0<=b?a+1+b:-1));return a},removeQuery:function(b){var a=c.indexOfQuery(b);return 0>a?b:b.substr(0,a)},addQueryPart:function(b,a){var d=0>c.indexOfQuery(b)?"?":"\x26";return b+d+a},getVariableValue:function(b,a){if(b&&"string"===typeof a){var d=k.urlToObject(b);if(d.query){var h={};Object.keys(d.query).forEach(function(a){h[a.toLowerCase()]=d.query[a]});return h[a.toLowerCase()]}}},
addUrlVariable:function(b,a,d){a=encodeURIComponent(a);d=encodeURIComponent(d);return c.addQueryPart(b,a+"\x3d"+d)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(b){return!b||/^http/i.test(b)?b:"http://"+b},toHttpsUrl:function(b){b&&(b=c.toHttpUrl(b));if(!b||!/^http:\/\//i.test(b))return b;var a=new g(b);b=b.replace(/^http/i,"https");var d=c.securePortsMap[a.port];d&&(b=b.replace(":"+a.port,":"+d));return b},combine:function(b,a){"number"===typeof a&&(a+="");if(a){if(/^(http:\/\/|https:\/\/)/i.test(a)||
!b)return a;"/"!=a.charAt(0)&&(a="/"+a);if(1==a.length)return b;var d=b.length-1;"/"==b.charAt(d)&&(b=b.substr(0,d));var h=k.urlToObject(b);b=c.removeQuery(b);d=b.length-a.length;0<=d&&b.substr(d).toLowerCase()==a.toLowerCase()&&(b=b.substr(0,d));b+=a;for(var l in h.query)c.addQueryPart(b,h.query[l])}return b},combineMulti:function(b){for(var a=b[0],d=1;d<b.length;d++)a=c.combine(a,b[d]);return a},openUrl:function(b,a){if(a)return window.open(b,"_blank");a=window.open();a.opener=null;a.referrer=null;
a.location=b;return a},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},getToken:function(b){return(b=b&&e.id.findCredential(b)||e.id.credentials[0])&&b.token}};return c})},"esri/dijit/geoenrichment/utils/PopupUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/when dijit/popup dijit/place ./DeviceUtil ./DnDUtil ./MouseUtil dojo/domReady!".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n){function p(a){if(!a)return["below"];var b=[];a.forEach(function(a){var d=c.isBodyLtr();switch(a){case "before-alt":d=!d;case "after-alt":b.push(d?{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"});b.push(d?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"});return}b.push(a)});return b}var t={makePopup:function(h,v,r,u){function q(a){if(u.overlay&&a._popupWrapper){var d=k.create("div",{"class":u.overlay.overlayClass});if(u.overlay.overlayParent)k.place(d,
u.overlay.overlayParent);else{k.place(d,E,"before");var h=b.get(a._popupWrapper,"zIndex");b.set(d,"zIndex",h)}a.__popupOverlay=d}}function w(a){a.__popupOverlay&&(k.destroy(a.__popupOverlay),a.__popupOverlay=null)}function A(a){G=!1;a.__bodyClickHandler&&a.__bodyClickHandler.remove();a.__bodyClickHandler=null;a.__popupWidgetOpenFlag=!1;w(a);u.onClose&&u.onClose()}function B(b){b&&u.stopEventPropagation&&b.stopPropagation();G||(G=!0,a(z||("function"==typeof h?h():h),function(b){z=b;z.domNode?(z.__openPopupWidgetFunc=
B,E=d.moveOffScreen(z),a(u.onPreShow&&u.onPreShow(),function(){var a=p(u.orient);if(E&&!1!==u.allowAutoOrientation){var b=-1!==a.indexOf("below"),h=c.position(r),k=c.position(E);b&&h.y+h.h+k.h>document.body.clientHeight&&(b=!b);a=a.map(function(a){return"below"!=a||b?a:"above"})}u.noOverflow&&(z.baseClass="esriGENoOverflow "+z.baseClass);d.open({parent:v,popup:z,around:r,orient:a,onClose:function(){A(z)}});u.suppressReposition&&clearTimeout(d._aroundMoveListener);u.noOverflow&&(z.baseClass=z.baseClass.replace("esriGENoOverflow ",
""));E&&u.wrapperClass&&e.add(E,u.wrapperClass);z.__popupInfo=g.mixin({},d.getTopPopup());z.__popupInfo.orient=a;z.__popupInfo.around=r;w(z);q(z);u.onShow&&u.onShow();z.__popupWidgetOpenFlag=!0;F&&z.own&&z.own(F);z.__bodyClickHandler&&z.__bodyClickHandler.remove();if(!1!==u.closeOnClickOutside){var m="function"===typeof u.closeOnClickOutside?u.closeOnClickOutside:null;setTimeout(function(){z.__bodyClickHandler&&z.__bodyClickHandler.remove();z.__bodyClickHandler=f(document.body,l.isMobileDevice()?
l.press:C,function(a){G&&(n.fixTouchEvent(a),m&&!m(a)||n.isMouseOver(E)||u.isMouseOver&&u.isMouseOver()||z.isMouseOver&&z.isMouseOver()||z.__lockPopupWidgetFlag||t.close(z))})})}})):G=!1}))}if(h){u=u||{};var C=u.openMouseEvent?u.openMouseEvent:l.clickOrRelease,z="function"!==typeof h?h:null;if(z)var E=d.moveOffScreen(z);var G=!1;z&&(z.__openPopupWidgetFunc=B);var F;if(!1!==u.openOnMouseEvent){var D=B;if(u.toggleOnClick)var I,D=function(a){I=I||a.type;z?I===a.type&&t.toggle(z):B()};F=!1===u.onClickComponent?
null:void 0!==u.noDragClickTolerance?m.addNoDragClickHandler(u.onClickComponent||r,D,{tolerance:u.noDragClickTolerance}):f(u.onClickComponent||r,C,D)}u.openPopup&&B();return{remove:function(){z&&"function"!==typeof z&&(t.close(z),A(z),z._popupWrapper&&(z.domNode&&z.domNode.parentNode===z._popupWrapper&&z._popupWrapper.removeChild(z.domNode),k.destroy(z._popupWrapper),delete z._popupWrapper),delete z.__openPopupWidgetFunc,delete z.__popupWidgetOpenFlag);F&&F.remove()}}}},setLocked:function(a,b){a.__lockPopupWidgetFlag=
b},open:function(a){a&&!a.__lockPopupWidgetFlag&&!a.__popupWidgetOpenFlag&&a.__openPopupWidgetFunc&&a.__openPopupWidgetFunc()},close:function(a){a&&!a.__lockPopupWidgetFlag&&d.close(a)},isOpen:function(a){return!(!a||!a.__popupWidgetOpenFlag)},toggle:function(a){t.isOpen(a)?t.close(a):t.open(a)},refresh:function(a){if(a){a=a.__popupInfo;var b=c.isBodyLtr();a&&h.around(a.wrapper,a.around,a.orient,b)}},getWrapper:function(a){return a&&a._popupWrapper}};return t})},"esri/dijit/geoenrichment/utils/onClickTouch":function(){define(["dojo/_base/lang",
"dojo/on","dojo/sniff"],function(g,f,e){var k=e("touch");return g.mixin(function(c,b,a,d){if(k){switch(b){case "click":b="touchstart,click";break;case "mousedown":b="touchstart,mousedown";break;case "mouseup":b="touchend,mouseup";break;case "clickend":b="touchend,click";break;default:return f(c,b,a,d)}var h=!1;return f(c,b,function(b){"touchstart"===b.type||"touchend"===b.type?(a.call(this,b),h=!0,setTimeout(function(){h=!1},500)):h||a.call(this,b)},d)}"clickend"===b&&(b="click");return f(c,b,a,d)},
f)})},"esri/dijit/geoenrichment/lists/_FlowListHoverSupport":function(){define(["dojo/_base/declare","dojo/on","../utils/MouseUtil"],function(g,f,e){var k=g(null,{_list:null,_checkIntervalH:null,constructor:function(c){this._list=c},setHoveredItem:function(c){clearInterval(this._checkIntervalH);this._emitHoverEvent(c);this._checkIntervalH=setInterval(function(){e.isMouseOver(c)||this.setHoveredItem(null)}.bind(this),100)},_emitHoverEvent:function(c){this._list.onItemHovered({type:"itemHover",index:c?
c.index:-1,item:c?c.item:null,value:c?c.item[this._list.idProperty]:void 0})}});return g(null,{_mouseHelper:null,postCreate:function(){this._mouseHelper=new k(this);this.inherited(arguments)},_addClickHandler:function(c){this.inherited(arguments);this._clickHandles.push(f(c,"mouseover",function(){this._mouseHelper.setHoveredItem(c)}.bind(this)))},onItemHovered:function(c){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/AreasSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/ToggleButton esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../PlayerViewModes ./Select ./ComparisonSettings ../dataProvider/supportClasses/areas/AnalysisAreaUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q){q=q.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var v=g(a,{canRemoveAreas:!1,canMoveAreas:!1,wrapInCards:!1,nls:null,createPresentation:function(a,d,h,l){var n=this,f=this.inherited(arguments);if(a.isSeparator)return f;f.innerHTML="";if("all"===a.value){f.style.cursor="pointer";var m=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},f);(new b(m,{mode:"toggle"})).set("checked",this.isCompareAll());k.create("div",{"class":"dijitInline",
innerHTML:a.label},f);f.addEventListener("click",function(){if(n.isCompareAll())n.onStopComparison();else n.onCompareAreasSideBySide()});t.setTooltipToNode(f,this.isCompareAll()?this.nls.compareAreasSideBySideTooltipOff:this.nls.compareAreasSideBySideTooltipOn,{position:["before","after"]});return f}if("addAreas"===a.value)return f.style.cursor="pointer",k.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEReportPlayerToolbar_addMoreAreasIcon"},f),k.create("div",{"class":"dijitInline",innerHTML:a.label},
f),f.addEventListener("click",function(){n.onAddMoreAreas()}),f;if(a.isAdditional)return f.style.cursor="pointer",a.buttonInfo.imageClass&&k.create("div",{"class":"dijitInline esriGESpaceAfterBig "+a.buttonInfo.imageClass},f),k.create("div",{"class":"dijitInline",innerHTML:a.label},f),f.addEventListener("click",function(b){a.buttonInfo.callback(b);n.onClosePopup()}),a.buttonInfo.tooltip&&(m=k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEInfoIcon"},f),t.setTooltipToNode(m,a.buttonInfo.tooltip,
a.buttonInfo.tooltipParams)),a.buttonInfo.onCreated&&a.buttonInfo.onCreated(f),f;if(a.canSelect){var m=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},f),p=new c(m);p.autoToggle=!1;p.set("checked",a.selected);f.addEventListener("click",function(){a.selected=!a.selected;p.set("checked",a.selected);a.isGroup?a.children.forEach(function(b){b.selected=a.selected}):a.parent&&(a.parent.selected=a.parent.children.some(function(a){return a.selected}));n.onVisibilityChanged()})}this.canRemoveAreas&&
a.isHost&&(m=k.create("div",{"class":"esriGEFloatEnd esriGESpaceBeforeBig esriGEReportPlayerToolbar_removeAreaButton"},f),m.addEventListener("click",function(b){b.stopPropagation();n.onRemoveAreas(a.isArea?[a.analysisArea]:a.analysisAreas)}),t.setTooltipToNode(m,a.isGroup?this.nls.removeAreasFromInfographic:this.nls.removeAreaFromInfographic));this.canMoveAreas&&a.isHost&&this.isCompareAll()&&(m=k.create("div",{"class":"esriGEFloatEnd upDownArrowsBlock"},f),0<a.hostIndex&&k.create("div",{"class":"dijitInline upArrow"},
m).addEventListener("click",function(b){b.stopPropagation();n.onMoveUp(a)}),a.hostIndex<this.getNumHostItems()-1&&k.create("div",{"class":"dijitInline downArrow"},m).addEventListener("click",function(b){b.stopPropagation();n.onMoveDown(a)}));m=k.create("div",{"class":"dijitInline",innerHTML:a.label},f);a.parent&&(m.style.paddingLeft="20px");this.wrapInCards&&(a.isArea&&!a.parent?e.add(f,"areaCard_only"):a.isGroup?e.add(f,"areaCard_groupTop"):a.isArea&&e.add(f,a.parent.children.indexOf(a)===a.parent.children.length-
1?"areaCard_groupBottom":"areaCard_groupMiddle"));this.selectPresentation(f,d,a);return f},isCompareAll:function(){return!1},getNumHostItems:function(){return 0},onAddMoreAreas:function(){},onRemoveAreas:function(a){},onVisibilityChanged:function(){},onMoveUp:function(a){},onMoveDown:function(a){},onCompareAreasSideBySide:function(){},onStopComparison:function(){},onClosePopup:function(){}});return g(h,{"class":"dijitInline esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList800 esriGEOnDemandSelectSpacedOut esriGEReportPlayerToolbar_areasSelectList",
player:null,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettingsBlock:null,comparisonSettings:null,_nls:null,buildRendering:function(){var a=this;this.inherited(arguments);this._nls=f.mixin({},q,this.player.nlsMap);this.itemRenderer=new v({nls:this._nls,onAddMoreAreas:function(){a.onAddMoreAreas();a.closePopup()},onRemoveAreas:function(b){var d=2>=a._getNumHostItems();a.onRemoveAreas(b,d);d&&a.closePopup()},isCompareAll:function(){return a.player.viewMode===d.PANELS_IN_STACK_ALL},getNumHostItems:function(){return a._getNumHostItems()},
onVisibilityChanged:function(){var b={};a.get("options").forEach(function(a){a.isArea&&(b[a.analysisArea.index]=a.selected)});a.refresh();a.player.getCurrentReportContainer().setAreasVisibilityState(b,{append:!0})},onMoveUp:function(a){},onMoveDown:function(a){},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.closePopup()},onStopComparison:function(){var b=-1;a.get("options").some(function(a){if(a.analysisArea&&!a.analysisArea.hidden)return b=a.analysisArea.index,!0});a.onStopComparison(b);
a.closePopup()},onClosePopup:function(){a.closePopup()}})},_buildAdditionalPopupListProperties:function(){var a=this;return{selectionValidator:function(b){return a.player.viewMode!==d.PANELS_IN_STACK_ALL&&!!b&&!b.isSeparator&&!1!==b.enabled}}},buildAreaOptions:function(a){var b=m.groupAreas(a),h=1<b.groupInfos.length&&!b.isOnlyAreasInOnlyGroup;this.itemRenderer.wrapInCards=h;this.itemRenderer.canRemoveAreas=h&&!n.isMobileDevice();this.itemRenderer.canMoveAreas=!1;var c=[],l=0;b.groupInfos.forEach(function(a,
b){var d;a.isRealGroup&&(d={isGroup:!0,isHost:!0,hostIndex:l++,label:a.label,value:"group_"+b,enabled:!1,analysisAreas:a.areas,children:[]},c.push(d));a.areas.forEach(function(a){a={isArea:!0,label:a.shortName||a.name||"",value:a.index,analysisArea:a,parent:d,isHost:!d};a.isHost&&(a.hostIndex=l++);c.push(a);d&&d.children.push(a)})});b={isSeparator:!0};c.push(b);this.player.viewMode!==d.PANELS_IN_SLIDES&&(!n.isMobileDevice()&&1<a.analysisAreas.filter(function(a){return!a.hidden}).length&&c.push({label:this._nls.compareAreasSideBySide,
value:"all"}),this.canAddMoreAreas&&c.push({label:this._nls.addMoreAreas,value:"addAreas"}));this.areasSelectButtons&&this.areasSelectButtons.forEach(function(a){a.isVisible&&!a.isVisible()||c.push({label:a.label,value:a.id,isAdditional:!0,buttonInfo:a})});c[c.length-1]===b&&c.pop();this._updateTreeSelection(c);this.set("options",c);this._updateComparisonSettings()},_getNumHostItems:function(){var a=0;this.get("options").some(function(b){b.isHost&&a++});return a},onPopupListPreBuild:function(){this._updateTreeSelection()},
_updateTreeSelection:function(a){if(this.player.viewMode===d.PANELS_IN_STACK_ALL){var b=this.player.getCurrentReportContainer().getAreasVisibilityState();a=a||this.get("options");a.forEach(function(a){if(a.isGroup||a.isArea)a.canSelect=!0,a.isGroup?(a.children.forEach(function(a){a.selected=b[a.analysisArea.index]}),a.selected=a.children.some(function(a){return a.selected})):a.selected=b[a.analysisArea.index]})}},_updateComparisonSettings:function(){var a=this;this.comparisonSettings&&this.comparisonSettings.destroy();
this.comparisonSettings=null;this.comparisonSettingsBlock&&k.destroy(this.comparisonSettingsBlock);this.comparisonSettingsBlock=null;this.player.viewMode===d.PANELS_IN_STACK_ALL&&(this.comparisonSettingsBlock=k.create("div",{"class":"dijitInline esriGEClickable"},this.domNode.parentNode),k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEIcon16 esriGEReportPlayerToolbar_comparisonSettingsIcon"},this.comparisonSettingsBlock),p.makePopup(function(){a.comparisonSettings||(a.comparisonSettings=
new l({player:a.player,onChange:function(){a.player.getCurrentReportContainer().setComparisonSettings(a.comparisonSettings.getSettings())}}));a.comparisonSettings.setSettings(a.player.getCurrentReportContainer().getComparisonSettings());return a.comparisonSettings},this,this.comparisonSettingsBlock))},onAddMoreAreas:function(){},onRemoveAreas:function(a,b){},onCompareAreasSideBySide:function(){},onStopComparison:function(a){},destroy:function(){this.comparisonSettings&&this.comparisonSettings.destroy();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(g,f,e,k,c,b,a,d){return g(k,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(h,l,f){var n=d.isMobileDevice()?"touchstart":"click";l=l||{};var m=l["class"];l["class"]=(m?m+" ":"")+"esriTriStateCheckBoxIcon";
if(m=l.label){if(h instanceof HTMLLabelElement)h.innerHTML="\x26nbsp;"+m;else{var k=l.labelAttrs||{};k.innerHTML="\x26nbsp;"+m;k=b.create("label",k);h&&b.place(k,h);h=k}l=e.mixin({},l);delete l.label;delete l.labelAttrs}this.checkboxNode=b.create("div",l,h,h instanceof HTMLLabelElement?"first":f);this._currentClass=this._composeClass();a.add(this.checkboxNode,this._currentClass);h instanceof HTMLLabelElement?(c(h,n,e.hitch(this,this._onClick)),a.add(h,"esriTriStateCheckBoxLabel")):c(this.checkboxNode,
n,e.hitch(this,this._onClick));this.domNode=m?h:this.checkboxNode},postscript:function(){},_onClick:function(a){this.disabled||(this.autoToggle&&this.toggle(),a.checked=this.checked,this.onClick(f.fix(a)))},onClick:function(a){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(a){a!==this.checked&&(this.checked="mixed"===a?a:this._lastChecked=!!a,this._updateClass())},_disabledSetter:function(a){this.disabled=!!a;this._updateClass()},_updateClass:function(){var b=
this._composeClass();b!==this._currentClass&&(a.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var a="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?a+"Disabled":a}})})},"esri/dijit/geoenrichment/ToggleButton":function(){define(["dojo/_base/declare","dojo/Stateful","dojo/on","dojo/dom-construct","dojo/dom-class"],function(g,f,e,k,c){return g(f,{domNode:null,checked:!1,disabled:!1,mode:"toggle",constructor:function(b,
a,d){a=a||{};var h=a["class"];this.checked=!!a.checked;this.mode=a.mode||"toggle";this.domNode=k.create("div",{"class":(h?h+" ":"")+"esriGEToggleButton"},b,d);this._updateClass();e(this.domNode,"click",function(a){this.disabled||(a.checked=this.toggle(),this.onClick(a))}.bind(this))},postscript:function(){},_checkedSetter:function(b){this.checked=!!b;this._updateClass()},_modeSetter:function(b){this.mode=b;this._updateClass()},_disabledSetter:function(b){this.disabled=b;this._updateClass()},_updateClass:function(){c[this.checked?
"add":"remove"](this.domNode,"checked");c["toggle"===this.mode?"remove":"add"](this.domNode,"switch");c[this.disabled?"add":"remove"](this.domNode,"disabled")},onClick:function(b){},toggle:function(){this.set("checked",!this.checked);return this.checked}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ComparisonSettings":function(){define("dojo/_base/declare esri/dijit/geoenrichment/TriStateItem dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/ComparisonSettings.html dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.PlayerToolbar;return g([e,k],{templateString:d,nls:h,player:null,showBackgroundImageCheckbox:null,splitPanelsCheckbox:null,postCreate:function(){var b=this;this.inherited(arguments);this.showBackgroundImageCheckbox=new f(this.showBackgroundImageLabel);this.showBackgroundImageCheckbox.onClick=function(){b._onChange()};this.splitPanelsCheckbox=new f(this.splitPanelsLabel);this.splitPanelsCheckbox.onClick=function(){b._update();b._onChange()};
a.setTooltipToNode(this.splitPanelsInfoIcon,h.splitPanelsTooltip);var d=this.player.nlsMap&&this.player.nlsMap.zoomPanelsTooltip||h.zoomPanelsTooltip;c[d?"show":"hide"](this.zoomPanelsInfoIcon);a.setTooltipToNode(this.zoomPanelsInfoIcon,d);this._initZoomControls();this._initZoomSplitControls()},_zoomEditor:null,_zoom:0,_initZoomControls:function(){var a=this;this._zoomEditor=new b({numericOnly:!0,onApply:function(b){a._setZoom(b)},onCancel:function(){a._updateZoomLabel()}});this.zoomLabel.addEventListener("click",
function(){a._zoomEditor.range={min:10,max:500};a._zoomEditor.editNodeLabel(a.zoomLabel,a._zoom)});this.zoomOutButton.addEventListener("click",function(){a._setZoom(Math.max(10,a._zoom-10))});this.zoomInButton.addEventListener("click",function(){a._setZoom(Math.min(500,a._zoom+10))});this.resetButton.addEventListener("click",function(){a._setZoom(100)})},_setZoom:function(a,b){a=Math.round(a);this._zoom!==a&&(this._zoom=a,this._updateZoomLabel(),this._update(),!b&&this._onChange())},_updateZoomLabel:function(){this.zoomLabel.innerHTML=
this._zoom+"%"},_zoomSplitEditor:null,_zoomSplit:0,_initZoomSplitControls:function(){var a=this;this._zoomSplitEditor=new b({numericOnly:!0,onApply:function(b){a._setZoomSplit(b)},onCancel:function(){a._updateZoomSplitLabel()}});this.zoomSplitLabel.addEventListener("click",function(){a._zoomSplitEditor.range={min:10,max:500};a._zoomSplitEditor.editNodeLabel(a.zoomSplitLabel,a._zoomSplit)});this.zoomOutSplitButton.addEventListener("click",function(){a._setZoomSplit(Math.max(10,a._zoomSplit-10))});
this.zoomInSplitButton.addEventListener("click",function(){a._setZoomSplit(Math.min(500,a._zoomSplit+10))});this.resetSplitButton.addEventListener("click",function(){a._setZoomSplit(100)})},_setZoomSplit:function(a,b){a=Math.round(a);this._zoomSplit!==a&&(this._zoomSplit=a,this._updateZoomSplitLabel(),this._update(),!b&&this._onChange())},_updateZoomSplitLabel:function(){this.zoomSplitLabel.innerHTML=this._zoomSplit+"%"},_update:function(){this.resetButton.style.visibility=100===this._zoom?"hidden":
"visible";this.resetSplitButton.style.visibility=100===this._zoomSplit?"hidden":"visible";c.hide([this.zoomBlock,this.zoomSplitBlock]);c.show(this.splitPanelsCheckbox.get("checked")?this.zoomSplitBlock:this.zoomBlock)},setSettings:function(a){this.showBackgroundImageCheckbox.set("checked",!a.hideBackgroundImage);this.splitPanelsCheckbox.set("checked",a.splitPanels);this._setZoom(100*(a.scale||1),!0);this._setZoomSplit(100*(a.scaleSplit||1),!0);this._update()},getSettings:function(){return{hideBackgroundImage:!this.showBackgroundImageCheckbox.get("checked"),
splitPanels:this.splitPanelsCheckbox.get("checked"),scale:this._zoom/100,scaleSplit:this._zoomSplit/100}},_onChange:function(){this._update();this.onChange()},onChange:function(){}})})},"esri/dijit/geoenrichment/utils/NodeLabelEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(g,f,e,k,c,b,a,d,h){return g(null,{_textMemo:null,
_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(a){f.mixin(this,a)},editNodeLabel:function(h,f){var l=this;this._stopEdit();this._node=h;this._textMemo="string"===typeof f||"number"===typeof f?f:h.innerHTML;f=b.position(h).w;h.innerHTML="";this._textBox=c.create("input",{type:"text"},h);this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();this.keepLabelDimensions&&a.set(this._textBox,
"width",f+"px");this._handlers=[e(document.body,"keyup",function(a){a.keyCode===k.ESCAPE?l._cancelEdit():a.keyCode===k.ENTER&&l._applyEdit()}),e(document.body,"click",function(){d.isMouseOver(h)||l._cancelEdit()})]},_checkCanApply:function(a){if(!this.numericOnly)return!0;a=h.parseNumber(a);return isNaN(a)||this.range&&void 0!==this.range.min&&this.range.min>a||this.range&&void 0!==this.range.max&&this.range.max<a?!1:!0},_applyEdit:function(){var a=this._textBox.value;this._checkCanApply(a)?(this._node.innerHTML=
a,this._stopEdit(),this.onApply(a)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&this._handlers.forEach(function(a){a.remove()});this._textMemo=this._handlers=null;c.destroy(this._textBox);this._node=this._textBox=null},onApply:function(a){},onCancel:function(){}})})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(g){var f={};Math.log10=Math.log10||function(e){return Math.log(e)*
Math.LOG10E};f.populateObject=function(e,c,b){function a(d,h){function c(c){var l=d[c],e=h[c],f=l&&"object"===typeof l;void 0!==l&&(void 0===e?h[c]=l:e&&"object"===typeof e&&f?a(l,e):b&&(f?(e=h[c]={},a(l,e)):h[c]=d[c]))}if(d&&h&&!(Array.isArray(d)&&!Array.isArray(h)||Array.isArray(h)&&!Array.isArray(d)))if(Array.isArray(d))d.forEach(function(a,b){c(b)});else for(var e in d)c(e)}a(c,e);return e};f.filterByPattern=function(e,c){function b(a,h,c){for(var d in a){var l=a[d],e=h[d];if(Array.isArray(l)){var f=
l[0];if(e&&Array.isArray(e)){var k=c[d]=[];e.forEach(function(a){if(a&&"object"===typeof a){var d=Array.isArray(a)?[]:{};b(f,a,d);k.push(d)}})}}else if("object"===typeof l){if(e&&"object"===typeof e){var g=c[d]={};b(l,e,g)}}else void 0!==e&&(c[d]=e)}}var a={};b(c,e,a);return a};f.traverseObject=function(e,c){for(var b in e){var a=e[b];c(a);a&&"object"===typeof a&&f.traverseObject(a,c)}};f.copyOwnJsonProperties=function(e,c,b){c=c||{};for(var a in e){var d=e[a];e.hasOwnProperty(a)&&"function"!=typeof d&&
(d&&"object"==typeof d&&b&&(d=b(a,d)),void 0!==d&&(c[a]=d))}return c};f.removeUndefinedProperties=function(e){e&&Object.keys(e).forEach(function(c){void 0===e[c]&&delete e[c]});return e};f.getValue=function(e,c){if("string"!==typeof c)return e;c=c.split(".");for(var b=0;b<c.length;b++)e=e&&e[c[b]];return e};f.setValue=function(e,c,b){if("string"===typeof c&&(c=c.split("."),c.length)){for(var a=0;a<c.length-1;a++)e=e&&e[c[a]];e&&(e[c[c.length-1]]=b)}};f.isNumber=function(e){return!isNaN(parseFloat(e))&&
isFinite(e)};f.roundNumber=function(e,c){return"number"!==typeof e?e:parseFloat(e.toFixed(void 0!==c?c:0))};f.getBestPrecision=function(e){return 0===e?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(e))))};f.getPlaces=function(e,c){function b(b,h){var c=e.indexOf(b,a);if(0>c)return d;b=e.charAt(c+b.length);return!b||0>h.indexOf(b)?d:c-a}e=+e;if(isNaN(e))return-1;e+="";var a=e.indexOf(".")+1,d=a?e.length-a:0;if(2>=d||!c)return d;c=0;if(!+e.substr(0,a-1))for(;"0"===e.charAt(a);)a++,c++,d--;for(var h=
d-1;2<=h;h--){var l=Math.min(b("000000000000000".substr(0,h),"01234"),b("999999999999999".substr(0,h),"56789"));if(l!==d){d=l;break}}return d+c};f.formatNumber=function(f,c){c="number"===typeof c?{places:c}:c||{};var b=c.places,a={};0<=b?a.places=b:b=-1;f=g.format(f,a);if(c.noSeparator){void 0===e&&(e=g.format(9999,{places:0}).replace(/9/g,""));var a=e,d;if(a)for(;0<=(d=f.indexOf(a));)f=f.substr(0,d)+f.substr(d+1)}if(c.preserveTrailingZeroes||0>=b||!f)return f;for(c=f.length;0<b&&"0"==f.charAt(c-
1);)c--,--b||c--;return f.substr(0,c)};f.formatNumberAsCurrency=function(e,c,b){return c?c.split(";")[0>e?1:0].replace("0",f.formatNumber(Math.abs(e),b)):f.formatNumber(e,b)};var e;f.parseNumber=function(e,c,b,a){if(""===e)return"undefined"!==typeof b?b:NaN;if(null==e||"string"!==typeof e&&isNaN(e))return NaN;e=String(e);if(!e.trim())return void 0!==b?b:NaN;b=g.parse(e,{strict:a});isNaN(b)&&e.trim().length&&(b=a?g.parse(e,{strict:a,locale:"en-US"}):Number(e));return isNaN(b)||void 0===c||0>c?b:g.round(b,
c)};f.parsePercentOrCurrency=function(e,c,b,a,d){"string"===typeof e&&(e=e.replace("%",""),c&&(c=c.split(";")[0].replace("0",""),e=e.replace(c,"")));return f.parseNumber(e,b,a,d)};f.compareEqual=function(e,c,b){return void 0===b?e===c:Number(Number(e).toFixed(b))===Number(Number(c).toFixed(b))};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang","esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],
function(g,f,e){var k={geometryToLatLong:function(c){var b=c.spatialReference.wkid;return b===e.WGS_84_WKID?{STORE_LONG:c.x,STORE_LAT:c.y}:e.isWebMercator(b)?(c=f.xyToLngLat(c.x,c.y),{STORE_LONG:c[0],STORE_LAT:c[1]}):null},populateCombinedAreasInfo:function(c,b){var a={},d={};b.forEach(function(b){b.latitude&&(a[b.latitude]=1);b.longitude&&(d[b.longitude]=1)});c.name=c.name||b.map(function(a){return a.name}).join(", ");c.shortName=c.shortName||b.map(function(a){return a.shortName||a.name}).join(", ");
c.description=c.description||b.map(function(a){return a.description||a.name}).join(", ");c.address=c.address||b.map(function(a){return a.address||a.name}).join(", ");c.latitude=c.latitude||Object.keys(a).join(", ");c.longitude=c.longitude||Object.keys(d).join(", ");return c},groupAreas:function(c){function b(a){var b=a.locationName||a.name;return{isSingleAreaGroup:!0,label:b,hideGroupLabel:b===(a.shortName||a.name),areas:[a]}}var a=c.combinedAreasInfo&&c.combinedAreasInfo.groups||[],d=[],h=[],e={};
c.analysisAreas.forEach(function(l){if(!(c.filter&&!c.filter(l)||l.hidden))if(l.isGrouped){if(!e[l.groupIndex]){var f=a[l.groupIndex],f=e[l.groupIndex]={isRealGroup:!0,label:f.locationName||f.name,areas:[]};h.push(f);d.push(f)}e[l.groupIndex].areas.push(l)}else d.push(b(l))});var f;1===d.length&&d[0].isRealGroup&&(d=d[0].areas.map(b),h.length=0,f=!0);return{groupInfos:d,isOnlyAreasInOnlyGroup:f}},parseSites:function(c){if(c.sites){c.analysisAreas=[];c.sites.forEach(function(a){a.areas.forEach(function(a){c.analysisAreas.push(a)})});
c.combinedAreasInfo={groups:c.sites.map(function(a){var b=g.mixin({},a);delete b.areas;delete b.attributes;delete b.notes;delete b.images;b.indexes=a.areas.map(function(a){return c.analysisAreas.indexOf(a)});return b})};k.populateCombinedAreasInfo(c.combinedAreasInfo,c.sites);if(!c.attachmentsProvider||!c.attachmentsProvider.getAttributesForAreaAt){c.attachmentsProvider={};c.attachmentsProvider.supportsMultipleAreas=1<c.sites.length;var b=c.attachmentsProvider.areaAttachments=[];c.sites.forEach(function(a){a.areas.forEach(function(d){b.push({attributes:a.attributes,
notes:a.notes,images:a.images})})})}delete c.sites}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomSelect":function(){define("dojo/_base/declare dojo/dom-construct esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ./Select ./ZoomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),function(g,f,e,k,c,b,a){a=a.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var d=g(e,{createPresentation:function(d,c,e,n){var h=this,l=this.inherited(arguments);
if(d.isCustomZoom){l.innerHTML="";var m=f.create("div",{"class":"esriGELink",innerHTML:a.customZoom},l),k=new b({numericOnly:!0,onApply:function(b){h.onCustomZoomApplied(b);m.innerHTML=a.customZoom},onCancel:function(){m.innerHTML=a.customZoom}});m.addEventListener("click",function(){k.range={min:10,max:1E3};k.editNodeLabel(m,"")})}else this.selectPresentation(l,c);return l},onCustomZoomApplied:function(a){}});return g(k,{listClass:"esriGEOnDemandSelectUnlimitedTallList esriGEOnDemandSelectSpacedOut",
buildRendering:function(){var a=this;this.inherited(arguments);this.itemRenderer=new d({onCustomZoomApplied:function(b){a.set("value",b);a.onChange({value:b});a.closePopup()}})},postCreate:function(){this.inherited(arguments);var a=c.getOptions().slice();a.push({isCustomZoom:!0,enabled:!1});this.set("options",a);this.set("value",100)}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomUtil":function(){define(["dojo/i18n!esri/nls/jsapi"],function(g){var f={};g=g.geoenrichment.dijit.ReportPlayer.PlayerToolbar;
f.FIT_PAGE="fitPage";f.FIT_PAGE_WIDTH="fitPageWidth";f.FIT_PAGE_HEIGHT="fitPageHeight";f.getOptions=function(){var e=[{value:f.FIT_PAGE,label:g.fitPage},{value:f.FIT_PAGE_WIDTH,label:g.fitPageWidth},{value:f.FIT_PAGE_HEIGHT,label:g.fitPageHeight}];[{value:400,label:"400%"},{value:200,label:"200%"},{value:150,label:"150%"},{value:125,label:"125%"},{value:100,label:"100%"},{value:90,label:"90%"},{value:80,label:"80%"},{value:70,label:"70%"},{value:60,label:"60%"},{value:50,label:"50%"}].forEach(function(f){e.push({isCustom:!0,
value:-1,label:""});e.push(f)});e.push({isCustom:!0,value:-1,label:""});return e};f.getClosestZoomAndUpdateOptions=function(e,f){f.forEach(function(a){a.isCustom&&(a.value=-1,a.hidden=!0)});var c=[];f.forEach(function(a){a.isCustom||"number"!==typeof a.value||c.push({option:a,value:a.value,score:e<a.value?e/a.value:a.value/e})});c.sort(function(a,b){return b.score-a.score});var b=c[0];if(1===b.score)return b.value;var a=f.indexOf(b.option);f=f[a+(e>b.value?-1:1)];f.value=e;f.label=Math.round(e)+"%";
f.hidden=!1;return f.value};return f})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ToolbarArranger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","esri/dijit/geoenrichment/utils/DomUtil"],function(g,f,e,k){return g(null,{showAreaTitle:!1,stretchToolbarNode:null,domNode:null,infographicsSelectDiv:null,areaTitleDiv:null,areaTitleInnerDiv:null,rightSideControlsBlock:null,areasSelectDiv:null,zoomSelectDiv:null,pageSelectDiv:null,commandButtonsContainer:null,constructor:function(c){f.mixin(this,
c)},arrangeControls:function(){k[0<this.infographicsSelectDiv.children.length?"show":"hide"](this.infographicsSelectDiv);k[this.showAreaTitle?"show":"hide"](this.areaTitleDiv);this.domNode.style.width="";this.areaTitleDiv.style.marginLeft="";this.areaTitleInnerDiv.style.maxWidth="";this.rightSideControlsBlock.style.position=this.stretchToolbarNode?"absolute":"static";this.stretchToolbarNode&&(this.domNode.style.width=this.stretchToolbarNode.clientWidth+"px",this._processStretchSpecialCases(this.stretchToolbarNode));
this.syncRightSideVisibility()},_processStretchSpecialCases:function(c){function b(b){return k.isHidden(b)?0:b.clientWidth+a(b)}function a(a){return k.isHidden(a)?0:e.get(a,"marginLeft")+e.get(a,"marginRight")}this.showAreaTitle&&(c=c.clientWidth,c-=b(this.infographicsSelectDiv),c-=b(this.rightSideControlsBlock),c-=b(this.areasSelectDiv),c-=a(this.areaTitleDiv),this.areaTitleInnerDiv.style.maxWidth=c+"px",k.isHidden(this.infographicsSelectDiv)||k.isHidden(this.infographicsSelectDiv)||(this.areaTitleDiv.style.marginLeft=
Math.min(c-this.areaTitleDiv.clientWidth,(this.domNode.clientWidth-this.areaTitleDiv.clientWidth)/2-b(this.infographicsSelectDiv))+"px"))},hasVisibleControls:function(){return[this.infographicsSelectDiv,this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout)},syncRightSideVisibility:function(){k.show(this.rightSideControlsBlock);var c=[this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout);
k[c?"show":"hide"](this.rightSideControlsBlock)}})})},"esri/dijit/geoenrichment/utils/InvokeUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(g,f){return{invoke:function(e,k,c,b,a){e.__invokeTimeoutIDs||(e.__invokeTimeoutIDs={});var d=e.__invokeTimeoutIDs[k];if(d){if(null==c||!1===b)return d.dfd.promise;clearTimeout(d.handle)}d||(d=e.__invokeTimeoutIDs[k]={dfd:new g});d.handle=setTimeout(function(){delete e.__invokeTimeoutIDs[k];f(a?e[k].apply(e,
a):e[k](),function(a){d.dfd.resolve(a)},function(a){d.dfd.reject(a)})},c||0);return d.dfd.promise},hasPendingInvoke:function(e,f){return!(!e.__invokeTimeoutIDs||!e.__invokeTimeoutIDs[f])},cancelInvoke:function(e,f){e.__invokeTimeoutIDs&&e.__invokeTimeoutIDs[f]&&(clearTimeout(e.__invokeTimeoutIDs[f].handle),delete e.__invokeTimeoutIDs[f])}}})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerViewModel":function(){define("dojo/_base/declare dojo/aspect esri/dijit/geoenrichment/promise/all ./core/layout/LayoutBuilder ./core/themes/ThemeLibrary ./core/themes/ReportThemes ./core/supportClasses/map/layers/locator/LocatorPointsController ./core/supportClasses/map/layers/std/StdPolygonsController ./core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController ./core/supportClasses/EditorUnits ../utils/ColorUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m){return g(null,{isReportPlayerViewModel:!0,isGraphicStyle:!1,layoutBuilder:null,dynamicReportInfo:null,enableDataDrilling:!1,showDataDrillingInsidePanel:!1,preInitialize:function(){this.layoutBuilder=this.layoutBuilder||new k;return this.layoutBuilder.initCoreComponents()},initialize:function(a,b){this.preInitialize();return this.layoutBuilder[a?"initClassicComponents":"initGraphicComponents"](b)},_animationAllowed:!1,_animationSuspended:!1,isAnimationAllowed:function(){return this._animationAllowed&&
!this._animationSuspended},setAnimationAllowed:function(a){this._animationAllowed=a},setAnimationSuspended:function(a){this._animationSuspended=a},_theme:null,getCurrentTheme:function(a){return a||this._theme},setTheme:function(a){this._theme=a||c.getReportThemeById(b.GRAPHIC)},getTableDefaultStyles:function(a,b){a=this.getCurrentTheme(a).table.overrideStyles;return b?a[b]:a},getChartDefaultStyles:function(a){return this.getCurrentTheme(a).chart},getDocumentDefaultStyles:function(a){return this.getCurrentTheme(a).document},
getInfographicDefaultStyles:function(a){return this.getCurrentTheme(a).infographic},getStaticInfographicDefaultStyles:function(a){return(a=this.getInfographicDefaultStyles(a))&&a.staticInfographic},isLightDocumentTheme:function(a){return m.isLightColor(this.getCurrentTheme(a).document.backgroundColor)},setDynamicReportInfo:function(a){this.dynamicReportInfo=a;this.isGraphicStyle=!a.isClassic},getDynamicImageFunc:function(a,b,d){},enrichFieldData:function(a){},_locatorPointsControllers:null,getLocatorPointsController:function(b,
d){var h=b.calculatorName+"_"+d;this._locatorPointsControllers=this._locatorPointsControllers||{};var c=this._locatorPointsControllers[h];c||(c=this._locatorPointsControllers[h]=new a(b,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,d),f.after(c,"destroy",function(){delete this._locatorPointsControllers[h]}.bind(this)));return c},_stdPolygonsControllers:null,getStdPolygonsController:function(a,b){this._stdPolygonsControllers=this._stdPolygonsControllers||{};var h=a+"_"+(b||
0),c=this._stdPolygonsControllers[h];c||(c=this._stdPolygonsControllers[h]=new d(a,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,b),f.after(c,"destroy",function(){delete this._stdPolygonsControllers[h]}.bind(this)));return c},loadAllStdFeatures:function(){var a=[],b;for(b in this._stdPolygonsControllers)a.push(this._stdPolygonsControllers[b].loadAllFeatures());return e(a)},_thisAreasHighlightController:null,getThisAreasHighlightController:function(){this._thisAreasHighlightController||
(this._thisAreasHighlightController=new h,f.after(this._thisAreasHighlightController,"destroy",function(){this._thisAreasHighlightController=null}.bind(this)));return this._thisAreasHighlightController},_legendControllers:null,registerLegendController:function(a,b,d){this._legendControllers=this._legendControllers||{};var h=this._legendControllers[b]=this._legendControllers[b]||{};h[d]=a;var c=a.addCallback(function(b,d){if(d)for(var c in h)d=h[c],d!==a&&d.setLegendVisible(b)},"viewModel");return{remove:function(){delete h[d];
c.remove()}}},_benchmarkController:null,_benchmarkDisabled:!1,getBenchmarkController:function(){return!this._benchmarkDisabled&&this._benchmarkController},registerBenchmarkController:function(a){this._benchmarkController&&this._benchmarkController.destroy();this._benchmarkController=a;f.after(this._benchmarkController,"destroy",function(){this._benchmarkController=null}.bind(this))},isBenchmarkedArea:function(a){return this._benchmarkDisabled?!1:"number"===typeof a&&this._benchmarkController&&0<=
this._benchmarkController.getAreaIndex()&&this._benchmarkController.getAreaIndex()!==a},setBenchmarkDisabled:function(a){this._benchmarkDisabled=a},reset:function(){[this._locatorPointsControllers,this._stdPolygonsControllers].forEach(function(a){a&&Object.keys(a).forEach(function(b){(b=a[b])&&b.destroy()})});this._stdPolygonsControllers=this._locatorPointsControllers=null;this._thisAreasHighlightController&&this._thisAreasHighlightController.destroy();this._thisAreasHighlightController=null},canExportToExcel:function(){return!1},
exportToExcel:function(a){},pepareExportToExcelParameters:function(a){},getUnits:function(){return"px"},provideUnits:function(a){return l.provideUnits(a,this.getUnits())},roundForUnits:function(a){return l.round(a,this.getUnits())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/layout/LayoutBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/Deferred","dojo/dom-construct"],function(g,f,e,k){return g(null,{_moduleMap:null,_getModulePaths:function(){return{core:{section:"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionRenderer",
grid:"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid",image:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/image/ImageRenderer",chart:"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartRenderer",map:"esri/dijit/geoenrichment/ReportPlayer/core/map/MapRenderer"},classic:{reportContainer:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainer/ReportContainer"},graphicCore:{shape:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/shape/ShapeRenderer",infographic:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicRenderer"},
graphic_fullPages:{reportContainerGrid:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/ReportContainerGrid"},graphic_panelsInSlides:{reportContainerPagination:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerPagination/ReportContainerPagination",infographicPage:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPage"},graphic_panelsInStack:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},
graphic_panelsInStackAll:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",reportContainerStackAll:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStackAll",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},graphic_panelsInRow:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"}}},
initCoreComponents:function(){var c=this._getModulePaths();return this._initPaths(f.mixin({},c.core,c.graphicCore))},initClassicComponents:function(){var c=this._getModulePaths();return this._initPaths(f.mixin({},c.core,c.classic))},initGraphicComponents:function(c){var b=this._getModulePaths();return this._initPaths(f.mixin({},b.core,b.graphicCore,b["graphic_"+c]||b.graphic_fullPages))},_initPaths:function(c){var b=this;this._moduleMap=this._moduleMap||{};var a=[],d;for(d in c)a.push({id:d,path:c[d]});
var h=new e;require(a.map(function(a){return a.path}),function(){for(var d=0;d<arguments.length;d++)b._moduleMap[a[d].id]=arguments[d];h.resolve()});return h.promise},createElement:function(c,b,a,d){switch(c){case "grid":case "reportContainer":case "reportContainerGrid":case "reportContainerPagination":case "reportContainerStack":case "reportContainerStackAll":case "infographicPage":case "infographicPageStack":return new this._moduleMap[c](b,a?k.create("div",null,a,d):void 0);case "section":return this._moduleMap.section.createSection(b,
a,d);case "emptySection":return this._moduleMap.section.createEmptySection(b,a,d);case "image":return this._moduleMap.image.createImageContainer(b);case "shape":return this._moduleMap.shape.createShapeContainer(b);case "chart":return this._moduleMap.chart.createChartPage(b);case "infographic":return this._moduleMap.infographic.createInfographicPage(b);case "map":return this._moduleMap.map.createMapContainer(b)}return!1},getClass:function(c){return this._moduleMap[c]}})})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a){function d(a){a=a||{};a=a.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:a,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:a,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:a,fontSize:24},
variableLabelStyleContrast:{fontFamily:a,fontSize:24},variableDescriptionStyle:{fontFamily:a,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function h(){return{style:f.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function l(a){a=a||{};var b=a.defaultFontFamilty||"Avenir Next",c=a.defaultFontSize||13;return{document:{fontSize:c,fontFamily:b,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:h()},icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},
table:{dataTablePadding:5},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:e.SOLID,titleStyle:{fontFamily:b,fontSize:16},xAxis:{gridLinesStyle:e.SOLID,axisStyle:{fontFamily:b,fontSize:9},titleStyle:{fontFamily:b,fontSize:c}},yAxis:{gridLinesStyle:e.SOLID,baseLineStyle:e.SOLID,axisStyle:{fontFamily:b,fontSize:9},titleStyle:{fontFamily:b,fontSize:c}},dataLabelsStyle:{fontFamily:b,fontSize:10},legendStyle:{fontFamily:b,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:b,fontSize:10},minVariableLabelStyle:{fontFamily:b,
fontSize:16},maxVariableLabelStyle:{fontFamily:b,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:b}},waffle:{dataValueStyle:{fontFamily:b,fontSize:30},dataLabelStyle:{fontFamily:b,fontSize:16}}},infographic:{staticInfographic:d(a)}}}var m={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,
defaultStaticInfographic:d(),standardRamps:[{id:k.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,
colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:k.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},
{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF","#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8",
"#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},n={};m.standardRamps.forEach(function(a){var d=g.mixin({},a.additional);d.id=a.id;var h=l({defaultFontFamilty:a.id===k.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:a.id===k.CLASSIC?10:13});c.applyThemeColorsToTheme({theme:h,colors:a.colors});b.populateObject(h,d,!0);m[a.id]=h;n[a.id]=h});m.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");
m.getReportThemeById=function(a){return n[a]};m.isStandardTheme=function(a){return!!n[a]};m.getStandardThemes=function(){return Object.keys(n).map(function(a){return n[a]})};m.getDefaultStaticInfographicSettings=function(){return g.clone(m.defaultStaticInfographic)};m.getDefaultBorderSettings=function(){return h()};m.getDefaultTheme=function(a){return l(a)};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var g={NONE:"none",ALL:"all",
INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.ALL}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],function(){var g={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},
toGFXValue:function(f,e){switch(f){case "Dashed":return 1>e?"LongDash":"Dash";case "Dotted":return 1>e?"Dash":"Dot";default:return"Solid"}}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],
function(g,f,e){function k(a){var b=f.isLightColor(a);return f.transform(a,{dv:b?-7:7}).toHex()}var c={getPanelTitleColor:function(a){var b=f.isLightColor(a);return f.transform(a,{dv:b?-50:50}).toHex()},getChartElementBackgroundColor:function(a){var b=f.isLightColor(a);return f.transform(a,{dv:b?-13:13}).toHex()}},b={getThemeColors:function(a){return[a.document.backgroundColor,a.icon.backgroundColor,a.highlightedIcon.backgroundColor]},generateChartColors:function(a,b,c){c=c||{};var d=c.gradientFactor||
1,h=[b,f.transform(b,{dv:-20*d}).toHex(),f.transform(b,{dv:-40*d}).toHex(),f.transform(b,{dv:-50*d}).toHex(),f.transform(b,{dv:-55*d}).toHex(),f.transform(b,{dv:-60*d}).toHex(),f.transform(b,{dv:-65*d}).toHex(),f.transform(b,{dv:-70*d}).toHex()];if(c.numLighterColors)for(var e=0;e<c.numLighterColors;e++)h.unshift(f.transform(b,{dv:20*d*(e+1),ds:-20*(e+1)}).toHex());a&&a!==b&&h.unshift(a);var l={};return h.filter(function(a){return l[a]?!1:l[a]=!0})},applyThemeColorsToTheme:function(a){var d=a.theme,
l=a.colors,m=a.preserveForegroundColor,n=a.chartColors,g=a.colors3series;a=a.preprocessGeneratedThemeFunc;var t=l[0],q=l[1],l=l[2],v=m&&d.chart&&d.chart.dataLabelsStyle&&d.chart.dataLabelsStyle.color||f.getContrastColor(t).toHex(),m=m&&d.document.color||("#FFFFFF"===t.toUpperCase()?"#4C4C4C":v),r=f.isLightColor(t),u=c.getChartElementBackgroundColor(t),y=c.getPanelTitleColor(t),w=f.transform(t,{dv:r?-33:33}).toHex(),A={overrideStyles:{Default:{color:m,backgroundColor:"transparent"},TableHeader:{color:f.getContrastColor(q,
void 0,void 0,200).toHex(),backgroundColor:q},AlternatingRow:{color:m,backgroundColor:f.transform(t,{dv:r?-7:7}).toHex()},ReportTitle:{color:l,backgroundColor:"transparent"},GreyText:{color:w,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},B={lineColor:v,gridLinesColor:v,gridStripesColor:k(t),gridStripesColorAlt:"transparent",axisStyle:{color:v},titleStyle:{color:v}},C={lineColor:v,gridLinesColor:v,gridStripesColor:k(t),gridStripesColorAlt:"transparent",baseLineColor:v,
axisStyle:{color:v},titleStyle:{color:v}},z=f.isLightColor(t),t={document:{color:m,backgroundColor:t,border:{color:w}},icon:{backgroundColor:q},highlightedIcon:{backgroundColor:l},table:A,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:y},dataLabelsAltColor:v,dataLabelsStyle:{color:v},xAxis:B,yAxis:C,legendStyle:{color:v,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:v}},comparisonInfo:{lineColor:z?"#666666":"#BBBBBB"},icon:{backgroundColor:q},ring:{ringBackground:{backgroundColor:u}},
gauge:{dataLabelStyle:{color:q},othersColor:u,arrowIndicator:{lineColor:y,backgroundColor:y}},waffle:{dataValueStyle:{color:q},dataLabelStyle:{color:q},othersColor:u},columnBarBackground:{backgroundColor:u}},infographic:{backgroundColor:"transparent",agePyramid:{theme:r?"light":"common",male:{backgroundColor:q},female:{backgroundColor:l}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:q},highlightedIcon:{backgroundColor:l},iconBarBackground:{},titleLine:{color:f.transform(t,
{dv:r?-40:40}).toHex()},titleStyle:{color:y},variableLabelStyle:{color:q},variableLabelStyleHighlighted:{color:l},variableLabelStyleContrast:{color:t},variableDescriptionStyle:{color:f.transform(t,{dv:r?-50:50}).toHex()}}}};a&&a(t);e.populateObject(d,t,!0);d.chart.colors=n&&n.length?n:b.generateChartColors(q,l);d.chart.colors3series=g},applyTextStyleToTheme:function(a,c){function d(a,b){var d=g.mixin({},c);a&&delete d.color;b||delete d.fontSize;return d}c=b.filterTextStyles(c);var h={document:d(!1,
!0),table:{overrideStyles:{Default:d(!1,!0),TableHeader:d(!1,!0),AlternatingRow:d(!1,!0),ReportTitle:d(!1,!0),GreyText:d(!1,!0),BlueText:d(!1,!0)}},chart:{titleStyle:d(),dataLabelsStyle:d(),xAxis:{axisStyle:d(),titleStyle:d()},yAxis:{axisStyle:d(),titleStyle:d()},legendStyle:d(),minMaxLegend:{titleStyle:d(),minVariableLabelStyle:d(!0),maxVariableLabelStyle:d(!0)},gauge:{dataLabelStyle:d()},waffle:{dataValueStyle:d(),dataLabelStyle:d()}},infographic:{staticInfographic:{titleStyle:d(),variableLabelStyle:d(),
variableLabelStyleHighlighted:d(),variableLabelStyleContrast:d(),variableDescriptionStyle:d()}}};e.populateObject(a,h,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};b.filterTextStyles=function(b){var d={},c;for(c in a){var e=b[c];void 0!==e&&(d[c]=e)}return d};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/locator/LocatorPointsController":function(){define("dojo/_base/declare dojo/on dijit/Destroyable ../../../../../dataProvider/supportClasses/data/AreaDataUtil ../../MapEventUtil esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(g,f,e,k,c,b){return g(e,{_info:null,_fieldData:null,_isMultiFeature:null,_calcDataArray:null,_currentFeatureIndex:null,_layerNames:null,constructor:function(a,b,c,e){this._info=a;this._fieldData=b;this._isMultiFeature=c;this._currentFeatureIndex=e;this._layerIndexes={};this._layerNames={};this._rendererJsons={};this._mapInfos={};this._graphicLayerInfos={}},_getCalculatorName:function(){return this._info.calculatorName},getVariableObjects:function(){return this._info.variableObjects},getLayerID:function(){return this._info.layerID},
getLayerUrl:function(){return this._info.layerUrl},getLayerName:function(a){return this._layerNames[a]||this._info.layerName},setLayerName:function(a,b){this._layerNames[a]=b},getCalculatorDataArray:function(){if(!this._calcDataArray)if(this._isMultiFeature){var a=k.combineAreaDataObjectCalculators(this._fieldData.areaData,this._getCalculatorName());this._calcDataArray=k.removeDuplicacatedCalcData(a.thisAreas.concat(a.comparisonLevels))}else this._calcDataArray=(a=k.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._getCalculatorName()))&&[a.data].concat(a.comparisonLevels);return this._calcDataArray},_rendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a){return this._layerIndexes[a]},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);
return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_getPointIndexForCellFunc:null,_getCellForPointAtFunc:null,_highlightedCell:null,setLocatorTableCallbacks:function(a){this._getPointIndexForCellFunc=a.getPointIndexForCellFunc;this._getCellForPointAtFunc=a.getCellForPointAtFunc},registerLocatorTable:function(a){var b=this,c;a.set("highlightRowsOnHover",!0);f(a.domNode,"mouseover,mousemove",function(){var d=a.getOverFieldCell();d&&d!==c&&(c=d,b._highlightGraphicForFieldCell(c))});f(a.domNode,
"mouseout",function(){b._highlightGraphicForFieldCell(null);c=null})},_highlightRowForGraphic:function(a,b){this._highlightedCell&&(this._highlightedCell.parentGrid&&this._highlightedCell.parentGrid.setCellRowHighlighted(this._highlightedCell,!1),this._highlightedCell=null);b&&this._getCellForPointAtFunc&&(a=a.getPointIndexForGraphicFunc(b),(a=this._getCellForPointAtFunc(a))&&a.parentGrid&&(a.parentGrid.setCellRowHighlighted(a,!0),this._highlightedCell=a))},_graphicLayerInfos:null,setLocatorPointsLayer:function(a,
b,c,e){this._unSetInfo(a);b={map:c,graphicsLayer:b,getPointIndexForGraphicFunc:e.getPointIndexForGraphicFunc,getGraphicForPointAtFunc:e.getGraphicForPointAtFunc,setGraphicHighlightedFunc:e.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,overGraphic:null};this._graphicLayerInfos[a]=b;this._addLayerListeners(b)},_addLayerListeners:function(a){var d=this,h=a.map,e=a.graphicsLayer;a.layerMouseOverHandle=c.onLayerMouseOver(e,h,function(c){c.graphic&&
c.graphic._graphicsLayer===e&&a.overGraphic!==c.graphic&&((a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,d._removeHighlight(a),a.overGraphic=c.graphic,d._highlightRowForGraphic(a,a.overGraphic),a.setGraphicHighlightedFunc(a.overGraphic,!0),b.isMobileDevice())?h.infoWindow&&(h.infoWindow.setFeatures([a.overGraphic]),h.infoWindow.show(c.mapPoint,{closestFirst:!0})):a.layerMouseOutHandle=f.once(e,"mouse-out",function(b){d._removeHighlight(a,!0)}))})},_highlightGraphicForFieldCell:function(a){for(var b in this._graphicLayerInfos){var c=
this._graphicLayerInfos[b];this._removeHighlight(c);if(a){var e=this._getPointIndexForCellFunc(a);if(e=c.getGraphicForPointAtFunc(e))c.setGraphicHighlightedFunc(e,!0),c.highlightedGraphic=e}}},_removeHighlight:function(a,b){this._highlightRowForGraphic(a,null);a.highlightedGraphic&&(a.setGraphicHighlightedFunc(a.highlightedGraphic,!1),a.highlightedGraphic=null);a.overGraphic&&a.setGraphicHighlightedFunc(a.overGraphic,!1);a.overGraphic=null;!b&&a.map.infoWindow&&a.map.infoWindow.hide()},setPointVisibleAt:function(a,
b){for(var d in this._graphicLayerInfos){var c=this._graphicLayerInfos[d].getGraphicForPointAtFunc(a);if(c)c[b?"show":"hide"]()}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(g,f,e){var k={getAreaDataValue:function(c){function b(a){!1!==r&&(u=a[r]);void 0===u&&(u=a[d])}function a(){var a=l[m];a&&(0<=k?b(a.comparisonLevels[k]):b(a.data))}var d=c.fieldName,h=c.fieldData,l=c.areaDataObject,m=c.calculatorName,n=c.featureIndex,k=c.comparisonIndex,
g=c.ignoreMetadata,q=c.isMultiFeature;if(!e.showAreaDataUtilUndefinedData&&d){var v=d.indexOf("."),r=!1;-1!==v&&(r=d.substr(v+1));m||-1===v||(m=d.substr(0,v));n=void 0===n?0:Number(n)||0;if(l=c.areaDataObject||h.areaData[n]){var u;q&&m===f.AREA_ATTRIBUTES_CALCULATOR_NAME&&!g&&h&&b(h.metadata);void 0===u&&a();if(m)return u;void 0===u&&!g&&h&&b(h.metadata);if(void 0===u)for(var y in l)if(c=l[y],0<=k?b(c.comparisonLevels[k]):b(c.data),void 0!==u)break;return u}}},getAreaDataObjectCalculator:function(c,
b,a){if(!c)return null;var d=c[b];!d&&a&&(d=c[b]=k.createCalculator());return d},createCalculator:function(c,b){return{data:c||{},comparisonLevels:b||[]}},combineAreaDataObjectCalculators:function(c,b,a){var d=[],h=[];c.forEach(function(a){if(a=k.getAreaDataObjectCalculator(a,b))d.push(a.data),h=h.concat(a.comparisonLevels)});a&&a.removeDuplicates&&(h=k.removeDuplicacatedCalcData(h));return{thisAreas:d,comparisonLevels:h}},removeDuplicacatedCalcData:function(c){if(!c.length)return c;var b=[],a={},
d=Object.keys(c[0]);c.forEach(function(c){var h=function(a){var b="";d.forEach(function(d){b+=a[d]+";"});return b}(c);a[h]||(a[h]=!0,b.push(c))});return b},setAreaDataValue:function(c,b,a,d,h){h=void 0===h?0:Number(h)||0;k.setAreaDataObjectValue(c,b,a[h],d)},setAreaDataObjectValue:function(c,b,a,d){a&&d&&null!==b&&void 0!==b&&(k.getAreaDataObjectCalculator(a,d,!0).data[c]=b)},mergeAreaData:function(c,b){b.forEach(function(a,b){(b=c[b])&&k.mergeAreaDataObjects(b,a)})},mergeAreaDataObjects:function(c,
b){for(var a in c){var d=c[a],h=b[a];h?d.comparisonLevels.length!==h.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(g.mixin(h.data,d.data),d.comparisonLevels.forEach(function(a,b){g.mixin(h.comparisonLevels[b],a)})):b[a]=d}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(b)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil"],
function(g){var f={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromVariable:function(e,k){if(!e)return"";
var c="";e.isSiteAttribute?c=e.attribute.name:e.isWebMap?c=e.webMapFieldName||e.fieldName:(e=(e.fullName||e).replace(/_|\.|\s/g,""),k=k||"n",e+="n"===k?"":"_"+k,f.FIRST_SYMBOL_IS_NUMBER_RE.test(e)&&(e="_"+e),c=e.toUpperCase());return f._validateName(c)},createFieldNameFromScript:function(e){e=e.name;f.SCRIPT_PREFIX_RE.test(e)&&(e=e.replace(f.SCRIPT_PREFIX_RE,""));return f._validateName(f.SCRIPT_PREFIX+e.replace(/\.|-/g,""))},_validateName:function(e){return f._checkXMLValidName(f._maskUnicodeInName(e))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(e){return f._XML_MASK_NAME_RE.test(e)?e.replace(f._XML_MASK_NAME_RE,"$1_$2"):e},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(e){return g.maskWithUnicodeXML(e).replace(f._XML_UNICODE_RE,"")},renderScriptName:function(e){return e.replace(f.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(e,k){e&&(e.templateName=k?k+"."+e.name:e.isWebMap?f.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+e.name:e.isSiteAttribute?f.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+e.name:f.DATA_COLLECTIONS_CALCULATOR_NAME+"."+e.name)},getCalculatorName:function(e){return e&&e.templateName&&e.templateName.substr(0,e.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(e){return f.getCalculatorName(e)===f.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(e,f){e&&e.templateName&&(e.templateName=f+e.templateName.substr(e.templateName.indexOf(".")))},refreshNameAndTemplateName:function(e){e.statefulName&&e.fullName&&(e.name=f.createFieldNameFromVariable(e,
e.statefulName.charAt(0)),e.templateName=e.templateName.substr(0,e.templateName.lastIndexOf(".")+1)+e.name)}};return f})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function g(f,e){return"string"!==typeof f?f:String(f).replace(/[^\x20-\x7f]/g,function(f){f=f.charCodeAt(0).toString(16).toUpperCase();return e(f)})}return{maskWithUnicode:function(f){return g(f,function(e){return"\\u000".substr(0,6-e.length)+e})},maskWithUnicodeXML:function(f){return g(f,function(e){return"\x26#x000".substr(0,
7-e.length)+e+";"})},removeUnicode:function(f,e){return g(f,function(f){return e||""})},removeXMLMasks:function(f,e){return f.replace(/&#x.*?;/g,e||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],function(){return{showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",
mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1,showStatisticsInTooltips:!1},table:{printGridRefresh:!1},emulateErrors:{playerError:!1,
contentErrors:!1,themeParseError:!1,metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/MapEventUtil":function(){define(["dojo/on","dojo/sniff","esri/dijit/geoenrichment/utils/DeviceUtil"],function(g,f,e){return{onLayerMouseOver:function(k,c,b){var a=e.isMobileDevice();k=a?k:f("touch")?c:k;a=a?"mouse-over":f("touch")?"mouse-down, mouse-move":"mouse-move";return g(k,a,b)}}})},
"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsController":function(){define("dojo/_base/declare esri/dijit/geoenrichment/Deferred dojo/on esri/dijit/geoenrichment/promise/all dijit/Destroyable ../../MapEventUtil ../../../../../dataProvider/supportClasses/data/AreaDataUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),function(g,f,e,k,c,b,a,d){return g(c,{_calculatorName:null,_fieldData:null,_isMultiFeature:null,_currentFeatureIndex:null,_hasRegisteredLayers:!1,
_hasRegisteredInfographics:!1,constructor:function(a,b,d,c){this._calculatorName=a;this._fieldData=b;this._isMultiFeature=d;this._currentFeatureIndex=c;this._layerIndexes={};this._rendererJsons={};this._labelRendererJsons={};this._mapInfos={};this._graphicLayerInfos={};this._pendingLayerInfos={}},_rendererJsons:null,_labelRendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},getLabelRendererJson:function(a){return this._labelRendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=
b},setLabelRendererJson:function(a,b){this._labelRendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a,b){var c=d.getGeographiesModel().getLevels(),h=-1;c.some(function(a,d){if(a.id===b)return h=d,!0});return this._layerIndexes[a]+h/c.length},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);return a},setMapInfo:function(a,b){this._mapInfos[a]=
b},_attributeFields:null,getAttributeFields:function(){return this._attributeFields},setAttributeFields:function(a){this._attributeFields=a},_shownFeatureAttributes:null,_featuresChangedHandlers:null,getShownFeatureAttributes:function(){return this._shownFeatureAttributes},setShownFeaturesChangedListener:function(a){var b=this;this._featuresChangedHandlers=this._featuresChangedHandlers||[];this._featuresChangedHandlers.push(a);return{remove:function(){var d=b._featuresChangedHandlers;d&&d.splice(d.indexOf(a),
1)}}},setShownFeatureAttributes:function(a){this._shownFeatureAttributes=a;this._featuresChangedHandlers&&this._featuresChangedHandlers.forEach(function(a){a()})},_allFeatureAttributes:null,_loadAllFeaturesHandlers:null,getAllFeatureAttributes:function(){return this._allFeatureAttributes||[]},setAllFeatureAttributes:function(a){this._allFeatureAttributes=a},setLoadAllFeaturesListener:function(a){var b=this;this._loadAllFeaturesHandlers=this._loadAllFeaturesHandlers||[];this._loadAllFeaturesHandlers.push(a);
return{remove:function(){var d=b._loadAllFeaturesHandlers;d&&d.splice(d.indexOf(a),1)}}},loadAllFeatures:function(){return this._loadAllFeaturesHandlers&&k(this._loadAllFeaturesHandlers.map(function(a){return a()}))},saveGeometryInCalculatorData:function(b,d){var c;c=(c=this._isMultiFeature?a.combineAreaDataObjectCalculators(this._fieldData.areaData,this._calculatorName):a.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],this._calculatorName))&&c.comparisonLevels||[];
var h;c.some(function(a){if(a.StdGeographyLevel&&a.StdGeographyLevel===b.StdGeographyLevel&&a.StdGeographyID===b.StdGeographyID)return h=a,!0});h&&(h[d]=b[d])},_highlightInfographicForAttributesFunc:null,_registerInfographicDfd:null,registerInfographic:function(a){this._highlightInfographicForAttributesFunc=a.highlightInfographicForAttributes;this._registerInfographicDfd=new f;this._hasRegisteredLayers&&this._registerInfographicDfd.resolve();this._hasRegisteredInfographics||(this._hasRegisteredInfographics=
!0,this._doRegisterLayers());return this._registerInfographicDfd.promise},_graphicLayerInfos:null,_pendingLayerInfos:null,setStdPolygonsLayer:function(a,b,d,c){this._unSetInfo(a);this._pendingLayerInfos[a]={map:d,graphicsLayer:b,getGraphicForAttributesFunc:c.getGraphicForAttributesFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null};this._hasRegisteredInfographics&&this._doRegisterLayers();this._hasRegisteredLayers||
(this._hasRegisteredLayers=!0,this._registerInfographicDfd&&this._registerInfographicDfd.resolve())},_doRegisterLayers:function(){for(var a in this._pendingLayerInfos){var b=this._pendingLayerInfos[a];this._graphicLayerInfos[a]=b;this._addLayerListeners(b)}this._pendingLayerInfos={}},_addLayerListeners:function(a){var d=this,c=a.graphicsLayer,h;a.layerMouseOverHandle=b.onLayerMouseOver(c,a.map,function(b){b.graphic&&b.graphic._graphicsLayer===c&&h!==b.graphic&&(a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),
a.layerMouseOutHandle=null,h&&a.setGraphicHighlightedFunc(h,!1),h=b.graphic,d._highlightInfographicForAttributesFunc(h.attributes),a.setGraphicHighlightedFunc(h,!0),a.layerMouseOutHandle=e.once(c,"mouse-out",function(b){d._highlightInfographicForAttributesFunc(null);h&&a.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAttributes:function(a){for(var b in this._graphicLayerInfos){var d=this._graphicLayerInfos[b];d.highlightedGraphic&&(d.setGraphicHighlightedFunc(d.highlightedGraphic,
!1),d.highlightedGraphic=null);if(a){var c=d.getGraphicForAttributesFunc(a);c&&(d.setGraphicHighlightedFunc(c,!0),d.highlightedGraphic=c)}}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(g){function f(){if(!k||!k.hierarchies)return"census";var a=k.hierarchies[0].ID;if(1==k.hierarchies.length)return a;if(k.defaultDatasetID)for(var b in k.hierarchies){var d=k.hierarchies[b];if(d.datasets&&d.datasets.some(function(a){return a==k.defaultDatasetID})){a=d.ID;break}}return a}var e={},k;e.getCountryID=function(){return k&&k.id};e.getCurrencySymbol=
function(){return k&&k.currencySymbol||"$"};e.getCurrencyFormat=function(){if(k&&k.currencyFormat)return k.currencyFormat;var a=e.getCurrencySymbol();return a+"0;-"+a+"0"};e.setCountry=function(a){k=a};var c,b;e.getSingleUnits=function(){return c};e.getPluralUnits=function(){return b};e.setSingleAndPluralUnits=function(a,d){c=a;b=d};var a;e.getHierarchyID=function(){return a};e.setHierarchyID=function(b){a=b||f()};var d;e.getGeographiesModel=function(){return d};e.setGeographiesModel=function(a){d=
a};e.toJson=function(){return{country:{id:e.getCountryID(),currencySymbol:e.getCurrencySymbol(),currencyFormat:e.getCurrencyFormat()},hierarchy:a,geographiesModel:d&&d.toJson()}};e.fromJson=function(b){b&&(k=b.country,a=b.hierarchy,d=b.geographiesModel&&new g(b.geographiesModel))};return e})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare","dojo/i18n!esri/nls/jsapi"],function(g,f){f=f.geoenrichment.dijit.ReportPlayer.ReportPlayer;
return g(null,{countryID:null,hierarchyID:null,_levelsCache:null,_levels:null,_countryLevel:null,constructor:function(e){this.countryID=e.countryID;this.hierarchyID=e.hierarchyID;this._initWithLevels(e.levels)},_initWithLevels:function(e){this._levels=e;this._levelsCache={};this._levels.forEach(function(e){this._levelsCache[e.id]=e;e.adminLevel&&(this._levelsCache[e.adminLevel]=e);e.isWholeCountry&&(this._countryLevel=e)},this)},getLevels:function(e){return e?this._levels.filter(function(e){return!e.isWholeCountry}):
this._levels.slice()},getLevel:function(e){return this._levelsCache[e]},getLevelPluralName:function(e){return(e=this.getLevel(e))?e.isWholeCountry?f.wholeCountry:e.name||e.pluralName:null},getCountryLevel:function(){return this._countryLevel},toJson:function(){return{countryID:this.countryID,hierarchyID:this.hierarchyID,levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred",
"dojo/on","dijit/Destroyable","../../MapEventUtil"],function(g,f,e,k,c){return g(k,{_hasRegisteredLayers:!1,_hasRegisteredTables:!1,constructor:function(b){this._graphicLayerInfos={};this._registerTableDfds=[];this._highlightTableForAreaIndexFuncs=[];this._pendingLayerInfos={}},_highlightTableForAreaIndexFuncs:null,_registerTableDfds:null,registerTable:function(b){this._highlightTableForAreaIndexFuncs.push(b.highlightTableForAreaIndex);b=new f;this._registerTableDfds.push(b);this._hasRegisteredLayers&&
this._doRegisterTables();this._hasRegisteredTables||(this._hasRegisteredTables=!0,this._doRegisterLayers());return b.promise},_doRegisterTables:function(){this._registerTableDfds.forEach(function(b){b.resolve()});this._registerTableDfds.length=0},_graphicLayerInfos:null,_pendingLayerInfos:null,setThisAreaLayer:function(b,a,d,c){this._unSetInfo(b);this._pendingLayerInfos[b]={graphicsLayer:a,areaIndex:c.thisAreaIndex,getGraphicForAreaIndexFunc:c.getGraphicForAreaIndexFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,
layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,map:d};this._hasRegisteredTables&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._doRegisterTables())},_doRegisterLayers:function(){for(var b in this._pendingLayerInfos){var a=this._pendingLayerInfos[b];this._graphicLayerInfos[b]=a;this._addLayerListeners(a)}this._pendingLayerInfos={}},_addLayerListeners:function(b){var a=this,d=b.graphicsLayer,h;b.layerMouseOverHandle=c.onLayerMouseOver(d,
b.map,function(c){c.graphic&&c.graphic._graphicsLayer===d&&h!==c.graphic&&(b.layerMouseOutHandle&&b.layerMouseOutHandle.remove(),b.layerMouseOutHandle=null,h&&b.setGraphicHighlightedFunc(h,!1),h=c.graphic,a._highlightTableForAreaIndexFuncs.forEach(function(a){a(b.areaIndex)}),b.setGraphicHighlightedFunc(h,!0),b.layerMouseOutHandle=e.once(d,"mouse-out",function(d){a._highlightTableForAreaIndexFuncs.forEach(function(a){a(null)});h&&b.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAreaIndex:function(b){for(var a in this._graphicLayerInfos){var d=
this._graphicLayerInfos[a];d.highlightedGraphic&&(d.setGraphicHighlightedFunc(d.highlightedGraphic,!1),d.highlightedGraphic=null);var c=d.getGraphicForAreaIndexFunc(b);c&&(d.setGraphicHighlightedFunc(c,!0),d.highlightedGraphic=c)}},_unSetInfo:function(b){var a=this._graphicLayerInfos[b];delete this._graphicLayerInfos[b];a&&(a.layerMouseOverHandle&&a.layerMouseOverHandle.remove(),a.layerMouseOutHandle&&a.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));
this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/EditorUnits":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","dojo/i18n!esri/nls/jsapi"],function(g,f){f=f.geoenrichment.dijit.ReportPlayer.units;var e={},k=["px","pt","mm","cm","in"],c={px:0,pt:1,mm:1,cm:2,"in":2};e.getSupportedUnits=function(){return k};e.getShortName=function(b){return f.shortNames[b]};e.getLongName=function(b){return f.longNames[b]};
e.getLongNameWithUnits=function(b){return f.longNamesWithUnits[b]};e.getPlaces=function(b){return c[b]||0};e.round=function(b,a){return g.roundNumber(b,e.getPlaces(a))};e.provideUnits=function(b,a){return b.replace("${units}",e.getShortName(a))};return e})},"esri/dijit/geoenrichment/ReportPlayer/DataProviderGE":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/InfographicOptionsProvider ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/PortalManager ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A,B,C,z,E,G){return g([b,a,d],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,_infographicOptionsProvider:null,constructor:function(a){f.mixin(this,a);this._infographicOptionsProvider=new q},_getAttachmentsStore:function(a){return(new r(a)).initialize()},getCustomReports:function(a){return n.getCustomReports(a)},_currentContext:null,getReportData:function(a,b){var d=this,c=b&&b.progressCallback||function(){},g=
f.mixin({},a);g.portalUrl=G.getPortalUrl(g.portalUrl);h.parseSites(g);g.hierarchy||g.analysisAreas.some(function(a){if(a.geographies&&a.geographies[0].hierarchy)return g.hierarchy=a.geographies[0].hierarchy,!0});d.resetReportItemsCache&&n.resetCache();d._currentContext=g;g.analysisAreas=l.areasFromJson(g.analysisAreas);g.combinedAreasInfo=g.combinedAreasInfo&&l.combinedAreasInfoFromJson(g.combinedAreasInfo)||{};h.populateCombinedAreasInfo(g.combinedAreasInfo,g.analysisAreas);g.fieldData={runReportTaskIDs:null,
metadata:{},areaData:[],errors:[]};return e([k(n.tryFindReportIdByAlias(g),function(a){g.reportID=a||g.reportID}),this._discoverPortal(g),function(){return g.variables&&k(w.preprocessVariables(g.variables,g.portalUrl),function(a){g.variables=a})}()]).then(function(){return k(m.preprocessAreas(g,{analysisAreasLimit:d.analysisAreasLimit}),function(){c(.25);setTimeout(function(){d._onCreateReportStarted()});var a=g.attachmentsProvider?u(g.attachmentsProvider):d._getAttachmentsStore(g.analysisAreas),
b={initGE:v.initialize(),countryInfo:v.getCountryInfo(g.countryID),infographicOptions:d._infographicOptionsProvider.getInfographicOptions(g),attachmentsStore:a};g.reportID?(b.reportObject=n.getCustomReportByID(g),b.templateJsonInfo=p.getTemplateJsonByID(g,d.cacheTemplates),b.runReportResult=t.runReportAndGetData(g,a)):g.variables&&(b.reportObject=n.getFakeCustomReportByContext(g),b.templateJsonInfo=p.createTemplateJsonFromVariables(g),b.runReportResult=t.runReportFromVariables(g));return e(b).then(function(a){var b=
a.reportObject,d=a.infographicOptions,h=a.attachmentsStore,e=a.templateJsonInfo.templateJson,f=a.templateJsonInfo.templateVariableProvider,l=a.runReportResult;c(.75);if(!e||!b||!g.fieldData)return null;t.applyRunReportAndGetDataResults(l,g);z.setCountry(a.countryInfo.country);z.setHierarchyID(g.hierarchy);z.setGeographiesModel(a.countryInfo.geographiesModels[z.getHierarchyID()]);return k(h&&t.populateReportDataFromAttachmentsStore(g,h),function(){c(1);e.theme||(e.theme=B.getReportThemeById(b.isGraphicReport?
C.GRAPHIC:C.CLASSIC));return{isClassic:!b.isGraphicReport,isMultiFeature:b.isMultiFeature&&1<g.analysisAreas.length,reportType:b.type,reportTitle:g.reportTitle||b.title,templateJson:e,reportObject:b,fieldData:g.fieldData,analysisAreas:g.analysisAreas,combinedAreasInfo:g.combinedAreasInfo,reverseAnalysisAreasOnMap:g.reverseAnalysisAreasOnMap,infographicOptions:d,attachmentsStore:h,geClient:v.getClient(),templateVariableProvider:f,customLogo:g.customLogo,config:{portalUrl:g.portalUrl,geoenrichmentUrl:g.geoenrichmentUrl,
geometryServiceUrl:g.geometryServiceUrl,printMapTaskUrl:g.printMapTaskUrl,countryID:g.countryID,hierarchy:g.hierarchy,reportID:g.reportID,variables:g.variables}}})})})})},_discoverPortal:function(a){var b=this;return y.getPortalInfo(a.portalUrl).then(function(d){a.geoenrichmentUrl=a.geoenrichmentUrl||d.portal.helperServices.geoenrichment.url;var h=c.id.findCredential(a.portalUrl),h=h&&h.token;v.setGeoenrichmentUrl(a.geoenrichmentUrl,h);b._infographicOptionsProvider.setServerUrl(a.geoenrichmentUrl,
h);a.geometryServiceUrl=a.geometryServiceUrl||d.portal.helperServices.geometry.url;E.setGeometryServiceUrl(a.geometryServiceUrl);a.printMapTaskUrl=a.printMapTaskUrl||d.portal.helperServices.printTask.url;A.setPrintMapTaskUrl(a.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(a,b){var d=b.currentFeatureIndex||0,c=f.mixin({},a.fieldData);c.areaData=[c.areaData[d]];var h=[f.mixin({},a.analysisAreas[d])];m.removeGroupInfo(h);var e=a.infographicOptions&&this._infographicOptionsProvider.getInfographicOptionsFromJson(a.infographicOptions.toJsonAt(d)),
l=a.attachmentsStore;return{isClassic:a.isClassic,isMultiFeature:!1,reportType:a.reportType,reportTitle:b.reportTitle,templateJson:b.templateJson,reportObject:a.reportObject,fieldData:c,analysisAreas:h,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,infographicOptions:e,attachmentsStore:l&&{getImages:function(){l.supportsMultipleAreas&&l.setCurrentAnalysisAreaIndex(d);return l.getImages()},getAttributes:function(){l.supportsMultipleAreas&&l.setCurrentAnalysisAreaIndex(d);return l.getAttributes()},
getNotes:function(){l.supportsMultipleAreas&&l.setCurrentAnalysisAreaIndex(d);return l.getNotes()}},geClient:a.geClient,templateVariableProvider:a.templateVariableProvider,config:a.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){},enrichFieldData:function(a,b){return t.enrichFieldData(a,b)}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(g,f,e,k,c,b,a,d){var h={};return f(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){if(this._initCommandsPromise)return this._initCommandsPromise;var c=new k;if(d.modules.exportCommands)g(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(d,e,f,l,k){h[b.HTML]=d;h[b.PDF]=e;h[b.IMAGE]=f;h[b.PRINT]=
l;h[b.DYNAMIC_HTML]=k;a.getInitPromise().then(c.resolve)});else return c.resolve();return this._initCommandsPromise=c.promise},registerCommand:function(a,b,d){function c(d){if(!d.isBrowserSupported||d.isBrowserSupported())e._commands[a]||(e._commands[a]={index:e._commandIndex++,id:a,label:b||d.label,command:d})}var e=this;if(d)c(d);else return this._initCommands().then(function(){var b=h[a];b&&c(new b)})},getCommands:function(){return this._initCommands().then(function(){var d=[],h=this._commands[b.PDF],
e;for(e in this._commands)d.push(this._commands[e]);d.sort(function(a,b){return a.index-b.index});return(e=this._getCurrentContext())&&e.geoenrichmentUrl&&h?c(a.hasCapability("FormatInfographics"),function(a){a||(d=d.filter(function(a){return a!==h}));return d}):c(d)}.bind(this))},getCommandById:function(a){return this._commands[a]&&this._commands[a].command},executeCommand:function(a,b,d,c){return this._initCommands().then(function(){d=e.mixin({printMapTaskUrl:this.printMapTaskUrl},d);return this._commands[a]&&
this._commands[a].command&&this._commands[a].command.execute(b,d||{},c)}.bind(this))}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p){function t(b){return w?w:(b=b&&a.id.findCredential(b)||a.id.credentials[0])&&b.token}function q(a,b){var d=h.urlToObject(a);b=f.mixin({f:"json",token:t(a),langCode:dojo.locale},d.query||{},b);for(var c in b)a=b[c],a instanceof l||a&&"object"===typeof a&&(b[c]=JSON.stringify("function"===typeof a.toJson?a.toJson():a));return{url:d.path,taskParams:b}}function v(a){B||(B=new r(y));return!a||B.initialized?B:B.initialize()}var r=g(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(a){this.url=a},_initDfd:null,initialized:!1,initialize:function(){var a=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new e;m.requestPublicFirst(q(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(b){a.initWithJson(b)});return this._initDfd.promise},initWithJson:function(a){this._geInfo=a;this._capabilities={};this._supportedOperations={};a.capabilities&&a.capabilities.forEach(function(a){this._capabilities[a.toLowerCase()]=
!0},this);a.supportedOperations&&a.supportedOperations.forEach(function(a){this._supportedOperations[a.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new e;this._initDfd.resolve();this.initialized=!0},hasCapability:function(a){return this._capabilities[a.toLowerCase()]},supportsOperation:function(a){return this._supportedOperations[a.toLowerCase()]},enrich:function(a){a=q(this.url,a);a.taskParams.AddDerivativeVariables="all";return d({url:a.url+"/Geoenrichment/Enrich",content:a.taskParams,
handleAs:"json"}).then(function(a){return a.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(a){a=q(this.url,a);return d({url:a.url+"/StandardGeographyQuery/execute",content:a.taskParams,handleAs:"json"}).then(function(a){return a.results[0].value.features||[]})},getDataCollections:function(a,b,c){c=q(this.url,c);return d({url:c.url+"/Geoenrichment/DataCollections/"+a+(b?"/"+b:""),content:c.taskParams,handleAs:"json"}).then(function(a){return a.DataCollections})},_contriesCache:{},getCountries:function(){var a=
q(this.url);return d({url:a.url+"/Geoenrichment/Countries",content:a.taskParams,handleAs:"json"}).then(function(a){return a.countries})},getCountryInfo:function(a){var b=this;if(!this._contriesCache[a]){var h=q(this.url);this._contriesCache[a]=d({url:h.url+"/Geoenrichment/Countries/"+a,content:h.taskParams,handleAs:"json"}).then(function(d){var h=d.countries[0],e={};return c(h.hierarchies.map(function(d){return k(b._getStdGeographyModel(a,d.ID),function(a){e[d.ID]=a})})).then(function(){return{country:h,
geographiesModels:e}})})}return this._contriesCache[a]},_stdModelCache:null,_getStdGeographyModel:function(a,b){this._stdModelCache=this._stdModelCache||{};var c=a+b;if(!this._stdModelCache[c]){var h=q(this.url);this._stdModelCache[c]=d({url:h.url+"/Geoenrichment/StandardGeographyLevels/"+a+"/"+b,content:h.taskParams,handleAs:"json"}).then(function(d){return new p({countryID:a,hierarchyID:b,levels:d.geographyLevels[0].hierarchies[0].levels})})}return this._stdModelCache[c]},formatReport:function(a){a=
q(this.url,a);return m.request({url:a.url,urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:a.taskParams}).then(function(a){return a&&a.data&&"text/plain"===a.data.type?null:a})},getReports:function(a){var b=q(this.url);return d({url:b.url+"/Geoenrichment/reports/"+a,content:b.taskParams,handleAs:"json"}).then(function(a){return a.reports})},_tasksHash:{},createReport:function(a){var d=q(this.url,a),c=b();this._tasksHash[c]={taskName:"createReport",taskParams:f.clone(a)};return m.request({url:d.url,
urlSuffix:"Geoenrichment/createReport"},{handleAs:"xml"===a.format?"text":"bin",content:d.taskParams}).then(function(a){return{taskID:c,result:a}})},consumeCredits:function(a){if(a=this._tasksHash[a])return a=f.clone(a),delete a.taskParams.forStorage,this[a.taskName](a.taskParams)},_dataLayersCache:{},getLayerInfos:function(a){this._dataLayersCache[a]||(this._dataLayersCache[a]=this._getLayerInfos(a));return this._dataLayersCache[a]},_getLayerInfos:function(a){var b=q(this.url);return d({url:b.url+
"/Geoenrichment/DataLayers/"+a,content:b.taskParams,handleAs:"json"}).then(function(a){return a&&a.layers||[]}).otherwise(function(a){console.log(a);return[]})},getLayerInfo:function(a,b){var d=a+"_"+b;this._dataLayersCache[d]||(this._dataLayersCache[d]=this._getLayerInfo(a,b));return this._dataLayersCache[d]},_getLayerInfo:function(a,b){var c=q(this.url);return d({url:c.url+"/Geoenrichment/DataLayers/"+a+"/"+b,content:c.taskParams,handleAs:"json"}).then(function(a){return a&&a.layer}).otherwise(function(a){console.log(a);
return null})}}),u={},y,w,A=new e;u.setGeoenrichmentUrl=function(a,b){(y=a||y)&&n.registerCORS(y);w=b||w;!A.promise.isFulfilled()&&A.resolve()};u.canMakeRequests=function(){return!!y};u.getInitPromise=function(){return A.promise};u.GEClient=r;var B;u.getClient=function(){return v()};u.initialize=function(){return v(!0)};u.initWithJson=function(a,b){u.setGeoenrichmentUrl(a);v().initWithJson(b)};u.enrich=function(a){return v().enrich(a)};u.stdGeographyQuery=function(a){return v().stdGeographyQuery(a)};
u.getDataCollections=function(a,b,d){return v().getDataCollections(a,b,d)};u.formatReport=function(a){return v().formatReport(a)};u.createReport=function(a){return v().createReport(a)};u.consumeCredits=function(a){return v().consumeCredits(a)};u.getLayerInfos=function(a){return v().getLayerInfos(a)};u.hasCapability=function(a){return k(v(!0),function(){return B&&B.hasCapability(a)})};u.supportsOperation=function(a){return k(v(!0),function(){return B&&B.supportsOperation(a)})};u.getCountryInfo=function(a){return v().getCountryInfo(a)};
return u})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function g(){for(var b=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>b.length;)b="0"+b;return b}var f=g(),e=g(),e=e.substring(0,4)+"-4"+e.substring(5,8),k=g(),k="8"+k.substring(1,4)+"-"+k.substring(4,8),c=g();return(f+"-"+e+"-"+k+c).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],
function(g){g.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(f,e){if(!f)throw e||(e="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(e);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=
function(f){f=f.toString();var e=g.isString(f)&&36==f.length&&f==f.toLowerCase();if(e){f=f.split("-");var e=5==f.length&&8==f[0].length&&4==f[1].length&&4==f[2].length&&4==f[3].length&&12==f[4].length,k;for(k in f)var c=parseInt(f[k],16),e=e&&isFinite(c)}return e};dojox.uuid.getVariant=function(f){if(!dojox.uuid._ourVariantLookupTable){var e=dojox.uuid.variant,k=[];k[0]=e.NCS;k[1]=e.NCS;k[2]=e.NCS;k[3]=e.NCS;k[4]=e.NCS;k[5]=e.NCS;k[6]=e.NCS;k[7]=e.NCS;k[8]=e.DCE;k[9]=e.DCE;k[10]=e.DCE;k[11]=e.DCE;
k[12]=e.MICROSOFT;k[13]=e.MICROSOFT;k[14]=e.UNKNOWN;k[15]=e.UNKNOWN;dojox.uuid._ourVariantLookupTable=k}f=f.toString();f=f.charAt(19);f=parseInt(f,16);dojox.uuid.assert(0<=f&&16>=f);return dojox.uuid._ourVariantLookupTable[f]};dojox.uuid.getVersion=function(f){dojox.uuid.assert(dojox.uuid.getVariant(f)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");f=f.toString();f=f.charAt(14);return parseInt(f,16)};dojox.uuid.getNode=function(f){dojox.uuid.assert(dojox.uuid.getVersion(f)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");f=f.toString();return f.split("-")[4]};dojox.uuid.getTimestamp=function(f,e){dojox.uuid.assert(dojox.uuid.getVersion(f)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");f=f.toString();e||(e=null);switch(e){case "string":case String:return dojox.uuid.getTimestamp(f,Date).toUTCString();case "hex":var k=f.split("-");f=k[0];e=k[1];k=k[2];k=k.slice(1);f=k+e+f;dojox.uuid.assert(15==
f.length);return f;case null:case "date":case Date:return k=f.split("-"),f=parseInt(k[0],16),e=parseInt(k[1],16),k=(parseInt(k[2],16)&4095)<<16,k=4294967296*(k+e),k+=f,new Date(k/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+e)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/utils/DataUtil"],function(g,f){function e(c){return c?/^image\//.test(c)?
"base64":/^text\//.test(c)?"text":/application\/json/.test(c)?"json":"bin":"bin"}var k=g(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(c,b,a){this.data=c;b&&(this.contentType=b);a&&(this.contentTransferEncoding=a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:f.base64FromByteSource(this.data):null},toString:function(){return this.filename||"\x3cunknown\x3e"}});k.fromArrayBuffer=
function(c,b){return new k(f.binaryStringFromByteSource(c),b)};k.fromBlob=function(c,b){return f.arrayBufferFromBlob(c).then(function(a){return new k(f.binaryStringFromByteSource(a),b||c.type)})};k.fromFileData=function(c,b,a){a=a||f.getContentType(c);if("object"==typeof b&&window.ArrayBuffer&&(b instanceof ArrayBuffer||b.buffer instanceof ArrayBuffer))b=f.binaryStringFromByteSource(b.buffer||b);else{var d=e(a);"json"==d&&"object"==typeof b&&(b=JSON.stringify(b));if("string"!=typeof b)throw Error("Wrong file data.");
switch(d){case "base64":b=atob(b);break;case "text":case "json":b=unescape(encodeURIComponent(b))}}b=new k(b,a);b.filename=c;return b};k.getContentConversionType=e;return k})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(g,f){function e(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},getByte:function(a){return this.source.charCodeAt(a)&255}}:window.ArrayBuffer&&a instanceof
ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(a){return this.source[a]}}:a}function k(a){for(var b=a.length,c=new Uint8Array(a.length),e=0;e<b;e++)c[e]=a.charCodeAt(e);return c}function c(a,b){a=new Uint8Array(a);b=Math.min(b,a.byteLength);for(var d="",c=0;c<b;c++)d+=String.fromCharCode(a[c]);return d}var b={arrayBufferFromBlob:function(a){var b=new g,c=new FileReader;c.onloadend=function(){c.error?b.reject(c.error):b.resolve(c.result)};
c.readAsArrayBuffer(a);return b.promise},arrayBuffersToBlob:function(a,b){return new Blob(a,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==typeof a)return a;a=e(a);for(var b=a.getLength(),c=b%4,b=b-c,f="",m=0,n,k,g,q;m<b;)n=a.getByte(m++),k=a.getByte(m++),g=a.getByte(m++),q=a.getByte(m++),f+=String.fromCharCode(n,k,g,q);1==c?f+=String.fromCharCode(a.getByte(m)):2==c?f+=String.fromCharCode(a.getByte(m),a.getByte(m+1)):3==c&&(f+=String.fromCharCode(a.getByte(m),
a.getByte(m+1),a.getByte(m+2)));return f},base64FromByteSource:function(a){a=e(a);for(var b=a.getLength(),c=b%3,b=b-c,f,m,n,k,g="",q=0;q<b;q+=3)k=a.getByte(q)<<16|a.getByte(q+1)<<8|a.getByte(q+2),f=k>>18&63,m=k>>12&63,n=k>>6&63,k&=63,g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k];
1==c?(k=a.getByte(q),g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k<<4&63]+"\x3d\x3d"):2==c&&(k=a.getByte(q)<<8|a.getByte(q+1),g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k<<2&63]+"\x3d");return g},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===
typeof a?a:JSON.stringify(a))))}};b.binaryStringToByteArray=k;b.base64ToByteArray=function(a){return k(atob(a))};b.getFirstBytes=function(a,b){var d;if("string"==typeof a)d=a.substr(0,b);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)d=c(a,b);else if(window.Blob&&a instanceof Blob){d=new g;var e=new FileReader;e.onloadend=function(){e.error?d.resolve(""):d.resolve(c(e.result,b))};e.readAsArrayBuffer(a.slice(0,b))}return f(d||"")};b.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,
""))};b.getContentType=function(a){a=b.getFileExtension(a);if(null===a)return null;switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};b.getFileExtension=function(a){var b=a.lastIndexOf(".")+1;return b?a.substr(b).toLowerCase():null};return b})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q){function v(a,b){if(b)this.reject(b);else{b=a.xhr;var d=b.getResponseHeader&&b.getResponseHeader("Content-Type");a.status=b.status;a.data=new n(b.response||b.responseBody||b.responseText,d);this.resolve(a)}}var r=0,u=c("safari"),y=function(a){"string"===typeof a?this.url=a:"object"===typeof a&&g.mixin(this,a)};y.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(a,b){return this.sendUrlRequest(this.prepareUrlRequest(a,
b),"UniversalClient.send")},prepareUrlRequest:function(b,c){"string"===typeof b?b={urlSuffix:b}:b||(b={});c||(c={});var e=b.url||this.url;b=b.urlSuffix;e||(e=b,b=null);if(!e)throw Error("URL is missing.");var f=l.urlToObject(e),e=m.combine(f.path,b);b=f.query||{};"object"===typeof c.content&&(b=g.mixin(b,c.content));f=c.requireSSL;!0!==f&&!1===this.allowSSL&&(f=!1);!1!==f&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(f=!0);if(a.id){var n=a.id.findCredential(e);!n&&this.useCommonAuth&&
(n="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):a.id.credentials[0]);n&&(b.token||!1===b.token||(b.token=n.token),n.ssl&&!1!==f&&(f=!0))}!0===f&&(e=m.toHttpsUrl(e));!1===b.token&&delete b.token;var q=c.handleAs||"json";"json"===q&&(b.f="json");var n=(c.sendAs||(c.usePost||this.usePost||b.token?"post":"get")).toLowerCase(),f="multipart"==n?!0:c.sendAs||c.sizeLimit?!1:null,v=0,y;for(y in b){var w=b[y];w instanceof p?f=!0:("object"===typeof w&&(w=b[y]=JSON.stringify(w)),
!f&&0<this.multipartThreshold&&(v+=y.length+(w?w.length:0)+2))}!1!==f&&0<this.multipartThreshold&&v>this.multipartThreshold&&(f=!0);if(c.useProxy||!l.hasSameOrigin(e,window.location.href)&&this.useProxy&&!c.hasOwnProperty("useProxy")){var B=m.getProxyUrl();B&&(e=B+"?"+e)}else l.getProxyRule(e)&&(e=l.getProxyRule(e).proxyUrl+"?"+e);y=(y=c.hasOwnProperty("preventCache")?c.preventCache:this.preventCache)||null===y&&B||u?"_ts\x3d"+(new Date).getTime()+r++:"";B={handleAs:q};if(q=Number(h.isDefined(c.timeout)?
c.timeout:this.timeout))B.timeout=q;q="get"!==n||f;n=f?null:k.objectToQuery(b);q||(q=n.length+e.length+y.length+1>=d.defaults.io.postLength);B.method=q?"POST":"GET";B.headers={"X-Requested-With":null};B.headers["Content-Type"]="undefined"!==typeof c.contentType?c.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";f?(f=new t,f.addVariables(b),f.build(B)):q?B.data=n:n&&(e+="?"+n,y&&(e+="\x26"+y),y=null);!n&&y&&(e+="?"+y);return{url:e,options:B,sizeLimit:c.sizeLimit}},sendUrlRequest:function(a,
d){var c="string"===typeof a.options.data?a.options.data.length:null;if(a.sizeLimit&&c&&("function"===typeof a.sizeLimit?a.sizeLimit(c):c>a.sizeLimit))return(new f).reject(Error("SIZE_LIMIT_EXCEEDED"));d=d||"UniversalClient.sendUrlRequest";var h=a.deferred||new f;if(c="bin"===a.options.handleAs)a.options.handleAs="blob";var l=e(a.url,a.options,!0);c&&(l.handleResponse=v);var n=this;l.then(function(c){c="json"===a.options.handleAs&&c&&q.parseError(c)||c;if(c instanceof Error){var e;!0===n.useCommonAuth&&
498===c.code&&(e=y.handleInvalidTokenError(c));b(e)["finally"](function(){h.reject(c)})}else h.resolve(n._makeResponse(d,c))},function(a){h.reject(q.makeError(a))});return h.promise},requestToUrl:function(a){if(a.options.headers&&a.options.headers["Content-Type"]&&0==a.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var b=a.url;if(a=a.options.data){if(b.length+a.length>=d.defaults.io.postLength)return null;b+="?"+a}return b},_makeResponse:function(a,b){return b}};y.makeError=
q.makeError;y.handleInvalidTokenError=function(a){};var w=new y({useCommonAuth:!0,allowSSL:!0});y.request=function(a,b){return w.send(a,b).otherwise(function(d){var c=b&&b.content&&b.content.token;if(498!==d.code||null!=c)return(new f).reject(d);b=g.mixin({},b);b.content=g.mixin({},b.content);b.content.token=!1;return w.send(a,b)})};y.requestPublicFirst=function(a,b,d){var c=g.mixin({},b);c.content=g.mixin({},b.content);c.content.token=!1;return w.send(a,c).otherwise(function(c){return d&&d.retryOnAnyError||
499===c.code||403===c.code?w.send(a,b):(new f).reject(c)})};return y})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(g){return g(null,{data:null,type:null,constructor:function(f,e){this.type=e||f&&f.type||null;this.data=f}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/request/util","esri/lang","./FileContent"],function(g,f,e,k){var c=g(null,{data:null,constructor:function(a){this.data=
a}}),b=f.parseArgs;f.parseArgs=function(a,h,e){h.data&&h.data instanceof c&&(h.data=h.data.data,e=!0);return b(a,h,e)};var a=f.deepCreate;f.deepCreate=function(b,h){return h instanceof c?new c(h.data):a(b,h)};return g(null,{addVariables:function(a){for(var b in a)this.addVariable(b,a[b])},addVariable:function(a,b){e.isDefined(b)&&(b instanceof k?this._writeFileContent(a,b):this._writeVariable(a,b.toString()))},build:function(a){this._writeBoundary(!0);a.data=new c(this._prepareBinaryData());var b=
a.headers||{};b["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;a.headers=b;this._dataProvider=null},_prepareBinaryData:function(){var a=this._dataProvider.buffer;if(!window.Uint8Array)return a;for(var b=a.length,c=new Uint8Array(new ArrayBuffer(b)),e=0;e<b;e++)c[e]=a.charCodeAt(e);return c},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var a="",b=0;32>b;b++)a+=String.fromCharCode(Math.floor(97+25*Math.random()));this._dataProvider={buffer:"",
boundary:a}}return this._dataProvider},_writeVariable:function(a,b){this._writeBoundary();this._writeContentDisposition(a);this._writeLineBreak();this._writeData(this._toUTF8(b));this._writeLineBreak()},_writeFileContent:function(a,b){this._writeBoundary();this._writeContentDisposition(a,b.filename);b.contentType&&(this._writeData("Content-Type: "+b.contentType),this._writeLineBreak());b.contentTransferEncoding&&(this._writeData("Content-Transfer-Encoding: "+b.contentTransferEncoding),this._writeLineBreak());
this._writeLineBreak();this._writeData(b.data);this._writeLineBreak()},_writeBoundary:function(a){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);a?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(a,b){b=b?'"; filename\x3d"'+this._toUTF8(b.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(a)+b+'"');this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},_writeLineBreak:function(){this._writeData("\r\n")},
_writeData:function(a){this._getDataProvider().buffer+=a},_toUTF8:function(a){return unescape(encodeURIComponent(a))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","require"],function(g,f,e){function k(b){var a=new g;e(["./DataResource"],function(d){f((new d(b)).getFileContent(),a.resolve,a.reject)});return a.promise}var c={getErrorFromBin:function(b){var a=/^text\/|^application\/json/;return b&&b.type&&
!a.test(b.type)?null:f(b&&k(b),function(b){if(b){if(b.hasOwnProperty("contentType")&&!a.test(b.contentType))return null;try{var d=JSON.parse(decodeURIComponent(escape(b.data))),e=c.parseError(d);if(e)return e;if(d.messages&&d.messages.length){var f=d.messages[0];if("esriJobMessageTypeError"==f.type)return Error(f.description)}}catch(n){}}return Error("Binary data error.")})},parseError:function(b){var a;b.error?a=c.makeError(b.error):"error"===b.status&&(a=c.makeError(b));a&&a.code&&null==a.httpCode&&
(a.httpCode=a.code);return a},makeError:function(b){null==b?b=Error():"string"===typeof b&&(b={message:b});if(!(b instanceof Error)&&"object"===typeof b){var a=b;b=Error();a.code&&(b.code=a.code);a.message&&(b.message=a.message);a.details&&(b.details=a.details)}b.log=dojoConfig.isDebug;return b}};return c})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m){function n(){var a=new k;g("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/simpleInfographic/dataDrilling/EnrichUtil ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ../core/infographics/simpleInfographic/dataDrilling/DataDrillingLibrary ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(b,d,c,e,f,l,n,k,m,g,C){p=b;t=d;q=c;v=e;r=f;u=l;y=n;h=k;w=m;A=g;B=C;a.resolve()});return a.promise}var p,t,q,v,r,u,y,w,A,B;return f(null,{reportDataToJson:function(b,d){var f=this;d=d||{};var k=!1;l.processTemplateFieldInfos(b.templateJson,function(a){a.isInfographic&&a.infographicJson.type===h.ATTACHMENTS&&(k=!0)});return n().then(function(){return c(d.loadDataDrillingData&&f._serializeDataDrilling(b),function(){return c(b.attachmentsStore&&p.getAttachmentsStoreJson(b.attachmentsStore,{numAreas:b.analysisAreas.length,
saveImages:k}),function(c){var h=e.mixin({},b.config);!1!==d.forceFixedDataMode&&delete h.geoenrichmentUrl;c={isClassic:b.isClassic,isMultiFeature:b.isMultiFeature,reportType:b.reportType,reportTitle:b.reportTitle,templateJson:q.serialize(b.templateJson),reportObject:f._prepareReportObjectJson(b.reportObject),fieldData:b.fieldData,analysisAreas:a.areasToJson(b.analysisAreas),combinedAreasInfo:b.combinedAreasInfo&&a.combinedAreasInfoToJson(b.combinedAreasInfo),reverseAnalysisAreasOnMap:b.reverseAnalysisAreasOnMap,
infographicOptions:b.infographicOptions&&b.infographicOptions.toJson(),attachmentsStore:c,templateVariableProvider:b.templateVariableProvider&&b.templateVariableProvider.toJson(),config:h,countryConfig:m.toJson(),mapImageInfos:d.mapImageInfos,customLogo:b.customLogo};console.log("_SerializationSupport.js \x3d\x3e reportDataJson");console.log(c);return c})})})},_prepareReportObjectJson:function(a){var b={},d;for(d in a)a[d]&&"object"!==typeof a[d]&&(b[d]=a[d]);return b},_serializeDataDrilling:function(a){var d=
r.getEnrichInfosForTemplateJson(a.infographicOptions.countryID,a.templateJson),c=[];c.push(this.enrichFieldData(d,e.mixin({analysisAreas:a.analysisAreas,fieldData:a.fieldData},a.config)));c.push(this._enrichInfographicVariables(a,d));var h={};d&&d.forEach(function(a){a.isChart||a.isGeneral?a.fields.forEach(function(a){a.mapTo&&(h[a.mapTo]=1)}):a.isInfographic&&(a.fieldInfos?a.fieldInfos.forEach(function(a){a.hasVariable&&a.fullName&&(h[a.fullName]=1)}):a.variables&&a.variables.forEach(function(a){h[a]=
1}))});var d=v.collectVariablesStats(a.templateJson),f;for(f in d)h[f]=1;(f=w.getSubstitutionVariables(a.config.countryID))&&f.forEach(function(a){h[a]=1});c.push(a.templateVariableProvider.tryFetchDataVintageInfo(a.config,h));return b(c)},_enrichInfographicVariables:function(a,d){var e=a.infographicOptions;return c(e.getOptions().getItems(e.countryID),function(){var c=[];d.forEach(function(b){b.isInfographic&&b.variables&&a.analysisAreas.forEach(function(a,d){e.setCurrentAnalysisAreaIndex(d);var f=
new k;a=e.createGeoenrichment({currentFeatureIndex:d});a.onDone=function(){f.resolve()};a.country=e.countryID;d=h.supportsComparison(b.type);a.setGeoLevels(d?u.getSubLevels(b):null,d?u.getHighestLevel(b):null);a.setVariables(b.variables);a.setStudyArea(e.studyArea);c.push(f.promise)})});return b(c)})},reportDataFromJson:function(b){var c=this;return n().then(function(){var h=b.fieldData;h.featureData&&(h.areaData=h.featureData.map(function(a){return{mainCalculator:{data:a}}}),delete h.featureData);
h={isClassic:b.isClassic,isMultiFeature:b.isMultiFeature,reportType:b.reportType,reportTitle:b.reportTitle,templateJson:q.deserialize(b.templateJson),reportObject:b.reportObject,fieldData:h,analysisAreas:a.areasFromJson(b.analysisAreas),combinedAreasInfo:b.combinedAreasInfo&&a.combinedAreasInfoFromJson(b.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:b.reverseAnalysisAreasOnMap,infographicOptions:b.infographicOptions&&c._infographicOptionsProvider.getInfographicOptionsFromJson(b.infographicOptions),
attachmentsStore:b.attachmentsStore&&p.getAttachmentsStoreFromJson(b.attachmentsStore),templateVariableProvider:b.templateVariableProvider&&new y(b.templateVariableProvider),config:b.config||{},mapImageInfos:b.mapImageInfos,customLogo:b.customLogo};d.populateCombinedAreasInfo(h.combinedAreasInfo,h.analysisAreas);t.setGeoenrichmentUrl(h.config.geoenrichmentUrl);h.config.geometryServiceUrl&&B.setGeometryServiceUrl(h.config.geometryServiceUrl);h.config.printMapTaskUrl&&A.setPrintMapTaskUrl(h.config.printMapTaskUrl);
m.fromJson(b.countryConfig);return h})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(g,f){function e(b,a){if(!b)return null;b.getLayer()&&(b=new g(b.geometry,b.symbol,b.attributes,b.infoTemplate));b=b.toJson();a&&delete b.infoTemplate;return b}function k(b){if(!b)return null;if(b instanceof g)return b;var a=b.infoTemplate&&new f(b.infoTemplate);delete b.infoTemplate;b=new g(b);
a&&b.setInfoTemplate(a);return b}function c(b){var a={},d;for(d in b){var c=b[d];if("string"===typeof c||"number"===typeof c&&!isNaN(c))a[d]=c}return a}return{areasToJson:function(b,a){var d=a&&a.excludeInfoTemplate;return b.map(function(a){var b=c(a);b.feature=e(a.feature,d);b.location=a.location&&e(a.location,d);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(function(a){return e(a,d)});b.geographies=a.geographies;b.buffer=a.buffer;return b})},combinedAreasInfoToJson:function(b){var a=
c(b);a.groups=b.groups&&b.groups.map(function(a){var b=c(a);b.indexes=a.indexes.slice();b.location=a.location&&e(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(e);return b});return a},areasFromJson:function(b){return b.map(function(a){var b=c(a);b.feature=k(a.feature);b.location=a.location&&k(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(k);b.geographies=a.geographies;b.buffer=a.buffer;return b})},combinedAreasInfoFromJson:function(b){var a=
c(b);a.groups=b.groups&&b.groups.map(function(a){var b=c(a);b.indexes=a.indexes.slice();b.location=a.location&&k(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(k);return b});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],function(g){var f={STATIC:"static",ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},
e={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",RELATED_VARS:"RelatedVariables",TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},k={},c;for(c in e)k[e[c]]=!0;g.mixin(f,e);var b={};for(c in f)b[f[c]]=!0;f.isDynamic=function(a){return k[a]};f.isSupported=function(a){return b[a]};f.isTableLike=function(a){return a===f.AREA_DETAILS||a===f.LOCATOR_TABLE||a===f.COMPARISON_TABLE};f.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};f.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":
a};f.supportsMultiFeature=function(a){return a===f.COMPARISON_TABLE||a===f.LOCATOR_TABLE||a===f.ATTACHMENTS||a===f.AREA_DETAILS};f.supportsComparison=function(a){return a===f.ONE_VAR||a===f.AGE_PYRAMID||a===f.RELATED_VARS||a===f.COMPARISON_TABLE};f.isDynamicWithFiltering=function(a){return a===f.ONE_VAR||a===f.AGE_PYRAMID||a===f.RELATED_VARS};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector",
"../../../infographics/InfographicTypes"],function(g,f){var e={},k={process:function(c,b,a,d,h){var e=d;d=function(a,b,d){a&&e.apply(this,arguments)};h={processLevel:b,objJson:a,processFunc:d,ignoreComparisonCalculators:h&&h.ignoreComparisonCalculators};c!==b||"field"===c&&"field"===b?"document"===c?k._processTemplateJson(a,h):"section"===c?k._processSectionJson(a,h):"table"===c?k._processTableJson(a,h,null):"tableRow"===c?k._processTableDataObj(a,h,null):"field"===c&&k._processFieldInfo(a,h,null):
d(a)},_processTemplateJson:function(c,b){c.sectionsTables?c.sectionsTables.forEach(function(a){k._processTableJson(a,b)}):g.collectSectionJsons(c,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===b.processLevel&&b.processFunc(a)}}).forEach(function(a){k._processSectionJson(a,b)})},_processSectionJson:function(c,b){"section"===b.processLevel&&b.processFunc(c);c.stack&&c.stack.forEach(function(a){"sectionElement"===b.processLevel&&b.processFunc(a);"table"===a.id&&k._processTableJson(a,b)})},
_processTableJson:function(c,b,a){"table"===b.processLevel&&b.processFunc(c);c.data.data.forEach(function(d){"tableRow"===b.processLevel&&b.processFunc(d,a);k._processTableDataObj(d,b,a)});c.backgroundSectionJson&&k._processSectionJson(c.backgroundSectionJson,b);c.foregroundSectionJson&&k._processSectionJson(c.foregroundSectionJson,b);c.backgroundFloatingTablesSectionJson&&k._processSectionJson(c.backgroundFloatingTablesSectionJson,b);c.foregroundFloatingTablesSectionJson&&k._processSectionJson(c.foregroundFloatingTablesSectionJson,
b)},_processTableDataObj:function(c,b,a){if(c.fieldInfos)for(var d in c.fieldInfos)k._processFieldInfo(c.fieldInfos[d],b,a,"tableCell")},_processFieldInfo:function(c,b,a,d){function h(a,c){"field"===b.processLevel&&b.processFunc(a,c,d)}c&&(h(c,a),c&&c.triggerJson&&c.triggerJson.fieldInfo&&c.templateName!==c.triggerJson.fieldInfo.templateName&&h(c.triggerJson.fieldInfo,c),c.linkFieldInfo&&h(c.linkFieldInfo,c),c.isRichText&&(c.richTextJson.fieldInfos.forEach(function(a){k._processFieldInfo(a,b,c,"richTextPart")}),
c.richTextJson.specialFieldInfos.forEach(function(a){k._processFieldInfo(a,b,c,"richTextPart")})),c.isInfographic&&k._processInfographicFieldInfo(c,b),c.isChart&&k._processChartFieldInfo(c,b),c.isReportSection&&c.sectionJson&&k._processSectionJson(c.sectionJson,b))},_processInfographicFieldInfo:function(c,b){var a=c.infographicJson;switch(a.type){case f.STATIC:a.header&&k._processTableJson(a.header,b,c);a.variableTables&&a.variableTables.forEach(function(a){a.variable&&k._processFieldInfo(a.variable.fieldInfo,
b,c,"staticInfographicVariable");a.description&&a.description.fieldInfo&&k._processFieldInfo(a.description.fieldInfo,b,c,"staticInfographicDescription")});if(a.dataDrilling)for(var d in a.dataDrilling){var h=a.dataDrilling[d];h&&h.sectionJson&&k._processSectionJson(h.sectionJson,b)}break;case f.AGE_PYRAMID:case f.TAPESTRY:case f.PRIZM5:case f.RELATED_VARS:case f.ONE_VAR:!b.ignoreComparisonCalculators&&a.fieldInfos&&a.fieldInfos.forEach(function(a){k._processFieldInfo(a,b,c,"dynamicInfographicVariable")});
break;case f.AREA_DETAILS:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,b,c);a.attributesSectionJson&&k._processSectionJson(a.attributesSectionJson,b,c);a.notesSectionJson&&k._processSectionJson(a.notesSectionJson,b,c);break;case f.LOCATOR_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,b);k._processSectionJson(a.headerSectionJson,b);k._processSectionJson(a.dataSectionJson,b);a.summarySectionJson&&k._processSectionJson(a.summarySectionJson,b);a.summaryFooterSectionJson&&
k._processSectionJson(a.summaryFooterSectionJson,b);break;case f.COMPARISON_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,b),b.ignoreComparisonCalculators||k._processSectionJson(a.dataSectionJson,b)}},_processChartFieldInfo:function(c,b){var a=c.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(a){k._processFieldInfo(a,b,c,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(a){k._processTableJson(a,b,c,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(a){k._processTableJson(a,
b,c,"floatingText")});c.chartJson.seriesItems.forEach(function(a){a.points.forEach(function(a){b.ignoreComparisonCalculators&&c.chartJson.comparisonInfo||k._processFieldInfo(a.fieldInfo,b,c,"chartPointField");a.iconFieldInfo&&k._processFieldInfo(a.iconFieldInfo,b,c,"chartPointIcon");a.captionFieldInfo&&k._processFieldInfo(a.captionFieldInfo,b,c,"chartPointCaption")})})}};e.DOCUMENT="document";e.SECTION="section";e.TABLE="table";e.SECTION_ELEMENT="sectionElement";e.TABLE_ROW="tableRow";e.FIELD="field";
e.process=k.process;e.processTemplateFieldInfos=function(c,b,a){k.process("document","field",c,b,a)};e.processSectionFieldInfos=function(c,b,a){k.process("section","field",c,b,a)};e.processSectionElements=function(c,b){k.process("document","sectionElement",c,b)};e.processTableFieldInfos=function(c,b,a){k.process("table","field",c,b,a)};e.hasMultiFeatureChart=function(c){var b=!1;e.processTemplateFieldInfos(c,function(a){a.isChart&&(b=b||a.chartJson&&!!a.chartJson.isMultiFeatureChart)});return b};
e.hasComparisonInfographicTable=function(c){var b=!1;e.processTemplateFieldInfos(c,function(a){a.isInfographic&&(b=b||a.infographicJson&&a.infographicJson.type===f.COMPARISON_TABLE)});return b};e.isGraphicReport=function(c){return!!c.sectionsTables};e.hasDynamicColumns=function(c){return e._checkTableAttributes(c,function(b){return 0<b.dynamicColumns})};e.hasDynamicRows=function(c){return e._checkTableAttributes(c,function(b){return 0<b.dynamicRows})};e._checkTableAttributes=function(c,b){var a;e.isGraphicReport(c)?
e.processTemplateFieldInfos(c,function(d){d.isReportSection&&d.sectionJson&&d.sectionJson.stack&&d.sectionJson.stack.some(function(d){if("table"===d.id&&d.attributes&&b(d.attributes))return a=!0})}):a=e.collectSectionJsons(c).some(function(a){return a.stack&&a.stack.some(function(a){return"table"===a.id&&a.attributes&&b(a.attributes)})});return a};e.hasMultiFeatureSections=function(c){return e.isGraphicReport(c)?e.hasMultiFeatureChart(c)||e.hasDynamicColumns(c)||e.hasComparisonInfographicTable(c):
!1};e.calcNumberOfMaps=function(c,b){var a=0;e.collectSectionJsons(c).forEach(function(d){a+=e.calcNumberOfMapsInSectionJson(d,b)});return a};e.calcNumberOfMapsInSectionJson=function(c,b){var a=0;c.stack&&c.stack.forEach(function(d){d.isMap&&(b&&b(d),a++)});e.processSectionFieldInfos(c,function(d){d.isMap&&(b&&b(d.mapJson),a++)});return a};e.collectSectionJsons=g.collectSectionJsons;e.getParentBox=g.getParentBox;e.setParentBox=g.setParentBox;e.getParentStyle=g.getParentStyle;return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/MathUtil","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],function(g,f,e,k){var c={},b={provideParentInfo:function(b,d,c,e,f,k){a.collectStatistics(d);var h;a:{switch(f){case "floating":h=d.style.left+k.left;break a;case "page":h=a.calcX(d,c,e)+k.left;break a}h=void 0}a:{switch(f){case "floating":f=d.style.top+k.top;break a;case "page":f=a.calcY(d,c,e)+k.top;break a}f=void 0}b._parentBox={x:h,y:f,w:a.calcFullWidth(d,
c,e),h:a.calcFullHeight(d,c,e)};d=e.field;c.style.fields=c.style.fields||{};c=(c.style.fields[d]=c.style.fields[d]||{}).backgroundColor;b._parentStyle={backgroundColor:c}},sanitize:function(b){a.sanitize(b)}},a={collectStatistics:function(b){if(!b._measureInfo){var d={},c={},h;b.data.columns.forEach(function(a){h&&(c[h.field]=a);h=a;d[a.field]=a});var e={},f={},k={},g={},r={},u={};b.data.data.forEach(function(d,c){b.data.columns.forEach(function(b,h){var l=r[h]||0,n=u[c]||0,m=a._getDataHeight(d,b.field);
b=a._getFieldWidth(d,b);l+=m;n+=b;r[h]=l;u[c]=n;m=h+"_"+c;f[m]=l;e[m]=n;k[m]=e[h-1+"_"+c]||0;g[m]=f[h+"_"+(c-1)]||0})});b._measureInfo={xPositions:k,yPositions:g,columnsHash:d,nextColumnHash:c}}},calcX:function(a,b,d){d=a.data.columns.indexOf(d);b=a.data.data.indexOf(b);return a._measureInfo.xPositions[d+"_"+b]||0},calcY:function(a,b,d){d=a.data.columns.indexOf(d);b=a.data.data.indexOf(b);return a._measureInfo.yPositions[d+"_"+b]||0},calcFullWidth:function(b,d,c){c=c.field;var h=a._getFieldWidth(d,
b._measureInfo.columnsHash[c]),e=d.columnSpans&&d.columnSpans[c]||1;if(1<e)for(var f,l=0;l<e-1;l++)f=b._measureInfo.nextColumnHash[f?f.field:c],h+=a._getFieldWidth(d,f);return h},_getFieldWidth:function(a,b){a.style.fields=a.style.fields||{};return(a.style.fields[b.field]=a.style.fields[b.field]||{}).width||b.style.width},calcFullHeight:function(b,d,c){c=c.field;var h=b.data.data.indexOf(d),e=a._getDataHeight(d,c);d=d.rowSpans&&d.rowSpans[c]||1;if(1<d)for(var f=h+1,l=0;l<d-1;l++)h=b.data.data[f++],
e+=a._getDataHeight(h,c);return e},_getDataHeight:function(a,b){a.style.fields=a.style.fields||{};return(a.style.fields[b]=a.style.fields[b]||{}).height||a.style.height},sanitize:function(a){delete a._measureInfo}},d={getIntersectingTableJsonsBehind:function(a,b,d,c,g){function h(a){var c=a.data.data[0].fieldInfos[a.data.columns[0].field];return e.isTextLikeCell(c)||e.isShapeCell(c)||e.isImageCell(c)?f.checkRectsIntersect([d,{x:a.style.left+b.left,y:a.style.top+b.top,w:k.getTableWidth(a),h:k.getTableHeight(a)}]):
!1}function l(a){return f.checkRectsIntersect([d,{x:a.style.left+b.left,y:a.style.top+b.top,w:a.style.width,h:a.style.height}])}var n=[],m=[];a.backgroundFloatingTablesSectionJson&&a.backgroundFloatingTablesSectionJson.stack.forEach(function(a,b){if(-1===c||g||c!==b)if("table"===a.id&&h(a)||"img"===a.id&&l(a))-1===c||g||c>b?n.push(a):m.push(a)});a.foregroundFloatingTablesSectionJson&&a.foregroundFloatingTablesSectionJson.stack.forEach(function(a,b){if(g&&c===b)return!0;if("table"===a.id&&h(a)||"img"===
a.id&&l(a))g&&c>b?n.push(a):m.push(a)});return{elementJsonsBehind:n,elementJsonsAbove:m}}};c.collectSectionJsons=function(a,b){b=b||{};var d=[];if(!a)return[];if(a.sections)return a.sections;if(!a.sectionsTables)return[];b.processSectionJson=b.processSectionJson||function(){};a.sectionsTables.forEach(function(h,e){var f={addBackground:function(){!1!==b.backgroundForeground&&h.backgroundSectionJson&&h.backgroundSectionJson.stack&&d.push(h.backgroundSectionJson)},addBackgroundTables:function(f){var l=
[];!1!==b.floatingTables&&h.backgroundFloatingTablesSectionJson&&h.backgroundFloatingTablesSectionJson.stack.forEach(function(d,e){"table"===d.id&&c._processTableJson(d,l,"floating",a.documentOptions,b,h,e,!1)});f&&l.reverse();l.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"foreground",floatingIndex:a.__floatingIndex});delete a.__floatingIndex});d=d.concat(l)},addInGridSections:function(){var f=[];c._processTableJson(h,f,"page",a.documentOptions,b,h);f.forEach(function(a){b.processSectionJson(a,
{pageIndex:e,source:"grid",index:a.__inGridIndex});delete a.__inGridIndex});d=d.concat(f)},addForegroundTables:function(f){var l=[];!1!==b.floatingTables&&h.foregroundFloatingTablesSectionJson&&h.foregroundFloatingTablesSectionJson.stack.forEach(function(d,e){"table"===d.id&&c._processTableJson(d,l,"floating",a.documentOptions,b,h,e,!0)});f&&l.reverse();l.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"foreground",floatingIndex:a.__floatingIndex});delete a.__floatingIndex});d=d.concat(l)},
addForeground:function(){!1!==b.backgroundForeground&&h.foregroundSectionJson&&h.foregroundSectionJson.stack&&d.push(h.foregroundSectionJson)}};b.topFirst?(f.addForeground(),f.addForegroundTables(!0),f.addInGridSections(),f.addBackgroundTables(!0),f.addBackground()):(f.addBackground(),f.addBackgroundTables(),f.addInGridSections(),f.addForegroundTables(),f.addForeground())});return d};c._processTableJson=function(a,c,e,f,k,t,q,v){a.data.data.forEach(function(h,l){h.fieldInfos&&a.data.columns.forEach(function(n,
m){var p=h.fieldInfos[n.field];if(p&&p.sectionJson&&p.sectionJson.stack){k.processFieldInfoFunc&&k.processFieldInfoFunc(p);(!1!==k.saveParentInfo||k.populateWithFloatingElementsBehind)&&b.provideParentInfo(p.sectionJson,a,h,n,e,f);if(k.populateWithFloatingElementsBehind){n=function(a){a=g.clone(a);a.isContextFloatingElement=!0;a.style.left=a.style.left+f.left-r._parentBox.x;if("table"===a.id)a.style.top=a.style.top+f.top-r._parentBox.y;else if("img"===a.id||"map"===a.id)a.style.top=a.style.top+f.top-
r._parentBox.y;return a};var r=g.clone(p.sectionJson),u;"page"===e?u=d.getIntersectingTableJsonsBehind(t,f,r._parentBox,-1,void 0):"floating"===e&&(u=d.getIntersectingTableJsonsBehind(t,f,r._parentBox,q,v));p=u.elementJsonsBehind.map(n);u=u.elementJsonsAbove.map(n);r.stack=p.concat(r.stack);r.stack=r.stack.concat(u);c.push(r)}else c.push(p.sectionJson);u=c[c.length-1];"page"===e?u.__inGridIndex=l*a.data.columns.length+m:u.__floatingIndex=q}})});b.sanitize(a)};c.getParentBox=function(a){return a&&
a._parentBox};c.setParentBox=function(a,b){a._parentBox=b};c.getParentStyle=function(a){return a&&a._parentStyle};return c})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],function(){function g(b){return Array.isArray(b)?b:[b.x,b.y]}function f(b){return Array.isArray(b)?b:[b.x,b.y,b.x+b.w,b.y+b.h]}function e(b){return Array.isArray(b)?{x:b[0],y:b[1],w:b[2]-b[0],h:b[3]-b[1]}:b}function k(b){return[[b[0],b[1]],[b[2],b[1]],[b[2],b[3]],[b[0],b[3]],[b[0]+(b[2]-b[0])/2,b[1]+(b[3]-b[1])/
2]]}var c={rotatePointAroundPoint:function(b,a,d){d=c.degToRad(d);var h=g(b),e=g(a);a=Math.cos(d)*(e[0]-h[0])-Math.sin(d)*(e[1]-h[1])+h[0];d=Math.sin(d)*(e[0]-h[0])+Math.cos(d)*(e[1]-h[1])+h[1];return Array.isArray(b)?[a,d]:{x:a,y:d}},degToRad:function(b){return b*Math.PI/180},radToDeg:function(b){return 180*b/Math.PI},cosDeg:function(b){return Math.cos(c.degToRad(b))},sinDeg:function(b){return Math.sin(c.degToRad(b))},angleTo180_180Range:function(b){b=(b+180)%360;0>b&&(b=360+b);return b-180},angleTo0_360Range:function(b){b%=
360;0>b&&(b=360+b);return b},calcVectorLength:function(b){var a=b[0]-b[2];b=b[1]-b[3];return Math.sqrt(a*a+b*b)},addPointToVector:function(b,a){a=g(a);b=b.slice();b[0]+=a[0];b[1]+=a[1];b[2]+=a[0];b[3]+=a[1];return b},subtractPointFromVector:function(b,a){a=g(a);b=b.slice();b[0]-=a[0];b[1]-=a[1];b[2]-=a[0];b[3]-=a[1];return b},putVectorToOrigin:function(b){return c.subtractPointFromVector(b,[b[0],b[1]])},normalizeVector:function(b){b=c.putVectorToOrigin(b);var a=c.calcVectorLength(b);b[2]/=a;b[3]/=
a;return b},calcDotProduct:function(b,a){b=c.putVectorToOrigin(b);a=c.putVectorToOrigin(a);return b[2]*a[2]+b[3]*a[3]},calcAngleBetweenVectors:function(b,a){b=c.normalizeVector(b);a=c.normalizeVector(a);return Math.acos(c.calcDotProduct(b,a))},addLengthToVector:function(b,a){var d=c.calcVectorLength(b),h=[b[0],b[1]];b=c.normalizeVector(b);b[2]*=d+a;b[3]*=d+a;return c.addPointToVector(b,h)},rotateVectorAroundPoint:function(b,a,d){a=g(a);var h=c.rotatePointAroundPoint(a,[b[0],b[1]],d);b=c.rotatePointAroundPoint(a,
[b[2],b[3]],d);return[h[0],h[1],b[0],b[1]]},toLineABC:function(b){var a=b[3]-b[1],d=b[0]-b[2];return[a,d,-a*b[0]-d*b[1]]},intersect2Lines:function(b,a){var d=c.toLineABC(b),h=c.toLineABC(a);a=d[0];b=d[1];var d=d[2],e=h[0],f=h[1],h=h[2],n=a*f-e*b;return 0===n?null:[(h*b-d*f)/n,(e*d-a*h)/n]},intersectLineWithRect:function(b,a){function d(d,h){(d=c.intersect2Lines(b,[d[0],d[1],h[0],h[1]]))&&c.isPointInRect(a,d)&&g.push(d)}var h=k(a),e=h[0],f=h[1],n=h[2],h=h[3],g=[];d(e,f);d(f,n);d(n,h);d(h,e);if(2!==
g.length)return null;e=[g[0][0],g[0][1],g[1][0],g[1][1]];return c.calcVectorLength(e)?e:null},isPointInRect:function(b,a){b=f(b);a=g(a);var d=b[2]-b[0],c=b[3]-b[1];return!(a[0]<b[0]||a[0]>b[0]+d||a[1]<b[1]||a[1]>b[1]+c)},isRectInRect:function(b,a){return c.checkRectsIntersect([b,a])&&k(f(b)).every(function(b){return c.isPointInRect(a,b)})},checkRectsIntersect:function(b){b=b.map(f);return b.every(function(a){var d=k(a);return b.every(function(b){return a===b?!0:d.some(function(a){return c.isPointInRect(b,
a)})||k(b).some(function(b){return c.isPointInRect(a,b)})})})},getRotatedRectBox:function(b,a){var d=!Array.isArray(b);b=f(b);var h=k(b);b=h[0];var l=h[1],m=h[2],n=h[3],h=h[4];b=c.rotatePointAroundPoint(h,b,a);l=c.rotatePointAroundPoint(h,l,a);m=c.rotatePointAroundPoint(h,m,a);n=c.rotatePointAroundPoint(h,n,a);b=c.getPointsExtent([b,l,m,n]);return d?e(b):b},uniteRects:function(b){var a=!Array.isArray(b[0]);b=b.map(f);var d=[];b.forEach(function(a){d=d.concat(k(a))});b=c.getPointsExtent(d);return a?
e(b):b},getPointsExtent:function(b){var a=!Array.isArray(b[0]),d=Infinity,c=-Infinity,f=Infinity,k=-Infinity;b.forEach(function(a){a=g(a);d=Math.min(d,a[0]);c=Math.max(c,a[0]);f=Math.min(f,a[1]);k=Math.max(k,a[1])});b=[d,f,c,k];return a?e(b):b}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil",
"esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(g,f,e,k,c){var b={getFieldCellValue:function(a){return a.gridData&&a.gridData[a.column.field]},setFieldCellContent:function(a,b){a.set("value",b);a.gridData[a.column.field]=b},clearFieldInfo:function(a,d){a.fieldInfos&&delete a.fieldInfos[d];a[d]="";b.setNumericDataValue(void 0,a,d)},getNumericCellValue:function(a){return b.getNumericDataValue(a.gridData,a.column.field)},setNumericCellValue:function(a,d){return b.setNumericDataValue(d,
a.gridData,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+"_numeric"]},setNumericDataValue:function(a,b,c){b[c+"_numeric"]=a},getRenderedValue:function(a,d,e){var h={parentGrid:a,gridData:d,column:e};a=a._getCellRenderer().getRenderedContent(h);if(a.isUnavailableData)return{};var f;"number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(h=k.parsePercentOrCurrency(a.formattedValue,c.getCurrencyFormat()),isNaN(h)||(f=h)):f=a.value;"number"!==typeof f&&(f=
b.getNumericDataValue(d,e.field));return{numericValue:f,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.gridData[a.column.field]&&!b.getFieldInfo(a)},hasSpans:function(a){return b.getColumnSpan(a)||b.getRowSpan(a)},getColumnSpan:function(a){return a&&a.gridData&&a.gridData.columnSpans&&a.gridData.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.gridData&&a.gridData.rowSpans&&a.gridData.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&
a.columnSpans&&a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&a.rowSpans[b]},getFieldInfo:function(a){return a&&a.gridData&&a.column&&a.gridData.fieldInfos&&a.gridData.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return b.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,b){a.gridData&&(a.gridData.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){b.setFieldInfo(a,b.getFieldInfo(a)||{});return b.getFieldInfo(a)},getCellStyle:function(a,d){if(!a||
!a.gridData||!a.column)return null;var c=a.gridData.style&&a.gridData.style.fields&&a.gridData.style.fields[a.column.field];!c&&d&&(c={},b.setCellStyle(a,c));return c},getCellThemeStyle:function(a){return a&&a.gridData&&a.column?a.gridData.themeStyle&&a.gridData.themeStyle.fields[a.column.field]:null},setCellStyle:function(a,b){var d=a.gridData.style=a.gridData.style||{};d.fields=d.fields||{};d.fields[a.column.field]=b},updateCellStyle:function(a,d){a=b.getCellStyle(a,!0);g.mixin(a,d)},copyFieldStyle:function(a,
d,c){a=b.getCellStyle(a);d=b.getCellStyle(d,!0);for(var e in c)void 0!==a[e]&&(d[e]=a[e])},getFieldCellUrl:function(a){if(a.gridData&&a.gridData.urls&&a.column)return a.gridData.urls[a.column.field]},setFieldCellUrl:function(a,b){a.gridData&&a.column&&(a.gridData.urls=a.gridData.urls||{},void 0===b?delete a.gridData.urls[a.column.field]:a.gridData.urls[a.column.field]=b)},getConditionalFormatting:function(a){return(a=b.getFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,d){a=b.provideFieldInfo(a);
d&&d.fieldInfo===a&&(d.fieldInfo=g.clone(d.fieldInfo),delete d.fieldInfo.triggerJson);a.triggerJson=d},_toFieldInfo:function(a){return a?a.gridData?b.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=
b._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=b._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},isShapeCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=b._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=b._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!b._toFieldInfo(a)||b.isRichTextCell(a)||b.isVariableLikeFieldCell(a)||
b.isSpecialFieldCell(a)},isRichTextCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script)},isVariableFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=b._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){a=b._toFieldInfo(a);
return!(!a||!(a.hasVariable&&e.isNumericField(a)||a.script&&!a.script.isUneditableScript&&"String"!==a.script.type))},isCalculatableNumericVariableFieldCell:function(a){var d=b._toFieldInfo(a);return d&&d.isWebMap?!1:b.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var d=b._toFieldInfo(a);return d&&!b.isVariableLikeFieldCell(a)&&
f.hasField(d.name)}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string","dojo/i18n!esri/nls/jsapi"],function(g,f){f=f.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var e={SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",
GROUPCOUNT:"SummaryCount",SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",SITENOTE8:"SiteNote8",SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes"},REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",PRODUCTURL:"ProductUrl",PRODUCTLABEL:"ProductLabel",SOURCE:"Source",CENSUSYEAR:"CensusYear",
CURRENTYEAR:"CurrentYear",FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",
RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",
DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},REPORT_VAR_FIELDS_MAP_BACK:{},PREVIEW:{Title:f.fieldPreviewTitle,Title_graphic:f.fieldPreviewTitleGraphic,Subtitle:f.fieldPreviewSubtitle,Date:f.fieldPreviewDate,Page:f.fieldPreviewPage,Count:f.fieldPreviewLocationsCount,Copyright:f.fieldPreviewCopyright,TrialUrlText:f.fieldPreviewTrialUrlText,PhoneNumber:f.fieldPreviewPhoneNumber,ProductUrl:f.fieldPreviewProductUrl,
ProductLabel:f.fieldPreviewProductLabel,Source:f.fieldPreviewSource,"headers.SITE_NAME":f.fieldPreviewSiteName,"headers.SITE_NAME_multi":f.fieldPreviewSiteNameMulti,"headers.STORE_LAT":f.fieldPreviewLat,"headers.STORE_LONG":f.fieldPreviewLong,"headers.AREA_DESC2":f.fieldPreviewAreaDesc2,"headers.STORE_ADDR":f.fieldPreviewStoreAddr,"headers.AREA_DESC":f.fieldPreviewAreaDesc},DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",SITENOTES_FIELD_NAME:"SiteNotes",
SITENOTES_FIELD_ALIAS:"SiteNotes",GROUPCOUNT_FIELD_NAME:"SummaryCount",GROUPCOUNT_FIELD_ALIAS:"SummaryCount",init:function(){for(var e in this.SPECIAL_HEADER_FIELDS_NAME_MAP)this.SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this.SPECIAL_HEADER_FIELDS_NAME_MAP[e].toUpperCase()]=e;for(e in this.REPORT_VAR_FIELDS_MAP)this.REPORT_VAR_FIELDS_MAP_BACK[this.REPORT_VAR_FIELDS_MAP[e].toUpperCase()]=e},templateToUIHeader:function(e){if(!e)return null;0===e.indexOf("headers.")&&(e=e.substr(e.indexOf(".")+1));return this.SPECIAL_HEADER_FIELDS_NAME_MAP[e]},
qualifyTemplateHeaderName:function(e){return e&&0!==e.indexOf("headers.")?"headers."+e.toUpperCase():e},templateToUIReportVar:function(e){return this.REPORT_VAR_FIELDS_MAP[e]},uiToTemplate:function(e){return this.SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[e]||this.REPORT_VAR_FIELDS_MAP_BACK[e]},getPreview:function(e,c,b){c&&"Title"===e&&(e+="_graphic");b&&"headers.SITE_NAME"===e&&(e+="_multi");return"SiteNotes"===e?f.fieldPreviewSiteNotes:0===e.indexOf("SiteNote")?g.substitute(f.fieldPreviewSiteNote,{index:e.replace("SiteNote",
"")||1}):this.PREVIEW[e]},hasField:function(e){return!!this.PREVIEW[e]||e&&0===e.indexOf("SiteNote")},getSiteNoteFieldNameAt:function(e){return"SiteNote"+(!e||1>=Number(e)?"":e)}};e.init();return e})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],function(){var g={isNumericField:function(e){switch(e&&e.type){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},isStringField:function(e){return e&&
"esriFieldTypeString"==e.type||!1},isDateField:function(e){return e&&"esriFieldTypeDate"==e.type||!1}},f=/DISTANCE$/;g.isDistanceField=function(e){return e&&f.test(e)};var e=/^(SHAPE__Area|SHAPE__Length)$/;g.canShowField=function(f,c){if(!f||!f.name||"esriFieldTypeOID"===f.type)return!1;if("esriFieldTypeDate"===f.type)return"d";var b=g.isNumericField(f)||g.isStringField(f);if("f"===b&&!1===f.editable&&e.test(f.name))return null;void 0===c&&(c=/^(OBJECTID|OID|FID)$/i);return c&&c.test(f.name)?!1:!0===
b?"s":b};g.createFieldInfo=function(e){var c=g.canShowField(e);e={fieldName:e.name,label:e.alias||e.name,isEditable:!!e.editable,visible:!!c};switch(c){case "i":e.format={places:0,digitSeparator:!0};break;case "f":e.format={digitSeparator:!0};break;case "s":e.stringFieldOption="textbox"}return e};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../../grid/coreUtils/GridDataUtil",
"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],function(g,f,e,k){var c={createTable:function(b){var a=b.numColumns,d=b.numRows,c=b.width,e=b.widths,k=b.style,n=b.attributes&&b.attributes.fixedColumns,p=b.attributes&&b.attributes.dynamicColumns;if(c)if(e)e=e.map(function(a){return c*Number(a.replace("%",""))/100});else for(var t=c/a,e=[],q=0;q<a;q++)e.push(t);if(e)c||isNaN(Number(e[0]))||(c=0,e.forEach(function(a){c+=a}));else for(t=Number(100/a).toFixed(3)+"%",e=[],q=0;q<a;q++)e.push(t);
t=[];for(q=0;q<a;q++)t.push({field:"field"+q,style:{width:e[q]}});for(var e=[],v=!0,r=b.height?b.height/d:b.rowHeight||15.07,u=0;u<d;u++){for(var y={style:{height:r,fields:{}},fieldInfos:{}},q=0;q<a;q++){var w="field"+q;!1!==b.useDefaultTheme&&(y.style.fields[w]=g.mixin({horizontalAlign:0===q?"left":"right",overrideStyle:0===u?1<d?!1!==b.useDefaultHeaderTheme?"TableHeader":"Default":void 0:v?"AlternatingRow":"Default"},b.cellParams));p&&q>=n&&0===u&&(y.fieldInfos[w]=f.createFieldInfoFromSpecialFieldName("AREA_DESC"));
b.processTableCell&&b.processTableCell(y,w,u,q,b)}e.push(y);v=!v}return{id:"table",attributes:g.mixin({},b.attributes),style:g.mixin({width:c||772.33},k),data:{columns:t,data:e}}},createSingleCellTable:function(b){b=b||{};var a=c.createTable({numColumns:1,numRows:1,attributes:b.attributes,useDefaultTheme:!1});c.modifyTableJson(a,0,0,b);return a},modifyTableJson:function(b,a,d,c){a=b.data.data[a];d=b.data.columns[d];var e=d.field;c.text&&(a[e]=c.text);c.fieldInfo&&(a.fieldInfos[e]=c.fieldInfo);c.cellStyle&&
(a.style.fields[e]=c.cellStyle);c.columnSpan&&(a.columnSpans=a.columnSpans||{},a.columnSpans[e]=c.columnSpan);c.rowSpan&&(a.rowSpans=a.rowSpans||{},a.rowSpans[e]=c.rowSpan);a.themeStyle=c.themeStyle;c.width&&(b.style.width=c.width,d.style.width=c.width);c.height&&(a.style.height=c.height);void 0!==c.left&&(b.style.left=c.left);void 0!==c.top&&(b.style.top=c.top)},getTableWidth:function(b){return b.style.width},getTableHeight:function(b){var a=0;b.data.data.forEach(function(b){a+=b.style?b.style.height:
0});return a},calcTableBox:function(b){return{x:b.style.left||0,y:b.style.top||0,w:c.getTableWidth(b),h:c.getTableHeight(b)}},createDetailsSection:function(b){return{type:k.DETAILS,stack:[c.createTable(b)]}},createDetailsSectionForFieldInfos:function(b,a){return{type:k.DETAILS,stack:[function(){var d=c.createTable(g.mixin({numColumns:2,numRows:b.length+1},a));d.data.data.forEach(function(a,d){0===d?a.field0=b[0].hasVariable?b[0].fieldCategory:"":(d=b[d-1],a.field0=d.script?d.script.alias:d.alias,
a.fieldInfos.field1=d)});c.provideSpaceAfter(d);return d}()]}},createDetailsSectionForFieldInfoGroups:function(b,a){return{type:k.DETAILS,stack:[function(){var d=c.createTable(g.mixin({numColumns:b.length+1,numRows:b[0].length+1},a));d.data.data.forEach(function(a,c){d.data.columns.forEach(function(d,e){0!==e&&(0===c?a[d.field]=b[e-1][0].fieldCategory||"":(e=b[e-1][c-1],a.field0=a.field0||(e.script?e.script.alias:e.alias),a.fieldInfos[d.field]=e))})});c.provideSpaceAfter(d);return d}()]}},provideSpaceAfter:function(b,
a){b.style.spaceAfter=Math.max(a||0,90-15.07*b.data.data.length)},applyDefaultStyling:function(b){var a=!0;b.data.data.forEach(function(d,c){b.data.columns.forEach(function(b){d.style.fields[b.field].overrideStyle=0===c?"TableHeader":a?"AlternatingRow":void 0});a=!a})},setTableHeaderStyle:function(b){if(b.style)for(var a in b.style.fields)(b.style.fields[a]=b.style.fields[a]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(b){return b.isGrid?!b.columns||!b.columns.length||
!b.store||!b.store.data.length:b.data?!b.data.columns||!b.data.columns.length||!b.data.data||!b.data.data.length:!1},isSingleCelledTable:function(b){return b.isGrid?b.store&&1===b.store.data.length&&b.columns&&1===b.columns.length:b.data?1===b.data.columns.length||1===b.data.data.length:!1},isMultiDataTable:function(b){return b.isGrid?1<b.columns.length||2<b.store.data.length:b.data?1<b.data.columns.length||2<b.data.data.length:!1},getTableSubtype:function(b){if(!c.isSingleCelledTable(b))return null;
b=b.isGrid?b.store.data[0].fieldInfos&&b.store.data[0].fieldInfos[b.columns[0].field]:b.data.data[0].fieldInfos&&b.data.data[0].fieldInfos[b.data.columns[0].field];return e.isTextLikeCell(b)?"isTextLike":b.isImage?"isImage":b.isShape?"isShape":null},tableJsonHasInfographic:function(b){return!!c.getTableJsonInfographic(b)},getTableJsonInfographic:function(b){var a;b.data.data.some(function(b){if(b.fieldInfos)for(var d in b.fieldInfos){var c=b.fieldInfos[d];if(c&&c.isInfographic)return a=c.infographicJson,
!0}});return a},getTableJsonFirstFieldInfo:function(b){return b.data.data[0].fieldInfos[b.data.columns[0].field]},tableJsonHasChart:function(b){return b.data.data.some(function(a){if(a.fieldInfos)for(var b in a.fieldInfos){var c=a.fieldInfos[b];if(c&&c.isChart)return!0}})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils","dojo/i18n!esri/nls/jsapi"],function(g,f){function e(a){Object.keys(a).forEach(function(b){var d=
a[b];void 0!==d&&null!==d||delete a[b]})}f=f.geoenrichment.dijit.ReportPlayer.ReportPlayer;var k={NUMBER:"n/",createFieldInfoFromCalculator:function(a,b,c){if(!a)return null;a=(b="function"===typeof a.getDescriptionWithType?a:null)?b.variable:a;var d=c&&c.format,h=c&&c.autoformatCurrency,f=c&&c.additionalText,l=c&&c.calculatorName,k=c&&c.defaultDistanceUnits,v=c&&c.summaryType,r=b&&b.getToggleGroup&&b.getToggleGroup();c={comparisonIndex:c&&c.comparisonIndex,alias:b?b.getDescriptionWithType()||b.getAliasWithType():
a.description||a.alias,hasVariable:!0,variableID:a.id,fullName:a.fullName,fieldCategory:a.fieldCategory,vintage:a.vintage,type:a.type,statefulName:r?r.value:"n/"+a.fullName,summaryType:v};b=b?b.getCalcType().charAt(0):"n";c.name=g.name.createFieldNameFromVariable(a,b);d?g.format.setFieldInfoFormat(c,d):(c.decimals=a.precision,c.showCurrency=!(!h||"n"!==b||!a.units||"CURRENCY"!==a.units.toUpperCase()),c.showPercent=!c.showCurrency&&("p"===b||"n"===b&&a.units&&"PCT"===a.units.toUpperCase()),c.useThousandsSeparator=
!0);a.isWebMap&&(c.isWebMap=!0,c.webMapFieldName=a.fieldName,c.webMapField=a.field,c.webMapId=a.webMapId,!d&&a.field&&a.field.format&&(c.decimals=a.field.format.places,c.useThousandsSeparator=!1!==a.field.format.digitSeparator));a.customDataCollection&&(c.isCustomDataCollection=!0,c.customDataCollectionId=a.customDataCollection.id,c.customDataCollectionUrl=a.customDataCollection.url,c.customDataCollectionPortalUrl=a.customDataCollection.portalUrl);a.isSiteAttribute&&(c.isSiteAttribute=!0,c.attribute=
a.attribute,c.type=a.attribute.type,!d&&0<a.attribute.places&&(c.decimals=a.attribute.places));a.isDataLayerAttribute&&(c.isDataLayerAttribute=!0,c.layerID=a.layerID,c.layerUrl=a.layerUrl,c.layerName=a.layerName,c.attribute=a.attribute,c.type=a.attribute.type,!d&&0<a.attribute.decimals&&(c.decimals=a.attribute.decimals),"DISTANCE"===a.attribute.name&&(c.units=a.attribute.units||k||"esriMiles"));"string"===typeof f&&(c.additionalText=f);c.usedFields=a.usedFields;c.expressionText=a.expressionText;g.name.provideQualifiedFieldInfoTemplateName(c,
l);e(c);return c},fieldInfoToVariable:function(a){if(!a.hasVariable)return null;var b={id:a.variableID,fullName:a.fullName,fieldCategory:a.fieldCategory,vintage:a.vintage,type:a.type,precision:a.decimals,usedFields:a.usedFields,expressionText:a.expressionText};a.isWebMap&&(b.isWebMap=!0,b.fieldName=a.webMapFieldName,b.field=a.webMapField,b.webMapId=a.webMapId);a.isSiteAttribute&&(b.isSiteAttribute=!0,b.attribute=a.attribute);return b},createFieldInfoFromScript:function(a,b,c){b=c&&c.format;var d=
c&&c.additionalText,h=c&&c.calculatorName;a=a||{};a.name=a.name||g.name.DEFAULT_SCRIPT_NAME;a.alias=a.alias||f.scriptNameDefault;a.decimals=Number(a.decimals)||0;c={comparisonIndex:c&&c.comparisonIndex};c.name=g.name.createFieldNameFromScript(a);g.name.provideQualifiedFieldInfoTemplateName(c,h);c.script=a;b?g.format.setFieldInfoFormat(c,b):(c.decimals=Number(a.decimals),c.showCurrency=!1,c.showPercent=!1,c.useThousandsSeparator=!0);"string"===typeof d&&(c.additionalText=d);e(c);return c},createFieldInfoFromImage:function(a,
b){return{isImage:!0,imageJson:a,triggerJson:b}},createFieldInfoFromMap:function(a){return{isMap:!0,mapJson:a}},createFieldInfoFromShape:function(a){return{isShape:!0,shapeJson:a}},createFieldInfoFromChart:function(a){return{isChart:!0,chartJson:a}},createFieldInfoFromInfographic:function(a){return{isInfographic:!0,infographicJson:a}},createFieldInfoFromSection:function(a){return{isReportSection:!0,sectionJson:a}},createFieldInfoFromMissingVariable:function(a,b){return{name:a&&a.substr(a.indexOf(".")+
1),templateName:a,isMissing:!0,alias:b}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},c=/^\[\w+\]$/,b=/\[\w+\]/;k.createFieldInfoFromLabel=function(a,e){if("string"!==typeof a)return null;a=a.trim();var d=c.test(a);if(!e||d){if(!d)return null;a=a.replace(/\[|\]/g,"").toUpperCase();return k.createFieldInfoFromSpecialFieldName(g.fields.uiToTemplate(a))}return b.test(a)?(a=g.richText.collectFieldInfosFromRenderedXMLString(a))&&g.richText.createFieldInfoFromRichText(a.xmlString,
a.fieldInfos,a.specialFieldInfos):null};k.createFieldInfoFromSpecialFieldName=function(a,b){if("string"!==typeof a)return null;var d;a=a.substr(a.indexOf(".")+1);a=a.toUpperCase();"GROUPCOUNT"===a?d={name:g.fields.GROUPCOUNT_FIELD_NAME,alias:g.fields.GROUPCOUNT_FIELD_ALIAS}:"CURRDATE"===a?d={name:g.fields.DATE_FIELD_NAME,alias:g.fields.DATE_FIELD_ALIAS,format:b||g.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===a?d={name:g.fields.SITENOTES_FIELD_NAME,alias:g.fields.SITENOTES_FIELD_ALIAS}:0===a.indexOf("SITENOTE")&&
(d=g.fields.getSiteNoteFieldNameAt(a.replace("SITENOTE","")),d={name:d,alias:d});if(d)return d;(b=g.fields.templateToUIHeader(a))?d={name:g.fields.qualifyTemplateHeaderName(a),alias:b}:(a=g.fields.templateToUIReportVar(a))&&(d={name:a,alias:a});return d};var a=/_P$/i;k.isFieldInfoInPercentState=function(b){return b?b.statefulName&&("p"===b.statefulName.charAt(0)||a.test(b.statefulName))||b.alias&&-1!==b.alias.indexOf("(%)"):!1};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred",
"require"],function(g,f){var e={},k;e.init=function(){if(k)return k.promise;k=new g;f("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),function(c,b,a,d,h,f){e.builder=c;e.format=b;e.name=a;e.renderer=d;e.richText=h;e.fields=f;k.resolve()});return k.promise};e.init();return e})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",
DETAILS:"Details",GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",INFOGRAPHIC_BACKGROUND:"InfographicBackground",INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",
TABLE_FOREGROUND:"TableForeground",TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/tasks/RunReportTask ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/CustomReportsManager ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q){function v(){var a=new c;g(["./supportClasses/attachments/AttachmentsStoreSerializer","../core/supportClasses/templateJsonUtils/TemplateJsonSerializer","../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider","./commands/mapToImage/MapToURLUtil","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(b,d,c,e,h){r=b;u=d;y=c;w=e;A=h;a.resolve()});return a.promise}var r,u,y,w,A;return f(null,{reportDataToServerData:function(a){var b=a.getReportData();
return v().then(function(){return k({files:b.reportObject.templateData.getFiles(),attachmentsProvider:b.attachmentsStore&&r.getAttachmentsStoreJson(b.attachmentsStore,{numAreas:b.analysisAreas.length,saveImages:!0})}).then(function(a){var d=h.CreateReportResultCache.getResults()[0].originalXMLs[0];a.files.push({name:"data.xml",data:d});var d={reportItem:{properties:{isMultiFeature:b.reportObject.isMultiFeature?"true":"false"},resources:a.files},customLogo:b.customLogo,portalUrl:b.config.portalUrl,
geometryServiceUrl:b.config.geometryServiceUrl,printMapTaskUrl:b.config.printMapTaskUrl,reverseAnalysisAreasOnMap:b.reverseAnalysisAreasOnMap},c=m.areasToJson(b.analysisAreas),f=b.combinedAreasInfo&&m.combinedAreasInfoToJson(b.combinedAreasInfo);d.sites=f.groups.map(function(b,d){var h=e.mixin({},b);h.areas=b.indexes.map(function(a){return c[a]});delete h.indexes;if(a.attachmentsProvider&&a.attachmentsProvider.supportsMultipleAreas||0===d)if(b=a.attachmentsProvider.areaAttachments[b.indexes[0]])h.images=
b.images,h.attributes=b.attributes,h.notes=b.notes;return h});console.log(d);return d})})},reportDataFromServerData:function(c){function e(a){var d=n.prepareCustomReportFromItem(c.reportItem);d.isGraphicReport=!0;d.portalJson={files:g};return b(q.provideEditorJson(d,{variableProvider:a}),function(){d.templateJson=u.deserialize(d.templateJson);delete d.portalJson;return d})}function h(b,c){var e=g.filter(function(a){return"data.xml"===a.name})[0],h=/.*\.(png|jpg|jpeg|json)$/i,f={};g.forEach(function(a){h.test(a.name)&&
(f[a.name]=a.data)});b={selectedReport:b,areaData:d.parse(e.data,function(a,b){return f[b]||b})};a.applyRunReportAndGetDataResults(b,c)}var f=this,k=c.reportItem.resources,g;if(Array.isArray(k))g=k;else{g=[];for(var B in k)g.push({name:B,data:k[B]})}return v().then(function(){var d=new y;return b(e(d),function(e){l.parseSites(c);var n=m.areasFromJson(c.analysisAreas),k={isClassic:!1,isMultiFeature:e.isMultiFeature&&1<n.length,reportType:e.type||t.STANDARD,reportTitle:e.title||"",templateJson:e.templateJson,
reportObject:e,fieldData:{metadata:{},areaData:[],errors:[]},analysisAreas:n,combinedAreasInfo:c.combinedAreasInfo&&m.combinedAreasInfoFromJson(c.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:c.reverseAnalysisAreasOnMap,infographicOptions:f._infographicOptionsProvider.getInfographicOptions({geoenrichmentUrl:"",countryID:"",reportID:"",analysisAreas:n}),attachmentsStore:c.attachmentsProvider&&r.getAttachmentsStoreFromJson(c.attachmentsProvider),geClient:null,templateVariableProvider:d,config:{portalUrl:c.portalUrl,
geoenrichmentUrl:null,geometryServiceUrl:c.geometryServiceUrl,printMapTaskUrl:c.printMapTaskUrl,countryID:null,hierarchy:null,reportID:e.reportID,variables:null},customLogo:c.customLogo};l.populateCombinedAreasInfo(k.combinedAreasInfo,k.analysisAreas);h(e,k);p.setGeoenrichmentUrl(k.config.geoenrichmentUrl);k.config.geometryServiceUrl&&A.setGeometryServiceUrl(k.config.geometryServiceUrl);k.config.printMapTaskUrl&&w.setPrintMapTaskUrl(k.config.printMapTaskUrl);return b(k.attachmentsStore&&a.populateReportDataFromAttachmentsStore(k,
k.attachmentsStore),function(){return k})})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaDataUtil ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/infographics/simpleInfographic/dataDrilling/EnrichUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/infographics/utils/InfographicJsonUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t){return{populateReportDataFromAttachmentsStore:function(b,d){var c=[];d.supportsMultipleAreas&&d.setCurrentAnalysisAreaIndex(0);c.push(g(d.getNotes(),function(a){a&&a.length&&(b.fieldData.metadata[m.SITENOTES_FIELD_NAME]=a.map(function(a){return a.text}).join("\x3cbr/\x3e\x3cbr/\x3e"),a.forEach(function(a,d){b.fieldData.metadata[m.getSiteNoteFieldNameAt(d+1)]=a.text}))}));c.push(g(d.getAttributes(),function(d){if(!d||!d.length)return null;var c={attributes:{}};
d.forEach(function(a){c.attributes[a.name]=a});b.analysisAreas.forEach(function(d,e){(d=b.fieldData.areaData[e])&&a.addFeatureAttributesCalculator(c,d)})}));return f(c)},runReportAndGetData:function(a,b){return f([h.getCustomReportByID(a),b]).then(function(b){var d=b[0];b=b[1];return(new c).execute({portalUrl:a.portalUrl,analysisAreas:a.analysisAreas,countryID:a.countryID,hierarchy:a.hierarchy,report:{reportID:d.reportID,portalUrl:d.templateData.getPortalUrl(!0),modified:d.modified,isMultiFeature:d.isMultiFeature},
attachmentsStore:b,cacheResult:!0}).then(function(a){return{taskIDs:a.taskIDs,selectedReport:d,areaData:a.areaData}},function(b){a.fieldData.errors.push(b);return(new e).reject(b)})})},runReportFromVariables:function(b){var c={};b.variables.fullNames.forEach(function(a){var b=p.createFieldNameFromVariable(a);c[a.substr(a.indexOf(".")+1)]=b});return(new k).enrichAreas({portalUrl:b.portalUrl,analysisAreas:b.analysisAreas,countryID:b.countryID,hierarchy:b.hierarchy,fields:d.convertForEnrich(b.variables),
comparisonLevels:b.comparisonLevels||t.getDefaultLevels()}).then(function(d){var e=b.analysisAreas.map(function(){return{}});a.addEnrichFeatures(d,c,p.DATA_COLLECTIONS_CALCULATOR_NAME,e);return{areaData:e}},function(a){b.fieldData.errors.push(a);return(new e).reject(a)})},applyRunReportAndGetDataResults:function(a,b){a&&a.areaData&&(b.fieldData.runReportTaskIDs=a.taskIDs,b.fieldData.areaData=a.areaData,b.analysisAreas&&this._reportDataFromAreas(b.analysisAreas,b.fieldData.areaData),a.selectedReport&&
this._reportDataFromReport(a.selectedReport,b.fieldData,b.combinedAreasInfo))},_reportDataFromAreas:function(b,d){b.forEach(function(b,c){if(c=d[c])a.addFeatureAttributesCalculator(b.feature,c),a.addAreaInfoCalculator(b,c)})},_reportDataFromReport:function(a,b,d){b=b.metadata;a&&!b.Title&&(b.Title=a.title);b.Source="Esri";b.Date=l.getReportFooterDate();b.Copyright="\u00a9 "+l.getFullYear()+" Esri";b.ProductLabel="";b.ProductUrl="";b.PhoneNumber="";b.TrialUrlText="";a.isMultiFeature&&(b.SITE_NAME=
d.locationName||d.name,b.STORE_NAME=d.locationName||d.name,b.AREA_DESC2=d.description||d.name,b.STORE_ADDR=d.address)},enrichFieldData:function(d,c){function e(a,d,e){function h(a){return c.fieldData.areaData.every(function(d,h){return void 0!==b.getAreaDataValue({fieldName:a,fieldData:c.fieldData,calculatorName:e,featureIndex:h,ignoreMetadata:!0})})}e=e||p.ENRICHED_DATA_NO_LEVELS;var f=[],n={};a.forEach(function(a){h(a.fieldName)||(f.push(a.mapTo),n[a.mapTo]=a.fieldName,n[a.mapTo.substr(a.mapTo.indexOf(".")+
1)]=a.fieldName)});return f.length?{fields:f,fieldsMap:n,comparisonLevels:d,calculatorName:e}:null}var m=[];d=n.optimizeInfos(d);d.forEach(function(a){var b;if(a.isGeneral||a.isChart)b=e(a.fields,a.levels,a.calculatorName);b&&m.push(b)});if(m.length)return g(h.getCustomReportByID(c),function(b){function d(a){c.fieldData.errors.push(a)}return f(m.map(function(b){return(new k).enrichAreas({portalUrl:c.portalUrl,analysisAreas:c.analysisAreas,countryID:c.countryID,hierarchy:c.hierarchy,fields:b.fields,
comparisonLevels:b.comparisonLevels}).then(function(d){a.addEnrichFeatures(d,b.fieldsMap,b.calculatorName,c.fieldData.areaData)},d)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t){function q(a){return(a=a&&c.id.findCredential(a)||c.id.credentials[0])&&a.token}return g(null,{enrichAreas:function(a){var b={};return e(this._analysisAreasToStudyAreas(a.analysisAreas,a.countryID,a.comparisonLevels),function(d){b.studyAreas=d;a.report?b.analysisVariables=[{itemid:a.report.reportID,url:a.report.portalUrl,token:q(a.portalUrl),outFields:["*"]}]:a.fields&&(b.analysisVariables=a.fields);return this._doRunTask(b,a,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(a){var b={f:"bin",format:"xml",reportfields:{}};b.report={itemid:a.report.reportID,url:a.report.portalUrl,token:q(a.portalUrl)};return e(this._analysisAreasToStudyAreas(a.analysisAreas,a.countryID,null,a.getAttributes),function(d){b.studyAreas=d;return this._doRunTask(b,a,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(a,b,d,c){var e=this;d=d&&d.map(function(a){return{layer:a}});return k(a.map(function(a,h){var n;n=a.geographies&&a.geographies.length?e._studyAreaFromGeographies(a.geographies,
b,!0):{attributes:f.mixin({},a.feature.attributes),geometry:a.feature.geometry.toJson()};d&&(n.comparisonLevels=d);return k([e._getStorePointForArea(a),c&&c(a)]).then(function(a){var b=a[0];a=a[1];n.attributes=n.attributes||{};b&&(n.attributes.STORE_LAT=n.attributes.STORE_LAT||b.STORE_LAT,n.attributes.STORE_LONG=n.attributes.STORE_LONG||b.STORE_LONG);n.attributes.STORE_ID=h+"";a&&a.forEach(function(a){n.attributes[a.name]=m.formatAttributeValueForStudyArea(a)});return n})}))},_getStorePointForArea:function(a){a=
a.location&&a.location.geometry||a.buffer&&a.buffer.point;if(a=a instanceof d?a:new d(a)){var c=l.geometryToLatLong(a);return c?c:e(n.projectGeometries(a,new b(t.WGS_84_WKID)),function(a){return l.geometryToLatLong(a)})}},createFeatureForGeographies:function(a,b){return this._createFeaturesForGeographies(a,b,!0).then(function(a){return a[0]})},createFeaturesForGeographies:function(a,b){return this._createFeaturesForGeographies(a,b,!1)},_createFeaturesForGeographies:function(a,d,c){a={returnGeometry:!0,
outSR:d.outSR||new b(t.WEB_MERCATOR_WKID),studyAreas:c?[this._studyAreaFromGeographies(a,d.countryID,!0,d.generalizationLevel)]:a.map(function(a){return this._studyAreaFromGeographies([a],d.countryID,!1,d.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(a,d,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(a,b,d,c){var e={sourceCountry:b,layer:null,ids:null},h=null,n=[],k;a.forEach(function(a){if(!a||!a.id)throw Error("Wrong geography.");
var b=a.levelId;if(b)if(!h)h=b;else if(d&&h!==b)throw Error("Geographies have different level IDs.");n.push(a.id);a.sourceCountry&&(e.sourceCountry=a.sourceCountry);a.hierarchy&&(e.hierarchy=a.hierarchy);a.attributes&&(k=f.mixin(k||{},a.attributes))});e.layer=h;e.ids=d?[n.join(",")]:n;e.attributes=k;e.generalizationlevel=c;return e},createFeaturesForBuffer:function(a,d){d=d||{};var c={bufferUnits:a.units,bufferRadii:a.radii||[a.radius],areaType:a.areaType||"RingBuffer"};"NetworkServiceArea"===c.areaType&&
(c.travelMode=a.travelMode,c.networkOptions=a.networkOptions);a=a.point||a.polyline;c={returnGeometry:!0,outSR:d.outSR||a.spatialReference||new b(t.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:c,studyAreas:[{geometry:a.toJson?a.toJson():a}]};return this._doRunTask(c,d,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(a,b){var d={},c=[];a.forEach(function(a){var b;b=a.point||a.polyline;b=JSON.stringify(b.toJson?b.toJson():b)+";"+
a.units+";"+a.areaType+";"+a.travelMode+";"+JSON.stringify(a.networkOptions);var e=d[b];e||(e=d[b]=f.clone(a),delete e.radius,e.radii=[],c.push(e));a.radii?e.radii=e.radii.concat(a.radii):e.radii.push(a.radius)});return k(c.map(function(a){return this.createFeaturesForBuffer(a,b)},this)).then(function(a){var b=[];a.forEach(function(a){b=b.concat(a)});return b})},_doRunTask:function(a,b,d){a=f.mixin({useData:{sourceCountry:b.countryID,hierarchy:b.hierarchy||p.getHierarchyID()},forStorage:!1},a);return h[d](a)},
_handleFeatureSetsRequest:function(b){return(new a(b[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(g,f,e,k){var c={composeAttributesFromFieldInfos:function(b,a){return b&&b.filter(function(a){return a.visible}).map(function(b){var d=b.fieldName,c=b.label,e=b.format&&b.format.places,
f=b.format&&b.format.digitSeparator,k=b.format&&b.format.dateFormat,g=a[b.fieldName];b=(b=b.format)&&b.dateFormat?"esriFieldTypeDate":b&&void 0!==b.places?0<b.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:d,alias:c,places:e,digitSeparator:f,dateFormat:k,value:g,type:b,domain:null,length:void 0}})},formatAttributeValue:function(b,a){a=a||{};var d=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:"";if(!b||null===b.value||void 0===b.value)return d;
if(!a.skipFormattedValue&&b.formattedValue&&b.formattedValue!==d)return b.formattedValue;var c=b.domain&&"codedValue"===b.domain.type?new f(b.domain):null;c?(a=c.getName(b.value))||(a=b.value+""):"esriFieldTypeString"===b.type?a=b.value:"esriFieldTypeDate"===b.type?(a=new Date,a.setTime(b.value),a=e.formatDateShort(a)):(a=a.format,a=k.formatNumber(b.value,{places:a&&void 0!==a.decimals?a.decimals:b.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:!1===b.digitSeparator}));
return null===a||void 0===a?d:a},formatAttributeValueForStudyArea:function(b){var a;b&&null!==b.value&&void 0!==b.value||(a=!0);a||(a=b.domain&&"codedValue"===b.domain.type||"esriFieldTypeDate"===b.type);return a?c.formatAttributeValue(b):b.value},attributeToJson:function(b){return{name:b.name,alias:b.alias,type:b.type,value:b.value,domain:b.domain&&(b.domain.toJson?b.domain.toJson():g.clone(b.domain)),places:b.places,digitSeparator:b.digitSeparator,dateFormat:b.dateFormat,length:b.length}},attributeFromJson:function(b){return{name:b.name,
alias:b.alias,type:b.type,value:b.value,domain:b.domain,places:b.places,digitSeparator:b.digitSeparator,dateFormat:b.dateFormat,length:b.length}}};return c})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale","esri/moment"],function(g,f){var e={formatDate:function(f,c){return(f=e.objectToDate(f))?g.format(f,c):""},formatMoment:function(k,c){return(k=e.objectToTime(k))?f(k).format(c):""},formatDateShort:function(f){return e.formatMoment(f,"L")},formatDateTimeShort:function(f){return e.formatMoment(f,
"L LT")},formatLiveTime:function(f){var c=e.formatMoment(f,"l, LT").replace(/\d\d\d\d/,function(b){return b.substr(2)});return c?c+" "+e.formatDate(f,{datePattern:"ZZZZ",selector:"date"}):""},formatTypicalTime:function(f){return e.formatMoment(f,"ddd LT")},parseDateShort:function(e){return(e=+f(e,"L"))?new Date(e):null},getReportFooterDate:function(e){return g.format(e||new Date,{datePattern:"MMMM d, yyyy",selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(e){if(!e)return null;
e="string"===typeof e?new Date(e):e;return e.getTime?e.getTime():Number(e)||null},objectToDate:function(e){return e?e.getTime?e:new Date(e):null}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(g,f,e,k,c){function b(a,b){return c.projectGeometries(a,b)}g=g(null,
{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,b){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var d=new f;this._pendingInfos.push({geom:a,mapOrSR:b,dfd:d,index:this._pendingInfos.length});return d.promise},project:function(){function a(a){var d=f[a];return e(b(d.geoms,d.mapOrSR),function(a){a.forEach(function(a,b){b=d.indexMap[b];n[b]=a;h[b].resolve(a)})})}var d=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");
this._isBusy=!0;var h=[],f={};this._pendingInfos.forEach(function(a){h.push(a.dfd);var b=a.geom.type+";"+a.geom.spatialReference.wkid+";"+c.getSpatialReference(a.mapOrSR).wkid,b=f[b]=f[b]||{geoms:[],indexMap:{},mapOrSR:a.mapOrSR};b.geoms.push(a.geom);b.indexMap[b.geoms.length-1]=a.index});this._pendingInfos.length=0;var m=[],n=[],g;for(g in f)m.push(a(g));return k(m).then(function(){d._isBusy=!1;return n})}});g.needProject=function(a,b){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==
c.getSpatialReference(b).wkid};g.projectGeometries=b;return g})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),function(g,f,e,k,c,b,a,d,
h){function l(a){return a&&a.spatialReference||a instanceof e&&a||a&&new e(a)||new e(c.WEB_MERCATOR_WKID)}function m(a,b){var d=[];try{for(var e=0;e<a.length;e++)d.push(c.toSpatialReference(a[e],b))}catch(B){console.log(B)}return(new f).resolve(d)}function n(a,d){function c(a){m.push(function(){return p(n,a,f,d)})}var e=a[0],f=k.getJsonType(e),n={outSR:d.wkid||d.toJson(),inSR:e.spatialReference.wkid||e.spatialReference.toJson()},m=[],l=0,g=[];1==a.length?g.push(e):a.forEach(function(a){var d=b.getNumberOfPoints(a);
l+=d;if(1E4<l){var e=[];g.length?(e.push(a),l=d):(g.push(a),l=0);c(g);g=e}else g.push(a)});g.length&&c(g);return h(m,!0).then(function(a){for(var b=a[0],d=1;d<a.length;d++)b=b.concat(a[d]);return b},function(a){console.log(a);return[]})}function p(a,b,c,e){a.geometries=t(b);return d.requestPublicFirst({url:r,urlSuffix:"project"},{content:a}).then(function(a){return q(a.geometries,c,e)})}function t(a){var b=a.map(function(a){a=a.toJson();delete a.spatialReference;return a});return{geometryType:k.getJsonType(a[0]),
geometries:b}}function q(a,b,d){var c=k.getGeometryType(b),e={spatialReference:d.toJson()};return a.map(function(a){return new c(g.mixin(a,e))})}var v={},r;v.setGeometryServiceUrl=function(b){r=b;a.registerCORS(b)};v.getSpatialReference=l;v.projectGeometries=function(a,b){var d=l(b);b=Array.isArray(a)?a:[a];if(!b.length)return(new f).resolve(a);var e={},h=b.slice(),k=0;b=b.filter(function(a,b){if(a.spatialReference&&a.spatialReference.wkid!==d.wkid)return e[b]=k++,!0});return b.length?(c.testSpatialReferenceWKID(d)&&
c.testSpatialReferenceWKID(b[0].spatialReference)?m(b,d):n(b,d)).then(function(b){h.forEach(function(a,d){void 0!==e[d]&&(h[d]=b[e[d]])});b=h;return Array.isArray(a)?b:b[0]}):(new f).resolve(a)};v.unionGeometries=function(a){var b=l(a[0].spatialReference);a={sr:b.wkid||b.toJson(),geometries:t(a)};return d.requestPublicFirst({url:r,urlSuffix:"union"},{content:a}).then(function(a){return q([a.geometry],a.geometryType,b)[0]})};return v})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],
function(){var g={getNumberOfPoints:function(f){if(!f)return 0;Array.isArray(f)||(f=[f]);var e=0;f.forEach(function(f){e+=g.getGeometryPointCount(f.geometry||f)});return e},getGeometryPointCount:function(f){if(!f)return 0;var e=0,k=f.rings||f.paths;!k&&f.points&&(k=[f.points]);k?k.forEach(function(c){e+=c&&c.length||0}):e+="x"in f?1:2;return e}};return g})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],
function(g,f,e){var k=g(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(c,b,a,d){this.requests=c;this.results=b;this.requestCount=this.requests.length;this.chunkSize=Number(a);if(isNaN(this.chunkSize)||0>=this.chunkSize)this.chunkSize=this.requestCount;this.stopOnError=!!d},execute:function(){this.isExecuting=!0;for(this.dfd=new f;this.tryStartNextRequest(););return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;
if(this.index==this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var c=this.requests[this.index++];this.executeCount++;var b=c.request;"function"===typeof b&&(b=b());var a=this,d=!0;e(b,function(b){a.processResult(b,c.key,b instanceof Error,d)},function(b){a.processResult(b,c.key,!0,d)});d=!1;return!0},processResult:function(c,b,a,d){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=
!1,this.dfd.progress(1),this.dfd.reject(c);else if(this.results[b]=c,this.completeCount++,this.executeCount--,this.dfd.progress(this.completeCount/this.requestCount),!d)for(;this.tryStartNextRequest(););}});return function(c,b,a){void 0===a&&(a=10);var d=[],e;if(Array.isArray(c))e=[],c.forEach(function(a,b){d.push({key:b,request:a})});else for(var f in c)e={},d.push({key:f,request:c[f]});return(new k(d,e,a,b)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m){var n={_cache:{},_buildKey:function(a){return[a.countryID,a.hierarchy,JSON.stringify(d.areasToJson(a.analysisAreas,{excludeInfoTemplate:!0})),a.report.reportID,a.report.portalUrl,a.report.modified].join("_")},getCopy:function(a){a=this._buildKey(a);return(a=this._cache[a])&&f.clone(a)},copyAndPut:function(a,b){a=this._buildKey(a);this._cache[a]=b&&f.clone(b)},getResults:function(){var a=[],b;for(b in this._cache)a.push(this._cache[b]);return a}},p={execute:function(d){var g=
d.cacheResult&&n.getCopy(d);if(g)return c(g);var g=h.splitArrayToBunches(d.analysisAreas,10),p;return e(g.map(function(e){function h(){var h=f.mixin({},d,{analysisAreas:e});h.getAttributes=function(a){if(!d.attachmentsStore)return null;if(!d.attachmentsStore.supportsMultipleAreas&&p)return p;d.attachmentsStore.supportsMultipleAreas&&d.attachmentsStore.setCurrentAnalysisAreaIndex(d.analysisAreas.indexOf(a));return c(d.attachmentsStore.getAttributes(),function(a){p=p||a;return a})};return(new a).createReport(h).then(function(a){var d=
a&&a.taskID;a=a&&a.result;try{m.emulateErrors.createReportError&&(a={error:{message:"Error test: something crashed on the server!"}});var c;a&&"object"===typeof a&&(c=a.error);if(!c&&"string"===typeof a&&-1!==a.indexOf("{"))try{var e=JSON.parse(a);c=e&&e.error}catch(z){}if(c)if(l.runReportTask.ignoreErrors)a=[];else return(new k).reject(c);return{taskID:d,areaData:b.parse(a),originalXML:a,error:c}}catch(z){return(new k).reject(z)}})}return c(h(),function(a){return!a||a.error?l.runReportTask.secondAttempt?
h():a:a},function(a){return l.runReportTask.secondAttempt?h():(new k).reject(a)})})).then(function(a){var b={taskIDs:[],areaData:[],originalXMLs:[],errors:[]};a.forEach(function(a){b.taskIDs.push(a.taskID);b.originalXMLs.push(a.originalXML);a.error&&b.errors.push(a.error);b.areaData=b.areaData.concat(a.areaData)});d.cacheResult&&!b.errors.length&&n.copyAndPut(d,b);return b})}};g=g(null,{execute:function(a){console.log("Creating a new report...");return p.execute(a)}});g.CreateReportResultCache=n;
return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../../data/AreaDataUtil","./AttrUtil","esri/dijit/geoenrichment/ReportPlayer/_devConfig"],function(g,f,e,k){var c={parseSchema:function(b){var a={};b.tags.forEach(function(b){"xs:element"===b.name&&b.attributes&&"ReportData"===b.attributes.name&&g.queryJson(b,"xs:element").filter(function(a){return!!a.tags}).forEach(function(b){var d=
a[b.attributes.name]={};g.queryJson(b,"xs:element").forEach(function(a){d[a.attributes.name]="xs:string"===a.attributes.type?"string":"number"})})});return a}};return{parse:function(b,a){return this._parseDataXmlJson(g.parseXml(b,{saveInnerHTML:!0}),a)},_parseDataXmlJson:function(b,a){function d(b){function d(b){if(b=function(b){var d={},c,h,f;b.tags.forEach(function(e){var m;m=e.innerHTML?e.innerHTML:e.tags&&e.tags.length&&e.tags[0].text||"";var l=m;"string"===n[b.name][e.name]?m=String(m):(m=Number(m),
isNaN(m)&&(m=l),k.emulateErrors.createReportNaN&&(m=NaN));a&&(m=a(e.name,m));d[e.name]||(d[e.name]=m);"AREA_ID"===e.name&&(c=m);"IDFNDFIELD"===e.name&&(h=m);"STORE_ID"===e.name&&(f=m)});c=c||h;if(!c&&!f)return null;var g;!c&&f&&(g=Number(f));c&&void 0===l[c]&&(l[c]=m++);e.cleanUpAttrs(d);return{name:b.name,attrs:d,areaIndex:void 0!==g?g:l[c]}}(b)){var d=h[b.areaIndex]=h[b.areaIndex]||{};d[b.name]?d[b.name].comparisonLevels.push(b.attrs):d[b.name]=f.createCalculator(b.attrs)}}var n;b.tags[0].tags.forEach(function(a){"xs:schema"===
a.name?n=c.parseSchema(a):d(a)})}if(!b||!b.tags||2>b.tags.length)return[];var h=[],l={},m=0;b.tags.forEach(function(a){"ReportData"===a.name&&d(a)});console.log("DataXMLPareser.js \x3d\x3e areaData:");console.log(h);return h}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(g,f){function e(b,c,e,h){return d(e,h)+"\x3c"+b+(c?a(c):"")+"\x3e"+(h?"\n":"")}function k(a,b,c){return d(b,c)+"\x3c/"+a+"\x3e"+(c?"\n":"")}function c(b,c,e,
h){return d(e,h)+"\x3c"+b+(c?a(c):"")+" /\x3e"+(h?"\n":"")}function b(a,b,c){a=f.encodeXML(a,!1);return d(b,c)+a+(c?"\n":"")}function a(a){var b="",d;for(d in a){var c=a[d];Array.isArray(c)&&(c=c.join(";"));void 0===c||null===c||""===c||"number"===typeof c&&isNaN(c)||(b+=" "+d+'\x3d"'+f.encodeXML(c,!0)+'"')}return b}function d(a,b){if(!b)return"";b="";for(var d=0;d<a;d++)b+="     ";return b}var h=g(null,{parseJson:function(a,d){function h(a,d){a.text||"#text"===a.name?m+=b(a.text,d,f):a.name&&(a.tags&&
a.tags.length?(m+=e(a.name,a.attributes,d,f),a.tags&&a.tags.forEach(function(a){h(a,d+1)}),m+=k(a.name,d,f)):m+=c(a.name,a.attributes,d,f))}var f=d&&d.prettify,m="";d&&d.addDocumentOptions&&(m+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');h(a,0);return m=decodeURIComponent(encodeURIComponent(m).replace("%19",""))},parseXml:function(a,b){function d(a,h){a.name=h.nodeName;b.saveInnerHTML&&(a.innerHTML=h.innerHTML);if(h.attributes&&h.attributes.length){a.attributes={};for(var n=0;n<h.attributes.length;n++){var k=
h.attributes[n],m=k.value;if(!0===m||"true"===m)m=!0;else if(!1===m||"false"===m)m=!1;else if(c&&m){var l=Number(m);isNaN(l)||(m=l)}a.attributes[k.nodeName]=m}}if(h.childNodes&&h.childNodes.length)for(a.tags=[],n=0;n<h.childNodes.length;n++){if(m=k=h.childNodes[n],"#text"!==m.nodeName||(e?m.nodeValue.trim():m.nodeValue))m={},a.tags.push(m),d(m,k)}else"#text"===h.nodeName&&(delete a.name,a.text=f.decodeXML(h.nodeValue))}b=b||{};var c=b.parseNumbers,e=b.ignoreWhiteSpacedTextNodes,e=void 0===e?!0:e,
h={},k;a=(new DOMParser).parseFromString(a,"text/xml").childNodes;for(var m=0;m<a.length;m++)if(1===a[m].nodeType){k=a[m];break}k&&d(h,k);return h},queryJson:function(a,b,d){function c(a,h){a.tags&&a.tags.forEach(function(a){(b.test?b.test(a.name):a.name===b)&&e.push(a);d&&0===h||c(a,h+1)})}var e=[];c(a,0);return e},traverseJson:function(a,b){function d(a){c||(!0===b(a)?c=!0:a.tags&&a.tags.forEach(d))}var c=!1;d(a)},getInnerHTML:function(a){return a.innerHTML?a.innerHTML.trim():this.parseJson(a).replace(/^<[^<]*>/,
"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,_UNRICH_RE:/<.*?>/g,isRichText:function(a){return(a=String(a))&&this._IS_RICH_RE.test(a)},unrichHTML:function(a){if(!a)return"";a=f.decodeXML(String(a).trim()).replace(this._UNRICH_RE,"");0===a.indexOf("\x3c")&&-1!==a.indexOf("\x3e")&&(a="");return a}});g=h();g.runTest=function(){console.log("------------------------------Testing JsonXmlConverter.js (1)------------------------------");var a={name:"HTMLReport",attributes:{pagesize:"letter",
orientation:"portrait",left:"15.75",label:"10 \x3c 5"},tags:[{name:"section",attributes:{type:"PageHeader"},tags:[{text:"Plain text 1 \x3cb\x3eBold Text\x3c/b\x3e"}]},{text:"Plain text 2"}]},b=new h,a=JSON.parse(JSON.stringify(a)),d=b.parseJson(a),c=b.parseXml(d),b=b.parseJson(c);console.log("Compare JSON1 and JSON2: "+(JSON.stringify(a)===JSON.stringify(c)));console.log("Compare XML1 and XML2: "+(d===b));console.log("------------------------------Testing JsonXmlConverter.js (1)------------------------------");
console.log("------------------------------Testing JsonXmlConverter.js (2)------------------------------");a={name:"DataCollection",attributes:{Title:"2016 Crime Indices",ScriptLanguage:"Python"},tags:[{name:"Metadata",tags:[{name:"name",tags:[{text:"Crime"}]},{name:"shortDescription",tags:[{text:"Data Collection of Esri's Crime Index variables for the United States"}]},{name:"longDescription",tags:[{text:"This data collection includes Esri's Crime Index variables incorporating information from the AGS national CrimeRisk database that is based on an extensive analysis of several years of crime incidents reported by most US law enforcement jurisdictions. The Crime Indexes database includes standardized indexes for a range of serious crimes against both persons and property.  The data vintage is 2016A."}]},
{name:"keywords",tags:[{text:"Crime"}]},{name:"coverage",tags:[{text:"US"}]},{name:"author",tags:[{text:"Esri"}]},{name:"datasets"},{name:"countries",tags:[{name:"country",tags:[{text:"US"}]}]},{name:"categories"},{name:"filters",tags:[{name:"filter",attributes:{ID:"Year",Name:"Year",Type:"Enumeration",aliasname:"Year",enumValues:"2016"}},{name:"filter",attributes:{ID:"Source",Name:"Source",Type:"Enumeration",aliasname:"Source",enumValues:"Applied Geographic Solutions (AGS)"}}]}]},{name:"Parameters"},
{name:"Calculators",tags:[{name:"FeatureService",attributes:{Name:"Crime",url:"http://demographics5dev.arcgis.com/arcgis/rest/services/USA_Crime/MapServer/2"}},{name:"Fields",tags:[{name:"Field",attributes:{Name:"CRMCYTOTC",Alias:"2016 Total Crime Index",baseType:"NONE",MapTo:"CRMCYTOTC",summaryType:"AVG",weightField:"POP WEIGHT",FieldCategory:"2016 Crime Indices",Type:"Double",Decimals:"0",Units:"COUNT",Vintage:"2016"},tags:[{name:"Tag",attributes:{ID:"Year",Name:"Year",Value:"2016"}},{name:"Tag",
attributes:{ID:"Source",Name:"Source",Value:"Applied Geographic Solutions (AGS)"}}]}]}]}]};b=new h;a=JSON.parse(JSON.stringify(a));d=b.parseJson(a);c=b.parseXml(d);b=b.parseJson(c);console.log("Compare JSON1 and JSON2: "+(JSON.stringify(a)===JSON.stringify(c)));console.log("Compare XML1 and XML2: "+(d===b));console.log("------------------------------Testing JsonXmlConverter.js (2)------------------------------")};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],
function(){var g={},f="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");g.cleanUpAttrs=function(e){e&&f.forEach(function(f){delete e[f]})};return g})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(g){var f={},e={}.toString();f.arraysEqual=function(e,c){if(!e&&!c)return!0;if(!e||!c||e.length!==c.length)return!1;for(var b=0;b<e.length;b++)if(e[b]!==c[b])return!1;return!0};f.composeIdentityFunction=function(e,c){var b=
"function"===typeof e?e:e?function(a){return a[e]}:function(a){return a};return function(a){return(a=b(a))&&a.toString?a.toString():c&&void 0===a?a:String(a)}};f.removeDuplicates=function(k,c){var b=[],a={};c=f.composeIdentityFunction(c,!0);g.forEach(k,function(d,h){var f=c(d);f===e&&(void 0===d["__ArrayUtil.js_uniqueKey__"]&&(d["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+h),f=d["__ArrayUtil.js_uniqueKey__"]);void 0===f||f in a||(a[f]=d,b.push(d))});return b};f.splitArrayToBunches=
function(e,c){c=c||100;for(var b=[],a,d=0,h=e.length;d<h;d++)a&&a.length!==c||(a=[],b.push(a)),a.push(e[d]);return b};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../tasks/parsers/FeatureSetParser"],function(g,f,e){return{addFeatureAttributesCalculator:function(e,c,b){for(var a in e.attributes)g.setAreaDataObjectValue(a,e.attributes[a],
c,b||f.AREA_ATTRIBUTES_CALCULATOR_NAME)},addAreaInfoCalculator:function(e,c){g.setAreaDataObjectValue("SITE_NAME",e.locationName||e.name,c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("STORE_NAME",e.locationName||e.name,c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("AREA_DESC",e.shortName||e.name,c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("AREA_DESC2",e.description||e.name,c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("AREA_DESC3",
e.description||e.name,c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("STORE_ADDR",e.address||"",c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("STORE_LAT",e.latitude||"",c,f.AREA_ATTRIBUTES_CALCULATOR_NAME);g.setAreaDataObjectValue("STORE_LONG",e.longitude||"",c,f.AREA_ATTRIBUTES_CALCULATOR_NAME)},addEnrichFeatures:function(k,c,b,a){var d={},h={},l;for(l in c)d[l.toLowerCase()]=c[l],h[l.toUpperCase()]=c[l];k=e.parse(k,b||f.ENRICHED_DATA_NO_LEVELS,function(a){return c[a]||
d[a.toLowerCase()]||h[a.toUpperCase()]});g.mergeAreaData(k,a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],function(g){var f={ID_FIELDS:["ID","AREA_ID","IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(e,k,c){if(!e)return[];e=e.features||e;if(!e.length)return[];var b=[],a={},d=0;e.forEach(function(e){var h=e.attributes[f.ID_FIELDS[0]]||e.attributes[f.ID_FIELDS[1]];
if(h){void 0===a[h]&&(a[h]=d++);var m={},n;for(n in e.attributes){var p=f.KNOWN_ATTRIBUTES[n]?n:c?c(n):n;p&&(m[p]=e.attributes[n])}g.cleanUpAttrs(m);e={name:k,attrs:m,areaIndex:a[h]}}else e=null;e&&(h=b[e.areaIndex]=b[e.areaIndex]||{},h[e.name]?h[e.name].comparisonLevels.push(e.attrs):h[e.name]={data:e.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");console.log(b);return b}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],
function(g){var f={preprocessVariables:function(e,k){var c=f.convertForEnrich(f._splitVariables(e)).filter(function(b){return b.itemid});return g.loadCustomDataVariables(c,{forceLowerCase:!0,portalUrl:k}).then(function(b){return f._splitVariables(e,b)})},_splitVariables:function(e,f){var c=[],b={};e.forEach(function(a){"string"===typeof a?c.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(d,e){e=a.itemid+"."+d;e=e.toLowerCase();c.push(e);b[e]={itemid:a.itemid,url:a.url,token:a.token,
variable:f?f.fullNameToVariableCache[e]:{id:d}}})});return{fullNames:c,customDataMapping:b}},convertForEnrich:function(e){var f={},c=[];e.fullNames.forEach(function(b){var a=e.customDataMapping[b];a?(b=f[a.itemid],b||(b={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},b.url||delete b.url,b.token||delete b.token),b.outFields.push(a.variable.id),f[b.itemid]||(f[b.itemid]=b,c.push(b))):c.push(b)});return c}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define(["esri/dijit/geoenrichment/promise/all",
"../GEUtil","../ReportTemplateData","esri/dijit/geoenrichment/utils/JsonXmlConverter","esri/dijit/geoenrichment/utils/UrlUtil"],function(g,f,e,k,c){return{_cache:{},canLoad:function(){return f.canMakeRequests()},loadVariables:function(b){var a="*"===b.outFields,d=a?["*"]:b.outFields,c=b.countryID+";"+b.hierarchy+";"+d.join(";")+";"+!!b.forceLowerCase;this._cache[c]||(a||(d=d.slice(),-1===d.indexOf("id")&&d.push("id")),this._cache[c]=f.getDataCollections(b.countryID,b.hierarchy,{f:"json",outFields:a?
"*":JSON.stringify(d),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(c){var e={dataCollections:c,idToVariableCache:{},fullNameToVariableCache:{}};c.forEach(function(c){c.data.forEach(function(f){function h(a){return b.forceLowerCase?a.toLowerCase():a}function n(b){if(a)return Object.keys(b).length;var c=0;d.forEach(function(a){void 0!==b[a]&&c++});return c}var k=e.idToVariableCache[h(f.id)];if(!k||n(f)>n(k))e.idToVariableCache[h(f.id)]=f;e.fullNameToVariableCache[h(c.dataCollectionID+
"."+f.id)]=f})});return e}));return this._cache[c]},loadCustomDataVariables:function(b,a){a=a||{};var d={idToVariableCache:{},fullNameToVariableCache:{}};return g(b.map(function(b){var f=c.combineMulti([b.url||a.portalUrl,"sharing/rest/content/items",b.itemid,"resources/metadata.xml"]);return e.loadResource(f,b.token||c.getToken(a.portalUrl)).then(function(c){var e=k.parseXml(c.data);c=[];var f=k.queryJson(e,"Fields")[0];f&&(c=c.concat(k.queryJson(f,"Field")));(e=k.queryJson(e,"CalculatedFields")[0])&&
(c=c.concat(k.queryJson(e,"Script")));c.forEach(function(c){function e(b){return a.forceLowerCase?b.toLowerCase():b}c=c.attributes;c={id:c.Name,fullName:b.itemid+"."+c.Name,alias:c.Alias,description:c.Alias,type:"esriFieldType"+c.Type,precision:c.Precision?Number(c.Precision):void 0,vintage:c.Vintage};d.idToVariableCache[e(c.id)]=c;d.fullNameToVariableCache[e(c.fullName)]=c})})})).then(function(){return d})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n){function p(b,c){var f=b.substr(b.lastIndexOf("/")+1),h=a.getProxyRule(b);return e(h&&h.proxyUrl?h.proxyUrl+"?"+b:b,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+c,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(a){var b=!/\.xml$|\.txt$|\.json$/i.test(f);return{name:f,data:b?d.base64FromByteSource(a):decodeURIComponent(escape(d.binaryStringFromByteSource(a)))}})}g=g(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(a,b){this.id=a.id;this._portalUrl=b;this._baseUrl=l.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var a=this;return this._getResources().then(function(b){var d=[];b.map(function(b){b=b.resource;"thumbnail.png"!==b&&d.push(a.getFileByName(b))});return k(d)})},getFileByName:function(a){return p(this.getItemResourceUrl(a,!1),this._getToken())},getItemResourceUrl:function(a,b){a=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+a);return b?
l.addQueryPart(a,"token\x3d"+this._getToken()):a},updateFile:function(a,b){var d=this;return n.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(c){var e=m.fromFileData(a,b);return n.request({url:d._baseUrl,urlSuffix:"content/users/"+c.owner+"/"+c.ownerFolder+"/items/"+d.id+"/updateResources"},{content:{file:e,filename:a}})})},_contentItemPath:function(a){return"content/items/"+a},_getToken:function(){var a=c.id.findCredential(this._portalUrl)||c.id.credentials[0];return a&&
a.token},_getResources:function(){var a=this;return h.query(function(d){return b({url:a._baseUrl+"/"+a._contentItemPath(a.id+"/resources"),content:f.mixin({f:"json",token:a._getToken()},d),handleAs:"json"},{usePost:!0})},null,"resources").then(function(a){return a.resources})},getPortalUrl:function(a){return a?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});g.loadResource=p;return g})},"esri/dijit/geoenrichment/utils/PortalUtil":function(){define(["dojo/_base/lang","esri/kernel","esri/request",
"./requests/EveryRequest"],function(g,f,e,k){var c={query:function(b,a,d,c){a=a||{};d=d||"results";c=c||100;var e="number"===typeof a.num?a.num:-1,f=a.num=0>e||a.num>c?c:a.num;a.start=a.start||1;return b(a).then(function(c){var h=c[d],n=c.total-a.start+1;0<=e&&n>e&&(n=e);n-=f;if(0>=n)return c;a.num=f;for(var m=[];0<n;)a.start+=f,m.push(b.bind(null,g.mixin({},a))),n-=f;return k(m,!0).then(function(a){a.forEach(function(a){Array.prototype.push.apply(h,a[d])});return c})})},queryCommon:function(b,a){return c.query(function(d){var c=
f.id.findCredential(b)||f.id.credentials[0];return e({url:b,content:g.mixin({f:"json",token:c.token},a,d),handleAs:"json"},{usePost:!0})}).then(function(a){return a.results})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n){var p=g(null,{cache:null,constructor:function(){this.cache={}}});g={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",_reportsCache:null,resetCache:function(){this._reportsCache=new p},getCustomReports:function(a){var b=this,e=l.getPortalUrl(a.portalUrl);return k(c.getPortalInfo(e),function(c){var f=
c.user.username,f={q:h.combineQueryString({type:"Report Template",typeKeywords:a.typeKeywords,owner:!a.publicOnly&&f}),sortField:"modified",sortOrder:"desc"};return d.queryCommon(l.combine(e,"sharing/rest/search"),f).then(function(d){d=d.map(function(d){return b.prepareCustomReportFromItem(d,c.portal.url,a)});return b._getCountryReports(d,a.countryID)})})},_getCountryReports:function(a,b){return a&&("*"===b?a:a.filter(function(a){return!a.countries||a.countries.split(",").some(function(a){return b===
a.trim()})}))},prepareCustomReportFromItem:function(a,d,c){var e=f.mixin({},a.properties||a.details);e.isGraphicReport="true"===e.isGraphicReport;e.isMultiFeature="true"===e.isMultiFeature;e.reportID=a.id;d={title:a.title,templateData:d&&new b(a,d),modified:a.modified instanceof Date?a.modified.getTime():a.modified};c&&c.attachItemProperty&&(d[c.attachItemProperty]=a);f.mixin(d,e);return d},getCustomReportByID:function(a){var b=this,d=this._reportsCache.cache[a.reportID];if(d)return d;d=l.getPortalUrl(a.portalUrl);
return this._reportsCache.cache[a.reportID]=k(c.getPortalInfo(d),function(d){return d.user.getItem(a.reportID).then(function(c){return c&&b.prepareCustomReportFromItem(c,d.portal.url,a)})}).otherwise(function(d){delete b._reportsCache.cache[a.reportID];return a.ignoreError?null:(new e).reject(d)})},tryFindReportIdByAlias:function(b){var d=this,c=a.aliasToID(b.countryID,b.reportID);if(!c)return null;var e=l.getPortalUrl(b.portalUrl);return k(this.getCustomReportByID({reportID:c,portalUrl:e,ignoreError:!0,
attachItemProperty:b.attachItemProperty}),function(a){return a?a&&(b.returnObject?a:a.reportID):k(d.getCustomReports({portalUrl:e,countryID:b.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:b.attachItemProperty}),function(a){function d(a){a=a.split(".");return Number((Number(a[0])+Number(a[1])/100).toFixed(2))}var c=d(m.jsapiVersion),e,f,h=-Infinity,n=Infinity;a.forEach(function(a){if(a.playerAlias===b.reportID){var k=d(a.jsapiVersion);c>=k&&k>h&&(h=k,
e=a);c<k&&k<n&&(n=k,f=a)}});a=e||f;b.strictVersionCheck&&a&&a.jsapiVersion!==m.jsapiVersion&&(a=null);return a&&(b.returnObject?a:a.reportID)})})},itemUpdated:function(a){delete this._reportsCache.cache[a]},getFakeCustomReportByContext:function(a){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:a.countryID,countries:a.countryID,hierarchy:a.hierarchy||n.getHierarchyID(),isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};g.resetCache();return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define(["esri/dijit/geoenrichment/when",
"esri/arcgis/Portal"],function(g,f){var e={_cache:{},getPortalInfo:function(k){if(!e._cache[k]){var c=new f.Portal(k);e._cache[k]=g(c.signIn(),function(b){return{user:b,portal:c}})}return e._cache[k]}};return e})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(g,f,e,k,c,b,a,d,h,l,m,n){var p={options:{disableIdentityLookup:!0},
requestParams:{f:"json"}},t=function(a){function b(b){a[b]||(a[b]=function(){var d=arguments;return k.when(a,function(a){Array.prototype.unshift.call(d,a.results||a);return t(c[b].apply(c,d))})})}if(!a)return a;a.then&&(a=f.delegate(a));a.total||(a.total=k.when(a,function(a){return h.isDefined(a.total)?a.total:a.length||0}));b("forEach");b("filter");b("map");b("some");b("every");return a},q={useSSL:function(a,b){var d=p&&p.self||{};if(d&&!d.isPortal)return-1!==a.indexOf("https:")||d.allSSL?b.replace("http:",
"https:"):b;var c=q.getLocation(b);return-1<d.portalHostname.toLowerCase().indexOf(c.hostname.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port?(b=c.pathname,b=0===b.indexOf("/")?b:"/"+b,d.allSSL||-1<a.indexOf("https:")?"https://"+c.hostname+(d.httpsPort&&"443"!==d.httpsPort?":"+d.httpsPort:"")+b+c.search:"http://"+c.hostname+(d.httpPort&&"80"!==d.httpPort?":"+d.httpPort:"")+b+c.search):-1!==a.indexOf("https:")||d.allSSL?b.replace("http:","https:"):b},formatUrl:function(a){var b=p.currentToken;
return-1!==a.indexOf("null")?null:q.useSSL(window.location.protocol,b?a+(-1!==a.indexOf("?")?"\x26":"?")+("token\x3d"+b):a)},getLocation:function(a){var b=document.createElement("a");b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},resultsToTypedArray:function(a,b,d){d=d?d.listings||d.notifications||d.userInvitations||d.tags||d.items||d.groups||d.comments||d.provisions||d.results||d:[];return c.map(d,function(d){d=f.mixin(d,
b||{});return a?new a(d):d})},clearFieldsFromObject:function(a,b){var d,c=a.length;if(f.isArray(a))for(d=0;d<c;d++)delete b[a[d]];else for(d in a)delete b[d];return b},requestToTypedArray:function(a,b,d,c,e){return t(q.request(a,b,d).then(f.partial(q.resultsToTypedArray,c,e)))},request:function(a,b,d){var c;b&&b.portal&&delete b.portal;b&&b.form&&(c=b.form,delete b.form);b=f.mixin(f.mixin({},b||{}),p.requestParams);d=f.mixin(d||{},p.options);return l({url:q.useSSL(window.location.protocol,a.url||
a),content:b,callbackParamName:"callback",timeout:d&&d.timeout||0,form:c},d)},formatQueryParams:function(a,b,d){a=f.mixin(f.mixin({},a),f.isString(b)?{q:b}:b||{});a.q=!d&&p.extraQuery?"("+a.q+")"+p.extraQuery:a.q;return a}},v=g([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(a){f.mixin(this,a);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),r=g([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(a){f.mixin(this,
a);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),u=g([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(a){f.mixin(this,a);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=q.formatUrl(this.itemUrl+
"/data");this.thumbnailUrl=q.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var a=this.type;return{source:-1<c.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===a?a:
null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(a){var b=f.isString(a)?{comment:a}:a;return q.request(this.itemUrl+"/addComment",b,{usePost:!0}).then(f.hitch(this,function(a){return new v(f.mixin(b,{id:a.commentId,item:this}))}))},updateComment:function(a){if(a&&a.url&&a.comment)return q.request(a.url+"/update",{comment:a.comment},{usePost:!0}).then(function(b){a.id=b.commentId;return a});
throw Error();},getComments:function(){return q.requestToTypedArray(this.itemUrl+"/comments",null,null,v,{item:this})},deleteComment:function(a){if(a&&a.url)return q.request(a.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(a){var b=f.isObject(a)?a:{rating:parseFloat(a)};return q.request(this.itemUrl+"/addRating",b,{usePost:!0}).then(f.hitch(this,function(a){return new r(f.mixin(b,{id:a.ratingId,item:this}))}))},getRating:function(){return q.request(this.itemUrl+"/rating").then(f.hitch(this,
function(a){return new r(f.mixin(a,{item:this}))}))},deleteRating:function(){return q.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var a=this.type,b=this.typeKeywords||[],d=a;"Feature Service"===a||"Feature Collection"===a?d=-1<c.indexOf(b,"Table")?"Table":-1<c.indexOf(b,"Route Layer")?"Route Layer":-1<c.indexOf(b,"Markup")?"Markup":"Feature Layer":"Image Service"===a?d=-1<c.indexOf(b,"Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===
a?d="Scene Layer":"Scene Package"===a?d="Scene Layer Package":"Stream Service"===a?d="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?d=-1<c.indexOf(b,"Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?d="Locator":"Microsoft Powerpoint"===a?d="Microsoft PowerPoint":"GeoJson"===a?this.type=d="GeoJSON":"Globe Service"===a?d="Globe Layer":"Vector Tile Service"===a?d="Tile Layer":"netCDF"===a?d="NetCDF":"Map Service"===a?d=-1===c.indexOf(b,"Spatiotemporal")&&
(-1<c.indexOf(b,"Hosted Service")||-1<c.indexOf(b,"Tiled"))&&-1===c.indexOf(b,"Relational")?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?d=a.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===a?d="Big Data File Share":"Compact Tile Package"===a?d="Tile Package (tpkx)":"Raster function template"===a&&(d="Raster Function Template");return d},_getIconUrl:function(){var b=this.type&&this.type.toLowerCase()||"",d=this.typeKeywords||[],e=!1,f=!1,h=!1,n=!1,k=!1,f=!1;0<
b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(e=-1<c.indexOf(d,"Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(n=-1<c.indexOf(d,"Table"),f=-1<c.indexOf(d,"Route Layer"),h=-1<c.indexOf(d,"Markup"),b=(k=-1!==c.indexOf(d,"Spatiotemporal"))&&n?"spatiotemporaltable":n?"table":f?"routelayer":h?"markup":k?"spatiotemporal":e?"featureshosted":"features"):"map service"===b||"wms"===b||"wmts"===b?(k=-1!==c.indexOf(d,"Spatiotemporal"),
f=-1!==c.indexOf(d,"Relational"),b=k||f?"mapimages":e||-1<c.indexOf(d,"Tiled")||"wmts"===b?"maptiles":"mapimages"):b="scene service"===b?-1<c.indexOf(d,"Line")?"sceneweblayerline":-1<c.indexOf(d,"3DObject")?"sceneweblayermultipatch":-1<c.indexOf(d,"Point")?"sceneweblayerpoint":-1<c.indexOf(d,"IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf(d,"PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf(d,"Polygon")?"sceneweblayerpolygon":-1<c.indexOf(d,"Building")?"sceneweblayerbuilding":"sceneweblayer":
"image service"===b?-1<c.indexOf(d,"Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"geoprocessing service"===b?-1<c.indexOf(d,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):b="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?-1<c.indexOf(d,"ViewingMode-Local")?"webscenelocal":"websceneglobal":
"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===b||"desktop application"===b?"apps":"map document"===b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<c.indexOf(d,"ArcGIS Pro")||"explorer map"===b&&c.indexOf(d,"Explorer Document")?"mapsgray":"service definition"===
b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"360 vr experience"===b||"netcdf"===b?"datafiles":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"sqlite geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===
b||"arcpad package"===b||"code sample"===b||"form"===b||"document link"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"explorer map"===b&&-1<c.indexOf(d,"Explorer Mapping Application")||-1<c.indexOf(d,"Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===
b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":"mobile scene package"===b?"mobilescenepackage":"tile package"===b||"compact tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"insights theme"===b?"insightstheme":"hub initiative"===
b?"hubinitiative":"hub page"===b?"hubpage":"hub site application"===b?"hubsite":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"desktop style"===b?"desktopstyle":"style"===b?"style":"dashboard"===b?"dashboard":"raster function template"===b?"rasterprocessingtemplate":"vector tile package"===b?"vectortilepackage":"ortho mapping project"===b?"orthomappingproject":"ortho mapping template"===
b?"orthomappingtemplate":"solution"===b?"solutions":"geopackage"===b?"geopackage":"deep learning package"===b?"deeplearningpackage":"real time analytic"===b?"realtimeanalytics":"big data analytic"===b?"bigdataanalytics":"feed"===b?"feed":"excalibur imagery project"===b?"excaliburimageryproject":"notebook"===b?"notebook":"storymap"===b?"storymap":"survey123 add in"===b?"survey123addin":"mission"===b?"mission":"quickcapture project"===b?"quickcaptureproject":"pro report"===b?"proreport":"urban model"===
b?"urbanmodel":"web experience"===b?"experiencebuilder":"web experience template"===b?"webexperiencetemplate":"workflow"===b?"workflow":"kernel gateway connection"===b?"kernelgatewayconnection":"insights script"===b?"insightsscript":"hub initiative template"===b?"hubinitiativetemplate":"maps";return b?a.toUrl("../css/images/item_type_icons/"+b+"16.png"):null},_getIsPremiumContent:function(){var a=this.typeKeywords,b=!1;if(-1<c.indexOf(a,"Requires Subscription")||-1<c.indexOf(a,"Requires Credits"))b=
!0;return b},_getPremiumIconUrl:function(){var b=this.typeKeywords,d;this.isPremiumContent&&(d=-1<c.indexOf(b,"Requires Credits")?"premiumcredits":"premiumitem");return d?a.toUrl("../css/images/item_type_icons/"+d+"16.png"):null},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}}),y=g([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(a){f.mixin(this,a);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+
"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?q.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?q.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||
0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var b in this.listingProperties)this[b]&&(this.listingProperties[b]=this[b]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=c.map(this.screenshots,f.hitch(this,function(a){return q.formatUrl(this.url+"/info/"+a)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=
this.vendor.thumbnail?this.userItemUrl?q.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):q.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return q.requestToTypedArray(this.commentsUrl,null,null,v,{item:this})},getVendor:function(){return this.vendor}}),w=g([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(a){f.mixin(this,a);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):
null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=a.listing?new y(f.mixin(a.listing,{portal:this.portal})):null}}),A=g([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(a){f.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=q.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return q.request(this.url+
"/users")},queryItems:function(a,b){a=q.formatQueryParams({},a,b);a.q="group:"+this.id+(a.q?" "+a.q:"");return this.portal.queryItems(a)},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}}),B=g([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(a){f.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return q.requestToTypedArray(this.url,
null,null,u,{portal:this.portal,folderId:this.id})}}),C=g([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(a){f.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},
getGroups:function(){return t(q.request(this.url).then(f.hitch(this,function(a){return q.resultsToTypedArray(A,{portal:this.portal},a.groups)})))},getNotifications:function(){return q.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return q.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return q.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent(null,
{num:1}).then(function(a){return a.folders}))},getItems:function(a){return t(this.getContent(a).then(function(a){return a.items}))},getItem:function(a){return q.request(this.portal.portalUrl+"content/items/"+a).then(f.hitch(this,function(a){return new u(f.mixin(a,{portal:this.portal}))}))},getContent:function(a,b){var d=this.url.replace("/community/","/content/")+(a?"/"+a:"");return q.request(d,b).then(f.hitch(this,function(b){b.folders=q.resultsToTypedArray(B,{portal:this.portal},b.folders);b.items=
q.resultsToTypedArray(u,{portal:this.portal,folderId:a},b.items);return b}))},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}});g={Portal:g([n],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(a){a=f.isObject(a)?a:{url:a};this.registerConnectEvents();p={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};a.self?(p.self=a.self,f.mixin(this,{url:a.url||m.getProtocolForWebResource()+
"//"+(a.self.urlKey?a.self.urlKey+"."+a.self.customBaseUrl:a.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",a=a.self.user?this.signIn():this.init(this.url)):(a.url&&f.mixin(this,{url:a.url}),a=this.init(this.url));a.then(f.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(a,b){a=(a||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==a.indexOf("/sharing")?a+"/":a+"/sharing/rest/";return this._getSelf(this.portalUrl).then(f.hitch(this,
function(a){p.self=f.mixin({},a);(a=a.user)&&b&&(p.currentToken=b&&b.token,p.loggedInUser=new C(f.mixin(a,{portal:this,credential:b})));p.self.id&&!1===p.self.canSearchPublic&&(p.extraQuery=" AND orgid:"+p.self.id);f.mixin(this,p.self);this.thumbnailUrl=q.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),
f.hitch(this,function(a){this.onError(a);throw a;}))},signIn:function(){var a=new k,b=f.hitch(this,function(){this._onSignIn().then(f.hitch(this,function(){a.resolve(p.loggedInUser)}),f.hitch(this,function(b){a.reject(b)}))});if(p&&p.self)p&&p.loggedInUser?setTimeout(function(){a.resolve(p.loggedInUser)},0):b();else this.on("load",f.hitch(this,function(){b()}));return a},signOut:function(){p.loggedInUser.credential&&p.loggedInUser.credential.destroy();p.loggedInUser=null;p.options.disableIdentityLookup=
!0;q.clearFieldsFromObject(p.self,this);p.self=null;return this.init(this.url)},getPortalUser:function(){return p.loggedInUser},addResource:function(a,b){return q.request(this.portalUrl+"portals/self/addResource",{key:a,text:b},{usePost:!0})},update:function(a){return q.request(this.portalUrl+"portals/self/update",a,{usePost:!0})},queryGroups:function(a,b){return this._queryPortal(this.portalUrl+"community/groups",q.formatQueryParams({},a,b),A)},queryItems:function(a,b){return this._queryPortal(this.portalUrl+
"search",q.formatQueryParams({},a,b),u)},queryListings:function(a){a=q.formatQueryParams({},a,!0);var b="";a.q&&-1<a.q.toLowerCase().indexOf("mylistings:true")?(a.q=a.q.toLowerCase().replace("mylistings:true",""),b="?mylistings\x3dtrue"):a.q||(a.q='""');return this._queryPortal(this.portalUrl+"content/listings"+b,a,y)},queryCustomerList:function(a,b){a=q.formatQueryParams({},a,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",a)},getProvisions:function(){return this.getCustomers().then(f.hitch(this,
function(a){return a.purchases}))},getInterests:function(){return this.getCustomers().then(f.hitch(this,function(a){return a.interests}))},getTrials:function(){return this.getCustomers().then(f.hitch(this,function(a){return a.trials}))},getCustomers:function(a){return q.request(this.portalUrl+"portals/self/customers",{status:a||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(a){return a.purchases})},getMyInterests:function(){return this.getPurchases().then(function(a){return a.interests})},
getPurchases:function(){return q.request(this.portalUrl+"portals/self/purchases").then(f.hitch(this,function(a){a.interests=c.map(a.interests,function(a){return f.mixin(a.provision,{listing:a.listing})});a.purchases=c.map(a.purchases,function(a){return f.mixin(a.provision,{listing:a.listing})});a.trials=c.map(a.trials,function(a){return f.mixin(a.provision,{listing:a.listing})});a.interests=q.resultsToTypedArray(w,{portal:this},a.interests);a.trials=q.resultsToTypedArray(w,{portal:this},a.trials);
a.purchases=q.resultsToTypedArray(w,{portal:this},a.purchases);return a}))},queryUsers:function(a,b){return this._queryPortal(this.portalUrl+"community/users",q.formatQueryParams({sortField:"username"},a,b),C)},_onSignIn:function(){p.options.disableIdentityLookup=!1;p.self=null;return d.id.getCredential(this.portalUrl).then(f.hitch(this,"init",this.url)).then(function(){return p.loggedInUser},f.hitch(this,function(a){p.options.disableIdentityLookup=!0;this.onError(a);throw a;}))},_getSelf:function(a){var b;
a+="portals/self";p.self?(b=new k,setTimeout(function(){b.resolve(p.self)},0)):b=q.request(a,{culture:e.locale});return b},_queryPortal:function(a,b,d){var c=f.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},b),e=["start","query","num","nextStart"];a=q.request(a,c).then(f.hitch(this,function(a){a.results=q.resultsToTypedArray(d,{portal:this},a);a.queryParams=f.mixin({},c);a.nextQueryParams=f.mixin(c,{start:a.nextStart});return q.clearFieldsFromObject(e,a)}));a=f.delegate(a);a.queryParams=
f.mixin({},c);a.nextQueryParams=k.when(a,function(a){return a.nextQueryParams});return t(a)}}),PortalFolder:B,PortalGroup:A,PortalItem:u,PortalUser:C,PortalComment:v,PortalRating:r,PortalUtil:q,PortalResult:t,PortalListing:y};b("extend-esri")&&f.mixin(f.getObject("arcgis",!0,d),g);return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang","../../config","dojo/i18n!esri/nls/jsapi"],function(g,f,e){function k(){return a?
a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",
alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",
alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",
alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",
alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",
alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},
{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},{id:"d36520d68d8e449c9f300be0e800f698",
alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},{id:"3f857a2a8d14488abfcec383197e5a0b",
alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",alias:"base-demographic-profile"},
{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"",alias:"at-risk-population"},{id:"",alias:"commute-profile"},{id:"",alias:"demographic-summary"},{id:"",alias:"health-care-and-insurance"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",
alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",
alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},
{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"}],"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",
alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",
alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],
"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"",alias:"at-risk-population"},{id:"",alias:"commute-profile"},{id:"",alias:"demographic-summary"},{id:"",alias:"health-care-and-insurance"}],"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",
alias:"multi-area-comparison"}]},"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},
{id:"2b9f186425844ec390584b739ffca026",alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",
alias:"office-market-profile"},{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"}],"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",alias:"multi-area-comparison"},
{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},{id:"9e824283a8954639ab0c0ac237b9e14d",
alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",alias:"future-population-profile-ja"},
{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"",alias:"at-risk-population"},{id:"",alias:"commute-profile"},{id:"",alias:"demographic-summary"},
{id:"",alias:"health-care-and-insurance"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",
alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},
{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",
alias:"population-trends"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},
{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},
{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",
alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"",alias:"at-risk-population"},{id:"",alias:"commute-profile"},{id:"",alias:"demographic-summary"},{id:"",alias:"health-care-and-insurance"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",
alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",
alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},
{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",
alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",alias:"future-population-profile-ja"},
{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"",alias:"at-risk-population"},{id:"",alias:"commute-profile"},{id:"",alias:"demographic-summary"},
{id:"",alias:"health-care-and-insurance"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},
{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",
alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},
{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},
{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},
{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",alias:"key-facts"},{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]}}}function c(a){a=a||f.jsapiVersion;var b={};a=k()[a];for(var d in a){var c={};a[d].forEach(function(a){c[a.alias]=a.id});var e=d.substr(0,d.indexOf("."));b[e]=c}return b}function b(a,b){b=c(b);return g.mixin({},b["*"],b[a])}e=e.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,
d={"demographic-summary":e.demographicSummary,"key-facts":e.keyFacts,"marketing-profile":e.marketingProfile,"at-risk-population":e.atRiskPopulation,"portrait-property-flyer":e.portraitPropertyFlyer,skyscraper:e.skyscraper,"transportation-to-work":e.transportationToWork,"health-care":e.healthCare,"executive-summary-call-outs":e.executiveSummaryCallOuts,"tapestry-profile":e.tapestryProfile,"nearby-restaurants":e.nearbyRestaurants,"multi-area-comparison":e.multiAreaComparison,"property-details":e.propertyDetails,
"employment-overview":e.employmentOverview,"office-market-profile":e.officeMarketProfile,"health-care-and-insurance":e.healthCareAndInsuranceStatistics,"demographic-profile":e.demographicProfile,"commute-profile":e.commuteProfile,"target-market-summary":e.targetMarketSummary,"population-trends":e.populationTrends,"prizm-profile":e.prizmProfile,"housing-profile":e.housingProfile,"insurance-profile":e.insuranceProfile,"media-profile":e.mediaProfile,"personicx-segmentation":e.personicxSegmentation,"spending-profile":e.spendingProfile,
"base-demographic-profile":e.baseDemographicProfile,"demographic-comparison-profile":e.demographicComparisonProfile,"future-population-profile":e.futurePopulationProfile,"population-households-profile":e.populationHouseholdsProfile,"consumer-spending-profile":e.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","household-profile":e.householdProfile},h={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",aliasToID:function(a,d,c){return b(a,c)[d]},aliasToLabel:function(a){return d[a]},getAliases:function(a,d){a=Object.keys(b(a,d));a.sort(function(a,
b){return a.localeCompare(b)});return a},getListOptions:function(a,b){return h.getAliases(a,b).map(function(c){return{value:h.aliasToID(a,c,b),label:d[c]}})},getSupportedCountries:function(a){return Object.keys(c(a)).map(function(a){return"*"===a?"AU":a})},getLibrary:function(){var a=g.clone(k()),b;for(b in a){var d=a[b];d["AU.census"]=d["*.census"];delete d["*.census"]}return a}};return h})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var g={combineQueryString:function(f){var e=
"";f.type&&(e+='type:"'+f.type+'"');f.typeKeywords?e=Array.isArray(f.typeKeywords[0])?e+(" typekeywords:("+f.typeKeywords.map(function(e){return g.combineTypeKeywords(e)}).join(" OR ")+")"):e+(" typekeywords:"+g.combineTypeKeywords(f.typeKeywords,f.typeKeywordsNot)):f.typeKeywordsNot&&(e+=" typekeywords:"+g.combineTypeKeywords(null,f.typeKeywordsNot));f.owner&&(e+=" owner:"+f.owner);f.isShared&&(e+=' (access:"shared" OR access:"org")');f.ownerNot&&(e+=" NOT owner:"+f.ownerNot);return e},combineTypeKeywords:function(f,
e){f=f?g._combineArray(f):"";return e?(e=g._combineArray(e),"("+f+" NOT "+e+")"):f},_combineArray:function(f){return"string"===typeof f?"("===f.charAt(0)||'"'===f.charAt(0)?f:'"'+f+'"':1===f.length?'"'+f[0]+'"':"("+f.map(function(e){return'"'+e+'"'}).join(" ")+")"}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/EnrichUtil":function(){define(["../../../supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil","../../utils/InfographicJsonUtil"],
function(g,f){var e={processChartJson:function(c,b){var a=[];c.seriesItems.forEach(function(d){d.points.forEach(function(d){a.push({fieldName:d.fieldInfo.name,mapTo:b?b(d.fieldInfo.fullName):d.fieldInfo.fullName})})});var d=c.comparisonInfo;return this._createChartInfo(a,d&&d.levels,e.buildCalculatorNameForChart(c))},_createChartInfo:function(c,b,a){c=c||[];var d={isChart:!0,fields:[],levels:b,calculatorName:a,_cache:{}};c.forEach(function(a){e._addField(d,a)});return d},buildCalculatorNameForChart:function(c){if((c=
c.comparisonInfo)&&c.calculatorName)return c.calculatorName;var b=c&&c.levels&&c.levels.length?c.levels.join("_"):null;b&&(c.calculatorName=b);return b},processEsriInfographic:function(c){return{isInfographic:!0,type:c.type,variables:c.variables&&c.variables.slice(),fieldInfos:c.fieldInfos&&c.fieldInfos,levels:f.getLevels(c)}},optimizeInfos:function(c){var b=[],a=[],d=[];c.forEach(function(c){c.isGeneral?b.push(c):c.isChart?a.push(c):c.isInfographic&&d.push(c)});var f=e._createGeneralInfo();b.forEach(function(a){a.fields.forEach(function(a){e._addField(f,
a)})});var k={};a.forEach(function(a){if(a.calculatorName){var b=k[a.calculatorName]=k[a.calculatorName]||a;b!==a&&a.fields.forEach(function(a){e._addField(b,a)})}else a.fields.forEach(function(a){e._addField(f,a)})});var m={};d.forEach(function(a){var b=(a.fieldInfos&&a.fieldInfos.map(function(a){return a.fullName}).join("_")||a.variables.join("_"))+"_"+a.levels.join("_");m[b]=a});c=[];f.fields.length&&c.push(f);for(var n in k)c.push(k[n]);for(n in m)c.push(m[n]);return c},_createGeneralInfo:function(c){c=
c||[];var b={isGeneral:!0,fields:[],_cache:{}};c.forEach(function(a){e._addField(b,a)});return b},_addField:function(c,b){b&&b.fieldName&&!c._cache[b.fieldName]&&(c._cache[b.fieldName]=!0,c.fields.push(b))}},k={ddLibrary:null,_getStandardEnrichInfos:function(c,b,a){var d=[];c=k.ddLibrary.getDrillingOptions(c,b,a);if(!c)return d;c.forEach(function(a){d=d.concat(k._getStandardEnrichInfosForTableInfo(a,!1))});return d},_getStandardEnrichInfosForTableInfo:function(c,b){var a=[],d;for(d in c.stateData){var f=
c.stateData[d];f.fieldInfo.isChart?a.push(e.processChartJson(f.fieldInfo.chartJson,function(a){var b="n"===d?"":"_"+d.toUpperCase();return a+b})):!b&&f.fieldInfo.isInfographic&&(f.fieldInfo.infographicJson.variables||f.fieldInfo.infographicJson.fieldInfos)&&a.push(e.processEsriInfographic(f.fieldInfo.infographicJson))}return a},_getCustomEnrichInfos:function(c){var b=[];g.processSectionFieldInfos(c,function(a){a.isInfographic&&(a.infographicJson.variables||a.infographicJson.fieldInfos)&&b.push(e.processEsriInfographic(a.infographicJson))});
return b},getEnrichInfosForTemplateJson:function(c,b){var a=[];g.processTemplateFieldInfos(b,function(b){b.isInfographic&&b.infographicJson.variableTables&&b.infographicJson.variableTables.forEach(function(d,e){d.variable&&d.variable.fieldInfo&&(e=f.getDataDrilling(b.infographicJson,e))&&(e.sectionJson?a=a.concat(k._getCustomEnrichInfos(e.sectionJson)):e.isStandard&&(a=a.concat(k._getStandardEnrichInfos(c,e.standardId||d.variable.fieldInfo))))})});return e.optimizeInfos(a)}};k.buildCalculatorNameForChart=
e.buildCalculatorNameForChart;k.optimizeInfos=e.optimizeInfos;return k})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config","esri/dijit/geoenrichment/utils/ArrayUtil"],function(g,f){var e={getDefaultLevels:function(){var e=g.levels.slice();e.push(g.highestLevel);return e},getLevels:function(k){k=k.levels&&k.levels.length?k.levels:e.getDefaultLevels();return f.removeDuplicates(k)},getSubLevels:function(f){f=e.getLevels(f);
f.pop();return f},getHighestLevel:function(f){f=e.getLevels(f);return f[f.length-1]},setLevels:function(k,c){c=f.removeDuplicates(c||[]);k.levels=c.length?c:e.getDefaultLevels()},getDataDrilling:function(e,c){"string"!==typeof c&&(c=(c=e.variableTables&&e.variableTables[c])&&c.variable.fieldInfo&&c.variable.fieldInfo.templateName);return e.dataDrilling&&e.dataDrilling[c]},setDataDrilling:function(e,c,b){c&&(e.dataDrilling=e.dataDrilling||{},b?e.dataDrilling[c]=b:delete e.dataDrilling[c])},validateDataDrilling:function(e){var c=
e.dataDrilling;if(c){var b={};e.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(b[a.variable.fieldInfo.templateName]=!0)});Object.keys(c).forEach(function(a){b[a]||delete c[a]})}},analyzeVariables:function(e){e=e.fieldInfos?e.fieldInfos.map(function(a){return a.fullName}):e.variables;if(1===e.length&&-1!==e[0].indexOf(".*"))return{dataCollectionID:e[0].substr(0,e[0].indexOf("."))};var c={},b,a;e.forEach(function(d,e){c[d.substr(0,d.indexOf("."))]=
1;b=d.substr(d.indexOf(".")+1);a=d});return{dataCollectionID:1===Object.keys(c).length?Object.keys(c)[0]:null,variableID:1===e.length?b:null,fullName:1===e.length?a:null}}};return e})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],function(g){g=g.getProtocolForWebResource();return{portalUrl:g+"//arcgis.com",server:g+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:g+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",
addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m){return{provideEditorJson:function(n,p){function t(){function a(a,b,d){return g(p.preProcessFile&&p.preProcessFile(a,b,v),function(c){if(!1!==c)return g(d&&d(),function(){return p.postProcessFile&&p.postProcessFile(a,b,v)})})}if(r&&r.files&&r.files){var b=p.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],n={"theme.css.txt":function(b){return a(b,"theme.css.txt",function(){v.theme=h.fromCssText(b.data,p)})},"metadata.xml":function(b){return a(b,"metadata.xml",
function(){return e.parseMetadataXML(b,v,p)})},"report.xml":function(b){return a(b,"report.xml",function(){return f.parseReportXML({isGraphicReport:q,parsers:c,file:b,templateJson:v,variableProvider:p.variableProvider,useVariableProviderToCollectOnly:p.useVariableProviderToCollectOnly,tableDefaultStyles:p.tableDefaultStyles,processFileName:y,putImageData:function(a,b){a=y(a);b=b||u[a];d.putImageData(a,b);return b},log:w,queryMetaDataFunc:function(a){return p.queryMetaDataFunc&&p.queryMetaDataFunc(a,
v)},postProcessChartJson:function(a,b){p.postProcessChartJson&&p.postProcessChartJson(v,a,b)},postProcessMapJson:function(a,b){p.postProcessMapJson&&p.postProcessMapJson(v,a,b)},postProcessInfographicJson:function(a,b){p.postProcessInfographicJson&&p.postProcessInfographicJson(v,a,b)},postProcessTableInSection:function(a,b){p.postProcessTableInSection&&p.postProcessTableInSection(v,a,b)}})})},generic:function(b,d){return a(b,d)}},k=new l;b.forEach(function(a){var b=r.files.filter(function(b){return b.name===
a})[0],d=b&&(n[a]||n.generic);d&&k.add(function(){return g(m.delay(50),function(){return d(b,a)}).otherwise(function(a){v.metadata.parseErrors.push(a);console.log(a)})})});return k.getPromise()}}p=p||{};var q=n.isGraphicReport;p.variableProvider=p.variableProvider||new b;p.tableDefaultStyles=p.tableDefaultStyles||new a;var v={documentOptions:{},metadata:{parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null};q?v.sectionsTables=[]:v.sections=[];var r=
n.portalJson,u={};p.getImageData=function(a){return u[y(a)]};var y=function(a){return a?a.toLowerCase():""},w=p.log||function(a){};return g(c.initialize(),function(){return g(k.collectImageResources(r,u,y),function(){for(var a in u)d.putImageData(a,u[a]);return g(t(),function(){v.metadata.parseErrors.length||(n.templateJson=v);delete v.metadata})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./GraphicReportSectionsParser","./ClassicReportSectionsParser"],function(g,f,e){return{parseReportXML:function(k){k.log(k.file.data);var c=g.parseXml(k.file.data);k.parsers.getParser("document").parseDocument(c,k);k.isGraphicReport?f.parseSectionsGraphic(c,k):e.parseSectionsClassic(c,k)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(g){return{parseSectionsGraphic:function(f,
e){g.queryJson(f,"table",!0).forEach(function(f){try{e.templateJson.sectionsTables.push(e.parsers.getParser("section").parseTable(f,e,{fixTableWidthsForPage:!0}))}catch(c){console.log(c)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(g){return{parseSectionsClassic:function(f,e){g.queryJson(f,"section",!0).forEach(function(f){e.templateJson.sections.push(e.parsers.getParser("section").parseSection(f,
e,{fixTableWidthsForPage:!0}))});this._splitSections(e)},_splitSections:function(f){f=f.templateJson;var e=[];f.sections.forEach(function(f){function c(){b={type:f.type,stack:[]};e.push(b)}var b;c();f.stack.forEach(function(a){if("hr"===a.id){var d=!!b.stack.length;b.stack.push(a);d&&c()}else"table"===a.id?(b.stack.some(function(a){return"table"===a.id})&&c(),b.stack.push(a)):"pageBreak"===a.id?(b.stack.length&&c(),b.stack.push(a),c()):b.stack.push(a)})});e=e.filter(function(e){return!!e.stack.length});
f.sections=e}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(g,f,e,k,c,b,a){return{parseMetadataXML:function(d,h,l){l.log&&l.log(d.data);var m=f.parseXml(d.data);if(m&&m.tags)return g([a.parseTradeAreaCalculators(m,
l),e.parseDataCollectionsCalculators(m,h,l),k.parseScriptsCalculators(m,h,l),c.parseLocatorCalculators(m,h,l)]).then(function(){return b.parseMapCalculators(m,h,l)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(g,f,e){return{parseDataCollectionsCalculators:function(k,c,b){g.queryJson(k,"DataCollections").forEach(function(a){var d=
g.queryJson(a,"ComparisonLevel");if(e.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");var h;if(b.variableProvider.isPlayerOnly||d.length)h=f.getObjects(a);d.length&&(a={calculatorName:a.attributes.Name,levels:d.map(function(a){return a.attributes.Name}).filter(function(a){return!b.validateGeographyLevelFunc||b.validateGeographyLevelFunc(a)}),variableObjects:h.variableObjects},c&&(c.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));b.variableProvider.isPlayerOnly&&(h.variableObjects.forEach(function(a){b.variableProvider.addVariable(a)}),h.scriptObjects.forEach(function(a){b.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(g,f){var e={getObjects:function(f,c){c=e._getVariableInfo(f,c);f=e._getScriptObjects(f,
c.fieldNameToVariableCache);return{variables:c.variables,variableObjects:c.variableObjects,scriptObjects:f}},_getVariableInfo:function(e,c){var b=[];g.queryJson(e,c?/^(RawFields|Fields)$/:"Fields").forEach(function(a){b=b.concat(g.queryJson(a,/^(Field|PortalField)$/))});var a=[],d=[],h={};b.forEach(function(b){a.push(b.attributes.MapTo);if(b=f.fieldTagToVariable(b,e.attributes.Name))h[b.fieldName]=b,d.push(b)});return{variables:a,variableObjects:d,fieldNameToVariableCache:h}},_getScriptObjects:function(e,
c){var b=g.queryJson(e,"Scripts"===e.name?"Fields":"CalculatedFields")[0],b=b&&g.queryJson(b,"Script")||[];"Scripts"===e.name&&(b=b.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return b.map(function(a){var b=f.scriptTagToVariable(a,e.attributes.Name);b.usedFields&&(b.usedMapTos=[],b.usedFields.forEach(function(a){var d=c[a];d?d.usedMapTos?b.usedMapTos=b.usedMapTos.concat(d.usedMapTos):b.usedMapTos.push(d.fullName):console.log("Error parsing used fields for "+
a)}),c[b.fieldName]=b);return b})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var g={getType:function(f){return f&&(0===f.indexOf("esriFieldType")?f:"esriFieldType"+f)},fieldTagToVariable:function(f,e){return f.attributes.MapTo&&"AREA_ID"!==f.attributes.Name?{id:f.attributes.MapTo.substr(f.attributes.MapTo.lastIndexOf(".")+1),fullName:f.attributes.MapTo,alias:f.attributes.Alias,fieldName:f.attributes.Name,
precision:Number(f.attributes.Decimals)||0,calculatorName:e,templateName:e+"."+f.attributes.Name,type:g.getType(f.attributes.Type)}:null},scriptTagToVariable:function(f,e){return{id:f.attributes.Name,fullName:e+"."+f.attributes.Name,fieldName:f.attributes.Name,alias:f.attributes.Alias,precision:Number(f.attributes.Decimals)||0,usedFields:f.attributes.usedFields?f.attributes.usedFields.split(","):[],usedMapTos:null,expressionText:f.tags[0].text,calculatorName:e,templateName:e+"."+f.attributes.Name,
type:g.getType(f.attributes.Type)}}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(g,f){return{parseScriptsCalculators:function(e,k,c){g.queryJson(e,"Scripts").forEach(function(b){c.variableProvider.isPlayerOnly&&(b=f.getObjects(b),b.variableObjects.forEach(function(a){c.variableProvider.addVariable(a)}),b.scriptObjects.forEach(function(a){c.variableProvider.addScriptVariable(a)}))})}}})},
"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(g,f,e,k){return{parseLocatorCalculators:function(c,b,a){c=e.queryJson(c,"Locator");return g(c.map(function(d){var c=[];e.queryJson(d,/^(PointFields|Fields)$/).forEach(function(a){c=c.concat(e.queryJson(a,/^(Field|Direction|Distance)$/))});
var g=[];c.forEach(function(a){"Direction"===a.name?a.attributes.MapTo="DIRECTION":"Distance"===a.name&&(a.attributes.MapTo="DISTANCE");(a=k.fieldTagToVariable(a,d.attributes.Name))&&g.push(a)});var m={calculatorName:d.attributes.Name,variableObjects:g,layerID:null,layerUrl:null,layerName:d.attributes.LayerName};d.attributes.Points&&0===d.attributes.Points.indexOf("std:")?m.layerID=d.attributes.Points.replace("std:",""):m.layerUrl=d.attributes.Layer;b.metadata.locatorCalculatorsHash[d.attributes.Name]=
m;a.variableProvider.isPlayerOnly&&g.forEach(function(b){a.variableProvider.addVariable(b)});return f(!a.validateLocatorCalculator||a.validateLocatorCalculator(m.layerID,m.layerUrl),function(a){m.isValid=a})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(g,f,e,k){var c=
{parseMapCalculators:function(b,a,d){g.queryJson(b,"Maps").forEach(function(b){g.queryJson(b,"Map").forEach(function(e){var f=c._parsePortalLayers(e),h=c._parseStudyAreas(e),f={fieldName:e.attributes.Name,width:Number(e.attributes.Width),height:Number(e.attributes.Height),defaultBasemapId:f.defaultBasemapId,webMapId:f.webMapId,additionalLayerInfos:c._parseAdditionalLayers(e,a),pinSymbolJson:c._parseSiteLayerPinSymbol(e,d),areaSymbolJsons:h.symbolJsons,areaSymbolRamp:h.ramp,mapScale:Number(e.attributes.Scale)||
null};a&&(a.metadata.mapImageInfosHash[b.attributes.Name+"."+e.attributes.Name]=f)})})},_parsePortalLayers:function(b){var a;b=g.queryJson(b,"Layer").filter(function(a){return!!a.attributes.PortalItemId});1<b.length&&(a=b.shift());b=b.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,webMapId:b&&b.attributes.PortalItemId}},_parseAdditionalLayers:function(b,a){var d=[];g.queryJson(b,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(a){return!!a.attributes.ServiceUrl||
"LocatorResultsLayer"===a.name||"ComparisonResultsLayer"===a.name}).forEach(function(b){if(b.attributes.ServiceUrl)d.push({url:b.attributes.ServiceUrl});else if("LocatorResultsLayer"===b.name){var c=b.tags&&b.tags.filter(function(a){return"Renderer"===a.name})[0],e=a.metadata.locatorCalculatorsHash[b.attributes.CalculatorName];e.isValid&&d.push({isLocatorLayer:!0,layerName:b.attributes.LayerName,calculatorName:b.attributes.CalculatorName,calculatorInfo:e,rendererJson:c&&f.parseRendererJson(c)})}else"ComparisonResultsLayer"===
b.name&&((c=(c=b.tags&&b.tags.filter(function(a){return"Renderer"===a.name})[0])&&f.parseRendererJson(c))&&"esriTS"===c.uniqueValueInfos[0].symbol.type?d[d.length-1].labelRendererJson=c:(e=(e=b.tags&&b.tags.filter(function(a){return"LabelingInfo"===a.name})[0])&&f.parseLabelRendererJson(e),d.push({isComparisonLayer:!0,calculatorName:b.attributes.CalculatorName,rendererJson:c,labelRendererJson:e})))});return d.length&&d},_parseSiteLayerPinSymbol:function(b,a){var d;if(b=g.queryJson(b,"SiteLayer")[0])if((b=
g.queryJson(b,"Symbol")[0])&&"Image"===b.attributes.Type)(a=a.getImageData(b.attributes.Name))&&(d={type:"esriPMS",contentType:k.getContentType(a),imageData:k.base64DataFromDataURL(a),url:b.attributes.Url,width:Number(b.attributes.Width),height:Number(b.attributes.Height),angle:Number(b.attributes.Angle)||0,xoffset:Number(b.attributes.XOffset)||0,yoffset:Number(b.attributes.YOffset)||0});else if(b&&"Marker"===b.attributes.Type){d=(d=g.queryJson(b,"Fill")[0])&&g.queryJson(d,"Color")[0];var c=(a=g.queryJson(b,
"Outline")[0])&&g.queryJson(a,"Color")[0];d={type:"esriSMS",style:"esriSMS"+(b.attributes.Style||"Circle"),size:Number(b.attributes.Size),angle:Number(b.attributes.Angle)||0,xoffset:Number(b.attributes.XOffset)||0,yoffset:Number(b.attributes.YOffset)||0,color:e.parseColorTag(d),outline:a&&{type:"esriSLS",color:e.parseColorTag(c),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return d},_parseStudyAreas:function(b){var a=(b=g.queryJson(b,
"StudyAreasLayer")[0])&&g.queryJson(b,"SymbolsPalette",!0)[0];b=(a&&g.queryJson(a,"Symbol",!0)||[]).map(c._parseAreaSymbol);var d=a&&g.queryJson(a,"SymbolRamp",!0)[0],e;d&&(a=g.queryJson(d,"First",!0)[0],d=g.queryJson(d,"Last",!0)[0],a=a&&g.queryJson(a,"Symbol",!0)[0],d=d&&g.queryJson(d,"Symbol",!0)[0],a&&d&&(e=[a,d].map(c._parseAreaSymbol)));return{ramp:e,symbolJsons:b}},_parseAreaSymbol:function(b){var a=g.queryJson(b,"Fill")[0],a=a&&g.queryJson(a,"Color")[0],d=(b=g.queryJson(b,"Outline")[0])&&
g.queryJson(b,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:e.parseColorTag(a)||[0,0,0,1],outline:b&&{type:"esriSLS",color:e.parseColorTag(d),style:"esriSLS"+(b.attributes.Style||"Solid"),width:void 0===b.attributes.Width?0:Number(b.attributes.Width)}}}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(g,f){return{parseRendererJson:function(e){return g.parseXml(f.parseJson(e))},parseLabelRendererJson:function(e){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:g.parseXml(f.parseJson(e)).map(function(e){return{value:e.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:e.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(g,f){var e=g(null,{parseJson:function(e,c){function b(d,c){if("string"===
typeof d)h+="\x3c"+c+' type\x3d"string"\x3e'+f.encodeXML(d,!1)+"\x3c/"+c+"\x3e";else if("number"===typeof d)h+="\x3c"+c+' type\x3d"number"\x3e'+d+"\x3c/"+c+"\x3e";else if("boolean"===typeof d)h+="\x3c"+c+' type\x3d"boolean"\x3e'+d+"\x3c/"+c+"\x3e";else if(Array.isArray(d))a(d,c);else if(d&&"object"===typeof d){h+="\x3c"+c+' type\x3d"object"\x3e';for(var e in d)b(d[e],e);h+="\x3c/"+c+"\x3e"}}function a(a,d){h+="\x3c"+d+' type\x3d"array"\x3e';a.forEach(function(a){b(a,"item")});h+="\x3c/"+d+"\x3e"}
var d=c&&c.rootName||"root",h="";c&&c.addDocumentOptions&&(h+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');b(e,d);return h=decodeURIComponent(encodeURIComponent(h).replace("%19",""))},parseXml:function(e){function c(a){if(!a.attributes)return null;for(var b=0;b<a.attributes.length;b++){var d=a.attributes[b];if("type"===d.name)return d.value}return null}function b(b,d){if(d.childNodes)for(var c=0,e=d.childNodes.length;c<e;c++){var f=d.childNodes[c],h=a(f);void 0!==h&&(b[f.nodeName]=h)}return b}
function a(a){var e=c(a);if(a.nodeName&&e)switch(e){case "string":return a.childNodes[0]?f.decodeXML(a.childNodes[0].nodeValue):"";case "number":return Number(a.childNodes[0].nodeValue);case "boolean":return"true"===a.childNodes[0].nodeValue;case "object":return b({},a);case "array":return d([],a)}}function d(b,d){if(d.childNodes)for(var c=0,e=d.childNodes.length;c<e;c++)b[c]=a(d.childNodes[c]);return b}var h,k;e=(new DOMParser).parseFromString(e,"text/xml").childNodes;for(var m=0;m<e.length;m++)if(1===
e[m].nodeType){k=e[m];break}k&&(e=c(k),"object"===e?b(h={},k):"array"===e&&d(h=[],k));return h}});g=e();g.runTest=function(){console.log("------------------------------Testing JsonXmlTypedConverter.js------------------------------");var f={type:"uniqueValue",field1:"SubtypeCD",fieldDelimiter:", ",defaultSymbol:{type:"esriSLS",style:"esriSLSSolid",color:[130,130,130,255],width:1},defaultLabel:"\x3cOther values\x3e",uniqueValueInfos:[{value:"1",label:"Duct Bank",description:"Duct Bank description",
symbol:{type:"esriSLS",style:"esriSLSDash",color:[76,0,163,255],width:1}},{value:"2",label:"Trench",description:"Trench description",symbol:{type:"esriSLS",style:"esriSLSDot",color:[115,76,0,255],width:1}}],rotationType:"geographic",rotationExpression:"[Rotation] * 2"},c=new e,f=JSON.parse(JSON.stringify(f));console.log(JSON.stringify(f,void 0,4));var b=c.parseJson(f);console.log(b);var a=c.parseXml(b);console.log(JSON.stringify(a,void 0,4));c=c.parseJson(a);console.log(c);console.log("Compare JSON1 and JSON2: "+
(JSON.stringify(f)===JSON.stringify(a)));console.log("Compare XML1 and XML2: "+(b===c));console.log("------------------------------Testing JsonXmlTypedConverter.js------------------------------")};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(g){if(!g)return null;g=g.attributes;return[Number(g.Red)||0,Number(g.Green)||0,Number(g.Blue)||0,g.Transparency?255*(1-Number(g.Transparency)/
100):255]}}})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],function(g,f,e){var k={base64DataToDataURL:function(c,b){if(/^data:image/.test(c))return c;b||(b=atob(c.substr(0,16)),b=k.getImageContentType(b));return"data:"+(b||"image/png")+";base64,"+c},getImageContentType:function(c){if("\u00ff\u00d8\u00ff"===c.substr(0,3)&&"JFIF"===c.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===c.substr(0,
8))return"image/png";if("GIF89a"===c.substr(0,6)||"GIF87a"===c.substr(0,6))return"image/gif"},base64DataFromDataURL:function(c){0==c.indexOf("data:")&&(c=c.substr(c.indexOf(",")+1));return c},getBase64DataIndex:function(c){c=0==c.indexOf("data:")?c.indexOf(";base64,"):-1;return 0<c?c+8:0},getContentType:function(c){var b=k.getBase64DataIndex(c);return b?c.substring(5,b-8):null},checkBase64FileSize:function(c,b){return k.getBase64FileSize(c)<=b},getBase64FileSize:function(c){return.75*c.length},imageToDataURL:function(c,
b){b=b||{};var a=document.createElement("canvas"),d=a.getContext("2d");a.width=b.width||c.width;a.height=b.height||c.height;var e=b.opacity;null!=e&&!isNaN(e)&&0<=e&&1>e&&(d.globalAlpha=+e,b.format="image/png");(e=b.pos)?d.drawImage(c,e.x||0,e.y||0):d.drawImage(c,0,0,a.width,a.height);return a.toDataURL(b.format)},imageFromUrl:function(c,b){var a=new g,d=new Image;0!==c.indexOf("data:")&&b&&b.crossOrigin&&d.setAttribute("crossOrigin",b.crossOrigin);d.onload=function(){if(d.width&&d.height)a.resolve(d);
else{var c=Error("Error of reading an image from URL.");b&&b.ignoreError?a.resolve(null):a.reject(c)}d.onload=d.onerror=null};d.onerror=function(c){b&&b.ignoreError?a.resolve(null):a.reject(c);d.onload=d.onerror=null};c=require.toUrl(c);/^http:/i.test(c)&&/^https/i.test(window.location.protocol)&&(c=e.toHttpsUrl(c));d.src=c;return a.promise},scaleImage:function(c,b){if("string"===typeof c)var a=k.base64DataToDataURL(c),d=k.getContentType(a),a=k.imageFromUrl(a);return f(a||c).then(function(a){var c=
1,e=a.width,f=a.height;if(b.factor)c=b.factor;else if(b.maxDim)c=b.maxDim/Math.max(e,f);else if(b.imageDim){var h=b.imageDim.w,g=b.imageDim.h;b.imageDim.preserveRatio?(c=Math.min(h/e,g/f),b.imageDim.reduceOnly&&1<c&&(c=1)):b.imageDim.reduceOnly?(e=Math.min(e,h),f=Math.min(f,g)):(e=h,f=g)}return k.imageToDataURL(a,{width:e*c,height:f*c,format:b.format||d,opacity:b.opacity})})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./VariableScriptCollector"],function(g,f){return{parseTradeAreaCalculators:function(e,k){g.queryJson(e,"SpecialTradeAreaFields").forEach(function(c){k.variableProvider.isPlayerOnly&&f.getObjects(c,!0).variableObjects.forEach(function(b){k.variableProvider.addVariable(b)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil",
"esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(g,f,e,k,c){return{collectImageResources:function(b,a,d){function h(b){return g(c.getImageInfo(a[b],b),null,function(){delete a[b]})}b&&b.files&&b.files.forEach(function(b){var c=e.getContentType(b.name);c&&"image/"===c.substr(0,6)&&(a[d(b.name)]=k.base64DataToDataURL(b.data,c))});b=[];for(var l in a)b.push(h(l));return f(b)}}})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/when","./ImageUtil","./UrlUtil"],function(g,f,e,k){var c=/^data:/i,b={_infoCache:{},getImageInfo:function(a,d,c){var h=c&&c.sizeLimit||1E5;b._infoCache[a]||(b._infoCache[a]=e.imageFromUrl(a,c).then(function(d){var c=e.imageToDataURL(d),f={dataUrl:c,contentType:e.getContentType(c),width:d.width,height:d.height};setTimeout(function(){b._infoCache[a]=f});return f}));return f(b._infoCache[a],function(a){a=g.mixin({},a);d&&(a.filename=d&&d.replace(/\.\w+$/,".png").toLowerCase());
return function(a){return f(b._processDataUrl(a,h),function(b){if(b&&b.dataUrl){var d=g.mixin({},a);d.dataUrl=b.dataUrl;d.width*=b.factor;d.height*=b.factor;return f(d)}return f(a)})}(a)})},ensureDataUrlForRemoveImage:function(a,d){return!a||c.test(a)?a:b.getRemoteImageDataUrl(a,d)},getRemoteImageDataUrl:function(a,d){function c(d,c){return b.getImageInfo(d?n+"?"+a:a,null,{crossOrigin:c}).then(function(a){return f(b._processDataUrl(a,m),function(a){return a&&a.dataUrl||a})})}function e(){console.log("Failed to get data for URL: "+
a);return a}var m=d&&d.sizeLimit||1E5,n=k.getProxyUrl();return c(!1,"anonymous").otherwise(function(){return c(!1,null)}).otherwise(function(){return n?c(!0,"anonymous"):e()}).otherwise(function(){return c(!0,null)}).otherwise(e)},_processDataUrl:function(a,b){var d=Math.max(a.width,a.height);if(d<=b)return a.dataUrl;var c=b/d;return f(e.scaleImage(a.dataUrl,{factor:c}),function(a){return{dataUrl:a,factor:c}})}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred",
"require"],function(g,f){var e={},k={},c;e.initialize=function(){if(c)return c.promise;c=new g;f("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(b,a,d,e,f,m,n,g){k.document=b;k.chart=a;k.infographic=d;k.section=e;k.field=f;k.filter=m;k.sorting=n;g.init().then(c.resolve)});return c.promise};e.getParser=function(b){return k[b]};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","esri/dijit/geoenrichment/when","dojo/string","../../../../dataProvider/supportClasses/dataCollections/DataCollectionsLoader"],function(g,f,e,k,c){var b=g(null,{variable:null,constructor:function(a){this.variable=a},calculate:function(a){return 0},getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return g(null,{isPlayerOnly:!0,
_fieldNameToVariableCache:null,_templateNameToVariableCache:null,_variableIdToVintageCache:null,_variableIdToSourceCache:null,constructor:function(a){this._templateNameToVariableCache=a&&a.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var b in this._templateNameToVariableCache){var c=this._templateNameToVariableCache[b];this._fieldNameToVariableCache[c.fieldName]=c}this._variableIdToVintageCache=a&&a.variableIdToVintageCache;this._variableIdToSourceCache=a&&a.variableIdToSourceCache},
get:function(a){return this._templateNameToVariableCache[a]||this._fieldNameToVariableCache[a]},toCalculator:function(a){return(a=this.get(a))&&new b(a)},addVariable:function(a){this._fieldNameToVariableCache[a.fieldName]=a;this._templateNameToVariableCache[a.templateName]=a},addScriptVariable:function(a){this._fieldNameToVariableCache[a.fieldName]=a;this._templateNameToVariableCache[a.templateName]=a},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(a){return this._fieldNameToVariableCache[a]},
this)},getVariablesDataVintageDescription:function(a){var b=this;return e(this.tryFetchDataVintageInfo(a),function(d){if(!d)return null;d={};var c={},e;for(e in a.usedVariablesCache){e=e.toLowerCase();var f=b._variableIdToVintageCache[e];f&&(c[f]=1);(f=b._variableIdToSourceCache[e])&&(d[f]=1)}if(!Object.keys(d).length&&!Object.keys(c).length)return null;e=[];Object.keys(d).length&&e.push(k.substitute("This infographic contains data provided by ${source}.",{source:Object.keys(d).join(", ")}));Object.keys(c).length&&
e.push(k.substitute("The vintage of the data is ${vintage}.",{vintage:Object.keys(c).join(", ")}));return e.join(" ")})},getVariableVintage:function(a){return this._variableIdToVintageCache&&this._variableIdToVintageCache[a.toLowerCase()]},tryFetchDataVintageInfo:function(a,b){var d=this;return this._variableIdToVintageCache?(b&&this._trimDataVintageInfoCaches(b),!0):c.canLoad()?e(c.loadVariables({countryID:a.countryID,hierarchy:a.hierarchy,outFields:["vintage","filteringTags"],forceLowerCase:!0}),
function(a){function c(a){var b;a.filteringTags&&a.filteringTags.some(function(a){if("Source"===a.name)return b=a.value,!0});return b}d._variableIdToVintageCache={};d._variableIdToSourceCache={};var e=a.fullNameToVariableCache,f;for(f in e){var h=e[f];h.vintage&&(d._variableIdToVintageCache[f]=h.vintage);(h=c(h))&&(d._variableIdToSourceCache[f]=h)}a.dataCollections.forEach(function(a){var b=a.data[0];b&&(a=a.dataCollectionID+".*",a=a.toLowerCase(),b.vintage&&(d._variableIdToVintageCache[a]=b.vintage),
(b=c(b))&&(d._variableIdToSourceCache[a]=b))});b&&d._trimDataVintageInfoCaches(b);return!0}):!1},_trimDataVintageInfoCaches:function(a){var b={},c={},e;for(e in a)e=e.toLowerCase(),(a=this._variableIdToVintageCache[e])&&(b[e]=a),(a=this._variableIdToSourceCache[e])&&(c[e]=a);this._variableIdToVintageCache=b;this._variableIdToSourceCache=c},toJson:function(){return{templateNameToVariableCache:f.clone(this._templateNameToVariableCache),variableIdToVintageCache:this._variableIdToVintageCache&&f.clone(this._variableIdToVintageCache),
variableIdToSourceCache:this._variableIdToSourceCache&&f.clone(this._variableIdToSourceCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(g,f,e){return g(null,{_styles:null,_stylesArray:null,constructor:function(e){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};f.mixin(this._styles,e);this._stylesArray=[];for(var c in this._styles)this._stylesArray.push(c)},
getStyle:function(e){return this._styles[e]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(e,c,b){if(c=this.getStyle(c))for(var a in c)b&&void 0!==e[a]||(e[a]=c[a])},findDefaultStyle:function(f){var c,b=this;this.getStylesArray().some(function(a){var d=b.getStyle(a),h;for(h in d){if(!f[h])return!1;if("color"===h||"backgroundColor"===h){if(!e.colorsEqual(f[h],d[h]))return!1}else if(f[h]!==d[h])return!1}c=a;return!0});return c}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define([],
function(){var g={},f={},e={};g.putImageData=function(k,c){if("string"===typeof k){var b=k.toLowerCase();e[b]=k;f[b]=c}};g.getImageData=function(e){return"string"!==typeof e?null:f[e.toLowerCase()]};g.findFileNameByData=function(k){for(var c in f)if(k===f[c])return e[c];return null};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles","../ThemeUpdateUtil","../../../_devConfig"],function(g,f,e){var k={"font-size":"fontSize","font-family":"fontFamily",
"font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},c={colors:1,colors3series:1};return{fromCssText:function(b){function a(a){var b=m;a.split("@").forEach(function(a){b=b[a]=b[a]||{}});return b}function d(a,b){if(b.borderStyle||b.border)if(a.border={},a.border.style=g.toSupportedValue(b.borderStyle),
"string"===typeof b.border){var d=b.border.split(" ");3===d.length&&(a.border.thickness=Number(d[0].replace("px","")),a.border.lineStyle=d[1],a.border.color=d[2])}for(var c in b)if("border"!==c&&"borderStyle"!==c){var d=b[c],e;e=c;var f=d,n=a;"font-size"===e?(n[k[e]]=h(f.replace("px","")),e=!0):"background-repeat"===e?(n[k[e]]=h("repeat"===f),e=!0):"background-size"===e?(n[k[e]]=h("contain"===f||"cover"===f),n.size="auto"===f?null:f,e=!0):e=!1;e||(a[k[c]||c]=h(d))}}function h(a){if(void 0===a||null===
a||"null"===a||"undefined"===a)return"";if("true"===a)return!0;if("false"===a)return!1;if(!0===a)return!0;if(!1===a)return!1;var b=Number(a);return isNaN(b)?a:b}function l(a){if(e.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof a)for(var b in a){var d=a[b];if(c[b]){var f=[],h=Object.keys(d);if(h.length){var n=h.every(function(a){return-1!==a.indexOf("_")});h.forEach(function(a,b){f[n?a.split("_")[1]:b]=d[a]})}a[b]=f}else l(d)}}
var m={};b=b.replace(/\n/g,"");b=b.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");b=b.replace("data:","dataM");b=b.replace(";base64","Mbase64");var n=function(){var a={};(b.match(/\..*?\}/g)||[]).forEach(function(b){var d=b.substring(1,b.indexOf("{")).trim(),c={};b.substring(b.indexOf("{")+1,b.indexOf("}")).trim().split(";").forEach(function(a){if(a=a.trim()){a=a.split(":");var b=a[1].trim(),b=b.replace("dataM","data:"),b=b.replace("Mbase64",";base64");c[a[0].trim()]=b}});a[d]=c});return a}(),p;for(p in n)d(a(p),
n[p]);delete m.themeMetadata;l(m);f.populateMissingStyles(m);return m}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(g,f,e,k){return{populateMissingStyles:function(c){if(c){c.table.overrideStyles||(c.table={overrideStyles:g.mixin({},c.table)});c.icon||(c.icon=g.clone(c.infographic.staticInfographic.icon),c.highlightedIcon=g.clone(c.infographic.staticInfographic.highlightedIcon));
c.chart.icon||(c.chart.icon=g.clone(c.infographic.staticInfographic.icon));c.chart.xAxis.lineColor||(c.chart.xAxis.lineColor=c.chart.xAxis.axisStyle.color,c.chart.yAxis.lineColor=c.chart.yAxis.axisStyle.color);var b=k.getThemeColors(c),a=c.chart.colors.slice(),d=c.chart.colors3series&&c.chart.colors3series.slice(),h=e.getDefaultTheme({defaultFontFamilty:c.document.fontFamily,defaultFontSize:c.document.fontSize});k.applyThemeColorsToTheme({theme:h,colors:b,chartColors:a,colors3series:d});f.populateObject(c,
h,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),function(g,f,e,k,c,b){var a=g(c,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(a){f.mixin(this,a)},add:function(a,c){c=c||{};var d=this;if(!this._isDestroyed){this._lastDfd||(this.onStarted(),this._lastDfd=new e);this._isFinished=
!1;var f=function(){var f=function(){if(!d._isDestroyed)try{return"function"===typeof a?a():a}catch(q){return(new e).reject(q)}},h=0<=c.delayBefore?function(){return b.delay(f,c.delayBefore)}:f;return(0<=c.delayAfter?function(){return k(h(),function(a){return b.delay(function(){return a},c.delayAfter)})}:h)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=k(f()):this._lastPromise=k(this._lastPromise).then(f);var h=this._lastPromise;k(h,function(a){h!==d._lastPromise||d._isDestroyed||
d._isFinished||h&&!h.isFulfilled()||(d._isFinished=!0,d._lastDfd.resolve(a),d._lastResult=a,d._lastDfd=null,d.onFinished(a))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(a){}});a.executeFunctions=function(b,c,
e){e=e||{};var d=new a,f=[];b.forEach(function(a,b){d.add(function(){return k(a(),function(a){f.push(a);return a})},{delayBefore:0===b?void 0:c})});e.onQueueReady&&e.onQueueReady(d);return k(d.getPromise(),function(a){return e.collectResults?f:a})};a.processArrayInBatches=function(a,b){function d(){if(a.length){for(var e=[],f=0;f<b.batchSize&&a.length;f++)e.push(a.shift());b.processBatch?b.callback(e):e.forEach(b.callback);setTimeout(d,b.timeout||0)}else c.resolve()}a=a.slice();var c=new e;d();return c.promise};
return a})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),function(g,f,e,k,c,b,a,d,h,l,m){var n={preprocessAreas:function(b,d){b.analysisAreas=
b.analysisAreas.filter(function(a){return a.feature&&a.feature.geometry&&"polygon"===a.feature.geometry.type||a.geographies&&a.geographies.length||a.buffer});-1!==d.analysisAreasLimit&&(d.analysisAreasLimit=d.analysisAreasLimit||20,b.analysisAreas.length=Math.min(b.analysisAreas.length,d.analysisAreasLimit));n._provideAreasIndexes(b);b.analysisAreas.forEach(function(a){a.feature&&!a.feature.attributes&&(a.feature.attributes={})});b.analysisAreas.forEach(function(b){b.name=b.name||b.shortName;if(!b.name&&
b.feature){var d=a.guessFeatureName(b.feature);d&&(b.name=b.shortName=d)}});return f(p.generalize(b.analysisAreas),function(){return e([t.provideGeographyFeatures(b),q.provideBufferFeatures(b)])})},_provideAreasIndexes:function(a){var b=a.combinedAreasInfo.groups,d=b&&b.length;a.analysisAreas.forEach(function(a,c){a.index=c;b&&(b.forEach(function(b,d){-1!==b.indexes.indexOf(c)&&(a.isGrouped=!0,a.groupIndex=d)}),"number"!==typeof a.groupIndex&&(a.isGrouped=!1,a.groupIndex=d++))})},removeGroupInfo:function(a){a.forEach(function(a){delete a.isGrouped;
delete a.groupIndex})}},p={generalize:function(a){var b=[],d=[];a.forEach(function(a,c){!a.feature||a.geographies&&a.geographies.length||(b.push(a.feature),d.push(c))});return f(function(a){function b(a){var b=0;a.geometry.rings.forEach(function(a){b+=a.length});return b}var d,e,n=h.needGeneralizeGeometry(a,l.generalization.factor,l.generalization.maxVerticesInAllFeatures,l.generalization.numVerticesPerFeature),k;n&&(d=!0,e=[],a=a.map(function(a){e.push(b(a));return new c(a.geometry,a.symbol,a.attributes)}),
k=h.generalizeGeometry(a,n,l.generalization.numVerticesPerFeature,!0));return f(k,function(){d&&(console.log("Generalize features:"),a.forEach(function(a,d){console.log("#"+d+" "+e[d]+" \x3d\x3e "+b(a))}));return a})}(b),function(b){d.forEach(function(d){a[d].feature=b.shift()})})}},t={provideGeographyFeatures:function(a){return e(a.analysisAreas.map(function(c){if(!c.feature&&c.geographies&&c.geographies.length)return(new d).createFeatureForGeographies(c.geographies,{countryID:a.countryID,hierarchy:a.hierarchy}).then(function(a){c.feature=
a;c.name=c.name||c.feature.attributes.StdGeographyName;c.description=c.description||m.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;c.address=c.address||c.name;c.geographies[0].attributes&&g.mixin(c.feature.attributes,c.geographies[0].attributes);if(a=c.geographies[0].symbol)a=a.toJson?a:b.fromJson(a),c.feature.setSymbol(a)})}))}},q={provideBufferFeatures:function(a){var b=this,c=a.analysisAreas.filter(function(a){return!a.feature&&a.buffer}),e=c.map(function(a){return a.buffer});return(new d).createFeaturesForBuffers(e,
{countryID:a.countryID}).then(function(a){a.forEach(function(a,d){d=c[d];d.feature=a;b._applyBufferParamsToArea(d)})})},_applyBufferParamsToArea:function(a){var d=a.buffer;if(!a.name){var c=m.geoenrichment.dijit.bufferTitle.pointRing;c[d.units]&&(a.name=k.substitute(c[d.units],{radius:d.radius}))}a.description=a.description||"Ring";d.attributes&&g.mixin(a.feature.attributes,d.attributes);if(d=d.symbol)d=d.toJson?d:b.fromJson(d),a.feature.setSymbol(d)}};return n})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],
function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(g){var f=Object.keys(g.attributes),e;this._nameScores.some(function(k){return f.some(function(c){if(k.test(c))return e=c,!0})});return g.attributes[e]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),function(g,f,
e,k,c,b){function a(a,b,d){var c=new f,e=new k("./mutableWorker",function(){e.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){e.postMessage({rings:a,maxAllowableOffset:d}).then(function(a){var d=a.rings;b.forEach(function(a){for(var b=a.source.length=0;b<a.count;b++)a.source.push(d.shift())});c.resolve();e.terminate()})})},!0);return c.promise}var d=g.mixin({},b);d.calculateMaxAllowableOffset=function(a,b){void 0===
b&&(b=1);return a.extent.getWidth()/a.width*b};d.getNumberOfPoints=c.getNumberOfPoints;d.needGeneralizeGeometry=function(a,b,c,e){if(!a||!b)return!1;e=e||(c?c/10:500);c=c||5E3;Array.isArray(a)||(a=[a]);var f=0>b,h=0,n=Math.abs(b)/100,k=0,g=0,m;a.forEach(function(a){a=a.geometry||a;if(!a.rings||!a.getExtent)return!1;var e=a.getExtent();if(e=e.getWidth()*e.getHeight())e=Math.sqrt(e),a=d.getNumberOfPoints(a),k+=a,g=Math.max(g,a),f&&(h=Math.max(h,e*n)),m||(m=f?k>c:a*b>4*e)});return m&&g>e?h||b:0};d.generalizeGeometry=
function(b,c,f,n){if(!b||!c||0>c)return!1;f=f||500;Array.isArray(b)||(b=[b]);var h=[],k=[];b.map(function(a){var b=a.geometry||a;if(b!=a&&b.rings){a.geometry=new e;a.geometry.setSpatialReference(b.spatialReference);var c=a.geometry.rings}c&&b.rings.forEach(function(a){c.push(a.slice())});d.getNumberOfPoints(b)>f&&(a=c||b.rings,h=h.concat(a),k.push({source:a,count:a.length}))});if(n&&window.Worker)return a(h,k,c);h.forEach(function(a){(new d.RingInfo(a)).generalize(c,.8)})};return d})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),
function(g,f,e,k,c,b,a,d,h){var l=window.Blob||window.webkitBlob||window.mozBlob,m=window.URL||window.webkitURL||window.mozURL;g=f([g],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(a,d,c){this._isIE=b("ie");this.returnDeferreds=!!c;this._queue={};this._acceptMessage=k.hitch(this,this._acceptMessage);this._errorMessage=k.hitch(this,this._errorMessage);a&&this.setWorker(a,k.hitch(this,function(a){this.worker=a;d(a)}))},setWorker:function(a,
b){if(a instanceof Array){var c=a;a=c.shift()}var e=this._getUrl(a),e=d.normalize(e);a=!d.hasSameOrigin(e,location.href);var f;if(!1===e)return console.log("Can not resolve worker path"),!1;this.worker&&(f=this.worker,f.removeEventListener("message",this._acceptMessage,!1),f.removeEventListener("error",this._errorMessage,!1),f.terminate(),f=null);if(a){a=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(a,k.hitch(this,function(a){a=m.createObjectURL(new l([a],{type:"text/javascript"}));b(this._createWorker(a,
e))}))}catch(r){try{a=d.getProxyUrl(a).path+"?"+encodeURI(a),this._useProxy=!0,b(this._createWorker(a,c))}catch(u){return console.log("Can not create worker"),!1}}}else setTimeout(k.hitch(this,function(){b(this._createWorker(e,c))}),0)},_createWorker:function(a,b){a=new Worker(a);a.addEventListener("message",this._acceptMessage,!1);a.addEventListener("error",this._errorMessage,!1);this.worker=a;b&&this.importScripts(b);return a},postMessage:function(a,b){if(a instanceof Array||"object"!=typeof a)a=
{data:a};var d=Math.floor(64E9*Math.random()).toString(36);a.msgId=d;d=this._queue[d]=new e;this.worker?(b?this.worker.postMessage(a,b):this.worker.postMessage(a),this.emit("start-message",{target:this,message:a})):d.reject({message:"No worker was set."});return this.returnDeferreds?d:d.promise||d},terminate:function(){var a=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var b=a.length-1;0<=b;b--)this._queue[a[b]].cancel("terminated"),delete this._queue[a[b]]},addWorkerCallback:function(a,
b){var d=this._getUrl(a,!0);!1===d?(b=new e,b.reject({message:"Could not load text from "+a})):(b=this.postMessage({action:"add-callback",url:d,cbName:b||"main"}),b.then(k.hitch(this,function(a){a.target=this;this.emit("callback-added",a)})));return b},importScripts:function(a){Array.isArray(a)||(a=[a]);a=a.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!d.hasSameOrigin(a,location.href)&&(a=d.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);a=this.postMessage({action:"import-script",url:a});
a.then(k.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return a},_acceptMessage:function(a){var b=a.data,d=b.msgId;if(b.status&&"debug"==b.status)console[b.showAs||"debug"](b);else if(d&&d in this._queue){var c=this._queue[d];"progress"==b.status?c.progress(a.data):("error"==b.status?c.reject(a.data):c.resolve(a.data),delete this._queue[d])}this.emit("message",{message:a.data,event:a,target:this})},_errorMessage:function(a){this.onerror||this.onError?this.onerror?this.onerror(a):
this.onError(a):console.log("Worker Error: "+a.message+"\nIn "+a.filename+" on "+a.lineno)},_getUrl:function(a,b){if(!a)return console.error("can not resolve empty path"),!1;a.match(/\.js$/)||(a+=".js");a=h.toUrl(a);return b?d.getAbsoluteUrl(a):a},_getRemoteText:function(a,b){(a=this._getUrl(a))&&c.get(a,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(a){b(a)})},_startBlobWorker:function(){var a=this._xdSource;a||(a=this._getUrl("./mutableWorker"),
a=new l(["if(!self._mutable){importScripts('"+a+"');}"],{type:"text/javascript"}),a=this._xdSource=m.createObjectURL(a));try{return new Worker(a)}catch(p){return console.log(p.message),!1}}});b("extend-esri")&&k.setObject("workers.WorkerClient",g,a);return g})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(g){function f(a,b){var d=a.length;if(3>d)return 0;b||(b=a[0]);var c=b[0];b=b[1];for(var e=a[d-1],d=e[0]-c,f=e[1]-b,h=0,k=0,g=a.length;k<g;k++)var e=a[k],r=e[0]-c,e=e[1]-
b,h=h+(r*f-d*e),d=r,f=e;return h/2}var e={};e.calculateRingArea=f;e.calculateRingCentroid=function(a,b){var d=a.length;if(!d)return null;b||(b=a[0]);var c=b[0];b=b[1];var e=0,f=0,h=0;if(2<d)for(var k=a[d-1],d=k[0]-c,g=k[1]-b,r=0,u=a.length;r<u;r++)var k=a[r],y=k[0]-c,k=k[1]-b,w=y*g-d*k,e=e+w,f=f+(d+y)*w,h=h+(g+k)*w,d=y,g=k;0==e?f=h=0:(f/=3*e,h/=3*e);return[c+f,b+h]};e.INTERIOR=1;e.EXTERIOR=-1;e.BOUNDARY=0;e.createRingInfo=function(a,c){return new b(a,c)};e.createSegmentCoordinates=function(b){return new a(null,
0,0,b)};var k=function(a){return function(){for(var b in a){var d=a[b];this[b]="function"===typeof d?d.bind(this):d}a.ctr.bind(this).apply(this,arguments)}},c=k({xmin:null,ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(a,b,c,e,f){this.xmin=a;this.ymin=b;this.xmax=c;this.ymax=e;this.spatialReference=f},printOut:function(){console.log([this.xmin,this.xmax,this.ymin,this.ymax].join(" "))}}),b=k({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(a,b){this.ring=
a;this.origin=b;a=this.ring.length-1;if(!(0>a)){if(!a)a++;else if(this.ring[a][0]!=this.ring[0][0]||this.ring[a][1]!=this.ring[0][1])a++,this.ring.push(this.ring[0].slice());var d=0,e=0;b=!b;this.extent=new c(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var h=0;h<a;h++){var k=this.ring[h],g=k[0];b&&(d+=g);g<this.extent.xmin?this.extent.xmin=g:g>this.extent.xmax&&(this.extent.xmax=g);g=k[1];b&&(e+=g);g<this.extent.ymin?this.extent.ymin=g:g>this.extent.ymax&&(this.extent.ymax=
g)}b&&(this.origin=[d/a,e/a]);this.area=f(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(a){this.clockwise==!a&&(this.ring.reverse(),this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(a,b){a=this.getRingCoordinates(b).testPoint(a[0]-this.origin[0],a[1]-this.origin[1]);return this.clockwise?a:-a},generalize:function(a,b,c){function d(d,c,e){y=d;w=c;if(e||C<u)u=a,A=y-l,B=w-l,C=Math.sqrt(A*A+B*B),C>a*b?(A/=C,B/=C):C=0;u*=b}function e(){if(!C)return!0;
var a=h.dx,b=h.dy,d=Math.sqrt(a*a+b*b);return d-a*A-b*B>=.9*d}b=b||.75;var h=this.getRingCoordinates(a),k=h.xs,g=h.ys,l=k[0],r=g[0],u,y,w,A,B,C=0,z=k.length-1;d(k[z],g[z],!0);for(var E=this,G=this.clockwise?function(a){E.ring.splice(a,1)}:function(a){E.ring.splice(-a-1,1)};0<z--&&4<k.length;){var F=k[z],D=g[z];h.setSegment(l,r,F,D)&&h.testPointOnTouch(y,w,u)&&e()?(k.splice(z+1,1),g.splice(z+1,1),G(z+1),d(F,D)):(l=y,r=w,d(F,D,!0))}this._coords=null;c&&(this.area=f(this.ring,this.origin),this.clockwise||
(this.area=-this.area))},getRingCoordinates:function(b,c){if(c)return new a(this.ring,c[0],c[1],b,this.extent,this.clockwise);this._coords&&this._coords.eps==b||(this._coords=new a(this.ring,this.origin[0],this.origin[1],b,this.extent,this.clockwise));return this._coords}});e.RingInfo=b;var a=k({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,_sy:null,ctr:function(a,b,e,f,k,g){this.xs=[];this.ys=[];a||(a=[]);void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);this.eps=Math.max(f,0);
k&&(f=this.eps/2,this.extent=new c(k.xmin-b-f,k.ymin-e-f,k.xmax-b+f,k.ymax-e+f));var d=a.length-1;if(!(0>d))for(k=d?a[d][0]==a[0][0]&&a[d][1]==a[0][1]?d:d+1:1,f=g?1:-1,g=g?0:d;k--;g+=f)d=a[g],this.xs.push(d[0]-b),this.ys.push(d[1]-e)},testPoint:function(a,b){if(!this._pointBelongsToExtent(a,b))return-1;var d=this.xs.length,c=!1;this.dy=this.ys[0]-this.ys[d-1];if(0==this.dy){for(c=d;1<c--&&(this.dy=this.ys[c]-this.ys[c-1],0==this.dy););if(0==this.dy)return 0}for(var c=0<this.dy,e=0,f=this.xs[0],h=
this.ys[0],k,g,r=1;r<=d;r++,f=k,h=g)if(g=r==d?0:r,k=this.xs[g],g=this.ys[g],this.setSegment(f,h,k,g)){var u=h-b,y=g-b,w=!1;0>u&&(u=-u,y=-y,w=!0);if(!(u>this.eps&&y>this.eps)){if(this.testPointOnTouch(a,b,this.eps))return 0;0==u?0!==y&&(0>y&&(c=!c),a<f&&c&&e++):0==y?c=w:0>y&&a<f+this.dx/this.dy*(b-h)&&e++}}return 0!=e%2?1:-1},testPointOnTouch:function(a,b,c){var d=this.findIntersectionDelta(a,b,a-this.dy,b+this.dx);a=this._sx+d*this.dx-a;b=this._sy+d*this.dy-b;return a*a+b*b<=c*c},_pointBelongsToExtent:function(a,
b){return a>=this.extent.xmin&&a<=this.extent.xmax&&b>=this.extent.ymin&&b<=this.extent.ymax},setSegment:function(a,b,c,e){this._sx=a;this.dx=c-a;this._sy=b;this.dy=e-b;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(a,b,c,e,f){void 0===f&&(f=!0);c-=a;e-=b;var d=this.dy*c-this.dx*e;if(0==d)return 0;var h=a-this._sx,k=b-this._sy,g=k*c-h*e,h=f?0:k*this.dx-h*this.dy;0>d&&(d=-d,g=-g,h=-h);return f||(h=0>h?0:h<d?h/d:1,this.testPointOnTouch(a+h*c,b+h*e,this.eps))?0>=g?0:g<d?g/d:1:-1},addPointOfSegmentAt:function(a){this.xs.push(this._sx+
a*this.dx);this.ys.push(this._sy+a*this.dy)}});e.RingCoordinates=a;g.document?define(function(){return e}):g.GeometryUtil_base=e})(this)},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n){var p={_templatesCache:{},getCachedTemplateJson:function(a,b){return(a=this._templatesCache[a+";"+b.reportID])&&a.modified===b.modified?{templateJson:g.clone(a.templateJsonInfo.templateJson),templateVariableProvider:a.templateJsonInfo.templateVariableProvider}:null},putCachedTemplateJson:function(a,b,d){this._templatesCache[a+";"+d.reportID]={modified:d.modified,templateJsonInfo:{templateJson:g.clone(b.templateJson),templateVariableProvider:b.templateVariableProvider}}}};
return{getTemplateJsonByID:function(b,g){var n=this,m=new f;e(c.getCustomReportByID(b),function(c){if(c){var f=g&&p.getCachedTemplateJson(b.countryID,c);if(f)m.resolve(f);else{var f=[n._loadCustomReportData(c)],q;"US"!==b.countryID&&"CA"!==b.countryID&&(q=!0,f.push(a.loadVariables({countryID:b.countryID,hierarchy:c.hierarchy,outFields:["description"]})));return k(f).then(function(a){var f=new h;return e(d.provideEditorJson(c,{variableProvider:f}),function(){var d=c.templateJson;if(q){var e=a[1].idToVariableCache,
h=a[1].fullNameToVariableCache;l.processTemplateFieldInfos(d,function(a){if(a.hasVariable&&a.variableID){var b=h[a.fullName]||e[a.variableID];a.alias=b&&b.description||a.alias;b&&b.description||a.expressionText||console.log("Can't find variable with ID: "+a.variableID)}});f.getVariables().forEach(function(a){var b=h[a.fullName];b&&(a.alias=b.description)})}c.portalJson=null;c.templateJson=null;d={templateJson:d,templateVariableProvider:f};g&&p.putCachedTemplateJson(b.countryID,d,c);m.resolve(d)})})}}else m.reject("Can't find a report")},
m.reject);return m.promise},_loadCustomReportData:function(a){a.portalJson=null;return a.templateData.getFiles().then(function(b){a.portalJson={files:b}})},createTemplateJsonFromVariables:function(d){return a.loadVariables({countryID:d.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(a){var c=new h,e=a.fullNameToVariableCache;a=d.variables.fullNames.map(function(a){var b=m.createFieldNameFromVariable(a),f=d.variables.customDataMapping[a],f=f?f.variable:
e[a];a={id:f.id.toLowerCase(),fullName:a,alias:f.description,fieldName:b,precision:f.precision,calculatorName:m.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:m.DATA_COLLECTIONS_CALCULATOR_NAME+"."+b,type:f.type,vintage:f.vintage};c.addVariable(a);return n.getCalculatorOrScriptFieldInfo(a.templateName,{variableProvider:c})});return{templateJson:b.generateTemplatesFromFieldInfos(a,{comparisonLevels:d.comparisonLevels}),templateVariableProvider:c}})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),
function(g,f,e,k,c,b){var a={},d={calcNumRowsColumns:function(a){var b;b=2>=a?1:6>=a?2:12>=a?3:Math.ceil(a/4);var d;d=1===a?1:4>=a?2:9>=a?3:4;return{numRows:b,numColumns:d,numVarsInLastRow:d-(b*d-a),lastRowCellIndexes:null,lastRowCellWidths:null}}},h={mergeLastRow:function(a,b,d){2===b.numColumns?1===b.numVarsInLastRow&&(e.modifyTableJson(a,b.numRows-1,0,{columnSpan:2}),b.lastRowCellWidths=[2*d]):3===b.numColumns?1===b.numVarsInLastRow?(e.modifyTableJson(a,b.numRows-1,0,{columnSpan:3}),b.lastRowCellWidths=
[3*d]):2===b.numVarsInLastRow&&(e.modifyTableJson(a,b.numRows-1,0,{cellStyle:{width:1.5*d}}),e.modifyTableJson(a,b.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*d}}),b.lastRowCellWidths=[1.5*d,1.5*d]):4===b.numColumns&&(1===b.numVarsInLastRow?(e.modifyTableJson(a,b.numRows-1,0,{columnSpan:4}),b.lastRowCellWidths=[4*d]):2===b.numVarsInLastRow?(e.modifyTableJson(a,b.numRows-1,0,{columnSpan:2}),e.modifyTableJson(a,b.numRows-1,2,{columnSpan:2}),b.lastRowCellIndexes=[0,2],b.lastRowCellWidths=[2*d,2*d]):
3===b.numVarsInLastRow&&(e.modifyTableJson(a,b.numRows-1,0,{cellStyle:{width:4*d/3}}),e.modifyTableJson(a,b.numRows-1,1,{columnSpan:2,cellStyle:{width:2*d/3}}),e.modifyTableJson(a,b.numRows-1,2,{cellStyle:{width:2*d/3}}),e.modifyTableJson(a,b.numRows-1,3,{cellStyle:{width:4*d/3}}),b.lastRowCellIndexes=[0,1,3],b.lastRowCellWidths=[4*d/3,4*d/3,4*d/3]))}},l={insertNextPanel:function(a,b,d){void 0===b.currentRowIndex&&(b.currentRowIndex=0,b.currentColumnIndex=0);var c=b.currentRowIndex===b.numRows-1;
a.data.data[b.currentRowIndex].fieldInfos["field"+(c&&b.lastRowCellIndexes?b.lastRowCellIndexes[b.currentColumnIndex]:b.currentColumnIndex)]=d(c&&b.lastRowCellWidths&&b.lastRowCellWidths[b.currentColumnIndex]);b.currentColumnIndex++;b.currentColumnIndex>b.numColumns-1&&(b.currentColumnIndex=0,b.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(b){var c=d.calcNumRowsColumns(b.length),m=g.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:c.numRows,numColumns:c.numColumns}}),
t=m.sectionsTables[0];h.mergeLastRow(t,c,500);b.forEach(function(b){l.insertNextPanel(t,c,function(d){var c=a._createInfographicJson(b,d||500,250);d=e.createSingleCellTable({width:d||500,height:250,fieldInfo:f.createFieldInfoFromInfographic(c)});return f.createFieldInfoFromSection(k.wrapInDetailsSectionJson(d))})});return m};a._createInfographicJson=function(a,d,e){return{type:c.ONE_VAR,title:a.alias,style:{width:d,height:e},levels:b.getDefaultLevels(),fieldInfos:[a],calcData:{calculatorName:a.templateName.substr(0,
a.templateName.indexOf(".")),variables:[a.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","./TemplateJsonModificationUtil"],function(g,f){return{createBlankTemplate:function(e){var k={},c=e.documentOptions||g.getDefaultDocumentOptionsGraphicReport();c.pagesize=g.combineCustomSizeString(c.left+c.right+e.layout.numColumns*e.elementWidth,
c.top+c.bottom+e.layout.numRows*e.elementHeight,"px");k.documentOptions=c;for(var c={style:{width:e.layout.numColumns*e.elementWidth},data:{columns:[],data:[]}},b=0;b<e.layout.numColumns;b++)c.data.columns.push({field:"field"+b,style:{width:e.elementWidth}});for(b=0;b<e.layout.numRows;b++)c.data.data.push({style:{height:e.elementHeight},fieldInfos:{}});k.sectionsTables=[c];f.adjustDocumentOptions(k);return k}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(g,f,e){var k={},c={a:[[841,1189],[594,841],[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};k.PAPER_SIZES=
c;var b={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var d;d=2===a.length?c[a[0]][a[1]]:c[a];b[a]={portrait:{w:f.mmToIn(d[0]),h:f.mmToIn(d[1])},landscape:{w:f.mmToIn(d[1]),h:f.mmToIn(d[0])}}});k.SIZE_TYPE_TO_DIM_HASH=b;k.hasStandardSize=function(a){return b[a]};k.getSupportedPageSizes=function(){var a=[],b;for(b in c)1===b.length?c[b].forEach(function(d,c){a.push(b+c)}):a.push(b);return a};k.getPageDim=function(a,d,c){b[a]?a=b[a][d||"portrait"]:(a=a.split("x"),
a={w:f.ptToIn(Number(a[0])),h:f.ptToIn(Number(a[1]))});c&&(a=g.clone(a),f.roundNDigitsObj(a,c.places));return a};k.getPageBox=function(a){if(!a)return null;var b=k.getPageDim(a.pagesize,a.orientation),c=f.inToPx(b.w),b=f.inToPx(b.h);return{w:c,h:b,contentW:c-(a.left||0)-(a.right||0),contentH:b-(a.top||0)-(a.bottom||0)}};k.combineCustomSizeString=function(a,b,c){return f.convert(a,c,"pt")+"x"+f.convert(b,c,"pt")};k.getDefaultDocumentOptions=function(a){return g.mixin({pagesize:"letter",orientation:"portrait",
left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.493,fontSize:10,fontFamily:e.DEFAULT_FONT_FAMILY_CLASSIC},a)};k.getDefaultDocumentOptionsGraphicReport=function(a){return g.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.493,fontSize:10,fontFamily:e.DEFAULT_FONT_FAMILY_GRAPHIC},a)};k.getClosestStandrdSizes=function(a,d){function c(a){var b=a.w/e.w;a=a.h/e.h;return Math.max(1-(1<b?1/b:b),1-(1<a?1/a:a))}d=void 0===
d?.4:d;var e=k.getPageDim(a.pagesize,a.orientation);a=[];for(var f in b){var g=b[f];a.push({pagesize:f,orientation:"portrait",score:c(g.portrait)});a.push({pagesize:f,orientation:"landscape",score:c(g.landscape)})}a=a.filter(function(a){return a.score<=d});a.sort(function(a,b){return a.score-b.score});return a};k.tryGetStandardPageSize=function(a,b){function d(a){var d="portrait"===b?1:0;return a["portrait"===b?0:1]===e&&a[d]===g}if(k.SIZE_TYPE_TO_DIM_HASH[a])return a;var c=a.split("x"),e=f.convert(Number(c[0]),
"pt","mm",0),g=f.convert(Number(c[1]),"pt","mm",0),p,t;for(t in k.PAPER_SIZES)if(c=k.PAPER_SIZES[t],1===t.length){if(c.some(function(a,b){if(d(a))return p=t+b,!0}))break}else if(d(c)){p=t;break}return p||a};return k})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(g){function f(c,b,a){a&&(c=g.mixin({},c));for(var d in c){var e=c[d];null!==e&&""!==e&&"boolean"!=typeof e&&("object"==typeof e?c[d]=f(e,b,a):(e=Number(e),isNaN(e)||(c[d]=b(e))))}return c}
var e={},k="px pt mm cm in twip".split(" ");k.forEach(function(c){k.forEach(function(b){if(c!==b){var a=c+"To"+b.charAt(0).toUpperCase()+b.substr(1);e[a]=function(a,f){return e.convert(a,c,b,void 0!==f?f:5)}}})});e.convert=function(c,b,a,d){c=Number(c)||0;switch(b){case "in":c*=72;break;case "px":c*=.75;break;case "mm":c=c/25.4*72;break;case "cm":c=c/2.54*72;break;case "twip":c/=20}switch(a){case "in":c/=72;break;case "px":c/=.75;break;case "mm":c=c/72*25.4;break;case "cm":c=c/72*2.54;break;case "twip":c=
Math.round(20*c)}void 0!==d&&(c=e.roundNDigits(c,d));return c};e.pxToPtObj=function(c,b){return f(c,e.pxToPt,!b)};e.ptToPxObj=function(c,b){return f(c,e.ptToPx,!b)};e.roundNDigits=function(c,b){return Number(Number(c).toFixed(b))};e.roundNDigitsObj=function(c,b){for(var a in c){var d=c[a];"object"==typeof d?e.roundNDigitsObj(d,b):c[a]=e.roundNDigits(d,b)}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(g,f){var e={},k={getJsonStat:function(b){var a=0,d=0,e=[];b.sectionsTables.forEach(function(b){var f=0;b.data.columns.forEach(function(a){f+=c.getFieldWidth(b,b.data.data[0],a)});a=Math.max(a,f);var h=0;b.data.data.forEach(function(a){h+=c.getDataHeight(b,a,b.data.columns[0])});d=Math.max(d,h);e.push({totalW:f,totalH:h})});return{tableInfos:e,totalWMax:a,totalHMax:d}}},c={getFieldWidth:function(b,a,d){return f.getFieldWidth({looseResize:!0},
a,d)||d.style.width},getDataHeight:function(b,a,d){return f.getDataHeight({looseResize:!0},a,d.field)},getAverageFieldWidth:function(b,a){var d=0;b.data.data.forEach(function(e){d+=c.getFieldWidth(b,e,a)});return d/b.data.data.length},getAverageDataHeight:function(b,a){var d=0;b.data.columns.forEach(function(e){d+=c.getDataHeight(b,a,e)});return d/b.data.columns.length}};e.adjustDocumentOptions=function(b){if(b.documentOptions){var a=k.getJsonStat(b);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&
!isNaN(a.totalHMax)&&(b=b.documentOptions,b.pagesize=g.combineCustomSizeString(b.left+b.right+a.totalWMax,b.top+b.bottom+a.totalHMax,"px"),(a=g.getClosestStandrdSizes(b)[0])&&.001>a.score&&a.orientation===b.orientation&&(b.pagesize=a.pagesize))}};e.JsonStatCollector=k;e.DataUtil=c;return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(g,f,e,k,c,b,a,d){var h={};e.calculator=h;h.markAsDirty=f.markAsDirty;h.fieldToColumn=f.fieldToColumn;h.dataIdToData=f.dataIdToData;h.getSpannedColumns=f.getSpannedColumns;h.recalcRows=c.recalcRows;h.recalcColumns=b.recalcColumns;h.recalcColumnsTableJson=b.recalcColumnsTableJson;h.recalcRowsToFitHeight=c.recalcRowsToFitHeight;h.adjustColumnWidth=b.adjustColumnWidth;h.getAffectedCellsForColumnAdjust=b.getAffectedCells;h.adjustRowHeight=c.adjustRowHeight;h.getAffectedCellsForRowAdjust=c.getAffectedCells;
h.recalcGridWidth=b.recalcGridWidth;h.calcFieldWidth=b.calcFieldWidth;h.getFieldWidth=b.getFieldWidth;h.setFieldWidth=b.setFieldWidth;h.calcDataHeight=c.calcDataHeight;h.getDataHeight=c.getDataHeight;h.setDataHeight=c.setDataHeight;h.autoSnapLayout=a.autoSnapLayout;h.positionCells=k.positionCells;h.calcFeatureCount=function(a,b,d){return(a-b)/d};h.calcRingIndexForCell=function(a){var b=a.parentGrid;if(!b)return-1;if(b.getNumDynamicRows())return void 0!==a.gridData.currentFeatureIndex?a.gridData.currentFeatureIndex:
a.gridData.index-b.getNumFixedRows();var d=b.getNumFixedColumns();return a.column.index<d?-1:Math.floor((a.column.index-d)/b.getNumDynamicColumns())};h.trimColumnsForNumberOfFeatures=function(a){for(var b=a.viewModel.dynamicReportInfo.fieldData.areaData.length,d=h.recalcGridWidth(a),c=0,e=0;e<a.getNumFixedColumns();e++)c+=a.columns[e].style.width;d-=c;c=h.calcFeatureCount(a.columns.length,a.getNumFixedColumns(),a.getNumDynamicColumns())-b;if(!(0>c)){for(var f=a.columns.slice(),e=f.length=a.getNumFixedColumns(),
k=[],g=0;a.columns[e];){for(var l=0;l<b;l++){var y=a.columns[e++],g=g+y.style.width;k.push(y)}e+=c}var w=d/g;k.forEach(function(a){a.style.width*=w});a.columns=f.concat(k)}};h.adjustRowsForNumberOfFeatures=function(a){var b=a.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=b)){var c=a.store.data[a.getNumFixedRows()];c.currentFeatureIndex=0;for(var e=1;e<b;e++){var f=g.clone(c);f.currentFeatureIndex=e;a.store.data.push(f)}d.applyDefaultStyling({data:{data:a.store.data,columns:a.columns}})}};
return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var g={markAsDirty:function(f){f._fieldToColumnHash=null;f._dataIdToDataHash=null},_calcGridHashes:function(f){f._fieldToColumnHash={};f.columns.forEach(function(e){f._fieldToColumnHash[e.field]=e});f._dataIdToDataHash={};f.store.data.forEach(function(e){f._dataIdToDataHash[e.id]=e})},fieldToColumn:function(f,e){f._fieldToColumnHash||g._calcGridHashes(f);
return f._fieldToColumnHash&&f._fieldToColumnHash[e]},dataIdToData:function(f,e){f._dataIdToDataHash||g._calcGridHashes(f);return f._dataIdToDataHash&&f._dataIdToDataHash[e]},getSpannedColumns:function(f,e,k){var c=[];if(1>k)return[];var b;f.columns.some(function(a){if(b||a.field===e)c.push(a),b=!0;if(c.length===k)return!0});return c},getColumnSpannedFields:function(f,e,k){var c=null,b=e.fieldToRowSpanSourceDataIndex&&e.fieldToRowSpanSourceDataIndex[k];e=void 0!==b?f.store.data[b]:e;e=e.columnSpans&&
e.columnSpans[k];if(1<e)for(c=[],k=g.fieldToColumn(f,k),b=k=f.columns.indexOf(k);b<k+e;b++)c.push(f.columns[b].field);return c},getRowSpannedData:function(f,e,k){var c=null;k=e.fieldToColumnSpanSourceField&&e.fieldToColumnSpanSourceField[k]||k;k=e.rowSpans&&e.rowSpans[k];if(1<k)for(var c=[],b=e=f.store.data.indexOf(e);b<e+k;b++)c.push(f.store.data[b]);return c},getMovableData:function(f,e,k){return(e=e.movableIndexHashVertical&&e.movableIndexHashVertical[k])&&f.store.data[e]},getMovableColumn:function(f,
e,k){return(e=e.movableFieldsHashHorizontal&&e.movableFieldsHashHorizontal[k])&&g.fieldToColumn(f,e)}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function g(e,k,c,b,a){function d(a){return b&&void 0!==b.places?Number(a.toFixed(b.places)):a}if(!k||!c)return null;var h=f.calculator[a?"getFieldWidth":"calcFieldWidth"](e,k,c);a=f.calculator[a?"getDataHeight":"calcDataHeight"](e,k,c);for(var g=0,m=
0,n=f.calculator.fieldToColumn(e,c),p=0;p<n.index;p++)g+=f.calculator.getFieldWidth(e,k,e.columns[p].field);for(p=0;p<k.index;p++)m+=f.calculator.getDataHeight(e,e.store.data[p],c);return{x:d(g),y:d(m),w:d(h),h:d(a)}}var f={calculator:null,calcCellBox:function(e,f){return g(e.parentGrid,e.gridData,e.column.field,f,!1)},calcDataBox:function(e,f,c,b){return g(e,f,c,b,!0)}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator",
"./columns/GridLayoutColumnsCalculator"],function(g,f){return{positionCells:function(e){var k={},c={},b={},a={};if(e.store.data.length){e.store.data.forEach(function(d,h){e.columns.forEach(function(n,m){var l=b[m]||0,p=a[h]||0,t=g.getDataHeight(e,d,n.field);n=f.getFieldWidth(e,d,n.field);l+=t;p+=n;c[m+"_"+h]=l;k[m+"_"+h]=p;b[m]=l;a[h]=p})});e.getFieldCells().forEach(function(a){a.domNode.style.left=(k[a.column.index-1+"_"+a.gridData.index]||0)+"px";a.domNode.style.top=(c[a.column.index+"_"+(a.gridData.index-
1)]||0)+"px"});var d=0,h;for(h in b)d=Math.max(d,b[h]);var l=0;for(h in a)l=Math.max(l,a[h]);e.mainNode.style.width=l+"px";e.mainNode.style.height=d+"px";e.domNode.style.width=l+"px";e.domNode.style.height=d+"px";e._width=l;e._height=d}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(g,f,e,k){var c={};c.recalcRows=g.recalcRows;c.recalcRowsToFitHeight=
f.recalcRowsToFitHeight;c.adjustRowHeight=k.adjustRowHeight;c.getAffectedCells=k.getAffectedCells;c.getDataHeight=e.getDataHeight;c.setDataHeight=e.setDataHeight;c.calcDataHeight=e.calcDataHeight;return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(g,f,e){function k(b,a){var d=[],c,f=0;a&&Object.keys(a).forEach(function(d){e.fieldToColumn(b,
d)?f++:delete a[d]});f&&b.columns.some(function(b){if(c||a[b.field])d.push(b),c=!0;a[b.field]&&f--;if(!f)return!0});return d}function c(b,a){var d=[],c,f=0;a&&Object.keys(a).forEach(function(d){e.dataIdToData(b,d)?f++:delete a[d]});f&&b.store.data.some(function(b){if(c||a[b.id])d.push(b),c=!0;a[b.id]&&f--;if(!f)return!0});return d}return{recalcRows:function(b){var a={};b.columns.forEach(function(b,d){a[b.field]=d});var d;b.store.data.forEach(function(c,f){c.index=f;c.style=c.style||{};c.style.fields=
c.style.fields||{};void 0===c.id&&(c.id=g());void 0===c.style.height&&(c.style.height=b.layoutDefaults.defaultRowHeight);delete c.excludedIndexHorizontal;delete c.movableFieldsHashHorizontal;delete c.fieldToColumnSpanSourceField;if(c.columnSpans){c.excludedIndexHorizontal={};c.movableFieldsHashHorizontal={};c.fieldToColumnSpanSourceField={};c._columnSpans=c._columnSpans||{};for(d in c.columnSpans){f=c._columnSpans[d];var h={};f=f?k(b,f):e.getSpannedColumns(b,d,c.columnSpans[d]);1<f.length&&(f.forEach(function(b){h[b.field]=
!0;b.field!==d&&(c.excludedIndexHorizontal[a[b.field]]=!0,c.fieldToColumnSpanSourceField[b.field]=d)}),c.movableFieldsHashHorizontal[d]=f[f.length-1].field);c.columnSpans[d]=f.length;c._columnSpans[d]=h}var n=0;Object.keys(c.columnSpans).forEach(function(a){2>c.columnSpans[a]?(delete c.columnSpans[a],delete c._columnSpans[a]):n++});n||(delete c.columnSpans,delete c._columnSpans)}delete c.excludedIndexVertical;delete c.movableIndexHashVertical;delete c.fieldToRowSpanSourceDataIndex;c.fieldInfos=c.fieldInfos||
{}});b.store.data.forEach(function(e,f){if(e.rowSpans)for(d in e._rowSpans=e._rowSpans||{},e.rowSpans){var h=e._rowSpans[d],k={};k[e.id]=!0;var g=a[d],n=e.rowSpans[d];if(h)h=c(b,h);else for(var h=[],m=f;m<f+n;m++)h.push(b.store.data[m]);1<h.length&&(h.forEach(function(a){if(a.id!==e.id){a.excludedIndexVertical=a.excludedIndexVertical||{};a.excludedIndexVertical[g]=!0;a.fieldToRowSpanSourceDataIndex=a.fieldToRowSpanSourceDataIndex||{};a.fieldToRowSpanSourceDataIndex[d]=e.index;var c=e.columnSpans&&
e.columnSpans[d];if(c)for(var f=1;f<c;f++)a.excludedIndexVertical[g+f]=!0,a.fieldToRowSpanSourceDataIndex[b.columns[g+f].field]=e.index}k[a.id]=!0}),e.movableIndexHashVertical=e.movableIndexHashVertical||{},e.movableIndexHashVertical[d]=f+h.length-1);e.rowSpans[d]=h.length;e._rowSpans[d]=k}});b.store.data.forEach(function(a,c){if(a.rowSpans){for(d in a.rowSpans)a.rowSpans[d]=Math.min(a.rowSpans[d],b.store.data.length-c);var e=0;Object.keys(a.rowSpans).forEach(function(b){2>a.rowSpans[b]?(delete a.rowSpans[b],
a._rowSpans&&delete a._rowSpans[b]):e++});e||(delete a.rowSpans,delete a._rowSpans)}});b.store.data.forEach(function(b,c){b.fieldInfos&&Object.keys(b.fieldInfos).forEach(function(c){void 0===a[c]&&delete b.fieldInfos[c]});b.style&&b.style.fields&&Object.keys(b.style.fields).forEach(function(c){void 0===a[c]&&delete b.style.fields[c]})});if(b.looseResize){b.store.data.forEach(function(a){b.columns.some(function(c){f.getDataHeightOwn(b,a,c.field)||f.setDataHeight(b,a,c.field,a.style.height)})});var h=
b.store.data[b.store.data.length-1],l=f.recalcGridHeight(b);b.columns.some(function(a){var c=0;b.store.data.forEach(function(d){c+=f.getDataHeightOwn(b,d,a.field)});var d=l-c;0!==d&&f.setDataHeight(b,h,a.field,f.getDataHeightOwn(b,h,a.field)+d)})}f.recalcGridHeight(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(g){var f={getDataHeight:function(e,k,c){return e.looseResize?f.getDataHeightOwn(e,
k,c)||k.style.height||0:k.style.height||0},getDataHeightOwn:function(e,f,c){if(e.looseResize)return f.style.fields=f.style.fields||{},(f.style.fields[c]=f.style.fields[c]||{}).height},setDataHeight:function(e,f,c,b,a){e.looseResize?(a?g.getColumnSpannedFields(e,f,c)||[c]:[c]).forEach(function(a){f.style.fields=f.style.fields||{};(f.style.fields[a]=f.style.fields[a]||{}).height=b}):f.style.height=b},calcDataHeight:function(e,g,c,b){var a=0,d=g.rowSpans&&g.rowSpans[c];if(1<d)for(var h=g.index;h<g.index+
d;h++)h!==b&&(a+=f.getDataHeight(e,e.store.data[h],c));else a=f.getDataHeight(e,g,c);return a},recalcGridHeight:function(e){e._height=0;var g=e.columns[0].field;e.store.data.forEach(function(c){e._height+=f.getDataHeight(e,c,g)});return e._height}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(g){return{recalcRowsToFitHeight:function(f,e){function k(a){a.forEach(function(a){f.columns.some(function(c,
d){if(!f.looseResize&&d)return!0;g.setDataHeight(f,a,c.field,g.getDataHeight(f,a,c.field)*b)})})}var c=g.recalcGridHeight(f),b=e/c;1!==b&&(k(f.store.data),f._getSavedOriginalData()&&k(f._getSavedOriginalData()),g.recalcGridHeight(f))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(g,f,e,k){var c={},b={checkHeightLimit:function(a,
b,c,d){if(a.getMaxHeight()){var e=0;a.store.data.forEach(function(d){d!==b&&(e+=f.getDataHeight(a,d,c))});d=Math.min(a.getMaxHeight()-e,d)}return d}},a={findDataToMove:function(a,b,c,d){var e=g.getMovableData(a,b,c);e&&(a=f.calcDataHeight(a,b,c,e.index),d-=a);return{data:e||b,height:d}}},d={finalResizeGridCells:function(a){a.getFieldCells().forEach(function(b){b.setHeight(f.calcDataHeight(a,b.gridData,b.column.field))})}};c.adjustRowHeight=function(c,f,g,n){n=b.checkHeightLimit(c,f,g,n);f=a.findDataToMove(c,
f,g,n);(c.looseResize?e:k).adjustRowHeight(c,f.data,g,f.height);d.finalResizeGridCells(c)};c.getAffectedCells=function(b,c,d){return b.looseResize?e.getAffectedCells(b,a.findDataToMove(b,c,d).data,d):null};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(g,
f,e,k,c,b){var a={collectRowBoxes:function(a,b){for(var c=[],d=0;d<a.columns.length;){var f=a.columns[d],h=this._createEmptyBox(),f=e.getColumnSpannedFields(a,b,f.field)||[f.field];h.elements=this._getFieldsElements(a,b,f);this._measureBox(h);var g=c[c.length-1];g&&(g.nextSibling=h,h.prevSibling=g);c.push(h);d+=f.length}return c},_createEmptyBox:function(){return{id:f(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(a,
b,c){var d=[];c.forEach(function(c){c={data:b,dataIndex:b.index,field:c,box:k.calcDataBox(a,b,c,{places:2})};d.push(c)});return d},_measureBox:function(a){var b=0;a.elements.forEach(function(a){b+=a.box.w});a.box={x:a.elements[0].box.x,y:a.elements[0].box.y,h:a.elements[0].box.h,w:b}},mergeBoxesForBottomRow:function(a){var b=this._createEmptyBox();a.forEach(function(a){a.elements.forEach(function(a){b.elements.push({data:null,field:a.field,box:g.clone(a.box)})})});this._measureBox(b);b.box.h=1E6;
return[b]},getBoxAtField:function(a,b){return a.filter(function(a){return a.elements[0].field===b})[0]}},d={buildInfluenceTree:function(b,c,d){function e(a,d){(d?c:b).forEach(function(b){var c;if(c=!b.overlappingBoxesCache[a.id]){c=a.box;var d=b.box;c=!(c.x+.5>=d.x+d.w||c.x+c.w<=d.x+.5)}c&&(a.overlappingBoxes.push(b),a.overlappingBoxesCache[b.id]=!0)});a.overlappingBoxes.forEach(function(a){e(a,!d)})}d=a.getBoxAtField(b,d);e(d,!0);return d}},h={applyForce:function(a,b,d){function e(b,d){var h=b.elements[0];
h.data&&c.setDataHeight(a,h.data,h.field,c.getDataHeight(a,h.data,h.field)+(d?-1:1)*f,!0);b.overlappingBoxes.forEach(function(a){e(a,!d)})}var f=this._checkDelta(a,b,d);e(b,!1)},_checkDelta:function(a,b,c){function d(a,b){0!==f&&(b?0>f||(f=Math.min(f,a.box.h-e),a.prevSibling&&(f=Math.min(f,a.prevSibling.box.y+a.prevSibling.box.h-e-a.box.y)),a.nextSibling&&(f=Math.min(f,a.nextSibling.box.y+a.nextSibling.box.h-e-a.box.y))):0<f||(f=Math.max(f,-(a.box.h-e)),a.prevSibling&&(f=Math.max(f,-(a.box.y+a.box.h-
(a.prevSibling.box.y+e)))),a.nextSibling&&(f=Math.max(f,-(a.box.y+a.box.h-(a.nextSibling.box.y+e))))),a.overlappingBoxes.forEach(function(a){d(a,!b)}))}var e=a.layoutDefaults.rowMinHeight;c=Math.max(c,e);var f=c-b.box.h;d(b,!1);return f}},l={_getInluencedStartBox:function(b,c,e){var f=b.store.data[c.index+1];c=a.collectRowBoxes(b,c);b=f?a.collectRowBoxes(b,f):a.mergeBoxesForBottomRow(c);return d.buildInfluenceTree(c,b,e)},getAffectedCells:function(a,c,d){function e(c){if(c.elements[0].data){var d=
b.querySingleCell(a,{rowIndex:c.elements[0].data.index,columnField:c.elements[0].field,considerSpans:!0});d&&f.push(d)}c.overlappingBoxes.forEach(e)}var f=[];c=this._getInluencedStartBox(a,c,d);e(c);return f},adjustRowCell:function(a,b,c,d){b=this._getInluencedStartBox(a,b,c);h.applyForce(a,b,d)}};return{adjustRowHeight:function(a,b,c,d){l.adjustRowCell(a,b,c,d)},getAffectedCells:function(a,b,c){return l.getAffectedCells(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry",
"./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(g,f,e,k,c){var b={querySingleCell:function(a,c){c.fieldCell&&(c={rowId:c.fieldCell.rowId,columnId:c.fieldCell.columnId});var d;a.getFieldCells().some(function(a){if(a.parentGrid&&a.column&&a.gridData&&!(a.columnId!==c.columnId&&a.column.index!==c.columnIndex&&a.column.field!==c.columnField||a.rowId!==c.rowId&&a.gridData.index!==c.rowIndex))return d=
a,!0});if(d)return d;if(c.considerSpans){var e=b.queryColumn(a,c),f=b.queryData(a,c);if(!e||!f)return null;var g=e.index,k=f.index;a.store.data.some(function(c){return a.columns.some(function(e){var f=e.index,h=e.index+(c.columnSpans&&c.columnSpans[e.field]||0),n=c.index;e=c.index+(c.rowSpans&&c.rowSpans[e.field]||0);if(f<=g&&h>=g&&n<=k&&e>=k)return d=b.querySingleCell(a,{columnIndex:f,rowIndex:n}),!0})})}return d},queryColumn:function(a,b){var c;a.columns.some(function(a){if(a.id===b.columnId||a.index===
b.columnIndex||a.field===b.columnField)return c=a,!0});return c},queryData:function(a,b){var c;a.store.data.some(function(a){if(a.id===b.rowId||a.index===b.rowIndex)return c=a,!0});return c},queryCells:function(a,c){if(c.fieldCell){var d=[],e=c.rowSpan||1,f=c.columnSpan||1;if(c=b.querySingleCell(a,c))for(var g=c.gridData.index;g<c.gridData.index+e;g++)for(var k=c.column.index;k<c.column.index+f;k++){var t=b.querySingleCell(a,{rowIndex:g,columnIndex:k});t&&d.push(t)}return d}return this.queryCellsInArray(a.getFieldCells(),
c)},queryCellsInArray:function(a,b){var c=[];if(!Object.keys(b).length)return c;a.forEach(function(a,d){if(void 0===b.cellIndex||d===b.cellIndex)if(void 0===b.cellIndexes||-1!==b.cellIndexes.indexOf(d))if(void 0===b.columnId||a.columnId===b.columnId)if(void 0===b.columnIds||-1!==b.columnIds.indexOf(a.columnId))if(void 0===b.columnIndex||a.column.index===b.columnIndex)if(void 0===b.columnIndexes||-1!==b.columnIndexes.indexOf(a.column.index))if(void 0===b.columnField||a.column.field===b.columnField)if(void 0===
b.columnFields||-1!==b.columnFields.indexOf(a.column.field))if(void 0===b.rowId||a.rowId===b.rowId)if(void 0===b.rowIds||-1!==b.rowIds.indexOf(a.rowId))if(void 0===b.rowIndex||a.gridData.index===b.rowIndex)void 0!==b.rowIndexes&&-1===b.rowIndexes.indexOf(a.gridData.index)||c.push(a)});return c},getTitleCell:function(a){var c=b.querySingleCell(a,{rowIndex:0,columnIndex:0});if(c&&!f.getFieldInfo(c)&&(1===a.columns.length||f.getColumnSpan(c)===a.columns.length))return c},isDynamicFieldCell:function(a,
b){return a._dynamicBindings&&a._dynamicBindings[b.column.field]},getDynamicallyBoundColumns:function(a,b){return a._dynamicBindings&&a._dynamicBindings[b.field]},getDynamicallyBoundFieldCells:function(a,c){if(c.column){var d=a._dynamicBindings&&a._dynamicBindings[c.column.field];if(!d)return null;var e=[];d.forEach(function(d){(d=d&&b.querySingleCell(a,{columnId:d.id,rowId:c.rowId}))&&e.push(d)});return e}},getAllBoundCells:function(a,c,f){var d=[],h={};c&&c.forEach(function(c){if((!f||f(c))&&!h[c.uniqueId]){h[c.uniqueId]=
!0;var e=b.getDynamicallyBoundFieldCells(a,c);e?e.forEach(function(a){d.push(a);h[a.uniqueId]=!0}):d.push(c)}});return e.removeDuplicates(d,"uniqueId")},trimDynamicBindings:function(a,c){var d=[],e={};c&&c.forEach(function(c){var f=b.getDynamicallyBoundFieldCells(a,c);f&&f.length?(e[f[0].uniqueId]||d.push(f[0]),f.forEach(function(a){e[a.uniqueId]=!0})):d.push(c)});return d},collectFieldInfos:function(a,c){var d=[];c=c||{};var e=c.fieldCells||a.getFieldCells();c.trimDynamicBinding&&e&&(e=b.trimDynamicBindings(a,
e));e&&e.forEach(function(a){(a=f.getFieldInfo(a))&&d.push(a)});return d},cellHasFloatingTableParent:function(a){function b(a){return a.isSection&&a.isDataDrillingView?!1:a.isFloatingTable?!0:a.parentWidget?b(a.parentWidget):!1}return a&&a.parentGrid?b(a.parentGrid):!1},isMouseOver:function(a){return c.isMouseOverBox(b.getBBox(a))},getOverFieldCell:function(a,b){b=b||{};var c=b.cellFilter||function(){return!0},d;a.getForegroundFloatingCells({topFirst:!0}).some(function(a){if(c(a)&&a.isMouseOver())return d=
a,!0});d||a.getFieldCells().some(function(a){if(c(a)&&a.isMouseOver())return d=a,!0});d||a.getBackgroundFloatingCells({topFirst:!0}).some(function(a){if(c(a)&&a.isMouseOver())return d=a,!0});return d},getBBox:function(a,b){var c=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof c&&0!==c?a.getFirstCell().getBBox(b):b&&b.noTransformation?k.noTransformPosition(a.domNode):g.position(a.domNode)}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],
function(g){return{adjustRowHeight:function(f,e,k,c){var b=f.layoutDefaults.rowMinHeight;c=Math.max(c,b);var a=c-g.getDataHeight(f,e,k);if(f.keepGridHeightWhenResized){var d=f.store.data[e.index+1];d&&(a=g.getDataHeight(f,d,k)-a,a<b&&(c-=b-a,a=b),g.setDataHeight(f,d,k,a,!0))}g.setDataHeight(f,e,k,c,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil","./ColumnModifier","./ColumnsProcessor"],
function(g,f,e){var k={};k.recalcColumns=e.recalcColumns;k.recalcColumnsTableJson=e.recalcColumnsTableJson;k.adjustColumnWidth=f.adjustColumnWidth;k.getAffectedCells=f.getAffectedCells;k.getFieldWidth=g.getFieldWidth;k.setFieldWidth=g.setFieldWidth;k.calcFieldWidth=g.calcFieldWidth;k.recalcGridWidth=g.recalcGridWidth;return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(g){var f=
{getFieldWidth:function(e,k,c){var b="string"===typeof c?g.fieldToColumn(e,c):c;c=b?b.field:"string"===typeof c?c:null;return e.looseResize?f.getFieldWidthOwn(e,k,c)||b&&b.style.width||0:b&&b.style.width||0},getFieldWidthOwn:function(e,f,c){if(e.looseResize)return f.style.fields=f.style.fields||{},(f.style.fields[c]=f.style.fields[c]||{}).width},setFieldWidth:function(e,f,c,b,a){var d="string"===typeof c?g.fieldToColumn(e,c):c,h=d?d.field:"string"===typeof c?c:null;e.looseResize?(a?g.getRowSpannedData(e,
f,h)||[f]:[f]).forEach(function(a){a.style.fields=a.style.fields||{};(a.style.fields[h]=a.style.fields[h]||{}).width=b}):d&&(d.style.width=b)},calcFieldWidth:function(e,k,c,b){var a=0;1<(k.columnSpans&&k.columnSpans[c])?g.getSpannedColumns(e,c,k.columnSpans[c]).forEach(function(c){b!==c.field&&(a+=f.getFieldWidth(e,k,c.field))}):a=f.getFieldWidth(e,k,c);return a},recalcGridWidth:function(e){e._width=0;var g=e.store.data[0];e.columns.forEach(function(c){e._width+=f.getFieldWidth(e,g,c.field)});return e._width},
getAllowedWidth:function(e){return e.fitParentWhenResized?e.getAllowedWidthFromParent():e.getAllowedWidth()}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(g,f,e,k){var c={},b={getColumnToChange:function(a,b,c,d){var e=g.getMovableColumn(a,b,c.field);e&&(a=f.calcFieldWidth(a,b,c.field,e.field),d-=
a);return{column:e||c,width:d}}},a={finalResizeGridCells:function(a){a.getFieldCells().forEach(function(b){b.setWidth(f.calcFieldWidth(a,b.gridData,b.column.field))});f.recalcGridWidth(a)}},d={recalcToStick:function(a){var b=a.columns[a.columns.length-1];a.store.data.some(function(c,d){if(!a.looseResize&&d)return!0;var e=0;a.columns.forEach(function(d){d!==b&&(e+=f.getFieldWidth(a,c,d.field))});f.setFieldWidth(a,c,b.field,f.getAllowedWidth(a)-e)})}};c.adjustColumnWidth=function(c,f,g,n){g=b.getColumnToChange(c,
f,g,n);(c.looseResize?k:e).adjustColumnWidth(c,f,g.column,g.width);c.stickToRight&&d.recalcToStick(c);a.finalResizeGridCells(c)};c.getAffectedCells=function(a,c,d){return a.looseResize?k.getAffectedCells(a,c,b.getColumnToChange(a,c,d).column):null};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(g){var f={},e={adjustColumnWidth:function(f,c,b,a,d){function h(a,b){return g.setFieldWidth(f,
c,a.field,b,!0)}var k=f.layoutDefaults.columnMinWidth,m=function(){if(!b)return null;var e=g.getFieldWidth(f,c,b.field);void 0!==d&&(a=e+d);a=Math.max(k,a);var h,n=0,m=!1;f.columns.forEach(function(a){n+=g.getFieldWidth(f,c,a.field);m&&!h?h=a:a===b&&(m=!0)});var l=g.getAllowedWidth(f)-(n-e);return isNaN(l)?null:{width:a,widthMemo:e,maxAllowedColumnWidth:l,nextColumn:h}}();if(m){a=m.width;var n=m.widthMemo,p=m.maxAllowedColumnWidth,t=(m=m.nextColumn)&&g.getFieldWidth(f,c,m.field),n=a-n,q=0;f.keepGridWidthWhenResized?
(m&&(n=t-n,n<k&&(a-=k-n,n=k),n<t&&(p+=t-n),h(m,n)),h(b,Math.min(p,a))):(m&&p<a&&t>k?(h(b,a),q=p-a):h(b,Math.min(p,a)),0!==q&&e.adjustColumnWidth(f,c,m,null,q))}}};f.adjustColumnWidth=function(f,c,b,a){e.adjustColumnWidth(f,c,b,a)};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),
function(g,f,e,k,c,b){var a={collectColumnBoxes:function(a,b){for(var c=[],d=0;d<a.store.data.length;){var f=a.store.data[d],h=this._createEmptyBox(),f=e.getRowSpannedData(a,f,b.field)||[f];h.elements=this._getSpannedDataElements(a,b,f);this._measureBox(h);var g=c[c.length-1];g&&(g.nextSibling=h,h.prevSibling=g);c.push(h);d+=f.length}return c},_createEmptyBox:function(){return{id:f(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(a,
b,c){var d=[];c.forEach(function(c){c={data:c,dataIndex:c.index,field:b.field,box:k.calcDataBox(a,c,b.field)};d.push(c)});return d},_measureBox:function(a){var b=0;a.elements.forEach(function(a){b+=a.box.h});a.box={x:a.elements[0].box.x,y:a.elements[0].box.y,w:a.elements[0].box.w,h:b}},mergeBoxesForRightColumn:function(a){var b=this._createEmptyBox();a.forEach(function(a){a.elements.forEach(function(a){b.elements.push({data:a.data,field:null,box:g.clone(a.box)})})});this._measureBox(b);b.box.w=1E6;
return[b]},getBoxAtDataIndex:function(a,b){return a.filter(function(a){return a.elements[0].dataIndex===b})[0]}},d={buildInfluenceTree:function(b,c,d){function e(a,d){(d?c:b).forEach(function(b){var c;if(c=!b.overlappingBoxesCache[a.id]){c=a.box;var d=b.box;c=!(c.y+.5>=d.y+d.h||c.y+c.h<=d.y+.5)}c&&(a.overlappingBoxes.push(b),a.overlappingBoxesCache[b.id]=!0)});a.overlappingBoxes.forEach(function(a){e(a,!d)})}d=a.getBoxAtDataIndex(b,d.index);e(d,!0);return d}},h={applyForce:function(a,b,d){function e(b,
d){var h=b.elements[0];h.field&&c.setFieldWidth(a,h.data,h.field,c.getFieldWidth(a,h.data,h.field)+(d?-1:1)*f,!0);b.overlappingBoxes.forEach(function(a){e(a,!d)})}var f=this._checkDelta(a,b,d);e(b,!1)},_checkDelta:function(a,b,d){function e(a,b){0!==h&&(b?0>h||(h=Math.min(h,a.box.w-f),a.prevSibling&&(h=Math.min(h,a.prevSibling.box.x+a.prevSibling.box.w-f-a.box.x)),a.nextSibling&&(h=Math.min(h,a.nextSibling.box.x+a.nextSibling.box.w-f-a.box.x))):0<h||(h=Math.max(h,-(a.box.w-f)),a.prevSibling&&(h=Math.max(h,
-(a.box.x+a.box.w-(a.prevSibling.box.x+f)))),a.nextSibling&&(h=Math.max(h,-(a.box.x+a.box.w-(a.nextSibling.box.x+f))))),a.overlappingBoxes.forEach(function(a){e(a,!b)}))}var f=a.layoutDefaults.columnMinWidth;d=Math.max(d,f);var h=d-b.box.w;if(0<h&&b.elements[0].field===a.columns[a.columns.length-1].field){var g=0;a.columns.forEach(function(d){g+=c.getFieldWidth(a,b.elements[0].data,d.field)});h=Math.min(h,c.getAllowedWidth(a)-g)}e(b,!1);return h}},l={_getInluencedStartBox:function(b,c,e){var f=b.columns[e.index+
1];e=a.collectColumnBoxes(b,e);b=f?a.collectColumnBoxes(b,f):a.mergeBoxesForRightColumn(e);return d.buildInfluenceTree(e,b,c)},getAffectedCells:function(a,c,d){function e(c){if(c.elements[0].data){var d=b.querySingleCell(a,{rowIndex:c.elements[0].data.index,columnField:c.elements[0].field,considerSpans:!0});d&&f.push(d)}c.overlappingBoxes.forEach(e)}var f=[];c=this._getInluencedStartBox(a,c,d);e(c);return f},adjustColumnCell:function(a,b,c,d){b=this._getInluencedStartBox(a,b,c);h.applyForce(a,b,d)}};
return{adjustColumnWidth:function(a,b,c,d){l.adjustColumnCell(a,b,c,d)},getAffectedCells:function(a,b,c){return l.getAffectedCells(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(g,f){function e(c){c._dynamicBindings={};if(c.getNumDynamicColumns()){for(var b=c.getNumDynamicColumns(),a=c.getNumFixedColumns(),d=0;d<a;d++)c.columns[d].isFixed=!0;for(var d=
[],e=0;e<b;e++){for(var f=a,g=[];f<c.columns.length;){var k=c.columns[f+e];k.isDynamic=!0;g.push(k);f+=b}d.push(g)}d.forEach(function(a){a.forEach(function(b){c._dynamicBindings[b.field]=a})})}}var k={recalcColumns:function(c,b){var a=b&&b.resetWidth,d=b&&b.columnsToPreserve,h=b&&b.stickToRight,k=b&&b.newWidth,m=b&&b.rightOffsetWeight;b=b&&b._isJson;var n={},p=0;c.columns.every(function(a,b){if(!a.style||!a.style.width||isNaN(a.style.width)||"number"!==typeof a.style.width)return p=0,!1;p+=a.style.width;
n[b]=a.style.width;return!0});var t;t=k?k:h?c.getAllowedWidth():p?Math.min(p,c._width):c._width;t-=0<m?t*m:0;var q=t/c.columns.length,v=t;if(d){var r=d.length*q,u=0;d.forEach(function(a){u+=a.style.width});d.forEach(function(a){a.style.width=r/u*a.style.width/v*100+"%"})}c.columns.forEach(function(b,c,d){b.index=c;b.style=b.style||{};if("number"!==typeof b.style.width||a)if(c===d.length-1)b.style.width=v;else{var e=b.style.width;"string"===typeof e&&-1!==e.indexOf("%")?b.style.width=parseFloat(e.substr(0,
e.length-1))/100*t:b.style.width=q}v-=b.style.width;c===d.length-1&&0>v&&(b.style.width+=v);void 0===b.id&&(b.id=g())});if(c.looseResize){c.columns.some(function(a,b){var d=n[b]?a.style.width/n[b]:void 0;c.store.data.forEach(function(b){var e=f.getFieldWidthOwn(c,b,a.field);e?d&&1!==d&&f.setFieldWidth(c,b,a.field,e*d):f.setFieldWidth(c,b,a.field,a.style.width)})});var y=c.columns[c.columns.length-1].field;c.store.data.forEach(function(a){var b=0;c.columns.some(function(d){b+=f.getFieldWidthOwn(c,
a,d.field)});var d=t-b;0!==d&&f.setFieldWidth(c,a,y,f.getFieldWidthOwn(c,a,y)+d)})}b||(e(c),f.recalcGridWidth(c));return t},recalcColumnsTableJson:function(c){k.recalcColumns(c.data,{resetWidth:!0,newWidth:c.style.width,_isJson:!0})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(g,f,e,k){return{autoSnapLayout:function(c){function b(){var a=
[];c.store.data.forEach(function(b){c.columns.forEach(function(d){a.push(g.mixin({id:b.index+"_"+d.field,data:b,dataIndex:b.index,column:d,field:d.field},k.calcDataBox(c,b,d.field)))})});return a}if(c.looseResize)for(var a=c.store.data.length*c.columns.length,d={},h=0;h<a;h++){var l=b(),m=l[h],n=m.x+m.w,p=m.y+m.h;d[m.id]=!0;l.forEach(function(a){if(!d[a.id]){var b=n-(a.x+a.w);.5>=Math.abs(b)&&e.setFieldWidth(c,a.data,a.field,a.w+b);b=p-(a.y+a.h);.5>=Math.abs(b)&&f.setDataHeight(c,a.data,a.field,a.h+
b)}})}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(g,f){return{wrapInDetailsSectionJson:function(e,f){e=Array.isArray(e)?e:[e];var c=e.some(function(b){return"table"===b.id&&b.attributes&&(0<b.attributes.dynamicColumns||0<b.attributes.dynamicRows)});return{type:f||(c?g.GROUP:g.DETAILS),stack:e}},getSectionJsonInfographic:function(e){var g;
e.stack&&e.stack.some(function(c){g="table"===c.id&&f.getTableJsonInfographic(c);return!!g});return g},getSectionJsonInfographicTable:function(e){var g;e.stack&&e.stack.some(function(c){if("table"===c.id&&f.getTableJsonInfographic(c))return g=c,!0});return g},calcSectionJsonBox:function(e){var f,c,b,a;function d(d){f=Math.min(f,d.l);c=Math.min(c,d.t);b=Math.max(b,d.l+d.w);a=Math.max(a,d.t+d.h)}c=f=Infinity;a=b=0;e.stack&&e.stack.forEach(function(a){switch(a.id){case "table":var b=0;a.data.data.forEach(function(a){b+=
a.style.height});d({l:a.style.left||0,t:a.style.top||0,w:a.style.width,h:b});break;case "img":case "map":d({l:a.style.left||0,t:a.style.top||0,w:a.style.width,h:a.style.height})}});e=e.style||{};return{x:e.left,y:e.top,w:e.width||f+b,h:e.height||c+a,contentLeft:f,contentTop:c,contentW:b-f,contentH:a-c}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder",
"dojo/i18n!esri/nls/jsapi"],function(g,f){f=f.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(e,k,c){if(!e)return null;if(k.variableProvider.isPlayerOnly&&!k.useVariableProviderToCollectOnly){var b=k.variableProvider.toCalculator(e);if(!b)return console.log("Can't create a dummy calculator for \x3d\x3e "+e),null;c=c||{};c.calculatorName=b.variable.calculatorName;e=g.createFieldInfoFromCalculator(b,k.variableProvider,c);e.name=b.variable.fieldName;e.templateName=
b.variable.templateName;return e}var b=k.queryMetaDataFunc(e),a=e.substr(0,e.indexOf("."));c=c||{};c.calculatorName=a;if(b)return b.isScript?g.createFieldInfoFromScript(b,k.variableProvider,c):g.createFieldInfoFromCalculator(b,k.variableProvider,c);c=g.createFieldInfoFromMissingVariable(e);k.variableProvider.isPlayerOnly&&(b=k.variableProvider.toCalculator(e),c.alias=b&&b.variable.alias);c.alias=c.alias?c.alias+" ("+f.missingVariable+")":f.missingVariable;return c}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/InfographicOptionsProvider":function(){define("dojo/_base/declare esri/kernel esri/dijit/geoenrichment/InfographicsOptions esri/dijit/geoenrichment/Geoenrichment esri/dijit/geoenrichment/config esri/tasks/geoenrichment/GeometryStudyArea esri/tasks/geoenrichment/StandardGeographyStudyArea esri/tasks/geoenrichment/studyAreaFromJson ./ge/LocalGEInfographic ./ge/_GEFilterSupport esri/dijit/geoenrichment/utils/StudyAreaKeyBuilder".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m){var n=g(null,{_options:null,getTask:function(){return null},createGeoenrichment:function(a,b,c,d,e){return a&&a.calcData?new h(a,b,c,d,e):(new g([k,l]))()},getCountry:function(a){return null},getOptions:function(){this._options||(this._options=new e);return this._options}}),p=g(null,{countryID:null,reportID:null,geoenrichmentUrl:null,areaNames:null,studyAreas:null,studyArea:null,_provider:null,constructor:function(c,e){this.countryID=c.countryID;this.reportID=c.reportID;
this.geoenrichmentUrl=c.geoenrichmentUrl;this.studyAreas=c.studyAreas.map(function(c){return c instanceof b||c instanceof a?c:d(c)});this.areaNames=c.areaNames;this._provider=e;this.setCurrentAnalysisAreaIndex(0)},setCurrentAnalysisAreaIndex:function(a){this.studyArea=this.studyAreas[a]},_getGEKey:function(a){a=a||this.studyArea;return JSON.stringify(m.studyAreaToJson(a))+this.countryID+this.reportID},_getGEKeys:function(){return this.studyAreas.map(function(a){return this._getGEKey(a)},this)},getOptions:function(){return this._provider._getFactory().getOptions()},
createGeoenrichment:function(a){this.setCurrentAnalysisAreaIndex(a.currentFeatureIndex||0);return this._provider._createGE(this._getGEKey(),a.infographicJson,a.areaData,a.isMultiFeature,this.areaNames,a.currentFeatureIndex)},toJson:function(){return{countryID:this.countryID,reportID:this.reportID,geoenrichmentUrl:this.geoenrichmentUrl,geoenrichmentCache:this._provider._getGECacheJson(this._getGEKeys()),infographicsOptions:this.getOptions().toJson(),studyAreas:this.studyAreas.map(function(a){return a.toJson()}),
areaNames:this.areaNames}},toJsonAt:function(a){var b=this.studyAreas[a];return{countryID:this.countryID,reportID:this.reportID,geoenrichmentUrl:this.geoenrichmentUrl,geoenrichmentCache:this._provider._getGECacheJson([this._getGEKey(b)]),infographicsOptions:this.getOptions().toJson(),studyAreas:[b.toJson()],areaNames:[this.areaNames[a]]}}});return g(null,{_infographicsFactory:null,_geoenrichmentCache:null,constructor:function(){this._geoenrichmentCache={}},_getFactory:function(){return this._infographicsFactory=
this._infographicsFactory||new n},_createGE:function(a,b,c,d,e,f){b=this._getFactory().createGeoenrichment(b,c,d,e,f);(c=this._geoenrichmentCache[a])?b.cache=c:this._geoenrichmentCache[a]=b.cache;return b},_getGECacheJson:function(a){var b={};a.forEach(function(a){var c=this._geoenrichmentCache[a];c&&(b[a]=c.toJson())},this);return b},setServerUrl:function(a,b){c.server=a;b?c.token=b:(a=a&&f.id.findCredential(a)||f.id.credentials[0],c.token=a&&a.token)},getInfographicOptions:function(c){return new p({geoenrichmentUrl:c.geoenrichmentUrl,
countryID:c.countryID,reportID:c.reportID,studyAreas:c.analysisAreas.map(function(d){return d.geographies&&d.geographies.length?new a({countryID:c.countryID,layer:d.geographies[0].levelId,ids:[d.geographies.map(function(a){return a.id}).join(",")],attributes:{}}):new b({geometry:d.feature.geometry,attributes:{}})}),areaNames:c.analysisAreas.map(function(a){return a.shortName||a.name})},this)},getInfographicOptionsFromJson:function(a){this.setServerUrl(a.geoenrichmentUrl);for(var b in a.geoenrichmentCache){var c=
a.geoenrichmentCache[b];this._createGE(b);this._geoenrichmentCache[b].fromJson(c)}this._infographicsFactory&&(this._infographicsFactory._options=new e(a.infographicsOptions));return new p(a,this)}})})},"esri/dijit/geoenrichment/InfographicsOptions":function(){define("esri/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/tasks/geoenrichment/studyAreaOptionsFromJson esri/tasks/geoenrichment/GeoenrichmentTask ./utils/ArrayUtil ./config ./InfographicsOptionsItem".split(" "),function(g,f,
e,k,c,b,a,d){function h(a,b){if(a)for(var c in a)if(a.hasOwnProperty(c)){b[c]=[];for(var d=0;d<a[c].length;d++){var e={};n(a[c][d],e);b[c].push(e)}}}function l(a,b){a=parseFloat(a.index);b=parseFloat(b.index);return isNaN(a)&&isNaN(b)?0:isNaN(a)?1:isNaN(b)?-1:a-b}function m(a,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.type==c.type&&b.arraysEqual(e.variables,c.variables))return{report:e,index:d}}return null}function n(a,b){b.type=a.type||("OneVarMultiComparison"==a.report?"OneVar":a.report);if(a.dataCollection)if(a.vars){b.variables=
[];for(var c=0;c<a.vars.length;c++)b.variables.push(a.dataCollection+"."+a.vars[c])}else b.variables=[a.dataCollection+".*"];else b.variables=a.variables;p(a.isVisible)?b.isVisible=a.isVisible:p(a.checked)&&(b.isVisible=a.checked)}function p(a){return"boolean"==typeof a||a instanceof Boolean}g=g("esri.dijit.geoenrichment.InfographicsOptions",null,{_items:null,_loaded:null,_loadPromises:null,studyAreaOptions:null,theme:"common",constructor:function(a){this._loaded={};this._loadPromises={};this.studyAreaOptions=
k(a&&(a.buffer||a.studyAreaOptions));this._items={};if(a){var b=a.reports||a.items;if(b){h(b,this._items);for(var c in b)b[c]&&b[c].length&&(this._loaded[c]=!0)}a.theme&&(this.theme=a.theme)}},getItems:function(b){var d=new e;if(this._loaded[b])d.resolve(this._items[b]);else{if(this._loadPromises[b])return this._loadPromises[b];var h=new c(a.server);h.token=a.token;h.getDataCollections(b,null,["id","alias"]).then(f.hitch(this,this._mergeItems,b,d),function(a){d.reject(a)})}return this._loadPromises[b]=
d.promise},_mergeItems:function(a,b,c){try{var e={AgePyramid:1,TapestryNEW:1,RelatedVariables:1,OneVar:1},f={TapestryNEW:"Tapestry"},h,g,k=[];for(h=0;h<c.length;h++){var p=c[h].metadata.infographics||c[h].metadata.infographics2;if(p){var q=JSON.parse(p),t;for(t in q)if(e[t]){var v=new d(f[t]||t,[c[h].id+".*"]),G;for(G in q[t])q[t].hasOwnProperty(G)&&(v[G]=q[t][G]);(g=m(k,v))?k[g.index]=v:k.push(v)}}}var F,D=this._items[a];D||(D=[],D.push(new d("OneVar",["KeyGlobalFacts.AVGHHSZ"])),this._items[a]=
D);for(h=D.length-1;0<=h;h--)if(g=m(k,D[h]))n(D[h],g.report),D[h]=g.report,k.splice(g.index,1);else{if("OneVar"==D[h].type&&1==D[h].variables.length){var I,J=D[h].variables[0];if(!F)for(F={},e=0;e<c.length;e++)for(f=0;f<c[e].variables.length;f++)F[c[e].id+"."+c[e].variables[f].id]=c[e].variables[f];if(I=F[J]){D[h].title=I.alias;continue}}D.splice(h,1);h--}for(h=0;h<k.length;h++)D.push(k[h]);D.sort(l);this._loaded[a]=!0;delete this._loadPromises[a];b.resolve(D)}catch(M){b.reject(M)}},toJson:function(){var a=
{};h(this._items,a);return{studyAreaOptions:this.studyAreaOptions.toJson(),items:a,theme:this.theme}}});g.Item=d;return g})},"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(g,f,e){return function(k,c,b){var a=f.isString(k);a?b.declaredClass=k:(b=c,c=k);c=g(c,b);a&&e(k,c);return c}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(g,f,e){return function(k,c){f("extend-esri")&&(k=k.substring(k.indexOf(".")+1),g.setObject(k,
c,e))}})},"esri/tasks/geoenrichment/studyAreaOptionsFromJson":function(){define(["./RingBuffer","./DriveBuffer","./IntersectingGeographies","../../extend"],function(g,f,e,k){var c=function(b){if(b){switch(b.areaType){case "DriveTimeBuffer":return new f(b);case "StandardGeography":return new e(b)}switch(b.type){case "DriveTime":return new f(b);case "StdGeo":return new e(b)}return new g(b)}return new g};k("esri.tasks.geoenrichment.studyAreaOptionsFromJson",c);return c})},"esri/tasks/geoenrichment/RingBuffer":function(){define(["../../declare",
"../../units","./StudyAreaOptions"],function(g,f,e){return g("esri.tasks.geoenrichment.RingBuffer",[e],{radii:null,units:null,constructor:function(e){e&&(e.bufferRadii?this.radii=e.bufferRadii:e.radius?this.radii=[e.radius]:e.radii&&(this.radii=e.radii),this.units=e.bufferUnits||e.units);this.radii||(this.radii=[1]);this.units||(this.units=f.MILES)},toJson:function(){return{areaType:"RingBuffer",bufferUnits:this.units,bufferRadii:this.radii}}})})},"esri/tasks/geoenrichment/StudyAreaOptions":function(){define(["../../declare"],
function(g){return g("esri.tasks.geoenrichment.StudyAreaOptions",null,{toJson:function(){throw"'toJson' method is not implemented";}})})},"esri/tasks/geoenrichment/DriveBuffer":function(){define(["../../declare","./StudyAreaOptions","./DriveUnits"],function(g,f,e){return g("esri.tasks.geoenrichment.DriveBuffer",[f],{radii:null,units:null,constructor:function(f){f&&(f.bufferRadii?this.radii=f.bufferRadii:f.radius?this.radii=[f.radius]:f.radii&&(this.radii=f.radii),this.units=f.bufferUnits||f.units);
this.radii||(this.radii=[5]);this.units||(this.units=e.MINUTES)},toJson:function(){return{areaType:"DriveTimeBuffer",bufferUnits:this.units,bufferRadii:this.radii}}})})},"esri/tasks/geoenrichment/DriveUnits":function(){define(["dojo/_base/lang","../../units"],function(g,f){f=g.clone(f);g.mixin(f,{MINUTES:"esriDriveTimeUnitsMinutes"});return f})},"esri/tasks/geoenrichment/IntersectingGeographies":function(){define(["../../declare","./StudyAreaOptions","./GeographyLevel"],function(g,f,e){return g("esri.tasks.geoenrichment.IntersectingGeographies",
[f],{geographyLevels:null,constructor:function(f){this.geographyLevels=e.fromJsonArray(f?f.intersectingGeographies||f.levels||f.geographyLevels:[{layerID:"Admin2"}])},toJson:function(){return{areaType:"StandardGeography",intersectingGeographies:e.toJsonArray(this.geographyLevels)}}})})},"esri/tasks/geoenrichment/GeographyLevel":function(){define(["../../declare"],function(g){var f=g("esri.tasks.geoenrichment.GeographyLevel",null,{layerID:null,datasetID:null,countryID:null,constructor:function(e){e&&
(this.layerID=e.layer||e.layerID||null,this.datasetID=e.dataset||e.datasetID||null,this.countryID=e.sourceCountry||e.countryID||null)},toJson:function(){var e={};this.layerID&&(e.layer=this.layerID);this.datasetID&&(e.dataset=this.datasetID);this.countryID&&(e.sourceCountry=this.countryID);return e}});f.fromJsonArray=function(e){var g=[];if(!e)return g;for(var c=0;c<e.length;c++){var b=e[c];b instanceof f||(b=new f(b));g.push(b)}return g};f.toJsonArray=function(e){if(!e||0===e.length)return null;
for(var f=[],c=0;c<e.length;c++)f.push(e[c].toJson());return f};return f})},"esri/tasks/geoenrichment/GeoenrichmentTask":function(){define("../../declare dojo/_base/array dojo/_base/lang dojo/dom-construct ./taskHelper ../FeatureSet ./EnrichParameters ./ReportParameters ../../urlUtils ../../IdentityManager ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline dojo/i18n!../../nls/jsapi".split(" "),function(g,f,e,k,c,b,a,d,h,l,m,n,p,t){function q(a){this.name="UserError";this.message=
a||""}function v(a,b){return a.getAvailableCountries().then(function(a){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c].name})}function r(a){a=a.getExtent();return new m((a.xmin+a.xmax)/2,(a.ymin+a.ymax)/2,a.spatialReference)}t=t.geoenrichment.task.GeoenrichmentTask;q.prototype=Error.prototype;return g("esri.tasks.geoenrichment.GeoenrichmentTask",null,{token:null,url:null,_query:null,constructor:function(a){if(a){var b=h.urlToObject(a);a=b.path;this._query=b.query}this.url=a||h.getProtocolForWebResource()+
"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer"},enrich:function(d){var e=this;return c.invokeMethod(this,"/Geoenrichment/enrich",function(){d instanceof a||(d=new a(d));return c.jsonToRest(d.toJson(),e._query)},function(a){(!a.results||1>a.results.length||!a.results[0].value||!a.results[0].value.FeatureSet||1>a.results[0].value.FeatureSet.length)&&c.throwEmptyResponse();var d={featureSets:[],messages:a.messages};a=a.results[0].value.FeatureSet;for(var e=0;e<a.length;e++)d.featureSets.push(new b(a[e]));
return d},"onEnrichComplete","onError")},getAvailableCountries:function(){var a=this;return c.invokeMethod(this,"/Geoenrichment/Countries",function(){return e.mixin({},a._query)},function(a){if(a.error)throw a.error;a=a.countries;for(var b=0;b<a.length;b++){var c=a[b].datasets;delete a[b].datasets;a[b].datasetIDs=c}return a},"onGetAvailableCountriesComplete","onError")},getDataCollections:function(a,b,d,f){var h;b?h="/GetDataCollections/execute":(h="/Geoenrichment/DataCollections",a&&(h+="/"+a));
var g=this;return c.invokeMethod(this,h,function(){var c=e.mixin({},g._query);c.suppressNullValues=!0;d&&(c.outFields=0===d.length?"none":JSON.stringify(d));b&&(a&&(c.sourcecountry=a),c.searchtext="id:"+b);f&&(c.addDerivativeVariables=JSON.stringify(f));return c},function(a){if(a.error)throw a.error;a=a.results||a.dataCollections||a.DataCollections;for(var b=0;b<a.length;b++)a[b]={id:a[b].dataCollectionID,metadata:a[b].metadata,variables:a[b].data};return a},"onGetDataCollectionsComplete","onError")},
createReport:function(a){var b=this;l.getCredential(this.url).then(function(e){try{var f=k.create("form",{target:"_blank",action:b.url+"/Geoenrichment/CreateReport",method:"post"});a instanceof d||(a=new d(a));var h=c.jsonToRest(a.toJson(),b._query);h.f="bin";h.token=e.token;for(var g in h)h.hasOwnProperty(g)&&k.create("input",{type:"hidden",name:g,value:h[g]},f);k.place(f,document.body);f.submit();k.destroy(f)}catch(z){b.onError(z)}},function(a){b.onError(a)})},getReports:function(a){var b=this;
return v(this,a).then(function(a){return c.invokeMethod(b,"/Geoenrichment/Reports/"+a,function(){return e.mixin({},b._query)},function(a){for(var b=0;b<a.reports.length;b++){var c=a.reports[b].reportID;delete a.reports[b].reportID;a.reports[b].id=c}return a.reports},"onGetReportsComplete","onError")})},getStandardGeographyLevels:function(a){function b(a){return c.invokeMethod(d,a,function(){return e.mixin({},d._query)},function(a){a=a.geographyLevels;for(var b=0;b<a.length;b++){var c=a[b];c.id=c.countryID;
delete c.countryID;c.name=c.countryName;delete c.countryName;for(var c=c.datasets,d=0;d<c.length;d++){var e=c[d];e.id=e.datasetID;delete e.datasetID;e.geographyLayers=e.levels;delete e.levels}}return a},"onGetStandardGeographyLevelsComplete","onError")}var d=this;return a?v(this,a).then(function(a){return b("/Geoenrichment/StandardGeographyLevels/"+a)}):b("/Geoenrichment/StandardGeographyLevels")},getServiceLimits:function(){var a=this;return c.invokeMethod(this,"/Geoenrichment/ServiceLimits",function(){return e.mixin({},
a._query)},function(a){return a.serviceLimits.value},"onGetServiceLimitsComplete","onError")},getCountries:function(a){var b;switch(a.type){case "point":b=a;break;case "polyline":b=a.paths[0];a=new p(a.spatialReference);a.addPath(b);b=r(a);break;case "polygon":b=a.rings[0],a=new n(a.spatialReference),a.addRing(b),b=r(a)}return this.enrich({variables:["GlobalIntersect.*"],studyAreas:[{geometry:b}],forStorage:!1}).then(function(a){var b=[];a=a.featureSets[0].features;for(var c=0;c<a.length;c++){var d=
a[c].attributes.sourceCountry;0>f.indexOf(b,d)&&b.push(d)}if(0===b.length)throw new q(t.noData);return b})},onEnrichComplete:function(a){},onGetAvailableCountriesComplete:function(a){},onGetDataCollectionsComplete:function(a){},onCreateReportComplete:function(a){},onGetReportsComplete:function(a){},onGetStandardGeographyLevelsComplete:function(a){},onGetServiceLimitsComplete:function(a){},onError:function(a){}})})},"esri/tasks/geoenrichment/taskHelper":function(){define(["dojo/_base/lang","dojo/Deferred",
"dojo/json","../../request","../../extend"],function(g,f,e,k,c){var b={invokeMethod:function(a,b,c,e,g,n){function d(b){var c;try{c=e(b)}catch(w){h(w);return}m&&m.resolve(c);a[g](c)}function h(b){m&&m.reject(b);a[n](b)}var l=null,m=null,m=new f(function(){l&&(l.cancel(),l=null)});try{var r=c?c():{};r.f="json";a.token&&(r.token=a.token);l=k({url:a.url+b,content:r,handleAs:"json"});l.then(d,h)}catch(u){h(u)}return m.promise},jsonToRest:function(a,b){b=g.mixin({},b);for(var c in a)g.isString(a[c])?b[c]=
a[c]:b[c]=e.stringify(a[c]);return b},throwEmptyResponse:function(){throw Error("Geoenrichment service returned empty response");}};c("esri.tasks.geoenrichment.taskHelper",b);return b})},"esri/tasks/geoenrichment/EnrichParameters":function(){define(["../../declare","../../SpatialReference","./EnrichParametersBase","./StandardIntersectingGeography"],function(g,f,e,k){return g("esri.tasks.geoenrichment.EnrichParameters",[e],{variables:null,returnGeometry:!1,outSR:null,intersectingGeographies:null,forStorage:!0,
constructor:function(c){this.variables=[];if(c&&(this.variables=c.analysisVariables||c.variables||null,c.returnGeometry&&(this.returnGeometry=!0),c.outSR&&(this.outSR=new f(c.outSR)),c.forStorage&&(this.forStorage=c.forStorage),c.intersectingGeographies)){this.intersectingGeographies=[];for(var b=0;b<c.intersectingGeographies.length;b++){var a=c.intersectingGeographies[b];if("standard"==a.geographyType)this.intersectingGeographies.push(new k(a));else if("external"==a.geographyType)throw Error("Not implemented");
}}},toJson:function(){var c=this.inherited(arguments);c.analysisVariables=this.variables;this.returnGeometry&&(c.returnGeometry=!0);this.outSR&&(c.outSR=this.outSR.toJson());this.forStorage||(c.forStorage=!1);if(this.intersectingGeographies){c.intersectingGeographies=[];for(var b=0;b<this.intersectingGeographies.length;b++)c.intersectingGeographies.push(this.intersectingGeographies[b].toJson())}return c}})})},"esri/tasks/geoenrichment/EnrichParametersBase":function(){define(["../../declare","../../SpatialReference",
"./StudyAreaOptions","./studyAreaFromJson","./studyAreaOptionsFromJson"],function(g,f,e,k,c){return g("esri.tasks.geoenrichment.EnrichParametersBase",null,{studyAreaOptions:null,studyAreas:null,countryID:null,datasetID:null,constructor:function(b){this.studyAreas=[];if(b){if(b.studyAreas){var a;b.inSR&&(a=b.inSR);for(var d=b.studyAreas,h=0;h<d.length;h++){var g=k(d[h]);a&&g.geometry&&g.geometry.setSpatialReference(new f(a));this.studyAreas.push(g)}}b.studyAreasOptions?this.studyAreaOptions=c(b.studyAreasOptions):
b.studyAreaOptions&&(this.studyAreaOptions=b.studyAreaOptions instanceof e?b.studyAreaOptions:c(b.studyAreaOptions));(a=b.useData)?(a.sourceCountry&&(this.countryID=a.sourceCountry),a.dataset&&(this.datasetID=a.dataset)):(b.countryID&&(this.countryID=b.countryID),b.datasetID&&(this.datasetID=b.datasetID))}},toJson:function(){for(var b={},a=[],c=0;c<this.studyAreas.length;c++)a.push(this.studyAreas[c].toJson());0<a.length&&(b.studyAreas=a);this.studyAreaOptions&&(b.studyAreasOptions=this.studyAreaOptions.toJson());
if(this.countryID||this.datasetID)a={},this.countryID&&(a.sourceCountry=this.countryID),this.datasetID&&(a.dataset=this.datasetID),b.useData=a;return b}})})},"esri/tasks/geoenrichment/studyAreaFromJson":function(){define(["./GeometryStudyArea","./AddressStudyArea","./StandardGeographyStudyArea","../../extend"],function(g,f,e,k){var c=function(b){if(b.geometry)return new g(b);if(b.address)return new f(b);if(b.layer)return new e(b)};k("esri.tasks.geoenrichment.studyAreaFromJson",c);return c})},"esri/tasks/geoenrichment/GeometryStudyArea":function(){define(["../../declare",
"../../geometry/jsonUtils","../../geometry/Geometry","./StudyArea"],function(g,f,e,k){return g("esri.tasks.geoenrichment.GeometryStudyArea",[k],{geometry:null,constructor:function(c){c&&c.geometry&&(this.geometry=c.geometry instanceof e?c.geometry:f.fromJson(c.geometry))},toJson:function(){var c=this.inherited(arguments);c.geometry=this.geometry.toJson();return c},getGeomType:function(){return this.geometry.type}})})},"esri/tasks/geoenrichment/StudyArea":function(){define(["../../declare","dojo/_base/lang",
"./StudyAreaOptions","./studyAreaOptionsFromJson","./GeographyLevel"],function(g,f,e,k,c){return g("esri.tasks.geoenrichment.StudyArea",null,{attributes:null,options:null,returnGeometry:!1,comparisonGeographyLevels:null,constructor:function(b){b&&(b.attributes&&(this.attributes=b.attributes),b.areaType?this.options=k(b):b.options instanceof e&&(this.options=b.options),b.returnGeometry&&(this.returnGeometry=!0),this.comparisonGeographyLevels=c.fromJsonArray(b.comparisonGeographyLevels||b.comparisonLevels));
this.comparisonGeographyLevels||(this.comparisonGeographyLevels=[])},toJson:function(){var b={};this.attributes&&(b.attributes=this.attributes);this.options&&f.mixin(b,this.options.toJson());this.returnGeometry&&(b.returnGeometry=!0);var a=c.toJsonArray(this.comparisonGeographyLevels);a&&(b.comparisonLevels=a);return b},getGeomType:function(){throw"Not implemented";}})})},"esri/tasks/geoenrichment/AddressStudyArea":function(){define(["../../declare","./StudyArea"],function(g,f){return g("esri.tasks.geoenrichment.AddressStudyArea",
[f],{address:null,constructor:function(e){e&&e.address&&(this.address=e.address)},toJson:function(){var e=this.inherited(arguments);e.address=this.address;return e},getGeomType:function(){return"point"}})})},"esri/tasks/geoenrichment/StandardGeographyStudyArea":function(){define(["../../declare","./StudyArea"],function(g,f){return g("esri.tasks.geoenrichment.StandardGeographyStudyArea",[f],{countryID:null,geographyLayerID:null,ids:null,constructor:function(e){if(e){var f=e.sourceCountry||e.countryID;
f&&(this.countryID=f);if(f=e.layer||e.geographyLayerID)this.geographyLayerID=f;e.ids&&(this.ids=e.ids)}},toJson:function(){var e=this.inherited(arguments);this.countryID&&(e.sourceCountry=this.countryID);this.geographyLayerID&&(e.layer=this.geographyLayerID);this.ids&&(e.ids=this.ids);return e},getGeomType:function(){return"polygon"}})})},"esri/tasks/geoenrichment/StandardIntersectingGeography":function(){define(["../../declare","./IntersectingGeography"],function(g,f){return g("esri.tasks.geoenrichment.StandardIntersectingGeography",
[f],{geographyLayerID:null,constructor:function(e){e&&(this.geographyLayerID=e.geographyLayer||e.geographyLayerID||null)},toJson:function(){var e=this.inherited(arguments);e.geographyType="standard";e.geographyLayer=this.geographyLayerID;return e}})})},"esri/tasks/geoenrichment/IntersectingGeography":function(){define(["../../declare"],function(g){return g("esri.tasks.geoenrichment.IntersectingGeography",null,{name:null,geometryType:"esriGeometryPoint",spatialRel:"esriSpatialRelIntersects",outFields:null,
constructor:function(f){f&&(this.name=f.name||null,this.outFields=f.outFields||null,f.intersectionInfo?(f.intersectionInfo.geometryType&&(this.geometryType=f.intersectionInfo.geometryType),f.intersectionInfo.spatialRel&&(this.spatialRel=f.intersectionInfo.spatialRel)):(f.geometryType&&(this.geometryType=f.geometryType),f.spatialRel&&(this.spatialRel=f.spatialRel)))},toJson:function(){return{name:this.name,outFields:this.outFields,intersectionInfo:{geometryType:this.geometryType,spatialRel:this.spatialRel}}}})})},
"esri/tasks/geoenrichment/ReportParameters":function(){define(["../../declare","./EnrichParametersBase"],function(g,f){return g("esri.tasks.geoenrichment.ReportParameters",[f],{reportID:null,format:"pdf",fields:null,constructor:function(e){e&&(this.reportID=e.report||e.reportID||null,this.format=e.format,this.fields=e.reportFields||e.fields||null)},toJson:function(){var e=this.inherited(arguments);this.reportID&&(e.report=this.reportID);this.format&&(e.format=this.format);this.fields&&(e.reportFields=
this.fields);return e}})})},"esri/dijit/geoenrichment/InfographicsOptionsItem":function(){define([],function(){return function(g,f){this.type=g;this.variables=f;this.index=this.title=null;this.isVisible=!0}})},"esri/dijit/geoenrichment/Geoenrichment":function(){define("esri/declare dojo/_base/lang dojo/on dojo/string esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/graphic esri/geometry/jsonUtils esri/tasks/locator esri/tasks/FeatureSet esri/tasks/geoenrichment/GeoenrichmentTask esri/tasks/geoenrichment/EnrichParameters esri/tasks/geoenrichment/RingBuffer esri/tasks/geoenrichment/DriveBuffer esri/tasks/geoenrichment/GeographyLevel esri/tasks/geoenrichment/GeometryStudyArea esri/tasks/geoenrichment/AddressStudyArea esri/tasks/geoenrichment/studyAreaFromJson ./_Invoke ./config ./utils/ArrayUtil ./utils/StudyAreaKeyBuilder ./infographicUtils/bufferTitle ./infographicUtils/DataProvider".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A,B,C,z){function E(a){a=B.studyAreaToJson(a);delete a.returnGeometry;delete a.comparisonLevels;delete a.attributes;return a=JSON.stringify(a)}var G=g(null,{_keys:null,_values:null,_capacity:5,constructor:function(a){this._keys=[];this._values={};a&&(this._capacity=a)},getValue:function(a){return this._values[a]},setValue:function(a,b){this._keys.push(a);this._values[a]=b;this._removeOverflow()},hasValue:function(a){return this._values.hasOwnProperty(a)},
_removeOverflow:function(){if(this._keys.length>this._capacity)for(var a=this._keys.splice(0,this._keys.length-this._capacity),b=0;b<a.length;b++)delete this._values[a[b]]},setCapacity:function(a){this._capacity=a;this._removeOverflow()},toJson:function(){var a={},b;for(b in this._values){var c=this._values[b];void 0===c||null===c||"number"==typeof c&&isNaN(c)||("string"==typeof c||"boolean"==typeof c||"number"==typeof c?a[b]=c:"object"==typeof c&&c.toJson&&(a[b]=c.toJson()))}return{keys:this._keys.slice(),
values:a,capacity:this._capacity}},fromJson:function(a,b){if(a){this._keys=a.keys;this._capacity=a.capacity;this._values={};for(var c in a.values)this._values[c]=b?b(a.values[c]):a.values[c]}}}),F=g(null,{_values:null,constructor:function(a){this._values=new G(a)},getValue:function(a){var b=this.keyToString(a);if(this._values.hasValue(b))return this._values.getValue(b);var c=this;return this.keyToValue(a).then(function(a){c._values.setValue(b,a);return a})},keyToString:function(a){return JSON.stringify(a)},
keyToValue:function(a){throw"Not implemented";},setCapacity:function(a){this._values.setCapacity(a)},toJson:function(){return this._values.toJson()},fromJson:function(a,b){a&&this._values.fromJson(a,b)}}),D=g([F],{keyToString:function(a){return JSON.stringify(a.toJson())},keyToValue:function(a){return(new h(w.locatorUrl)).locationToAddress(a).then(function(a){return k.substitute(w.addressFormat,a.address,function(a){return a||""})},function(a){return""})}}),I=g([F],{_countryValues:null,_geometries:null,
constructor:function(){this._countryValues=new G;this._geometries=new G(3)},keyToValue:function(a){var b=this,c=u(a.studyArea),d=c.returnGeometry,e,f;d&&(f=E(c),e=this._geometries.hasValue(f));var h=d&&!e,g=new m(w.server);g.token=w.token;for(var k=null,l=c.comparisonGeographyLevels.length-1;0<=l;l--)"Admin1"==c.comparisonGeographyLevels[l].layerID&&(k=c.comparisonGeographyLevels.splice(l,1)[0]);var p,q;k&&(p=JSON.stringify({variables:a.variables,country:a.country}),(q=this._countryValues.hasValue(p))||
c.comparisonGeographyLevels.push(k));l=new n;l.forStorage=!1;l.countryID=a.country;l.variables=a.variables;if(c.returnGeometry=h)l.outSR=c.geometry?c.geometry.spatialReference:a.outSR;l.studyAreas.push(c);return g.enrich(l).then(function(a){var c=a.featureSets[0].features;k&&(q?c.push(b._countryValues.getValue(p)):b._countryValues.setValue(p,c[c.length-1]));d&&(e?c[0].geometry=b._geometries.getValue(f):b._geometries.setValue(f,c[0].geometry));return a.featureSets[0]})},setCapacity:function(a){this.inherited(arguments);
this._countryValues.setCapacity(a)},toJson:function(){var a=this.inherited(arguments);a.countryValues=this._countryValues.toJson();a.geometries=this._geometries.toJson();return a},fromJson:function(b){b&&(this._countryValues.fromJson(b.countryValues,function(b){return new a(b)}),this._geometries.fromJson(b.geometries,function(a){return d.fromJson(a)}),this.inherited(arguments,[b,function(a){return new l(a)}]))}}),J=g([F],{metadata:null,_enrichCache:null,_addressCache:null,constructor:function(a){this._enrichCache=
new I(a);this._addressCache=new D(3)},keyToValue:function(a){var b=this,d=[],e=a.returnAddress;delete a.returnAddress;d.push(this._enrichCache.getValue(a));var f=u(a.studyArea);e&&d.push(this._addressCache.getValue(f.geometry));return c(d).then(function(a){var c=a[0],d=c.features[0];d.attributes[b.metadata.name]||(d.attributes[b.metadata.name]=C(f.getGeomType(),f.options),e?d.attributes[b.metadata.address]=a[1]:f instanceof r&&(d.attributes[b.metadata.address]=f.address.text));return c})},setCapacity:function(a){this.inherited(arguments);
this._enrichCache.setCapacity(a)},toJson:function(){var a=this.inherited(arguments);a.metadata=f.clone(this.metadata);a.enrichCache=this._enrichCache.toJson();a.addressCache=this._addressCache.toJson();return a},fromJson:function(a){a&&(this.metadata=a.metadata,this._enrichCache.fromJson(a.enrichCache),this._addressCache.fromJson(a.addressCache),this.inherited(arguments,[a,function(a){return new l(a)}]))}});return g("esri.dijit.geoenrichment.Geoenrichment",[z,y],{country:null,returnGeometry:!1,returnAddress:!1,
returnData:!0,studyArea:null,outSR:null,buffer:null,variables:null,levels:null,highestLevel:null,data:null,restartOnDone:!1,requests:null,started:!1,cache:null,constructor:function(){this.buffer=new p;this.cache=new J;this.cache.metadata=this.metadata},getData:function(){return this.data},getGeometry:function(){return this.data.features[0].geometry},isBusy:function(){return this.pendingInvoke("requestData")||this.requests||this.restartOnDone},setBuffer:function(a){this.buffer=a;this.invalidate()},
getBuffer:function(){return this.buffer},setStudyArea:function(a){this.studyArea=a;this.invalidate()},setVariables:function(a){A.arraysEqual(this.variables,a)||(this.variables=a,this.invalidateData())},setGeoLevels:function(a,b){A.arraysEqual(this.levels,a)&&this.highestLevel==b||(this.levels=a,this.highestLevel=b,this.invalidateData())},setReturnAddress:function(a){this.returnAddress!=a&&(this.returnAddress=a)&&this.invalidateData()},setCacheLimit:function(a){this.cache.setCapacity(a)},invalidateData:function(){this.data=
null;this.invalidate()},invalidate:function(){this.pendingInvoke("requestData")||(this.requests?this.restartOnDone=!0:(this.geometry=null,this.invoke("requestData")))},requestData:function(){if(this.studyArea&&this.variables&&this.buffer){this.requests=[];this.started||(e.emit(this,"start"),this.started=!0);var a,c=this.buffer;a=!1;if(this.studyArea instanceof v)switch(this.studyArea.geometry.type){case "point":a=this.returnAddress;break;case "polyline":this.buffer instanceof t&&(c=new p);break;case "polygon":c=
null}var d=f.clone(this.studyArea);!d.options&&c&&(d.options=c);if(this.levels)for(c=0;c<this.levels.length;c++)d.comparisonGeographyLevels.push(new q({layerID:this.levels[c]}));this.highestLevel&&d.comparisonGeographyLevels.push(new q({layerID:this.highestLevel}));d.returnGeometry=this.returnGeometry;a=b(this.cache.getValue({country:this.country,variables:this.variables,returnData:this.returnData,studyArea:B.studyAreaToJson(d),outSR:this.outSR,returnAddress:a}));this.requests.push(a);a.then(f.hitch(this,
this.handleResponse),f.hitch(this,this.handleError))}},stop:function(){this.restartOnDone=!1;this.cancelInvoke("requestData");if(this.requests)for(var a=this.requests.slice(0),b=0;b<a.length;b++)a[b].cancel()},handleResponse:function(a){try{this.data=a,this.data.features[0].attributes.isThisArea=!0,this.onDone(null)}catch(H){this.onDone(H)}},handleError:function(a){this.onDone(a)},onDone:function(a){this.requests=null;a?"CancelError"!==a.name&&(console.log(a),e.emit(this,"error",a)):e.emit(this,"data");
this.restartOnDone?(this.invalidate(),this.restartOnDone=!1):(e.emit(this,"end"),this.started=!1)}})})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(g,f,e,k,c,b,a,d,h,l,m){g=g(l,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],
"suggest-locations-complete":["suggestions"]},constructor:function(a){this._geocodeHandler=f.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=f.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=f.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(a){this.outSpatialReference=a},_geocodeHandler:function(a,b,c,d,e){try{var f=a.candidates,h;b=[];var g,k=f.length,n=a.spatialReference,l;for(g=0;g<
k;g++){h=f[g];if(l=h.location)l.spatialReference=n;b[g]=new m(h)}this._successHandler([b],"onAddressToLocationsComplete",c,e)}catch(C){this._errorHandler(C,d,e)}},_geocodeAddressesHandler:function(a,b,c,d,e){try{var f=a.locations;b=[];var h,g=f.length,k=a.spatialReference,n;for(h=0;h<g;h++){if(n=f[h].location)n.spatialReference=k;b[h]=new m(f[h])}this._successHandler([b],"onAddressesToLocationsComplete",c,e)}catch(B){this._errorHandler(B,d,e)}},addressToLocations:function(a,b,e,g,l){var n,m,p,q,t,
v,C,z;a.address&&(g=e,e=b,b=a.outFields,l=a.searchExtent,z=a.countryCode,n=a.magicKey,m=a.distance,C=a.categories,a.location&&this.normalization&&(p=a.location.normalize()),q=a.locationType,t=a.maxLocations,v=a.forStorage,a=a.address);l&&(l=l.shiftCentralMeridian());var E=this.outSpatialReference;a=this._encode(f.mixin({},this._url.query,a,{f:"json",outSR:E&&c.toJson(E.toJson()),outFields:b&&b.join(",")||null,searchExtent:l&&c.toJson(l.toJson()),category:C&&C.join(",")||null,countryCode:z||null,magicKey:n||
null,distance:m||null,location:p||null,locationType:q||null,maxLocations:t||null,forStorage:v||null}));var G=this._geocodeHandler,F=this._errorHandler,D=new k(h._dfdCanceller);D._pendingDfd=d({url:this._url.path+"/findAddressCandidates",content:a,callbackParamName:"callback",load:function(a,b){G(a,b,e,g,D)},error:function(a){F(a,g,D)}});return D},suggestLocations:function(a){var b;b=new k(h._dfdCanceller);a.hasOwnProperty("location")&&this.normalization&&(a.location=a.location.normalize());a.searchExtent&&
(a.searchExtent=a.searchExtent.shiftCentralMeridian());a=this._encode(f.mixin({},this._url.query,{f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:a.searchExtent&&c.toJson(a.searchExtent.toJson()),category:a.categories&&a.categories.join(",")||null,countryCode:a.countryCode||null,location:a.location||null,distance:a.distance||null},{f:"json"}));a=d({url:this._url.path+"/suggest",content:a,callbackParamName:"callback"});b._pendingDfd=a;a.then(f.hitch(this,function(a){a=a.suggestions||
[];this.onSuggestLocationsComplete(a);b.resolve(a)}),f.hitch(this,function(a){this._errorHandler(a);b.reject(a)}));return b},addressesToLocations:function(a,b,g){var n=this.outSpatialReference,l=[],m=a.categories,p=a.locationType,t=a.countryCode;e.forEach(a.addresses,function(a,b){l.push({attributes:a})});a=this._encode(f.mixin({},this._url.query,{category:m&&m.join(",")||null,locationType:p||null,sourceCountry:t||null},{addresses:c.toJson({records:l})},{f:"json",outSR:n&&c.toJson(n.toJson())}));
var w=this._geocodeAddressesHandler,A=this._errorHandler,B=new k(h._dfdCanceller);B._pendingDfd=d({url:this._url.path+"/geocodeAddresses",content:a,callbackParamName:"callback",load:function(a,c){w(a,c,b,g,B)},error:function(a){A(a,g,B)}});return B},_reverseGeocodeHandler:function(a,b,c,d,e){try{var f=new m({address:a.address,location:a.location,score:100});this._successHandler([f],"onLocationToAddressComplete",c,e)}catch(u){this._errorHandler(u,d,e)}},locationToAddress:function(a,b,e,g){a&&this.normalization&&
(a=a.normalize());var n=this.outSpatialReference;a=this._encode(f.mixin({},this._url.query,{outSR:n&&c.toJson(n.toJson()),location:a&&c.toJson(a.toJson()),distance:b,f:"json"}));var l=this._reverseGeocodeHandler,m=this._errorHandler,p=new k(h._dfdCanceller);p._pendingDfd=d({url:this._url.path+"/reverseGeocode",content:a,callbackParamName:"callback",load:function(a,b){l(a,b,e,g,p)},error:function(a){m(a,g,p)}});return p},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});b("extend-esri")&&f.setObject("tasks.Locator",g,a);return g})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(g,f,e,k,c){g=g(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(b){f.mixin(this,b);this.location=new c(this.location)}});e("extend-esri")&&f.setObject("tasks.AddressCandidate",g,k);return g})},
"esri/dijit/geoenrichment/_Invoke":function(){define(["esri/declare"],function(g){return g("esri.dijit.geoenrichment._Invoke",null,{_invokeTimeoutIDs:null,invoke:function(f,e){if(!this._invokeTimeoutIDs)this._invokeTimeoutIDs={};else if(this._invokeTimeoutIDs[f]){if(void 0===e)return;clearTimeout(this._invokeTimeoutIDs[f])}var g=this;this._invokeTimeoutIDs[f]=setTimeout(function(){g._invokeTimeoutIDs[f]=0;g[f]()},e||0)},pendingInvoke:function(f){return this._invokeTimeoutIDs?this._invokeTimeoutIDs[f]:
!1},cancelInvoke:function(f){if(this._invokeTimeoutIDs){var e=this._invokeTimeoutIDs[f];e&&(clearTimeout(e),this._invokeTimeoutIDs[f]=0)}}})})},"esri/dijit/geoenrichment/utils/StudyAreaKeyBuilder":function(){define([],function(){var g={studyAreaToJson:function(f){f=f.toJson();f.geometry&&(f.geometry.points?g._processPoints(f.geometry.points):f.geometry.paths?f.geometry.paths.forEach(g._processPoints):f.geometry.rings&&f.geometry.rings.forEach(g._processPoints));return f},_processPoints:function(f){f.forEach(function(e){e[0]=
parseFloat(e[0].toFixed(10));e[1]=parseFloat(e[1].toFixed(10))})}};return g})},"esri/dijit/geoenrichment/infographicUtils/bufferTitle":function(){define("dojo/string esri/tasks/geoenrichment/DriveBuffer esri/tasks/geoenrichment/IntersectingGeographies esri/tasks/geoenrichment/DriveUnits dojo/i18n!esri/nls/jsapi esri/extend".split(" "),function(g,f,e,k,c,b){function a(a,b){switch(a){case "polyline":return b instanceof f?g.substitute(c.lineBuffer[k.MILES],{radius:"1"}):g.substitute(c.lineBuffer[b&&
b.units||k.MILES],{radius:(b&&b.radii[0]||1).toString()});case "polygon":return c.polygon;default:return b instanceof f?g.substitute(c.pointDriveTime[b&&b.units||k.MILES],{radius:(b&&b.radii[0]||1).toString()}):b instanceof e?g.substitute(c.stdGeo,{level:b.geographyLevels[0].layerID}):g.substitute(c.pointRing[b&&b.units||k.MILES],{radius:(b&&b.radii[0]||1).toString()})}}c=c.geoenrichment.dijit.bufferTitle;b("esri.dijit.geoenrichment.bufferTitle",a);return a})},"esri/dijit/geoenrichment/infographicUtils/DataProvider":function(){define(["esri/declare",
"dojo/Evented"],function(g,f){return g([f],{metadata:null,constructor:function(){this.metadata={name:"StdGeographyName",address:"address"}},getData:function(){throw Error("Not implemented");}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEInfographic":function(){define(["dojo/_base/declare","dojo/_base/lang","./LocalGEBase","../data/AreaDataUtil"],function(g,f,e,k){return g(e,{_fieldNameToFieldInfoCache:null,_variableIdToFieldInfoCache:null,constructor:function(c,
b,a,d,e){this._fieldNameToFieldInfoCache={};this._variableIdToFieldInfoCache={};c.fieldInfos.forEach(function(a){this._fieldNameToFieldInfoCache[a.name]=a;this._variableIdToFieldInfoCache[a.variableID]=a},this);var h=c.calcData.calculatorName;(this._skipThisArea=a&&1<b.length)?(a=k.combineAreaDataObjectCalculators(b,h,{removeDuplicates:!0}),e=a.thisAreas.map(function(a,b){a=f.mixin({},a);a.StdGeographyName=d[b];a.isThisArea=!0;return a}),b={},b[h]={data:e.shift(),comparisonLevels:e.concat(a.comparisonLevels)}):
b=b[e||0];this._initGE(c.calcData.variables,b,h)},_propulateAttributesFromAreaData:function(c,b){for(var a in b){var d=this._fieldNameToFieldInfoCache[a];d?c[d.variableID]=b[a]:c[a]=b[a]}},_createField:function(c,b){var a=this.inherited(arguments),d=this._variableIdToFieldInfoCache[c];d?(a.alias=d.alias,a.decimals=d.decimals,a.units=d.showPercent?"pct":d.showCurrency?"currency":a.units,a.type=d.type||a.type):a.noVariableField=!0;return a},_filterAttributeField:function(c){return!c.noVariableField}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on esri/graphic esri/tasks/FeatureSet ./_GEFilterSupport ../data/AreaDataUtil ../stdGeographies/StdGeographiesUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig dojo/i18n!esri/nls/jsapi".split(" "),function(g,f,e,k,c,b,a,d,h,l,m){m=m.geoenrichment.dijit.ReportPlayer.ReportPlayer;return g([e,a],{metadata:{name:"StdGeographyName",address:"address"},
variables:null,data:null,_variableShortToFullNameCache:null,_areaData:null,_skipThisArea:!1,_initGE:function(a,b,c){this.variables=a||[];this._variableShortToFullNameCache={};this.variables.forEach(function(a){this._variableShortToFullNameCache[-1===a.indexOf(".")?a:a.substr(a.indexOf(".")+1)]=a},this);(a=b&&d.getAreaDataObjectCalculator(b,c))?this._areaData=[a.data].concat(a.comparisonLevels||[]):this._handleError(Error("Can't get calculator"))},setVariables:function(a){this.variables=a},_createFeatureSet:function(){var a=
new b,c=this._prepareFeatures();a.features=c;a.fields=this._prepareFields(c);this._prepareFieldAliases(a);return a},_prepareFeatures:function(){var a=[];if(!this._areaData)return a;for(var b=0;b<this._areaData.length;b++){var d={};this._propulateAttributesFromAreaData(d,this._areaData[b]);d.StdGeographyName=String(d.StdGeographyName||"");d.StdGeographyID=String(d.StdGeographyID||"");d.StdGeographyLevel=String(d.StdGeographyLevel||"");if(0!==b||this._skipThisArea){if(!d.StdGeographyName&&!d.StdGeographyID&&
!d.StdGeographyLevel){console.log("LocalGEBase.js can't add an unidentifiable geography.");continue}d.StdGeographyName=h.getAreaName(d)}else d.StdGeographyName=m.thisArea,d.isThisArea=!0;a.push(new c(null,null,d))}return a},_propulateAttributesFromAreaData:function(a,b){f.mixin(a,b)},_prepareFields:function(a){var b=[];if(!a.length)return b;a=a[0].attributes;for(var c in a)b.push(this._createField(c,a));return b},_stringAttrs:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1},_createField:function(a,
b){b=this._stringAttrs[a]||"string"===typeof b[a];return{name:a,alias:a,type:b?"esriFieldTypeString":"esriFieldTypeDouble",length:b?256:void 0,fullName:this._variableShortToFullNameCache[a],decimals:b?void 0:0,units:b?"other":"double",symbol:l.getCurrencySymbol()}},_prepareFieldAliases:function(a){a.fieldAliases={};a.fields.forEach(function(b){a.fieldAliases[b.name]=b.alias})},_handleError:function(a){setTimeout(function(){a&&k.emit(this,"error",a)}.bind(this))},isBusy:function(){return!1},setOutSR:function(){},
setGeoLevels:function(){},setStudyArea:function(){},stop:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/_GEFilterSupport":function(){define(["dojo/_base/declare","esri/tasks/FeatureSet","esri/dijit/geoenrichment/infographicUtils/formatVariable","esri/dijit/geoenrichment/utils/ObjectUtil"],function(g,f,e,k){return g(null,{_filterRanges:null,_alwaysAllowThisAreasWhenFiltering:!1,getData:function(c){this.data||(this.data=this._createFeatureSet());return c&&c.ignoreFilters?
this.data:this._filterRanges&&this._filterRanges.length&&this.data?this._filterData(this.data):this.data},_createFeatureSet:function(){},_filterData:function(c){var b=new f;b.fields=c.fields;b.fieldAliases=c.fieldAliases;b.features=c.features.filter(function(a){return this._alwaysAllowThisAreasWhenFiltering&&a.attributes.isThisArea?!0:!this._filterRanges.some(function(b){var c=a.attributes[b.fieldName];return c<b.min||c>b.max})},this);return b},_excludeMap:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1,
isThisArea:1},getAttributeFields:function(){var c=this.getData({ignoreFilters:!0});if(!c)return[];for(var c=c.fields,b=[],a=0;a<c.length;a++){var d=c[a];!this._excludeMap[d.name]&&this._filterAttributeField(d)&&b.push({name:d.name,label:d.alias,decimals:0<=d.decimals?d.decimals:void 0,type:d.type,formatFunction:function(a){return function(b){return-1===a.decimals?k.formatNumber(b):e(a,b)}}(d)})}return b},_filterAttributeField:function(c){return this.variables&&this.variables.length?"HouseholdsByIncome.*"===
this.variables[0]?0===c.name.indexOf("HIN"):"HouseholdIncomeCurrentYear.*"===this.variables[0]?0===c.name.indexOf("EHYHNI"):"Age.*"===this.variables[0]?0===c.name.indexOf("FEM")||0===c.name.indexOf("MAL")||0===c.name.indexOf("ECYP"):-1!==this.variables[0].indexOf("AVGHHSZ")?-1!==c.name.indexOf("AVGHHSZ"):"RaceAndEthnicity.*"===this.variables[0]?-1!==c.name.indexOf("_CY_"):!0:!0},getAllGeographyAttributes:function(c){c=this.getData(c);if(!c)return[];c=c.features;for(var b=[],a=0;a<c.length;a++){var d=
c[a].attributes;d.isThisArea||b.push(d)}return b},setFilterRanges:function(c,b){this._filterRanges=c;this._alwaysAllowThisAreasWhenFiltering=b&&b.ignoreThisAreas},collectFilterRangesStats:function(c){if(!this.getData())return null;c=c||{};var b=c.additionalAttributes||[],b=b.concat(c.excludeThisAreas?this.getAllGeographyAttributes({ignoreFilters:!0}):this.getData({ignoreFilters:!0}).features.map(function(a){return a.attributes})),a=[];this.getAttributeFields().forEach(function(c){if("esriFieldTypeString"!==
c.type){var d={fieldName:c.name,alias:c.label,min:Infinity,max:-Infinity,decimals:c.decimals,dataArray:[]};a.push(d);b.forEach(function(a){a=a[c.name];d.min=Math.min(d.min,a);d.max=Math.max(d.max,a);d.dataArray.push(a)})}});return{filterRanges:a,numAreasTotal:b.length}}})})},"esri/dijit/geoenrichment/infographicUtils/formatVariable":function(){define(["dojo/number"],function(g){return function(f,e){var k=f.decimals||0;switch(f.units){case "pct":return g.format(e/100,{places:k,type:"percent"});case "currency":return g.format(e,
{places:k,type:"currency",symbol:f.symbol||"$"});default:return"esriFieldTypeDouble"==f.type?g.format(e,{places:k}):e}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(g){var f={US_STATES_IDS:{"01":"AL","02":"AK","03":"AS","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",14:"GU",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",
21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",43:"PR",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"},CA_PROVINCE_IDS:{10:"NL",59:"BC",60:"YT",61:"NT",62:"NU",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB"},BUILDER_DATA:{US_census:{"US.CD":"%name%, %state%","US.CSD":"%name%, %state%","US.Counties":"%name%, %state%",
"US.Places":"%city%, %state%","US.ZIP5":"%id% (%name%)"},CA_census:{"CAN.FSA":"%id% (%name%)","CAN.CD":"%name%, %province%"}},getAreaName:function(e){var k=g.getCountryID(),c=g.getHierarchyID();if(!k||!c)return e.StdGeographyName;var k=k+"_"+c,b=f.BUILDER_DATA[k];b||(c=g.getGeographiesModel(),b=f.BUILDER_DATA[k]={},c.getLevels(!0).forEach(function(a){b[a.id.toUpperCase()]="%id% (%name%)"}));return f.buildDescription(e.StdGeographyID,e.StdGeographyName,e.StdGeographyLevel,b)},buildDescription:function(e,
g,c,b){b=b&&b[c.toUpperCase()];g=g||e;return"%id% (%name%)"===b&&0<=g.indexOf(e)?g:b?b.replace(/%(\w+)%/g,function(a,b){return f._buildDescriptionPart(a,b,e,g,c)}):g},_buildDescriptionPart:function(e,g,c,b,a){try{a.substr(0,a.indexOf(".")).toLowerCase();var d=f["_build_"+g];return d&&d(c,b)}catch(h){}return e},_build_id:function(e,f){return e},_build_name:function(e,f){return f},_build_city:function(e,f){return f.replace(/(\s|^)(\w)/g,function(c,b,a){return b+a.toUpperCase()})},_build_state:function(e,
g){return(e=e&&2<=e.length?f.US_STATES_IDS[e.substr(0,2)]:null)?e:"??"},_build_province:function(e,g){return(e=e&&2<=e.length?f.CA_PROVINCE_IDS[e.substr(0,2)]:null)?e:"??"}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(g,f,e,k){return g(null,{supportsMultipleAreas:!0,_analysisAreas:null,
_currentAreaIndex:-1,_webMapStores:null,constructor:function(c){this._analysisAreas=c},initialize:function(){var c=this;this._webMapStores={};return f(this._analysisAreas.map(function(b,a){if(b=b.feature||b.location||b.additionalFeatures&&b.additionalFeatures[0])return(c._webMapStores[a]=new k(b)).initialize()})).then(function(){return c})},_callStoreMethod:function(c){var b=this._webMapStores[this._currentAreaIndex];return b?e(b[c](),function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},
getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(c){this._currentAreaIndex=c}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(g,f,e,k,c,b,a){var d={_cache:{},getThumbnail:function(a){this._cache[a.url]||(this._cache[a.url]=this._getDataURL(a));return this._cache[a.url]},_getDataURL:function(a){return 0===a.url.indexOf("data:")?a.url:c.request(a.url).then(function(c){return c&&c.Attachment&&b.base64DataToDataURL(c.Attachment,a.contentType)}).otherwise(function(){return null})}};return g(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(a,b){this._feature=
a;this._attachmentInfos=b},initialize:function(){this._tryGetFieldInfosAndAttributes();return e(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var a=this._feature.getLayer();this._fieldInfos=(a=this._feature.infoTemplate||a&&a.infoTemplate)&&a.info.fieldInfos||[];this._attributes=f.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return e(a.getFeatureAttachmentInfos(this._feature),
function(a){this._attachmentInfos=a}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(a){return{getThumbnail:function(){return d.getThumbnail(a)},getUrl:function(){return a.url}}}):[]},getAttributes:function(){return k.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(g){var f=g.getLayer();if(f&&f.hasAttachments&&f.queryAttachmentInfos&&f.objectIdField)return f.queryAttachmentInfos(g.attributes[f.objectIdField])}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when"],function(g,f){var e={fromJson:function(e){function c(b){return e.imageDataCache&&e.imageDataCache[b]||b}e.areaAttachments=
e.areaAttachments||e.areaAttachements;delete e.areaAttachements;return{getImagesForAreaAt:function(b){b=e.supportsMultipleAreas?b:0;return(e.areaAttachments[b]&&(e.areaAttachments[b].images||e.areaAttachments[b].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return c(a.thumbnail)},getUrl:function(){return c(a.url)}}})},getAttributesForAreaAt:function(b){b=e.supportsMultipleAreas?b:0;return e.areaAttachments[b]&&
e.areaAttachments[b].attributes||[]},getNotesForAreaAt:function(b){b=e.supportsMultipleAreas?b:0;return e.areaAttachments[b]&&e.areaAttachments[b].notes||[]}}}};return g(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(f){(this._provider=f.getAttachmentsForAreaAt||f.getImagesForAreaAt||f.getAttributesForAreaAt||f.getNotesForAreaAt?f:e.fromJson(f))&&this._provider.getAttachmentsForAreaAt&&(f.getImagesForAreaAt=function(c){return f.getAttachmentsForAreaAt(c)});
this.supportsMultipleAreas=f.supportsMultipleAreas},initialize:function(){},getImages:function(){function e(b){b.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var c=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return c?Array.isArray(c)?(e(c),c):f(c,function(b){e(b);return b}):c},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):
[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(e){this._currentAreaIndex=e}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l){function m(){var b=new e;g("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(c,d,g,k,l,m){p=d;t=g;q=k;v=l;r=m;n=f(c,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(b,c){b="data:application/json;base64,"+a.base64FromJson(b.Web_Map_as_JSON);c([{value:{url:b}}]);return(new e).resolve()});
return this.inherited(arguments)},_getPrintDefinition:function(a,b){var c=this.inherited(arguments);this.returnJson&&this.mapName&&(c.title=this.mapName);console.log(c);return c},_createOperationalLayers:function(a,b){var c=this.inherited(arguments);if(b.__legendLayerId){var d=c.filter(function(a){return a.id===b.__legendLayerId})[0];c.splice(c.indexOf(d),1);c.push(d)}return c},_createFeatureCollection:function(a,b,c,d){var e=this.inherited(arguments);this.returnJson&&e&&("esri.layers.FeatureLayer"===
a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass||"esri.layers.GraphicsLayer"===a.declaredClass)&&e.featureCollection.layers.forEach(function(b){b.layerDefinition.name=a.arcgisProps&&a.arcgisProps.title||a._titleForLegend||a.name||a.id;b.layerDefinition.name=h.decodeXML(b.layerDefinition.name);b.layerDefinition.objectIdField="OBJECTID";b.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var c={OBJECTID:1},d=/[^\w]/g,e;b.featureSet.features.forEach(function(a,f){a.attributes=
a.attributes||{};a.attributes.OBJECTID=f+1+"";a.attributes.__nameField||(a.attributes.Name=h.decodeXML(a.attributes.Name||b.layerDefinition.name),e="Name");f=a.attributes.__fieldAliases;for(var g in a.attributes)if(0!==g.indexOf("__")){var k=g,n=a.attributes[g];"string"===typeof n&&(n=h.decodeXML(n));var l=f&&f[g];(l=l&&l.replace(d,"_"))&&void 0===a.attributes[l]&&(a.attributes[l]=n,k=l);a.attributes.__nameField===g&&(e=k);c[g]||(c[g]=1,b.layerDefinition.fields.push({name:k,type:"string"===typeof n?
"esriFieldTypeString":"esriFieldTypeDouble"}))}});b.layerDefinition.displayField=e});return e}});b.resolve()});return b.promise}var n,p,t,q,v,r,u,y={setPrintMapTaskUrl:function(a){u=a;l.registerCORS(a)},mapToURL:function(a,b,c,d){var f=y._getUrlForMap(a);if(f)return f;f=m().then(function(){return y._replaceDotDensityLayersWithPictureMarkers(a).then(function(f){return k(b&&r.legendToGraphicsLayer(b,a,c),function(b){b&&a.addLayer(b);return k(y._runPrintTask(a,c,b,d),function(c){b&&a.removeLayer(b);
y._rollbackReplacing(a,f);var d=new e;setTimeout(function(){d.resolve(c.url)},100);return d.promise})})})});y._putUrlToCache(a,f);return f},_replaceDotDensityLayersWithPictureMarkers:function(a){var b=[];for(i=0;i<a.graphicsLayerIds.length;i++)layer=a.getLayer(a.graphicsLayerIds[i]),layer.loaded&&layer.visible&&v.isDotDensity(layer)&&b.push(y._createGraphicsLayerFromDotDensityLayer(i,layer,a));return c(b)},_createGraphicsLayerFromDotDensityLayer:function(a,b,c){return v.createPictureMarkersFromDotDensityLayer(b,
c.extent,c).then(function(d){if(!d)return null;var e=new q;d.map(function(a){e.add(a)});c.addLayer(e,a);b.visible=!1;return{addedLayer:e,hiddenLayer:b}}).otherwise(function(a){console.log(a);return null})},_runPrintTask:function(a,c,d,e){function f(){var f=new n(u);f.returnJson=e&&e.replaceWithJson;f.mapName=e&&e.mapName;var h=new p;h.map=a;var g=new t;g.exportOptions={width:3.125*b.get(c,"width"),height:3.125*b.get(c,"height"),dpi:300};g.format="png32";g.showAttribution=!1;g.forceFeatureAttributes=
!0;g.__legendLayerId=d&&d.id;h.template=g;return f.execute(h)}return k(f(),function(a){return a},function(a){console.log(a);return k(f(),function(a){return a},function(a){console.log(a);return f()})})},_rollbackReplacing:function(a,b){b.forEach(function(b){b&&b.addedLayer&&a.removeLayer(b.addedLayer);b&&b.hiddenLayer&&(b.hiddenLayer.visible=!0)})},urlToSrc:function(a,b){return b&&b.saveImagesAsDataUrl?d.getRemoteImageDataUrl(a,{sizeLimit:1500}):a}},w,A=0;y.enableCaching=function(){w={}};y.clearCaching=
function(){w=null};y._putUrlToCache=function(a,b){w&&b&&(a.__mapToImageUtilKey=A++,w[a.__mapToImageUtilKey]=b)};y._getUrlForMap=function(a){return w&&w[a.__mapToImageUtilKey]};return y})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/store/Memory esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ./_GridChartViewSupport ./_GridHighlightSupport ./_GridFilterSupport ./_GridSortSupport ./_ResizableColumnsSupport ./valueField/ValueField ./valueField/_ResizableField ./coreUtils/GridBackgroundForegroundUtil ./coreUtils/GridFloatingTablesUtil ./coreUtils/GridBorderUtil ./coreUtils/GridDataUtil ./coreUtils/GridQueryUtil ./coreUtils/GridLayoutCalculator ./coreUtils/GridCellRenderer ./coreUtils/GridStyleUtil ./coreUtils/GridLayoutSizer ./coreUtils/_GridDebugUtil ../sections/SectionTypes esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil dojo/text!../templates/AdjustableGrid.html".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A,B,C,z,E,G,F,D,I,J,M,H,K){var N={defaultRowHeight:15.33,rowMinHeight:3,columnMinWidth:3,defaultChartRowHeight:150},O={rowMinHeight:3,columnMinWidth:3},L=g([q,v]);return g([d,h,l,m,n,p,t],{isGrid:!0,templateString:K,viewModel:null,theme:null,columns:null,store:null,backgroundSectionJson:null,foregroundSectionJson:null,enableBackgroundForeground:!1,forceCreateFloatingTables:!1,backgroundFloatingTablesSectionJson:null,foregroundFloatingTablesSectionJson:null,
isFloatingTable:!1,isBackgroundFloatingTable:!1,layoutDefaults:null,stickToRight:!1,looseResize:!1,keepGridWidthWhenResized:!1,keepGridHeightWhenResized:!1,hasResizableColumns:!1,disableResizableColumnsAutoDetection:!1,fitParentWhenResized:!1,parentWidget:null,parentElementInPageInfo:null,viewPortContainer:null,parentGrid:null,reportContainerPageNode:null,isReportContainerPageGrid:!1,getPreviewValueFunction:null,currentFeatureIndex:null,fixedViewMode:null,fixedSpecificViewMode:null,fieldCellClass:null,
enableAsyncRendering:!1,asyncBatchSize:1,enableNumberAnimation:!1,applyThemeStyle:!0,inheritThemeBackground:!0,previewModeBorderLineStyle:null,editModeBorderLineStyle:null,renderBordersFromTheme:!1,noThemeBorderLineStyle:null,hasRealBorders:!1,trimTextIfOverflows:!1,autoDetectUrl:!1,shouldStayWithinParent:!0,infographicBenchmarkController:null,backgroundSection:null,foregroundSection:null,backgroundFloatingTablesSection:null,foregroundFloatingTablesSection:null,_cellRenderer:null,_fieldCells:null,
_dynamicBindings:null,_isBeingResizedFlag:!1,_renderCellsQueue:null,_renderCellsContentQueue:null,postCreate:function(){this.inherited(arguments);this.layoutDefaults=f.mixin({},N,this.layoutDefaults)},refresh:function(a){if(this.domNode)return!this.isReportContainerPageGrid&&!this.hasResizableColumns&&this.viewModel.dynamicReportInfo&&1<this.columns.length&&2<this.store.data.length&&!this.disableResizableColumnsAutoDetection&&(this.fitParentWhenResized=this.hasResizableColumns=this.keepGridWidthWhenResized=
!0,this.layoutDefaults.columnMinWidth=30),I.isMobileDevice()&&(this.hasResizableColumns=!1),b[this.hasResizableColumns?"add":"remove"](this.domNode,"hasResizableColumns"),B.markAsDirty(this),this._doRefresh(a),this.getRenderPromise()},_doRefresh:function(c){this.mainNode&&this.store&&(this._destroyTableContent(),a.empty(this.mainNode),G.refreshStart(this),this._recoverOriginalData(),this._applyFilterToStoreData(),this._applySortingToStoreData(),this.isEmptyTable()?a.create("div",{"class":"adjustableGrid_emptyRow"},
this.mainNode):(b.remove(this.domNode,"esriGEAdjustableGridSingleCell esriGEAdjustableGridMultiCell"),b.add(this.domNode,this.isSingleCelledTable()?"esriGEAdjustableGridSingleCell "+(H.getTableSubtype(this)||""):"esriGEAdjustableGridMultiCell"),B.recalcRows(this),c=c||{},void 0===c.stickToRight&&(c.stickToRight=this.stickToRight),B.recalcColumns(this,c),B.autoSnapLayout(this),this._createCellsFromStoreData(),this._renderCells(),B.positionCells(this)),this.refreshBackground(),this._renderBackgroundFloatingTables(),
this._renderForegroundFloatingTables(),this.refreshForeground(),this._buildSortControls(),G.refreshEnd(this))},_originalData:null,_getOriginalData:function(){return this._originalData||this.store.data},_getSavedOriginalData:function(){return this._originalData},_saveOriginalData:function(){this._originalData||(this.store.data=f.clone(this.store.data),this._originalData=f.clone(this.store.data))},_recoverOriginalData:function(){this._originalData&&(this.store.data=f.clone(this._originalData))},_createCellsFromStoreData:function(){var a=
this;this.enableAsyncRendering&&(this._renderCellsQueue=new J({onFinished:function(){a.onRendered()}}));this.store.data.forEach(function(b){a.columns.forEach(function(c,d){if(!(b.excludedIndexHorizontal&&b.excludedIndexHorizontal[d]||b.excludedIndexVertical&&b.excludedIndexVertical[d])){d=c.index+(w.getDataColumnSpan(b,c.field)||1)===a.columns.length;var e=b.index+(w.getDataRowSpan(b,c.field)||1)===a.store.data.length;a._createField(b,c,d,e)}})})},_getFieldClass:function(a){return this.hasResizableColumns&&
0===a.gridData.index?L:q},_createField:function(a,b,c,d){var e="adjustableGridField field-"+b.field+(c?" lastInRow":"")+(d?" lastRow":"");c={viewModel:this.viewModel,fieldStyle:z.combineCellStyle(this,a,b),defaultBorderStyle:this._getDefaultBorderStyle(a,b,c,d),"class":e,fieldCellClass:this.fieldCellClass,trimTextIfOverflows:this.trimTextIfOverflows,autoDetectUrl:this.autoDetectUrl,rowId:a.id,columnId:b.id,parentGrid:this,parentWidget:this,uniqueId:a.id+b.id,gridData:a,column:b,isLastInRow:c,isLastInColumn:d};
this.hasResizableColumns&&(c.allowVerticalResizing=!1,c.showColumnRowSizeTooltip=!0);c=this._doCreateFieldFromParams(c,a,b);this.hasResizableColumns&&this._populateFieldForResizableColumns(c,a,b);c.domNode.style.position="absolute";this._fieldCells.push(c);return c},_getDefaultBorderStyle:function(a,b,c,d){return y.getBorderStyle(this,a,b,c,d)},getRenderPromise:function(){var a=[];a.push(this._renderCellsQueue&&this._renderCellsQueue.getPromise());a.push(this._renderCellsContentQueue&&this._renderCellsContentQueue.getPromise());
this.getFieldCells().forEach(function(b){b.content&&b.content.getRenderPromise&&a.push(b.content.getRenderPromise())});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(b){this[b]&&a.push(this[b].getRenderPromise())},this);return k(a)},isBeingRendered:function(){return this._renderCellsQueue&&!this._renderCellsQueue.isFinished()||this._renderCellsContentQueue&&!this._renderCellsContentQueue.isFinished()},_doCreateFieldFromParams:function(a,
b,c){return(new (this._getFieldClass(a))(a)).placeAt(this.mainNode)},_renderCells:function(){function a(a){b._renderFieldContent(a);b._postCreateFieldCell(a);b._updateCellViewMode(a)}var b=this;this._renderCellsQueue?D.splitArrayToBunches(this._fieldCells,this.asyncBatchSize).forEach(function(c){b._renderCellsQueue.add(function(){c.forEach(a)},{delayAfter:0})}):(this._fieldCells.forEach(a),this.onRendered())},_renderFieldContent:function(a){this._preRenderFieldCell(a);var b=this._getCellRenderer().renderCellContent(a);
b&&b.then&&(this._renderCellsContentQueue=this._renderCellsContentQueue||new J({onFinished:function(){}}),this._renderCellsContentQueue.add(b));this._configureRenderedCellContentSpecificStyles(a);this._postRenderFieldCell(a)},_preRenderFieldCell:function(a){},_postRenderFieldCell:function(a){},_getCellRenderer:function(){this._cellRenderer||(this._cellRenderer=new C);return this._cellRenderer},_configureRenderedCellContentSpecificStyles:function(a){b[w.isNumericVariableFieldCell(a)?"add":"remove"](a.domNode,
"hasNumericVariableFieldInfo");b[w.isStringVariableFieldCell(a)?"add":"remove"](a.domNode,"hasStringVariableFieldInfo");b[w.getConditionalFormatting(a)?"add":"remove"](a.domNode,"hasConditionalFormatting")},_postCreateFieldCell:function(a){},refreshBackground:function(){this.enableBackgroundForeground&&(this.backgroundSection&&this.backgroundSection.destroy(),this.backgroundSection=r.renderBackground(this,this.backgroundSectionJson,this._getBackgroundSectionCreationParams()))},_getBackgroundSectionCreationParams:function(){return this._getContentLoadingParams()},
refreshForeground:function(){this.enableBackgroundForeground&&(this.foregroundSection&&this.foregroundSection.destroy(),this.foregroundSection=r.renderForeground(this,this.foregroundSectionJson,this._getForegroundSectionCreationParams()))},_getForegroundSectionCreationParams:function(){return this._getContentLoadingParams()},_renderBackgroundFloatingTables:function(){this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.forceCreateFloatingTables&&(this.backgroundFloatingTablesSectionJson=
this.backgroundFloatingTablesSectionJson||{type:F.TABLE_BACKGROUND_FLOATING_PANELS,stack:[]});this.backgroundFloatingTablesSection=u.renderFloatingTables(this,this.backgroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!0),!0);this._postProcessFloatingTablesSection(this.backgroundFloatingTablesSection,!0)},_renderForegroundFloatingTables:function(){this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.forceCreateFloatingTables&&(this.foregroundFloatingTablesSectionJson=
this.foregroundFloatingTablesSectionJson||{type:F.TABLE_FOREGROUND_FLOATING_PANELS,stack:[]});this.foregroundFloatingTablesSection=u.renderFloatingTables(this,this.foregroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!1),!1);this._postProcessFloatingTablesSection(this.foregroundFloatingTablesSection,!1)},_getFloatingTablesSectionParams:function(a){var b=this,c={tableClass:function(a){return(a=H.getTableSubtype(a))?"outerFloatingAdjustableGrid floatingTableSimpleElement "+a:"outerFloatingAdjustableGrid floatingTableComplexElement"},
tableParams:f.mixin({isFloatingTable:!0,isBackgroundFloatingTable:a,parentGrid:this,inheritThemeBackground:this.inheritThemeBackground,applyThemeStyle:this.applyThemeStyle,layoutDefaults:f.mixin({},this.layoutDefaults,O),_preRenderFieldCell:function(a){b._preRenderFieldCell(a)},_postCreateFieldCell:function(a){b._postCreateFieldCell(a)}},this._getContentLoadingParams())};this._addFloatingTablesSectionCreationParams(c,a);return c},_addFloatingTablesSectionCreationParams:function(a,b){return a},_postProcessFloatingTablesSection:function(a,
b){},getVisualState:function(){var a={type:"table",cells:this.getFieldCells().map(function(a){return a.content&&a.content.getVisualState&&a.content.getVisualState()})},b=this.getSorting(this);b&&(a.sorting=b);if(b=this._filterRanges?f.clone(this._filterRanges):null)a.filterRanges=b;this.presetFilter&&(a.hasPresetFilter=!0);this.backgroundSection&&(a.backgroundSection=this.backgroundSection.getVisualState());this.backgroundFloatingTablesSection&&(a.backgroundFloatingTablesSection=this.backgroundFloatingTablesSection.getVisualState());
this.foregroundFloatingTablesSection&&(a.foregroundFloatingTablesSection=this.foregroundFloatingTablesSection.getVisualState());this.foregroundSection&&(a.foregroundSection=this.foregroundSection.getVisualState());this._chartViewInfo&&(a.isChartView=!0,a.chartViewInfo=f.clone(this._chartViewInfo));return a},setVisualState:function(a){var b=this;if(a)return c(this.getRenderPromise(),function(){var d=[];a.cells&&b.getFieldCells().forEach(function(b,c){b.content&&b.content.setVisualState&&d.push(b.content.setVisualState(a.cells[c]))});
["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(c){a[c]&&b[c]&&d.push(b[c].setVisualState(a[c]))});return k(d).then(function(){return c(a.filterRanges&&b.setFilterRanges(a.filterRanges),function(){return c(a.sorting&&b.setSorting(a.sorting),function(){return a.isChartView&&b.tableToChart(a.chartViewInfo)})})})})},_setCellWidth:function(a,b){B.adjustColumnWidth(this,a.gridData,a.column,b);B.positionCells(this)},_setCellHeight:function(a,
b){B.adjustRowHeight(this,a.gridData,a.column.field,b);B.positionCells(this)},setCellWidth:function(a,b){this._setCellWidth(a,b)},setCellHeight:function(a,b){this._setCellHeight(a,b)},_maxWidth:500,_width:500,_height:0,_spaceAfter:0,_maxHeight:0,_left:0,_top:0,_alternatingStyle:null,_opacity:1,_fixedCellsOpacity:1,getMaxHeight:function(a){return this._maxHeight},setMaxHeight:function(a){this._maxHeight=a},getHeight:function(a,b){return this._height+(!1!==b?this._top:0)+(a?this._spaceAfter||0:0)},
getMaxWidth:function(){return this._maxWidth},setMaxWidth:function(a,b){var c=0;b&&b.preserveRightOffset&&(B.recalcGridWidth(this),c=this.getAllowedWidth(),c=(c-this._width)/c);this._maxWidth=a;b&&b.resizeToFitAllowedWidth&&this.resizeToFitAllowedWidth({rightOffsetWeight:b.preserveRightOffset?c:0})},getLeft:function(){return this._left},getTop:function(){return this._top},setSpaceAfter:function(a){this._spaceAfter=a},getAllowedWidth:function(){return this._maxWidth-this._left},getAllowedWidthFromParent:function(){return this.shouldStayWithinParent?
this.domNode.parentNode.clientWidth-this._left:1E6},getTableBox:function(){var a=this.getSettings().style;return{l:a.left,t:a.top,w:a.width,h:this.getHeight(!1,!1)}},resizeToFitAllowedWidth:function(a){this.isEmptyTable()||E.resizeToFitAllowedWidth(this,a)},resizeToFitWidth:function(a){this.isEmptyTable()||E.resizeToFitWidth(this,a)},resizeToFitHeight:function(a,b){this.isEmptyTable()||(!1!==b&&(a-=this._top),E.resizeToFitHeight(this,a))},scaleProportionallyWithinParent:function(a){E.scaleProportionallyWithinParent(this,
a)},collapseContent:function(){this.getFieldCells({floatingCells:!0}).forEach(function(a){a.content&&a.content.collapseContent&&a.content.collapseContent()})},hasHiddenContent:function(){return this._checkNeedResizeRowHeightToShowCellsContent(!1)},resizeRowHeightToShowCellsContent:function(){this._checkNeedResizeRowHeightToShowCellsContent(!0);return this.getRenderPromise()},_checkNeedResizeRowHeightToShowCellsContent:function(a){var b=this,c;this.getFieldCells({floatingCells:!0}).forEach(function(d){if(d.content&&
d.content.getPreferredHeight){var e=d.content.getPreferredHeight();e>d.getHeight()&&(a&&b._setCellHeight(d,e+10),c=!0)}});return c},_tableAttributes:null,_scaleToFitWidth:void 0,_scaleToFitHeight:void 0,setSettings:function(a){var b,c=this._left,d=this.isMultiFeatureTable();this.columns.forEach(function(a){a.style&&"number"===typeof a.style.width&&(a._wasBeforeRecalc=!0)});if(a.style){void 0!==a.style.left&&this.setPosition(a.style.left);void 0!==a.style.top&&this.setPosition(void 0,a.style.top);
void 0!==a.style.spaceAfter&&(this._spaceAfter=a.style.spaceAfter);a.style.width&&(this._width=a.style.width);a.style.alternatingStyle&&(this._alternatingStyle=a.style.alternatingStyle);this.setOpacity(a.style);var e=this._width;this._width=Math.min(this._width,this.getAllowedWidth());if(this._width!==e||c!==this._left)b=!0}a.attributes&&(this._adjustColumnsForSettings(a)&&(b=!0),this._tableAttributes=a.attributes,this._tableAttributes.rowCount&&this._tableAttributes.rowCount!==this.store.data.length&&
this._adjustRowsForSettings(a),delete this._tableAttributes.rowCount,delete this._tableAttributes.columnCount);void 0!==a.scaleToFitWidth&&(this._scaleToFitWidth=a.scaleToFitWidth);void 0!==a.scaleToFitHeight&&(this._scaleToFitHeight=a.scaleToFitHeight);this._tableAttributes=this._tableAttributes||{};var f=[];this.columns.forEach(function(a){a._wasBeforeRecalc&&f.push(a);delete a._wasBeforeRecalc});if(!d&&this.isMultiFeatureTable())for(c=this.columns.length-1;c>=this.getNumFixedColumns();c--)d=f.indexOf(this.columns[c]),
-1!==d&&f.splice(d,1);(a.viewMode||a.specificViewMode)&&this._tryApplyNewViewMode(a.viewMode,a.specificViewMode);void 0!==a.maxWidth&&this.setMaxWidth(a.maxWidth);void 0!==a.maxHeight&&this.setMaxHeight(a.maxHeight);this.viewModel.dynamicReportInfo&&this.getNumDynamicColumns()?(B.trimColumnsForNumberOfFeatures(this),this.refresh({resetWidth:!0})):this.viewModel.dynamicReportInfo&&this.getNumDynamicRows()?(B.adjustRowsForNumberOfFeatures(this),this.refresh()):b?this.refresh({resetWidth:!0,columnsToPreserve:f}):
this.refresh()},setPosition:function(a,b){void 0!==a&&(this._left=a||0,this.domNode.style.left=this._left+"px");void 0!==b&&(this._top=b||0,this.domNode.style.top=this._top+"px")},setOpacity:function(a){"number"===typeof a.opacity&&(this._opacity=Math.max(0,Math.min(1,a.opacity)),this.domNode.style.opacity=this._opacity,b[0===this._opacity?"add":"remove"](this.domNode,"esriGENonInteractable"));"number"===typeof a.fixedCellsOpacity&&(this._fixedCellsOpacity=Math.max(0,Math.min(1,a.fixedCellsOpacity)),
this.mainNode.style.opacity=this._fixedCellsOpacity,b[0===this._fixedCellsOpacity?"add":"remove"](this.mainNode,"esriGENonInteractable"))},_adjustColumnsForSettings:function(a){return!1},_adjustRowsForSettings:function(a){},getSettings:function(){B.recalcGridWidth(this);return{style:{width:this._width,left:this._left,top:this._top,spaceAfter:this._spaceAfter,alternatingStyle:this._alternatingStyle,opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity},attributes:f.mixin(f.clone(this._tableAttributes),
{columnCount:this.columns.length,rowCount:this.store.data.length}),presetFilter:this.presetFilter,presetSorting:this.presetSorting,scaleToFitWidth:this._scaleToFitWidth,scaleToFitHeight:this._scaleToFitHeight}},getOpacity:function(){return{opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity}},needScaleToFitWidth:function(){return this._scaleToFitWidth},needScaleToFitHeight:function(){return this._scaleToFitHeight},isEmptyTable:function(){return H.isEmptyTable(this)},isSingleCelledTable:function(){return H.isSingleCelledTable(this)},
isMultiDataTable:function(){return H.isMultiDataTable(this)},isMultiFeatureTable:function(){return!!this.getNumDynamicColumns()||!!this.getNumDynamicRows()},getNumFixedColumns:function(){return this._tableAttributes&&this._tableAttributes.fixedColumns||0},setNumFixedColumns:function(a){this._tableAttributes.fixedColumns=a},getNumDynamicColumns:function(){return this._tableAttributes&&this._tableAttributes.dynamicColumns||0},setNumDynamicColumns:function(a){this._tableAttributes.dynamicColumns=a},
getNumFixedRows:function(){return this._tableAttributes&&this._tableAttributes.fixedRows||0},setNumFixedRows:function(a){this._tableAttributes.fixedRows=a},getNumDynamicRows:function(){return this._tableAttributes&&this._tableAttributes.dynamicRows||0},setNumDynamicRows:function(a){this._tableAttributes.dynamicRows=a},_viewMode:null,_specificViewMode:null,_viewModeKey:null,getViewMode:function(){return this._viewMode},getSpecificViewMode:function(){return this._specificViewMode},setViewMode:function(a,
b,c){!this._tryApplyNewViewMode(a,b)||c&&c.noUpdate||(this._fieldCells&&this._fieldCells.forEach(function(a){this._updateCellViewMode(a)},this),this.backgroundSection&&this.backgroundSection.setViewMode(this._viewMode,this._specificViewMode),this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.setViewMode(this._viewMode,this._specificViewMode),this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.setViewMode(this._viewMode,this._specificViewMode),this.foregroundSection&&
this.foregroundSection.setViewMode(this._viewMode,this._specificViewMode))},_tryApplyNewViewMode:function(a,c){var d="function"===typeof this.fixedViewMode?this.fixedViewMode(this):this.fixedViewMode,e="function"===typeof this.fixedSpecificViewMode?this.fixedSpecificViewMode(this):this.fixedSpecificViewMode;a=d||a||this._viewMode;c=e||c||this._specificViewMode;d=a+c;if(this._viewModeKey===d)return!1;this._viewModeKey=d;this._viewMode=a;this._specificViewMode=c;b.remove(this.domNode,"adjustableGridPreviewMode adjustableGridEditMode ");
b.add(this.domNode,this._viewMode===M.EDIT?"adjustableGridEditMode":"adjustableGridPreviewMode");return!0},_updateCellViewMode:function(a){a.setDefaultBorderStyle(this._getDefaultBorderStyle(a.gridData,a.column,a.isLastInRow,a.isLastInColumn));a.content&&a.content.setViewMode&&a.content.setViewMode(this._viewMode,this._specificViewMode);this._getCellRenderer().updateViewMode(a)},_getContentLoadingParams:function(){return{onContentLoadingStart:this.onContentLoadingStart.bind(this),onContentLoadingEnd:this.onContentLoadingEnd.bind(this)}},
getFieldCells:function(a){var b=[],b=a&&a.floatingCells?this.getBackgroundFloatingCells().concat(this._fieldCells).concat(this.getForegroundFloatingCells()):this._fieldCells;a&&a.topFirst&&(b=b.slice().reverse());return b},queryCells:function(a){return A.queryCells(this,a)},getFirstCell:function(){return this.getFieldCells()[0]},getCellText:function(a){return w.getFieldCellValue(a)},renderCell:function(a){this._renderFieldContent(a)},refreshCellStyle:function(a){a.setStyle(z.combineCellStyle(this,
a.gridData,a.column))},getInfographicJson:function(){var a=this.getFirstCell();return w.isInfographicCell(a)?w.getFieldInfo(a).infographicJson:null},getFeatureIndexForCell:function(a){return this.isMultiFeatureTable()?B.calcRingIndexForCell(a):"number"===typeof this.currentFeatureIndex?this.currentFeatureIndex:"number"===typeof a.gridData.currentFeatureIndex?a.gridData.currentFeatureIndex:"number"===typeof a.column.currentFeatureIndex?a.column.currentFeatureIndex:void 0},isMouseOver:function(){return this.domNode&&
A.isMouseOver(this)},getOverFieldCell:function(a){return A.getOverFieldCell(this,a)},getBBox:function(a){return A.getBBox(this,a)},getBackgroundFloatingCells:function(a){return this._getFloatingCells(this.backgroundFloatingTablesSection,a)},getForegroundFloatingCells:function(a){return this._getFloatingCells(this.foregroundFloatingTablesSection,a)},_getFloatingCells:function(a,b){var c=[];if(!a)return c;a.getTables().forEach(function(a){c=c.concat(a.getFieldCells())});b&&b.topFirst&&c.reverse();return c},
getChartJson:function(){var a=this.getFirstCell();return w.isChartCell(a)?w.getFieldInfo(a).chartJson:null},toJson:function(){var a=this.getSettings();a.id="table";a.data={data:this._getOriginalData(),columns:this.columns};["backgroundSection","foregroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection"].forEach(function(b){var c=this[b];c&&(c=c.toJson(),c.stack.length&&(a[b+"Json"]=c))},this);return f.clone(a)},fromJson:function(a){a&&a.data&&(this.columns=a.data.columns||
[],this.store=new e({data:a.data.data||[],idProperty:"id"}),this.backgroundSectionJson=a.backgroundSectionJson,this.foregroundSectionJson=a.foregroundSectionJson,this.backgroundFloatingTablesSectionJson=a.backgroundFloatingTablesSectionJson,this.foregroundFloatingTablesSectionJson=a.foregroundFloatingTablesSectionJson,this.setSettings(a))},notifyShown:function(){this.getFieldCells().forEach(function(a){a.notifyShown();a.content&&a.content.notifyShown&&a.content.notifyShown()});this.backgroundSection&&
this.backgroundSection.notifyShown();this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.notifyShown();this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.notifyShown();this.foregroundSection&&this.foregroundSection.notifyShown()},onRendered:function(){},onContentLoadingStart:function(){},onContentLoadingEnd:function(){},onRequestScaleToFitHeight:function(){},_destroyTableContent:function(){this._renderInfo=null;this._fieldCells=this._fieldCells||[];this._fieldCells.forEach(function(a){a.parentWidget=
null;a.parentGrid=null;a.gridData=null;a.column=null;a.destroy()});this._fieldCells.length=0;this.backgroundSection&&this.backgroundSection.destroy();this.backgroundSection=null;this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.backgroundFloatingTablesSection=null;this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.foregroundFloatingTablesSection=null;this.foregroundSection&&this.foregroundSection.destroy();this.foregroundSection=
null;this._renderCellsQueue&&this._renderCellsQueue.destroy();this._renderCellsQueue=null;this._renderCellsContentQueue&&this._renderCellsContentQueue.destroy();this._renderCellsContentQueue=null},destroy:function(){this._destroyTableContent();this.reportContainerPageNode=this.parentGrid=this.viewPortContainer=this.parentElementInPageInfo=this.parentWidget=this._originalData=this.columns=this.store=this.theme=this.viewModel=null;this._removeChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridChartViewSupport":function(){define(["dojo/_base/declare",
"dojo/dom-construct","./coreUtils/chart/ChartViewBuilder","./coreUtils/chart/GridChartUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(g,f,e,k,c){return g(null,{_chartViewInfo:null,_chartNode:null,_chartViewBuilder:null,getChartViewOptions:function(){var b=k.getSupportedChartTypes(this),a=k.getTableRowsColumnsInfos(this);return b&&b.length&&a&&{chartType:this._chartViewInfo&&this._chartViewInfo.chartType,chartTypes:b,supportsAltOrientation:2<this.columns.length,columnInfos:a.columnInfos,rowInfos:a.rowInfos,
sourceId:this._chartViewInfo&&this._chartViewInfo.sourceId,takeSeriesFromRows:!1}},tableToChart:function(b){this._removeChart();this._chartViewInfo=b;this._chartNode=f.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode);c.hide(this.mainNode);this._chartViewBuilder=new e({viewModel:this.viewModel,theme:this.theme,grid:this,chartNode:this._chartNode,width:this._width,height:this._height});return this._chartViewBuilder.renderChart(b)},chartToTable:function(){this._removeChart()},_removeChart:function(){this._chartViewInfo&&
(this._chartViewInfo=null,this._chartViewBuilder.destroy(),this._chartViewBuilder=null,f.destroy(this._chartNode),this._chartNode=null,c.show(this.mainNode))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/ChartViewBuilder":function(){define("dojo/_base/declare dojo/_base/lang ../../../charts/utils/ChartTypes ../../../charts/utils/ChartDataLabelsTypes ../../../charts/utils/ChartJsonUtil ../../../charts/legends/ChartLegendPlacements ./GridChartUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(g,f,e,k,c,b,a,d){return g(null,{viewModel:null,theme:null,grid:null,chartNode:null,width:null,height:null,_chartContainer:null,_chartType:null,_seriesInRows:null,_sourceId:null,constructor:function(a){f.mixin(this,a)},renderChart:function(a){this._chartType=a.chartType;this._seriesInRows=a.altOrientation;this._sourceId=a.sourceId;a=this.viewModel.layoutBuilder.getClass("chart");return a.isAsync?d.showProgressPromise(this.grid.domNode,a.loadModules()).then(this._doRenderChart.bind(this)):
this._doRenderChart()},_doRenderChart:function(){this._chartContainer=this.viewModel.layoutBuilder.createElement("chart",{node:this.chartNode,json:this._getChartJson(),creationParams:{viewModel:this.viewModel,theme:this.theme,parentWidget:this.grid,enableAxisLabelsAutoTilt:!0}})},_getChartJson:function(){var d=c.getDefaultChartSettings({chartType:this._chartType,width:this.width,height:this.height,seriesItems:a.createChartSeriesItems(this.grid,{chartType:this._chartType,seriesInRows:this._seriesInRows,
sourceId:this._sourceId})});if(1<d.seriesItems.length||e.isSingleSeries(this._chartType))d.visualProperties.legend.series.placement=b.BOTTOM;this._chartType===e.RING&&(d.visualProperties.dataLabels=k.LABEL_VALUE);e.isSingleSeries(this._chartType)?d.visualProperties.title.text=d.seriesItems[0]&&d.seriesItems[0].label||"":d.visualProperties.title.text=a.getChartTitle(this.grid);return d},destroy:function(){this._chartContainer&&this._chartContainer.destroy();this._chartContainer=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes":function(){define([],
function(){var g={COLUMN:"Column",BAR:"Bar",LINE:"Line",VERTICAL_LINE:"VerticalLine",PIE:"Pie",DONUT:"Donut",GAUGE:"Gauge",RING:"Ring",PICTURE_COLUMN:"PictureColumn",PICTURE_BAR:"PictureBar",WAFFLE:"Waffle",COLUMN_LINE:"ColumnLine",BAR_LINE:"BarLine"};g.CLASSIC_CHART_TYPES=[g.COLUMN,g.BAR,g.LINE,g.PIE];g.AVAILABLE_CHART_TYPES=[g.COLUMN,g.BAR,g.LINE,g.VERTICAL_LINE,g.PIE,g.DONUT,g.GAUGE,g.RING,g.PICTURE_COLUMN,g.PICTURE_BAR,g.WAFFLE];g.isSupported=function(f){return-1!==g.AVAILABLE_CHART_TYPES.indexOf(f)};
g.isColumnBarLike=function(f){return f===g.COLUMN||f===g.BAR||f===g.PICTURE_COLUMN||f===g.PICTURE_BAR};g.isColumnBarNoPictureLike=function(f){return f===g.COLUMN||f===g.BAR};g.isColumnLike=function(f){return f===g.COLUMN||f===g.PICTURE_COLUMN};g.isBarLike=function(f){return f===g.BAR||f===g.PICTURE_BAR};g.isPictureLike=function(f){return f===g.PICTURE_COLUMN||f===g.PICTURE_BAR||f===g.WAFFLE};g.isLineLike=function(f){return f===g.LINE||f===g.VERTICAL_LINE};g.isXAxisVertical=function(f){return f===
g.BAR||f===g.PICTURE_BAR||f===g.VERTICAL_LINE};g.hasAxis=function(f){return g.isColumnBarLike(f)||g.isLineLike(f)};g.hasLegend=function(f){return g.isColumnBarLike(f)||g.isLineLike(f)||f===g.PIE||f===g.DONUT||f===g.WAFFLE};g.hasBackgroundImage=function(f){return g.isColumnBarLike(f)||g.isLineLike(f)};g.isSingleSeries=function(f){return f===g.PIE||f===g.DONUT||f===g.GAUGE||f===g.RING||f===g.WAFFLE};g.isComparisonSupported=function(f){return f===g.COLUMN||f===g.BAR?2:g.isLineLike(f)?1E6:0};g.isConditionalStylingSupported=
function(f){return g.isColumnBarLike(f)||f===g.RING||f===g.GAUGE||f===g.WAFFLE};g.isLegendSupported=function(f,e,k,c){return g.isSeriesLegendSupported(f,e,k)||g.isMinMaxLegendSupported(f,e)};g.isSeriesLegendSupported=function(f,e,k,c){1===e&&c&&(e=2);return 0===e||1===e&&g.isLineLike(f)&&!k?!1:g.isColumnBarLike(f)||g.isLineLike(f)||f===g.PIE||f===g.DONUT||f===g.WAFFLE};g.isMinMaxLegendSupported=function(f,e){return g.isColumnBarLike(f)||g.isLineLike(f)||f===g.PIE||f===g.DONUT||f===g.WAFFLE};g.isSortingSupported=
function(f,e,k){return 0===e||1<e||k?!1:g.isColumnBarLike(f)||f===g.PIE||f===g.DONUT||f===g.RING};g.isStackSupported=function(f,e,k){return 0===e||1===e&&!k?!1:f===g.COLUMN||f===g.BAR||f===g.LINE};g.isRenderInOppositeDirectionsSupported=function(f,e,k){return 0===e||1===e||k?!1:g.isColumnBarLike(f)};g.supportsNegativeValues=function(f){return g.isColumnBarLike(f)||g.isLineLike(f)||f===g.RING};g.isShowDataAsWeightSupported=function(f){return g.isColumnBarLike(f)||g.isLineLike(f)};g.canFilterVariables=
function(f,e){return e?!1:g.isColumnBarLike(f)||g.isLineLike(f)||f===g.PIE||f===g.DONUT||f===g.RING};g.isBenchmarkSupported=function(f,e){return e?!1:g.isColumnBarLike(f)||g.isLineLike(f)||f===g.RING};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartDataLabelsTypes":function(){define([],function(){var g={NONE:"None",LABEL:"Label",VALUE:"Value",LABEL_VALUE:"LabelValue",PERCENT:"Percent",LABEL_PERCENT:"LabelPercent",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;
return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.NONE},buildType:function(f){var e="";f.label&&(e="Label");f.value?e+="Value":f.percent&&(e+="Percent");return e||g.NONE},hasLabel:function(f){return f&&-1!==f.indexOf("Label")},hasValue:function(f){return f&&-1!==f.indexOf("Value")},hasPercent:function(f){return f&&-1!==f.indexOf("Percent")},has2Values:function(f){return f===g.LABEL_VALUE||f===g.LABEL_PERCENT}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartJsonUtil":function(){define("dojo/_base/lang ./ThemeCalculator ./cleanUp/_ChartJsonCleaner ./ChartTypes ./ChartDataLabelsTypes ../legends/ChartLegendPlacements ../legends/ChartLegendTypes ./plots/supportClasses/GaugeLabelPlacements ./plots/supportClasses/WaffleLabelPlacements ./plots/supportClasses/WaffleDirections ../../../dataProvider/supportClasses/data/AreaDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p){p=p.geoenrichment.dijit.ReportPlayer.ChartContainer;var t={getDefaultChartSettings:function(e){e=e||{};var n=g.mixin({},e.font),m=g.mixin({},e.font);delete m.fontSize;return{isChart:!0,type:e.chartType||k.COLUMN,isMultiFeatureChart:!!e.isMultiFeatureChart,seriesItems:e.seriesItems||[],visualProperties:{barBorders:!1,view3D:!1,origin:0,width:e.width||400,height:e.height||300,marginTop:void 0,marginRight:void 0,marginBottom:void 0,marginLeft:void 0,backgroundColor:void 0,
backgroundColorOpacity:1,plotAreaOutlineColor:void 0,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:0,plotAreaOutlineStyle:void 0,backgroundImageData:void 0,panelBackgroundColor:void 0,title:{text:"",align:"center",style:g.mixin({},n),verticalShift:0},xAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:g.mixin({},n),style:g.mixin({},n),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,
gridLinesStyle:void 0,gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,placement:void 0},yAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:g.mixin({},n),style:g.mixin({},n),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,hideBaseLine:!1,baseLineColor:void 0,baseLineOpacity:1,baseLineThickness:.5,
baseLineStyle:void 0,baseLineValue:0,showPercentSymbol:!1,showCurrencySymbol:!1,showSymbolForAllLabels:!1,showValuesAsWeightsInSeries:!1,placement:void 0,nonZeroInclusive:!1},legend:{type:a.SERIES,series:{placement:b.NONE,placementOffset:10,hasBorder:!0,labelParts:"Label",style:g.mixin({},n),symbol:void 0,hideOthers:!1,showComparison:!1},minMax:{placement:b.NONE,placementOffset:3,titleStyle:g.mixin({},m),minVariableLabelStyle:g.mixin({},m),maxVariableLabelStyle:g.mixin({},m)}},isStacked:!1,showValuesAsWeightInStack:!1,
columnThickness:f.DEFAULT_COLUMN_THICKNESS,columnBarGap:void 0,columnBarOpacity:1,renderColumnBarsInOppositeDirections:!1,showColumnBarBackground:!1,columnBarBackgroundColor:void 0,columnBarBackgroundOpacity:1,fillOpacity:1,outlineColor:void 0,outlineOpacity:1,outlineThickness:0,outlineStyle:void 0,lineThickness:f.DEFAULT_LINE_THICKNESS,lineOpacity:1,fillLineMarkers:!1,lineMarkersFillOpacity:1,fillLineArea:!1,lineAreaOpacity:1,donutHolePercent:f.DEFAULT_DONUT_HOLE_PERCENT,donutGap:f.DEFAULT_DONUT_GAP,
donutArcPercent:f.DEFAULT_DONUT_ARC_PERCENT,gaugeHolePercent:f.DEFAULT_GAUGE_HOLE_PERCENT,gaugeRangeMin:void 0,gaugeRangeMax:void 0,gaugeGap:f.DEFAULT_GAUGE_GAP,gaugeStartAngle:f.DEFAULT_GAUGE_ANGLE,gaugeArcPercent:f.DEFAULT_GAUGE_ARC_PERCENT,gaugeLabelPlacement:d.INSIDE,gaugeLabelStyle:g.mixin({},m),gaugeShowArrow:!1,gaugeArrowLineColor:void 0,gaugeArrowFillColor:void 0,gaugeConditionalStylingOthers:!1,gaugeConditionalStylingLabel:!1,gaugeShowFromToLabels:!1,gaugeFromLabelStyle:g.mixin({},m),gaugeToLabelStyle:g.mixin({},
m),waffleDirection:l.DOWN_RIGHT,waffleFlowStyle:void 0,waffleShowWholePictures:!1,waffleStretchIconsToFill:!1,waffleRangeMin:void 0,waffleRangeMax:void 0,waffleLabelPlacement:h.BOTTOM,waffleLabelOffset:10,waffleHideValue:!1,waffleHideLabel:!1,waffleShowLabelAbove:!1,waffleValueStyle:g.mixin({},m),waffleLabelStyle:g.mixin({},m),waffleColumnSpace:5,waffleRowSpace:5,waffleConditionalStylingOthers:!1,waffleConditionalStylingValue:!1,waffleConditionalStylingLabel:!1,waffleNumIcons:void 0,waffleNumRows:void 0,
waffleNumColumns:void 0,ringBackgroundColor:void 0,ringBackgroundOpacity:1,columnBarShowWholePictures:!1,dataLabels:c.NONE,dataLabelsShowLabelUnder:!1,dataLabelsDecimals:0,dataLabelsStyle:g.mixin({},n),dataLabelsLabelStyle:null,dataLabelsAltColor:null,dataLabelsEnableAltColor:!1,dataLabelsInside:!1,dataLabelsStackedInColumns:!1,dataLabelsHorizontalAlign:"center",dataLabelsVerticalAlign:"middle",dataLabelsShowValuePercentSymbol:!1,dataLabelsShowValueCurrencySymbol:!1,dataLabelsAngle:0,dataLabelsMaxWidth:void 0,
chartIcons:void 0,floatingIcons:void 0,showAxisIcons:!1,showChartIcons:!1,floatingTexts:void 0,sorting:void 0,filter:void 0,conditionalStyling:void 0},comparisonInfo:void 0}},provideDefaultValueForMissing:function(a,b){b=t.getDefaultChartSettings(b);n.populateObject(a,b);return a},cleanUpJson:function(a,b,c){return e.cleanUpJson(a,b,c)},supportsVisualProperty:function(a,b,c){return e.supportsVisualProperty(b,a,c)},enrichVisualPropertiesWithThemeSettings:function(a,b){a=g.clone(a);a.backgroundColor=
a.backgroundColor||b.backgroundColor;a.outlineColor=a.outlineColor||b.outlineColor;a.outlineStyle=a.outlineStyle||b.outlineStyle;n.populateObject(a.title.style,b.titleStyle);a.xAxis&&(n.populateObject(a.xAxis.style,b.xAxis.axisStyle),n.populateObject(a.xAxis.titleStyle,b.xAxis.titleStyle),a.xAxis.lineColor=a.xAxis.lineColor||b.xAxis.lineColor,a.xAxis.gridLinesColor=a.xAxis.gridLinesColor||b.xAxis.gridLinesColor,a.xAxis.gridLinesStyle=a.xAxis.gridLinesStyle||b.xAxis.gridLinesStyle,a.xAxis.gridStripesColor=
a.xAxis.gridStripesColor||b.xAxis.gridStripesColor,a.xAxis.gridStripesColorAlt=a.xAxis.gridStripesColorAlt||b.xAxis.gridStripesColorAlt,n.populateObject(a.yAxis.style,b.yAxis.axisStyle),n.populateObject(a.yAxis.titleStyle,b.yAxis.titleStyle),a.yAxis.lineColor=a.yAxis.lineColor||b.yAxis.lineColor,a.yAxis.gridLinesColor=a.yAxis.gridLinesColor||b.yAxis.gridLinesColor,a.yAxis.gridLinesStyle=a.yAxis.gridLinesStyle||b.yAxis.gridLinesStyle,a.yAxis.gridStripesColor=a.yAxis.gridStripesColor||b.yAxis.gridStripesColor,
a.yAxis.gridStripesColorAlt=a.yAxis.gridStripesColorAlt||b.yAxis.gridStripesColorAlt,a.yAxis.baseLineColor=a.yAxis.baseLineColor||b.yAxis.baseLineColor,a.yAxis.baseLineStyle=a.yAxis.baseLineStyle||b.yAxis.baseLineStyle);a.legend&&(n.populateObject(a.legend.series.style,b.legendStyle),a.legend.minMax&&(n.populateObject(a.legend.minMax.titleStyle,b.minMaxLegend.titleStyle),n.populateObject(a.legend.minMax.minVariableLabelStyle,b.minMaxLegend.minVariableLabelStyle),n.populateObject(a.legend.minMax.maxVariableLabelStyle,
b.minMaxLegend.maxVariableLabelStyle)));n.populateObject(a.dataLabelsStyle,b.dataLabelsStyle);n.populateObject(a.dataLabelsLabelStyle,a.dataLabelsStyle);a.dataLabelsAltColor=a.dataLabelsAltColor||b.dataLabelsAltColor;n.populateObject(a.gaugeLabelStyle,b.gauge&&b.gauge.dataLabelStyle);a.gaugeArrowLineColor=a.gaugeArrowLineColor||b.gauge&&b.gauge.arrowIndicator.lineColor;a.gaugeArrowFillColor=a.gaugeArrowFillColor||b.gauge&&b.gauge.arrowIndicator.backgroundColor;n.populateObject(a.waffleValueStyle,
b.waffle&&b.waffle.dataValueStyle);n.populateObject(a.waffleLabelStyle,b.waffle&&b.waffle.dataLabelStyle);a.ringBackgroundColor=a.ringBackgroundColor||b.ring&&b.ring.ringBackground&&b.ring.ringBackground.backgroundColor;a.columnBarBackgroundColor=a.columnBarBackgroundColor||b.columnBarBackground&&b.columnBarBackground.backgroundColor;return a},createChartPoint:function(a,b,c,d,e){a={color:c||"",label:void 0!==b?b||"":a&&a.alias,fieldInfo:a,iconFieldInfo:d,captionFieldInfo:e};c&&f.setPointColor(a,
c);return a},getGaugeOthersPoint:function(a){return{label:a&&a.label||p.gaugeOthers,color:a&&a.color}},getWaffleOthersPoint:function(a){return{label:a&&a.label||p.waffleOthers,color:a&&a.color,iconFieldInfo:a&&a.iconFieldInfo}}},q=[{headers:{data:{AREA_DESC:p.oneMile}}},{headers:{data:{AREA_DESC:p.threeMiles}}},{headers:{data:{AREA_DESC:p.fiveMiles}}}];t.getSeriesItemsForMultiFeatureChart=function(a,b,c){if(!b)return b;c=c||q;var d=b[0];return k.isLineLike(a)?c.map(function(a,b){var c=g.clone(d);
c.points.forEach(function(a){delete a.color});if(b=d.multiFeatureLineStyles&&d.multiFeatureLineStyles[b])c.color=b.color,c.lineThickness=b.lineThickness,c.lineStyle=b.lineStyle,c.lineMarker=b.lineMarker,c.lineMarkerColor=b.lineMarkerColor,c.lineMarkerSize=b.lineMarkerSize,c.lineMarkerFillColor=b.lineMarkerFillColor,c.fillColor=b.fillColor;c.label=m.getAreaDataValue({areaDataObject:a,fieldName:"AREA_DESC"})||"";return c}):d.points.map(function(a){return{label:a.label,points:c.map(function(b){return t.createChartPoint(a.fieldInfo,
m.getAreaDataValue({areaDataObject:b,fieldName:"AREA_DESC"})||"",a.color||d.color)})}})};t.getOriginalPointByMultiFeatureIndexes=function(a,b,c){return a[0].points[b]};t.transposeSeriesItems=function(a){return a.length?a[0].points.map(function(b,c){return{label:b.label,points:a.map(function(a){var b=g.clone(a.points[c]);b.label=a.label;return b})}}):[]};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ThemeCalculator":function(){define("dojo/_base/lang dojox/charting/Theme ../../themes/ThemeLibrary ./ChartTypes ./ChartLineMarkers ./ChartLineStyles esri/dijit/geoenrichment/utils/ColorUtil".split(" "),
function(g,f,e,k,c,b,a){function d(a,b,c){var d;switch(a){case k.COLUMN:d=b.column&&b.column.colors;break;case k.BAR:d=b.bar&&b.bar.colors;break;case k.LINE:d=b.line&&b.line.colors;break;case k.VERTICAL_LINE:d=b.line&&b.line.colors;break;case k.PIE:d=b.pie&&b.pie.colors;break;case k.DONUT:d=b.donut&&b.donut.colors;break;case k.GAUGE:d=b.gauge&&b.gauge.colors;break;case k.WAFFLE:d=b.waffle&&b.waffle.colors;break;case k.RING:d=b.ring&&b.ring.colors;break;case k.PICTURE_COLUMN:d=b.pictureColumn&&b.pictureColumn.colors;
break;case k.PICTURE_BAR:d=b.pictureBar&&b.pictureBar.colors}d&&d.length||(d=null);return 3>=c&&b.colors3series&&b.colors3series.length&&b.colors3series||d||b.colors||l}var h={},l=["#AAAAAA","#888888","#555555","#333333"];h.DEFAULT_LINE_THICKNESS=1;h.DEFAULT_COLUMN_THICKNESS="Medium";h.DEFAULT_DONUT_HOLE_PERCENT=50;h.DEFAULT_DONUT_GAP=3;h.DEFAULT_DONUT_ARC_PERCENT=100;h.DEFAULT_GAUGE_HOLE_PERCENT=80;h.DEFAULT_GAUGE_GAP=2;h.DEFAULT_GAUGE_ANGLE=0;h.DEFAULT_GAUGE_ARC_PERCENT=100;h.getThemeForSettings=
function(c,d,e){var n=e.isEditMode;e=e.isBenchmarked;var m=new f({colors:d.colors||l});if(!c)return m;var p=c.visualProperties;m.plotarea.fill=p.backgroundColor||d.backgroundColor;"number"!==typeof p.backgroundColorOpacity||a.isTransparent(m.plotarea.fill)||(m.plotarea.fill=a.toColor(m.plotarea.fill),m.plotarea.fill.a=p.backgroundColorOpacity);m.plotarea.stroke={width:0};p.plotAreaOutlineColor&&(m.plotarea.stroke.color=p.plotAreaOutlineColor,"number"!==typeof p.plotAreaOutlineOpacity||a.isTransparent(m.plotarea.stroke.color)||
(m.plotarea.stroke.color=a.toColor(m.plotarea.stroke.color),m.plotarea.stroke.color.a=p.plotAreaOutlineOpacity),m.plotarea.stroke.width=p.plotAreaOutlineThickness||0,p.plotAreaOutlineStyle&&(m.plotarea.stroke.style=b.toGFXValue(p.plotAreaOutlineStyle)));m.chart.fill="transparent";m.axis.title.font="normal normal normal 11px Verdana";k.hasBackgroundImage(c.type)&&(m.plotarea.backgroundImageData=p.backgroundImageData);var r=g.mixin({},d.dataLabelsStyle,p.dataLabelsStyle);m.series.dataLabelsColor=r.color;
m.series.dataLabelsAltColor=p.dataLabelsEnableAltColor&&(p.dataLabelsAltColor||d.dataLabelsAltColor);m.series.dataLabelsFont=h.combineFontString(r);m.series.dataLabelsHorizontalAlign=p.dataLabelsHorizontalAlign||"center";m.series.dataLabelsVerticalAlign=p.dataLabelsVerticalAlign||"middle";m.series.dataLabelsAngle=p.dataLabelsAngle;m.series.dataLabelsMaxWidth=p.dataLabelsMaxWidth;var u=g.mixin({},r,p.dataLabelsLabelStyle);m.series.dataLabelsLabelColor=u.color;m.series.dataLabelsLabelFont=h.combineFontString(u);
m.series.dataLabelsPercentColor=r.color;m.series.dataLabelsPercentFont=h.combineFontString(r);k.isColumnBarLike(c.type)&&(m.series.showColumnBarBackground=p.showColumnBarBackground,m.series.columnBarBackgroundColor=p.columnBarBackgroundColor||d.columnBarBackground&&d.columnBarBackground.backgroundColor,m.series.columnBarBackgroundColor&&(m.series.columnBarBackgroundColor=1>p.columnBarBackgroundOpacity?a.getColorWithAlpha(m.series.columnBarBackgroundColor,p.columnBarBackgroundOpacity):m.series.columnBarBackgroundColor),
m.series.renderColumnBarsInOppositeDirections=p.renderColumnBarsInOppositeDirections);k.hasAxis(c.type)&&(m.series.baseLineValue=p.yAxis.baseLineValue);c.type===k.DONUT&&(m.series.donutHolePercent=void 0!==p.donutHolePercent?p.donutHolePercent:h.DEFAULT_DONUT_HOLE_PERCENT,m.series.donutGap=void 0!==p.donutGap?p.donutGap:h.DEFAULT_DONUT_GAP,m.series.donutArcPercent=void 0!==p.donutArcPercent?p.donutArcPercent:h.DEFAULT_DONUT_ARC_PERCENT,m.series.donutArcPercent=Math.min(100,Math.max(50,m.series.donutArcPercent)));
c.type===k.GAUGE&&(m.series.donutHolePercent=void 0!==p.gaugeHolePercent?p.gaugeHolePercent:h.DEFAULT_GAUGE_HOLE_PERCENT,m.series.donutGap=void 0!==p.gaugeGap?p.gaugeGap:h.DEFAULT_GAUGE_GAP,m.series.startAngle=void 0!==p.gaugeStartAngle?p.gaugeStartAngle:h.DEFAULT_GAUGE_ANGLE,m.series.donutArcPercent=void 0!==p.gaugeArcPercent?p.gaugeArcPercent:h.DEFAULT_GAUGE_ARC_PERCENT,m.series.donutArcPercent=Math.min(100,Math.max(50,m.series.donutArcPercent)),m.series.donutShowIcons=p.showChartIcons,p.gaugeShowArrow&&
(m.series.gaugeShowArrowIndicator=!0,m.series.donutGap=0,100!==m.series.donutArcPercent&&(m.series.startAngle=0),m.series.gaugeArrowIndicatorLineColor=p.gaugeArrowLineColor||d.gauge&&d.gauge.arrowIndicator.lineColor,m.series.gaugeArrowIndicatorFillColor=p.gaugeArrowFillColor||d.gauge&&d.gauge.arrowIndicator.backgroundColor),r=g.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeLabelStyle),m.series.gaugeMainLabelPosition=p.gaugeLabelPlacement,m.series.gaugeMainLabelFont=h.combineFontString(r),m.series.gaugeMainLabelFontColor=
p.gaugeConditionalStylingLabel?null:r.color,m.series.gaugeMainLabelFontColorFromConditionalStyling=p.gaugeConditionalStylingLabel&&!!p.conditionalStyling,m.series.gaugeMainLabelFontSize=p.gaugeLabelStyle&&p.gaugeLabelStyle.fontSize,m.series.gaugeMainLabelTextDecoration=r.textDecoration,p.gaugeShowFromToLabels&&(m.series.gaugeShowFromToLabels=p.gaugeShowFromToLabels,r=g.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeFromLabelStyle),m.series.gaugeFromLabelValue=p.gaugeRangeMin||0,m.series.gaugeFromLabelFont=
h.combineFontString(r),m.series.gaugeFromLabelFontColor=r.color,m.series.gaugeFromLabelFontSize=r.fontSize,m.series.gaugeFromLabelTextDecoration=r.textDecoration,r=g.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeToLabelStyle),m.series.gaugeToLabelValue=p.gaugeRangeMax||"",m.series.gaugeToLabelFont=h.combineFontString(r),m.series.gaugeToLabelFontColor=r.color,m.series.gaugeToLabelFontSize=r.fontSize,m.series.gaugeToLabelTextDecoration=r.textDecoration));c.type===k.WAFFLE&&(m.series.waffleDirection=
p.waffleDirection,m.series.waffleFlowStyle=p.waffleFlowStyle,m.series.waffleShowWholePictures=p.waffleShowWholePictures,m.series.waffleStretchIconsToFill=p.waffleStretchIconsToFill,m.series.waffleLabelPlacement=p.waffleLabelPlacement,m.series.waffleLabelOffset=p.waffleLabelOffset,m.series.waffleColumnSpace=p.waffleColumnSpace,m.series.waffleRowSpace=p.waffleRowSpace,m.series.waffleNumIcons=p.waffleNumIcons,m.series.waffleNumRows=p.waffleNumRows,m.series.waffleNumColumns=p.waffleNumColumns,m.series.waffleHideValue=
p.waffleHideValue,r=g.mixin({},d.waffle&&d.waffle.dataValueStyle,p.waffleValueStyle),m.series.waffleValueFont=h.combineFontString(r),m.series.waffleValueFontColor=p.waffleConditionalStylingValue?null:r.color,m.series.waffleValueFontColorFromConditionalStyling=p.waffleConditionalStylingValue&&!!p.conditionalStyling,m.series.waffleValueFontSize=r.fontSize,m.series.waffleValueTextDecoration=r.textDecoration,m.series.waffleHideLabel=p.waffleHideLabel,r=g.mixin({},d.waffle&&d.waffle.dataLabelStyle,p.waffleLabelStyle),
m.series.waffleLabelFont=h.combineFontString(r),m.series.waffleLabelFontColor=p.waffleConditionalStylingLabel?null:r.color,m.series.waffleLabelFontColorFromConditionalStyling=p.waffleConditionalStylingLabel&&!!p.conditionalStyling,m.series.waffleLabelFontSize=r.fontSize,m.series.waffleLabelTextDecoration=r.textDecoration,m.series.waffleShowLabelAbove=p.waffleShowLabelAbove);c.type===k.RING&&(m.series.show100PercentLabel=!e,m.series.ringBackgroundColor=p.ringBackgroundColor||d.ring&&d.ring.ringBackground&&
d.ring.ringBackground.backgroundColor,m.series.ringBackgroundColor&&(m.series.ringBackgroundColor=1>p.ringBackgroundOpacity?a.getColorWithAlpha(m.series.ringBackgroundColor,p.ringBackgroundOpacity):m.series.ringBackgroundColor));k.isPictureLike(c.type)&&(m.series.columnBarShowWholePictures=p.columnBarShowWholePictures);m.marker.fill="#FFFFFF";m.series.outline=null;m.series.isEditMode=n;return m};h.getComparisonSymbol=function(a){return c.getMarkerPath(c.CIRCLE,a)};h.calcColorForPoint=function(a){var b=
a.point,c=a.seriesItem,e=a.pointIndex,f=a.isOthersPoint,g=a.seriesIndex,m=a.numSeries,l=a.chartType,y=a.themeSettings,w=a.isComparisonSeries;a=a.comparisonInfo;var A=c&&c.points.length;l===k.WAFFLE&&A--;var c=c&&c.color,B=k.isSingleSeries(l)||k.isColumnBarLike(l)&&!y.renderSingleDataSeriesWithSameColor&&1===m,m=d(l,y,B?A:m),C;if(k.isLineLike(l))w&&a?e=a.color||y.comparisonInfo.lineColor:(C=m[g%m.length],e=c||C||"#000000");else if(w&&a&&a.color)e=a.color;else{b=k.isPictureLike(l)?b&&h.getPointIconStyle(b).fillColor:
b&&b.color;if(l===k.GAUGE&&f&&y.gauge.othersColor)return b||y.gauge.othersColor;if(l===k.WAFFLE&&f&&y.waffle.othersColor)return b||y.waffle.othersColor;C=C||(B?m[e%m.length]:m[g%m.length]);e=b||!k.isSingleSeries(l)&&c||C||"#000000"}return e};h.pointCanHaveColor=function(a){return k.isPictureLike(a.chartType)?!!(a.point.iconFieldInfo&&a.point.iconFieldInfo.shapeJson&&a.point.iconFieldInfo.shapeJson.g.length):!0};h.setPointColor=function(a,b){delete a.color;a.iconFieldInfo?a.iconFieldInfo.shapeJson&&
(delete a.iconFieldInfo.shapeJson.style.fillColor,delete a.iconFieldInfo.shapeJson.style.borderColor,b&&(a.iconFieldInfo.shapeJson.style.fillColor=b,a.iconFieldInfo.shapeJson.style.borderColor=b)):b&&(a.color=b)};h.calcColorForSeries=function(a){var b=a.seriesItem,c=a.seriesIndex,e=a.numSeries,f=a.chartType,h=a.themeSettings;if(k.isSingleSeries(f))return null;a=k.isColumnBarLike(f)&&!h.renderSingleDataSeriesWithSameColor&&1===e;e=d(f,h,e);c=k.isLineLike(f)?e[c%e.length]:a?null:e[c%e.length];return b&&
b.color||c||"#000000"};h.provideMissingIconsForPoints=function(a,b){if(k.isPictureLike(b)){var c,d=[];a.forEach(function(a){a.iconFieldInfo?(c=a.iconFieldInfo,d.forEach(function(a){a.iconFieldInfo=g.clone(c)}),d.length=0):c?a.iconFieldInfo=g.clone(c):d.push(a)})}};h.setWaffleChartPointIcon=function(a,b,c){var d=a&&a.shapeJson;0===b?c.forEach(function(b,c){if(b.fieldInfo||d){var e=h.getPointIconStyle(b);b.iconFieldInfo=0===c?a:a&&g.clone(a);b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&0!==c&&(b.iconFieldInfo.shapeJson.style.fillColor=
e.fillColor,b.iconFieldInfo.shapeJson.style.borderColor=e.borderColor)}}):c[b].iconFieldInfo=a;b=c[0];c=c[c.length-1];!c.iconFieldInfo&&b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&(c.iconFieldInfo=g.clone(b.iconFieldInfo),delete c.iconFieldInfo.shapeJson.style.fillColor,delete c.iconFieldInfo.shapeJson.style.borderColor)};h.getPointIconStyle=function(a,b){function c(a,b){return"number"===typeof a?a:b}var d=a&&(a.iconFieldInfo||a.icon);if(!d||!d.shapeJson)return{fillColor:null,fillAlpha:null,borderColor:null,
borderAlpha:null,borderWidth:null,borderDashArray:null};a=d.shapeJson.style;b=b&&b.considerTheme&&d.shapeJson.themeStyle;return{fillColor:a&&a.fillColor||b&&b.fillColor,fillAlpha:c(a&&a.fillAlpha,b&&b.fillAlpha),borderColor:a&&a.borderColor||b&&b.borderColor,borderAlpha:c(a&&a.borderAlpha,b&&b.borderAlpha),borderWidth:c(a&&a.borderWidth,b&&b.borderWidth),borderDashArray:a&&a.borderDashArray||b&&b.borderDashArray}};h.calcIconForPoint=function(a,b,c){if(!k.isPictureLike(c))return null;(a=a.iconFieldInfo)&&
a.shapeJson&&b&&(a=g.clone(a),a.shapeJson.themeStyle={fillColor:b,borderColor:b});return a};h.calcBackgroundIconForPoint=function(a,b,c,d){if(!k.isPictureLike(b))return null;b=d.columnBarBackgroundColor||c.columnBarBackground&&c.columnBarBackground.backgroundColor;return(a=a.iconFieldInfo)&&a.shapeJson&&b?(a=g.clone(a),a.shapeJson.themeStyle={fillColor:b,borderColor:b},a):null};h.combineFontString=function(a){a=a||{};return(a.fontStyle||"normal")+" normal "+(a.fontWeight||"normal")+" "+((a.fontSize||
e.CHART_DATA_FONT_SIZE)+"px")+" "+(a.fontFamily||e.DEFAULT_FONT_FAMILY_CLASSIC)};return h})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(g,f,e,k,c,b){var a=f("dojox.charting.Theme",k,{});g.mixin(a,{defineColors:function(a){a=a||{};var d,e=[],f=a.num||5;if(a.colors){d=a.colors.length;for(var g=0;g<f;g++)e.push(a.colors[g%d]);return e}return a.hue?b.generate(c.fromHsv(a.hue,
a.saturation||100,((a.high||90)+(a.low||30))/2),"monochromatic").colors:a.generator?c.Palette.generate(a.base,a.generator).colors:e},generateGradient:function(a,b,c){a=g.delegate(a);a.colors=[{offset:0,color:b},{offset:1,color:c}];return a},generateHslColor:function(a,b){a=new e(a);var d=a.toHsl();b=c.fromHsl(d.h,d.s,b);b.a=a.a;return b},generateHslGradient:function(b,f,g,k){b=new e(b);var d=b.toHsl();g=c.fromHsl(d.h,d.s,g);k=c.fromHsl(d.h,d.s,k);g.a=k.a=b.a;return a.generateGradient(f,g,k)}});a.defaultMarkers=
k.defaultMarkers;a.defaultColors=k.defaultColors;a.defaultTheme=k.defaultTheme;return a})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(g,f,e,k,c,b){var a=e("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var c=a.defaultTheme;f.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){this[a]=
g.delegate(c[a],b[a])},this);b.seriesThemes&&b.seriesThemes.length?(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||a.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?g.clone(b.markers):g.delegate(a.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},
clone:function(){var a=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});f.forEach("clone clear next skip addMixin post getTick".split(" "),function(b){this.hasOwnProperty(b)&&(a[b]=this[b])},this);return a},
clear:function(){this._current=0},next:function(a,b,e){var d=c.merge,f;if(this.colors){f=g.delegate(this.series);var d=g.delegate(this.marker),h=new k(this.colors[this._current%this.colors.length]),l;f.stroke&&f.stroke.color?(f.stroke=g.delegate(f.stroke),l=new k(f.stroke.color),f.stroke.color=new k(h),f.stroke.color.a=l.a):f.stroke={color:h};d.stroke&&d.stroke.color?(d.stroke=g.delegate(d.stroke),l=new k(d.stroke.color),d.stroke.color=new k(h),d.stroke.color.a=l.a):d.stroke={color:h};!f.fill||f.fill.type?
f.fill=h:(l=new k(f.fill),f.fill=new k(h),f.fill.a=l.a);!d.fill||d.fill.type?d.fill=h:(l=new k(d.fill),d.fill=new k(h),d.fill.a=l.a)}else f=this.seriesThemes?d(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,d=this.markerThemes?d(this.marker,this.markerThemes[this._current%this.markerThemes.length]):f;f={series:f,marker:d,symbol:d&&d.symbol||this._markers[this._current%this._markers.length]};++this._current;b&&(f=this.addMixin(f,a,b));e&&(f=this.post(f,a));return f},
skip:function(){++this._current},addMixin:function(a,b,e,k){if(g.isArray(e))f.forEach(e,function(c){a=this.addMixin(a,b,c)},this);else{var d={};"color"in e&&("line"==b||"area"==b?(g.setObject("series.stroke.color",e.color,d),g.setObject("marker.stroke.color",e.color,d)):g.setObject("series.fill",e.color,d));f.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(a){var b="marker"+a.charAt(0).toUpperCase()+a.substr(1),c=b in e;a in e&&(g.setObject("series."+a,e[a],
d),c||g.setObject("marker."+a,e[a],d));c&&g.setObject("marker."+a,e[b],d)});"marker"in e&&(d.symbol=e.marker,d.symbol=e.marker);a=c.merge(a,d)}k&&(a=this.post(a,b));return a},post:function(a,b){var d=a.series.fill,e;return!this.noGradConv&&this.shapeSpaces[d.space]&&"linear"==d.type&&("bar"==b?e={x1:d.y1,y1:d.x1,x2:d.y2,y2:d.x2}:this.noRadialConv||"shape"!=d.space||"slice"!=b&&"circle"!=b||(e={type:"radial",cx:0,cy:0,r:100}),e)?c.merge(a,{series:{fill:e}}):a},getTick:function(a,b){var d=this.axis.tick;
a+="Tick";var e=c.merge;d?this.axis[a]&&(d=e(d,this.axis[a])):d=this.axis[a];b&&(d?b[a]&&(d=e(d,b[a])):d=b[a]);return d},inspectObjects:function(a){f.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){a(this[b])},this);this.seriesThemes&&f.forEach(this.seriesThemes,a);this.markerThemes&&f.forEach(this.markerThemes,a)},reverseFills:function(){this.inspectObjects(function(a){a&&a.fill&&(a.fill=b.reverse(a.fill))})},addMarker:function(a,b){this.markers[a]=b;this._buildMarkerArray()},
setMarkers:function(a){this.markers=a;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var a in this.markers)this._markers.push(this.markers[a])}});g.mixin(a,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],
defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",
orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},
outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});return a})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(g,f){var e=f.getObject("lang.utils",!0,g),k={},c=Object.prototype.toString,b=function(a){if(a)switch(c.call(a)){case "[object Array]":return a.slice(0);
case "[object Object]":return f.delegate(a)}return a};f.mixin(e,{coerceType:function(a,b){switch(typeof a){case "number":return Number(eval("("+b+")"));case "string":return String(b);case "boolean":return!!eval("("+b+")")}return eval("("+b+")")},updateWithObject:function(a,c,f){if(!c)return a;for(var d in a)if(d in c&&!(d in k)){var h=a[d];h&&"object"==typeof h?e.updateWithObject(h,c[d],f):a[d]=f?e.coerceType(h,c[d]):b(c[d])}return a},updateWithPattern:function(a,c,f,g){if(!c||!f)return a;for(var d in f)d in
c&&!(d in k)&&(a[d]=g?e.coerceType(f[d],c[d]):b(c[d]));return a},merge:function(a,b){if(b){var d=c.call(a),g=c.call(b),k,n;switch(g){case "[object Array]":if(g==d){d=Array(Math.max(a.length,b.length));k=0;for(g=d.length;k<g;++k)d[k]=e.merge(a[k],b[k]);return d}return b.slice(0);case "[object Object]":if(g==d&&a){d=f.delegate(a);for(k in b)k in a?(g=a[k],n=b[k],n!==g&&(d[k]=e.merge(g,n))):d[k]=f.clone(b[k]);return d}return f.clone(b)}}return b}});return e})},"dojox/gfx/gradutils":function(){define(["./_base",
"dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,f,e,k){function c(b,a){if(0>=b)return a[0].color;var c=a.length;if(1<=b)return a[c-1].color;for(var e=0;e<c;++e){var f=a[e];if(f.offset>=b)return e?(a=a[e-1],k.blendColors(new k(a.color),new k(f.color),(b-a.offset)/(f.offset-a.offset))):f.color}return a[c-1].color}g=g.gradutils={};g.getColor=function(b,a){var d;if(b){switch(b.type){case "linear":d=e.rotate(-Math.atan2(b.y2-b.y1,b.x2-b.x1));var f=e.project(b.x2-b.x1,b.y2-b.y1);a=e.multiplyPoint(f,
a);var g=e.multiplyPoint(f,b.x1,b.y1),f=e.multiplyPoint(f,b.x2,b.y2),f=e.multiplyPoint(d,f.x-g.x,f.y-g.y).x;d=e.multiplyPoint(d,a.x-g.x,a.y-g.y).x/f;break;case "radial":d=a.x-b.cx,a=a.y-b.cy,d=Math.sqrt(d*d+a*a)/b.r}return c(d,b.colors)}return new k(b||[0,0,0,0])};g.reverse=function(b){if(b)switch(b.type){case "linear":case "radial":if(b=f.delegate(b),b.colors){for(var a=b.colors,c=a.length,e=0,g,k=b.colors=Array(a.length);e<c;++e)g=a[e],k[e]={offset:1-g.offset,color:g.color};k.sort(function(a,b){return a.offset-
b.offset})}}return b};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineMarkers":function(){define(["dojox/charting/SimpleTheme"],function(g){var f={NONE:"None",CIRCLE:"Circle",SQUARE:"Square",DIAMOND:"Diamond",CROSS:"Cross",X:"X",TRIANGLE:"Triangle",TRIANGLE_INVERTED:"TriangleInverted"},e=[f.CIRCLE,f.SQUARE,f.DIAMOND,f.CROSS,f.X,f.TRIANGLE,f.TRIANGLE_INVERTED],k={},c;for(c in f)k[f[c]]=c;f.DEFAULT_SIZE=3;f.isSupported=function(b){return-1!==e.indexOf(b)};f.getMarkerAt=
function(b){return e[b%e.length]};f.getMarkerPath=function(b,a){a=(0<=a?a:f.DEFAULT_SIZE)/f.DEFAULT_SIZE;switch(b){case f.CIRCLE:return"m"+-3*a+",0 c0,"+-4*a+" "+6*a+","+-4*a+" "+6*a+",0 m"+-6*a+",0 c0,"+4*a+" "+6*a+","+4*a+" "+6*a+",0";case f.SQUARE:return"m"+-3*a+","+-3*a+" l0,"+6*a+" "+6*a+",0 0,"+-6*a+" z";case f.DIAMOND:return"m0,"+-3*a+" l"+3*a+","+3*a+" "+-3*a+","+3*a+" "+-3*a+","+-3*a+" z";case f.CROSS:return"m0,"+-3*a+" l0,"+6*a+" m"+-3*a+","+-3*a+" l"+6*a+",0";case f.X:return"m"+-3*a+","+
-3*a+" l"+6*a+","+6*a+" m0,"+-6*a+" l"+-6*a+","+6*a+"";case f.TRIANGLE:return"m"+-3*a+","+3*a+" l"+3*a+","+-6*a+" "+3*a+","+6*a+" z";case f.TRIANGLE_INVERTED:return"m"+-3*a+","+-3*a+" l"+3*a+","+6*a+" "+3*a+","+-6*a+" z"}return g.defaultMarkers[k[b]]||""};f.getMarkerPathAt=function(b,a){return f.getMarkerPath(f.getMarkerAt(b),a)};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartJsonCleaner":function(){define(["../ChartTypes","../../legends/ChartLegendTypes","../../legends/ChartLegendPlacements",
"./_ChartTypeSupports","../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],function(g,f,e,k,c){return{cleanUpJson:function(b,a,d){var h=b.type,l=b.isMultiFeatureChart,m=b.seriesItems.length,n=b.visualProperties;d=d&&d.isBenchmarked;g.isSingleSeries(h)&&1<m&&(m=b.seriesItems.length=1);g.hasBackgroundImage(h)||delete n.backgroundImageData;g.isConditionalStylingSupported(h)||delete n.conditionalStyling;g.isSortingSupported(h,m,l)||delete n.sorting;g.canFilterVariables(h,l)||delete n.filter;
g.isComparisonSupported(h,l)<m&&delete b.comparisonInfo;2===m&&b.comparisonInfo&&(n.showColumnBarBackground=!1,n.isStacked=!1,n.showValuesAsWeightInStack=!1);l&&b.comparisonInfo&&(b.comparisonInfo.chartType=h);n.legend&&n.legend.series&&n.legend.type===f.SERIES&&!g.isSeriesLegendSupported(h,m,l,!!b.comparisonInfo&&n.legend.series.showComparison)&&(n.legend.series.placement=e.NONE);g.isRenderInOppositeDirectionsSupported(h,m,l)||delete n.renderColumnBarsInOppositeDirections;g.isStackSupported(h,m,
l)||(n.isStacked=!1,n.showValuesAsWeightInStack=!1);n.renderColumnBarsInOppositeDirections&&n.isStacked&&(n.renderColumnBarsInOppositeDirections=!0,n.isStacked=!1,n.showValuesAsWeightInStack=!1);n.isStacked||(n.showValuesAsWeightInStack=!1);if(n.yAxis){if(n.isStacked||n.renderColumnBarsInOppositeDirections)n.yAxis.baseLineValue=0;g.isShowDataAsWeightSupported(h)&&!n.showValuesAsWeightInStack||delete n.yAxis.showValuesAsWeightsInSeries}g.isPictureLike(h)?b.seriesItems.forEach(function(a){a.points&&
a.points.forEach(function(a){delete a.color})}):b.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.iconFieldInfo})});g.isSingleSeries(h)&&b.seriesItems.forEach(function(a){delete a.color});g.isLineLike(h)&&b.seriesItems.forEach(function(a){l?(delete a.color,delete a.lineThickness,delete a.lineStyle,delete a.lineMarker,delete a.lineMarkerColor,delete a.lineMarkerFillColor,delete a.lineMarkerSize):delete a.multiFeatureLineStyles});if(h===g.GAUGE){if((m=b.seriesItems[0]&&
b.seriesItems[0].points&&b.seriesItems[0].points)&&m.length){m.length=Math.min(2,m.length);m[1]&&delete m[1].fieldInfo;var p=m[0].fieldInfo;p&&c.isFieldInfoInPercentState(p)&&(delete n.gaugeRangeMin,delete n.gaugeRangeMax)}90<n.gaugeArcPercent&&(n.gaugeShowFromToLabels=!1)}h===g.WAFFLE&&(m=b.seriesItems[0]&&b.seriesItems[0].points&&b.seriesItems[0].points)&&m.length&&(1<m.length&&delete m[m.length-1].fieldInfo,(p=m[0].fieldInfo)&&c.isFieldInfoInPercentState(p)&&(delete n.waffleRangeMin,delete n.waffleRangeMax),
1<m.length&&delete m[m.length-1].fieldInfo,2<m.length?delete n.waffleRangeMin:delete n.legend);b=k.cleanUpJsonForChartType(b,a);d&&(n=b.visualProperties,n.renderColumnBarsInOppositeDirections=!1,n.isStacked=!1,n.showValuesAsWeightInStack=!1,n.yAxis&&n.yAxis.showValuesAsWeightsInSeries&&(delete n.yAxis.showValuesAsWeightsInSeries,delete n.yAxis.showPercentSymbol));return b},supportsVisualProperty:function(b,a,c){return k.supportsVisualProperty(b,a,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendTypes":function(){define([],
function(){var g={SERIES:"Series",MIN_MAX:"MinMax",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.SERIES}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendPlacements":function(){define([],function(){var g={NONE:"None",LEFT:"Left",RIGHT:"Right",TOP:"Top",BOTTOM:"Bottom",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?
f:g.NONE},isOnSide:function(f){return f===g.LEFT||f===g.RIGHT}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartTypeSupports":function(){define("esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes ./chartTypes/classic/_ColumnBarLike ./chartTypes/classic/_LineLike ./chartTypes/classic/_Pie ./chartTypes/graphic/_ColumnBarLike ./chartTypes/graphic/_ColumnBarPictureLike ./chartTypes/graphic/_LineLike ./chartTypes/graphic/_Pie ./chartTypes/graphic/_Donut ./chartTypes/graphic/_Ring ./chartTypes/graphic/_Gauge ./chartTypes/graphic/_Waffle".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p){var t={},q={};q[f.COLUMN]=q[f.BAR]=e;q[f.LINE]=k;q[f.PIE]=c;var v={};v[f.COLUMN]=v[f.BAR]=b;v[f.PICTURE_COLUMN]=v[f.PICTURE_BAR]=a;v[f.LINE]=v[f.VERTICAL_LINE]=d;v[f.PIE]=h;v[f.DONUT]=l;v[f.RING]=m;v[f.GAUGE]=n;v[f.WAFFLE]=p;t.cleanUpJsonForChartType=function(a,b){return g.filterByPattern(a,(b?v:q)[a.type])};t.supportsVisualProperty=function(a,b,c){b=b.split(".");var d=(a=(c?v:q)[a])&&a.visualProperties;b.forEach(function(a){d=d&&d[a]});return d};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_ColumnBarLike":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},
barBorders:1,columnThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_LineLike":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,
placement:1},yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},lineThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_Pie":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,
view3D:1,origin:1,title:{text:1,align:1,style:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarLike":function(){define([],function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,
backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},
yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,
series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,columnThickness:1,columnBarGap:1,columnBarOpacity:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,columnBarBackgroundColor:1,columnBarBackgroundOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,
dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,sorting:1,filter:1,conditionalStyling:1},comparisonInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarPictureLike":function(){define([],
function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,
style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,
baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},columnThickness:1,columnBarGap:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,
columnBarBackgroundColor:1,columnBarShowWholePictures:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,floatingIcons:1,floatingTexts:1,sorting:1,filter:1,conditionalStyling:1},comparisonInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_LineLike":function(){define([],
function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1,multiFeatureLineStyles:[{color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1}],points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,
plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,
hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1,nonZeroInclusive:1},legend:{type:1,series:{placement:1,placementOffset:1,
hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,lineThickness:1,lineOpacity:1,fillLineMarkers:1,lineMarkersFillOpacity:1,fillLineArea:1,lineAreaOpacity:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,filter:1},comparisonInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Pie":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,
titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,
filter:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Donut":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},
legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,donutHolePercent:1,donutGap:1,donutArcPercent:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,
dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,filter:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Ring":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,
plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,ringBackgroundColor:1,ringBackgroundOpacity:1,dataLabels:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,
floatingTexts:1,sorting:1,filter:1,conditionalStyling:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Gauge":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,
title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,gaugeHolePercent:1,gaugeRangeMin:1,gaugeRangeMax:1,gaugeGap:1,gaugeStartAngle:1,gaugeArcPercent:1,gaugeLabelPlacement:1,gaugeLabelStyle:1,gaugeShowArrow:1,gaugeArrowLineColor:1,gaugeArrowFillColor:1,gaugeConditionalStylingOthers:1,gaugeConditionalStylingLabel:1,gaugeShowFromToLabels:1,gaugeFromLabelStyle:1,gaugeToLabelStyle:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,
dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,conditionalStyling:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Waffle":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,
plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,hideOthers:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},waffleDirection:1,waffleFlowStyle:1,waffleShowWholePictures:1,waffleStretchIconsToFill:1,waffleRangeMin:1,waffleRangeMax:1,waffleLabelPlacement:1,waffleLabelOffset:1,waffleHideValue:1,waffleHideLabel:1,
waffleShowLabelAbove:1,waffleValueStyle:1,waffleLabelStyle:1,waffleColumnSpace:1,waffleRowSpace:1,waffleConditionalStylingOthers:1,waffleConditionalStylingValue:1,waffleConditionalStylingLabel:1,waffleNumIcons:1,waffleNumRows:1,waffleNumColumns:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsHorizontalAlign:1,dataLabelsVerticalAlign:1,floatingIcons:1,floatingTexts:1,conditionalStyling:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/GaugeLabelPlacements":function(){define([],
function(){var g={NONE:"None",INSIDE:"Inside",OUTSIDE:"Outside",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.NONE}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleLabelPlacements":function(){define([],function(){var g={NONE:"None",TOP:"Top",RIGHT:"Right",BOTTOM:"Bottom",LEFT:"Left",INSIDE:"Inside",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?
f:g.NONE}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleDirections":function(){define([],function(){var g={UP_RIGHT:"Up",DOWN_RIGHT:"Down",RIGHT_UP:"Right",LEFT_UP:"Left",UP_LEFT:"UpLeft",DOWN_LEFT:"DownLeft",RIGHT_DOWN:"RightDown",LEFT_DOWN:"LeftDown",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},toSupportedValue:function(f){return g.isSupported(f)?f:g.DOWN_RIGHT},isLeftRightStartPosition:function(f){return f===g.RIGHT_UP||
f===g.LEFT_UP||f===g.RIGHT_DOWN||f===g.LEFT_DOWN},isLeftGrowth:function(f){return f===g.UP_LEFT||f===g.DOWN_LEFT},isDownGrowth:function(f){return f===g.RIGHT_DOWN||f===g.LEFT_DOWN},toFlowDirectionPosition:function(f){switch(f){case g.UP_RIGHT:return["Right","Down"];case g.DOWN_RIGHT:return["Right","Up"];case g.RIGHT_UP:return["Up","Left"];case g.LEFT_UP:return["Up","Right"];case g.UP_LEFT:return["Left","Down"];case g.DOWN_LEFT:return["Left","Up"];case g.RIGHT_DOWN:return["Down","Left"];case g.LEFT_DOWN:return["Down",
"Right"]}},fromFlowDirectionPosition:function(f,e){if("Right"===f)return"Down"===e?g.UP_RIGHT:g.DOWN_RIGHT;if("Up"===f)return"Left"===e?g.RIGHT_UP:g.LEFT_UP;if("Left"===f)return"Down"===e?g.UP_LEFT:g.DOWN_LEFT;if("Down"===f)return"Left"===e?g.RIGHT_DOWN:g.LEFT_DOWN}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/GridChartUtil":function(){define(["dojo/string","../../../charts/utils/ChartTypes","../GridDataUtil","dojo/i18n!esri/nls/jsapi"],function(g,f,e,k){k=k.geoenrichment.dijit.ReportPlayer.Grid;
var c={getSupportedChartTypes:function(b){return c._canViewTableAsChart(b)&&[f.COLUMN,f.BAR,f.LINE,f.VERTICAL_LINE,f.PIE,f.DONUT,f.RING]},getTableRowsColumnsInfos:function(b){var a=b.columns[0].field,d=c._hasBigTitleCell(b)?1:0,e=b.store.data[d];if(!e)return null;var f=[],m=[];b.columns.forEach(function(a,b){0!==b&&m.push({label:e[a.field]||g.substitute(k.columnN,[b+1]),id:b+""})});b.store.data.forEach(function(b,c){c>d&&f.push({label:b[a]||c+1+"",id:c+""})});return{rowInfos:f,columnInfos:m}},_canViewTableAsChart:function(b){return 2>
b.columns.length||2>b.store.data.length?!1:b.getFieldCells().length===b.store.data.length*b.columns.length||c._hasBigTitleCell(b)&&b.getFieldCells().length-1===(b.store.data.length-1)*b.columns.length?!0:!1},getChartTitle:function(b){return b.getFieldCells()[0].get("value")},_hasBigTitleCell:function(b){var a=b.getFieldCells()[0];return e.getColumnSpan(a)===b.columns.length&&!e.getRowSpan(a)},createChartSeriesItems:function(b,a){return a.seriesInRows?c._buildSeriesInRows(b,a):c._buildSeriesInColumns(b,
a)},_buildSeriesInColumns:function(b,a){var d=[],h=b.columns[0].field,l=c._hasBigTitleCell(b)?1:0;b.columns.forEach(function(a,c){if(0!==c){var f={label:"",points:[]};d.push(f);b.store.data.forEach(function(d,m){if(!(m<l))if(m===l)f.label=d[a.field]||g.substitute(k.columnN,[c+1]),f._cIndex=c;else{var n=e.getRenderedValue(b,d,a),p=d.fieldInfos[a.field];f.points.push({label:d[h]||g.substitute(k.rowN,[m+1]),value:{value:n.numericValue||0,formattedValue:n.formattedValue,decimals:p&&p.decimals},_rIndex:m})}})}});
f.isSingleSeries(a.chartType)&&0<=a.sourceId&&(d=(a=d[a.sourceId])?[a]:[]);c._resolveSeriesNames(d,!1);return d},_buildSeriesInRows:function(b,a){var d=[],h=c._hasBigTitleCell(b)?1:0,l=b.store.data[h];b.store.data.forEach(function(a,c){if(!(c<h)&&c!==h){var f={label:"",points:[]};d.push(f);b.columns.forEach(function(d,h){if(0===h)f.label=a[d.field]||g.substitute(k.rowN,[c+1]),f._rIndex=c;else{var m=e.getRenderedValue(b,a,d),n=a.fieldInfos[d.field];f.points.push({label:l[d.field]||h+1+"",value:{value:m.numericValue||
0,formattedValue:m.formattedValue,decimals:n&&n.decimals},_cIndex:h})}})}});f.isSingleSeries(a.chartType)&&0<=a.sourceId&&(d=(a=d[a.sourceId])?[a]:[]);c._resolveSeriesNames(d,!0);return d},_resolveSeriesNames:function(b,a){c._resolveItems(b,a);b.forEach(function(b){c._resolveItems(b.points,!a)})},_resolveItems:function(b,a){var c={};b.forEach(function(a){(c[a.label]=c[a.label]||[]).push(a)});for(var e in c)1<c[e].length&&c[e].forEach(function(b){b.label+=" ("+g.substitute(k[a?"rowN":"columnN"],[b[a?
"_rIndex":"_cIndex"]+1])+")"});b.forEach(function(b){delete b[a?"_rIndex":"_cIndex"]})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridHighlightSupport":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-construct","esri/dijit/geoenrichment/utils/MouseUtil"],function(g,f,e,k){return g(null,{canHighlightHeader:!1,canHighlightFirstColumn:!0,_highlightOnHoverHandles:null,_setHighlightRowsOnHoverAttr:function(c){this._setHighlightOnHover(c,!1)},setCellRowHighlighted:function(c,
b){(c=c&&c.domNode&&this.queryCells({rowIndex:c.gridData.index}))&&c.forEach(function(a){this.setCellHighlighted(a,b)},this)},_setHighlightColumnsOnHoverAttr:function(c){this._setHighlightOnHover(c,!0)},setCellColumnHighlighted:function(c,b){(c=c&&c.domNode&&this.queryCells({columnIndex:c.column.index}))&&c.forEach(function(a){this.setCellHighlighted(a,b)},this)},setCellHighlighted:function(c,b){if(c&&c.domNode)if(!b)c.__highlightScreen&&(c.__highlightScreen.style.display="none");else if(this.canHighlightHeader||
0!==c.gridData.index)if(this.canHighlightFirstColumn||0!==c.column.index)c.__highlightScreen=c.__highlightScreen||e.create("div",{"class":"fieldCellHighlightScreen esriGEAbsoluteStretched"},c.domNode,"first"),c.__highlightScreen.style.display=""},_setHighlightOnHover:function(c,b){function a(){var a;d.getFieldCells().forEach(function(b){d.setCellHighlighted(b,!1);k.isMouseOver(b&&b.domNode)&&(a=b)});return a}if(this.domNode){var d=this;this._highlightOnHoverHandles&&this._highlightOnHoverHandles.forEach(function(a){a.remove()});
if(c){this._highlightOnHoverHandles=[];var e;this._highlightOnHoverHandles.push(f(d.domNode,"mouseover",function(){e&&e.remove();e=f(document.body,"mousemove",function(){k.isMouseOver(d.domNode)||(a(),e.remove())})}));this._highlightOnHoverHandles.push(f(d.domNode,"mousemove",function(){var c=a();c&&d[b?"setCellColumnHighlighted":"setCellRowHighlighted"](c,!0)}));this._highlightOnHoverHandles.push(f(d.domNode,"mouseout",function(){a()}));this._highlightOnHoverHandles.forEach(function(a){d.own(a)})}}}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridFilterSupport":function(){define("esri/dijit/geoenrichment/when dojo/_base/declare dojo/dom-construct ./coreUtils/GridFilterUtil ../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi".split(" "),function(g,f,e,k,c,b){b=b.geoenrichment.dijit.ReportPlayer.Grid;return f(null,{presetFilter:null,ignorePresetFilter:!1,_filterStats:null,_filterRanges:null,_numShownElements:null,_emptyDiv:null,_applyFilterToStoreData:function(){if(!this.ignorePresetFilter){var a=
this._getSetRanges();this._emptyDiv&&e.destroy(this._emptyDiv);this._emptyDiv=null;this.mainNode.style.display="";a&&a.length&&(this._numShownElements=k.filterGridData(this,a).numRowsShown,this._numShownElements||(this._emptyDiv=e.create("div",{"class":"esriGEAbsoluteStretched esriGENoDataPlaceHolder"},this.domNode),e.create("div",{"class":"esriGENoDataPlaceHolderLabel",innerHTML:b.noTableData},this._emptyDiv),this.mainNode.style.display="none",this._emptyDiv.style.paddingTop=(this.getHeight(!1,!1)-
20)/2+"px"))}},_getSetRanges:function(){if(!this.presetFilter||this.presetFilter.ranges&&!this.viewModel.dynamicReportInfo)return this._filterRanges;var a=this.getFilterRanges();return this._filterRanges=a&&a.map(function(b){var d=c.filterData(b.dataArray,1===a.length||this.presetFilter.columnIndex===b.columnIndex?this.presetFilter:{method:c.NONE});return{fieldName:b.fieldName,min:d[0],max:d[d.length-1]}},this)},getFilterRanges:function(){return(this._filterStats=k.collectStatsForVariables(this))&&
this._filterStats.filterRanges.length?this._filterStats.filterRanges:null},setFilterRanges:function(a){var b=this;this.presetFilter=null;this._filterRanges=a;return g(this.refresh(),function(){return b._chartViewInfo&&b.tableToChart(b._chartViewInfo)})},getNumElementsTotal:function(){return this._filterStats&&this._filterStats.numRowsTotal||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFilterUtil":function(){define("dojo/string ../../supportClasses/tableJson/TableJsonResizeUtil ../../supportClasses/tableJson/TableJsonUtil ./sorting/GridSortUtil ./sorting/GridRowStyler ./GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/JsonXmlConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var l={collectStatsForVariables:function(c){var e=0,f=[],k={};if(2>c.columns.length||3>c.store.data.length)return null;var m=l.getFirstFilterableRowIndex(c)-1;c.columns.forEach(function(l,n){var p,q={alias:null,fieldName:l.field,columnIndex:n,min:Infinity,max:-Infinity,decimals:0,dataArray:[]};c._getOriginalData().forEach(function(f,h){f=b.getRenderedValue(c,f,l);h<=m?q.alias=q.alias||h===m&&d.unrichHTML(f.formattedValue):"number"===
typeof f.numericValue&&(f=f.numericValue,q.min=Math.min(q.min,f),q.max=Math.max(q.max,f),q.decimals=Math.max(q.decimals,a.getPlaces(f)),q.dataArray.push(f),e++,p=!0,k[h]=!0)});p&&(q.alias=q.alias||g.substitute(h.columnN,[n+1]),f.push(q),q._cIndex=n)});var v={};f.forEach(function(a){(v[a.alias]=v[a.alias]||[]).push(a)});for(var r in v)1<v[r].length&&v[r].forEach(function(a){a.alias+=" ("+g.substitute(h.columnN,[a._cIndex+1])+")"});f.forEach(function(a){delete a._cIndex});return 1<e&&{filterRanges:f,
numVariablesTotal:e,numRowsTotal:Object.keys(k).length}},getFirstFilterableRowIndex:function(a){var c=a._getOriginalData(),d=a.columns[0].field,e=(d=b.getDataColumnSpan(c[0],d)===a.columns.length&&!b.getDataRowSpan(c[0],d))?1:0;a=a.columns.some(function(a){return b.isVariableLikeFieldCell(b.getFieldInfo({gridData:c[e],column:a}))});return d?a?1:2:a?0:1},filterGridData:function(a,d){var h=[],g=0,m=0,n={};d.forEach(function(a){n[a.fieldName]=a});a._saveOriginalData();var r=l.getFirstFilterableRowIndex(a)-
1;d=k.getSortableDataInfo(a);a.store.data.forEach(function(c,d){var e=!0,f;d>r&&a.columns.forEach(function(d){var h=n[d.field];if(h){var k=b.getRenderedValue(a,c,d);"number"===typeof k.numericValue&&(f=!0,k.numericValue<h.min||k.numericValue>h.max?(delete c.fieldInfos[d.field],delete c[d.field],e=!1):g++)}});e&&(h.push(c),f&&m++)});f.resizeTableJsonToFitHeight({data:{data:h,columns:a.columns}},e.getTableHeight({data:{data:a.store.data}}));if(d&&d.styleInfo){var u=h.slice(d.topData.length);c.setAlternatingColors(u,
a.columns,d.styleInfo)}a.store.data=h;return{numValuesShown:g,numRowsShown:m}}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonResizeUtil":function(){define([],function(){var g={resizeTableJsonToFitWidth:function(f,e,k){k=k&&k.columnWidths;var c=0;f.data.columns.forEach(function(a){var b=a.style.width;"string"===typeof b&&-1!==b.indexOf("%")&&(b=Number(b.replace("%",""))/100*e,a.style.width=b);c+=b});f.style.width=e;var b=e/c;f.data.columns.forEach(function(a){a.style.width*=
b});k&&k.length&&(k.forEach(function(a,b){if(b=f.data.columns[b])b.style.width=a}),g.resizeTableJsonToFitWidth(f,e))},resizeTableJsonToFitHeight:function(f,e){var g=0;f.data.data.forEach(function(b){g+=b.style.height});var c=e/g;f.data.data.forEach(function(b){b.style.height*=c})}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridSortUtil":function(){define("dojo/_base/lang dojo/dom-class dojo/dom-construct ./GridRowStyler ../GridDataUtil ../GridQueryUtil ../gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l){l=l.geoenrichment.dijit.ReportPlayer.Grid;var m={ORDER_ASC:"asc",ORDER_DES:"desc",isGridSortable:function(a){return!(!a.allowSorting||!(a.viewModel.dynamicReportInfo||a.presetSorting&&!a.ignorePresetSorting)||!m.isGridSortableInStructure(a))},isGridSortableInStructure:function(a){return!(a.isEmptyTable()||3>a.store.data.length||!m.collectHeaderRowInfoFromData(a))},getSorting:function(a){return(a=a._sortInfo||a.presetSorting)&&{field:a.field,order:a.order}},applySortingToStoreData:function(a){m.isGridSortable(a)&&
m._applySortingToStoreData(a)},setSorting:function(a,b,c){if(m.isGridSortable(a)&&b)if(a.presetSorting=null,a._sortInfo={field:b.field,order:b.order},c&&c.doNotRefresh)m._makeSortable(a);else return a.refresh()},buildSortControls:function(a){m.isGridSortable(a)&&m._makeSortable(a)},getSortRowIndexMapping:function(a){var b=m.getSorting(a);if(!b||!b.order)return null;var c={},d={};a._getOriginalData().forEach(function(a,b){d[a.id]=b});a.store.data.forEach(function(a,b){c[b]=d[a.id]});return c},getSortableDataInfo:function(a){function b(b){var c=
[],d=m.collectHeaderRowInfoFromData(a,b);if(!d)return null;b=b?a._getOriginalData().slice():g.clone(a.store.data);for(var e=0;e<d.headerRowIndex+1;e++)c.push(b.shift());return{topData:c,sortableData:b}}var c=b();c&&(c.styleInfo=k.getStyleInfo(b(!0).sortableData,a.columns));return c},_applySortingToStoreData:function(a){var b=m.getSorting(a);if(b&&b.order){a._saveOriginalData();var d=m.getSortableDataInfo(a),e=b.field,f=a.columns.filter(function(a){return a.field===e})[0];f&&d.sortableData.sort(function(d,
e){function h(b){b=c.getRenderedValue(a,b,f);return"number"===typeof b.numericValue?b.numericValue:b.formattedValue}d=h(d);var g=h(e);e=b.order===m.ORDER_DES;"number"===typeof d||"number"===typeof g?(d=Number(d),g=Number(g),d=d>g?1:d<g?-1:0):(d=String(d),g=String(g),d=d.localeCompare(g));return e?-d:d});d.styleInfo&&k.setAlternatingColors(d.sortableData,a.columns,d.styleInfo);a.store.data=d.topData.concat(d.sortableData)}},collectHeaderRowInfoFromData:function(b,c){function d(c){c=e[c];for(var d=
0,f=0;f<b.columns.length;f++){var h=a.getColumnSpannedFields(b,c,b.columns[f].field),f=f+(h&&h.length?h.length-1:0);d++}return d}var e=c?b._getOriginalData():b.store.data;c=e.length-2;for(var f,h=0;h<c;h++)if(d(h)===b.columns.length){f=h;break}if(0<=f)for(h=f+1;h<e.length;h++){if(d(h)!==b.columns.length)return null}else return null;return{headerRowIndex:f}},_makeSortable:function(a){var b=m._collectHeaderRowInfoWithCells(a);b&&(b.cells.forEach(function(b){if(!b._sortArrow){var c=e.create("div",{"class":"sortArrow sortArrowHoverIndicator"},
b.domNode),h=b.getFullStyle();c.style[h&&"left"===h.horizontalAlign?"right":"left"]="5px";b._sortArrow=c;a.viewModel.dynamicReportInfo&&(f.add(b.domNode,"esriGEClickable"),d.addNoDragClickHandler(b.contentBlock,function(c){a&&a.canSortCellFunc&&!a.canSortCellFunc(b)||m._checkCanSortOnHeaderClick(c)&&m._toggleSortForCell(b)}),d.addNoDragClickHandler(c,function(a){m._toggleSortForCell(b)}))}}),m._updateArrows(a,b))},_collectHeaderRowInfoWithCells:function(a){for(var c=a.store.data.length-2,d,e,f=0;f<
c;f++){var h=b.queryCells(a,{rowIndex:f});if(h&&h.length===a.columns.length){d=h;e=f;break}}if(d)for(f=e+1;f<a.store.data.length;f++){if(h=b.queryCells(a,{rowIndex:f}),!h||h.length!==a.columns.length)return null}else return null;return{cells:d,headerRowIndex:e}},_toggleSortForCell:function(a){var b=a.parentGrid,c=m.getSorting(b),c=c&&c.field===a.column.field?c.order:null;b.presetSorting=null;b._sortInfo={field:a.column.field,order:null};c?c===m.ORDER_DES?b._sortInfo.order=m.ORDER_ASC:c===m.ORDER_ASC&&
(b._sortInfo.order=null):b._sortInfo.order=m.ORDER_DES;b.refresh();b.onSortingChanged(m.getSorting(b))},_checkCanSortOnHeaderClick:function(a){if(a&&a.path){if(a.path.some(function(a){return"A"===a.nodeName}))return!1}else if(a&&a.srcElement&&a.srcElement.parentNode&&"A"===a.srcElement.parentNode.nodeName)return!1;return!0},_updateArrows:function(a,b){b.cells.forEach(function(b){var c=b._sortArrow;if(c){f.remove(c,"sortArrowHoverIndicator sortArrowUp sortArrowDown");h.setTooltipToNode(c,null);var d=
m.getSorting(a);d&&d.field===b.column.field?d.order===m.ORDER_ASC?f.add(c,"sortArrowUp"):d.order===m.ORDER_DES?f.add(c,"sortArrowDown"):(h.setTooltipToNode(c,l.sortTable),f.add(c,"sortArrowHoverIndicator")):(h.setTooltipToNode(c,l.sortTable),f.add(c,"sortArrowHoverIndicator"));setTimeout(function(){c.style.top=(b.getHeight()-c.clientHeight)/2+"px"},100)}})}};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridRowStyler":function(){define([],function(){var g={_getCellStyle:function(f,
e){f.style=f.style||{};f=f.style.fields=f.style.fields||{};return f[e.field]=f[e.field]||{}},_getCellStyleState:function(f){return{backgroundColor:f.backgroundColor,overrideStyle:f.overrideStyle,key:f.backgroundColor+"."+f.overrideStyle}},getStyleInfo:function(f,e){function k(b){var a;return e.some(function(c){c=g._getCellStyle(b,c);c=g._getCellStyleState(c);if(a&&a.key!==c.key)return!0;a=c})?!1:a}g.resetStyling(f,e);var c=[];return f.some(function(b){var a=k(b);if(!a)return!0;if(c.length)if(1===
c.length){if(c[0].key===a.key)return!0;c.push(a)}else{if((a.backgroundColor||a.overrideStyle)&&!c.some(function(b){return b.key===a.key}))return!0}else c.push(a)})?null:{states:c}},setAlternatingColors:function(f,e,k,c){g.resetStyling(f,e);k&&k.states.length&&(1===k.states.length&&"Default"===k.states[0].overrideStyle&&k.states.push({overrideStyle:"AlternatingRow"}),1===k.states.length&&"AlternatingRow"===k.states[0].overrideStyle&&k.states.unshift({overrideStyle:"Default"}),f.forEach(function(b,
a){var d=a%2?k.states[1]:k.states[0];e.forEach(function(a){a=g._getCellStyle(b,a);c&&c.forceOverrideOriginal?a.backgroundColor=d.backgroundColor:(a.__isStyled=!0,a.__originalBackgroundColor=a.backgroundColor,a.backgroundColor=d.backgroundColor,a.__originalOverrideStyle=a.overrideStyle);a.overrideStyle=d.overrideStyle})}))},resetStyling:function(f,e){f.forEach(function(f){e.forEach(function(c){c=g._getCellStyle(f,c);c.__isStyled&&(delete c.__isStyled,c.backgroundColor=c.__originalBackgroundColor,delete c.__originalBackgroundColor,
c.overrideStyle=c.__originalOverrideStyle,delete c.__originalOverrideStyle)})})}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/supportClasses/FilterUtil":function(){define(["esri/dijit/geoenrichment/utils/SortUtil"],function(g){var f={ABOVE_AVERAGE:"aboveAverage",BELOW_AVERAGE:"belowAverage",TOP_N:"topN",BOTTOM_N:"bottomN",RANGE:"range",NONE:"none",isSupported:function(e){for(var g in f)if(f[g]===e)return!0;return!1},isNumElementsType:function(e){return e===f.TOP_N||
e===f.BOTTOM_N},isRangeType:function(e){return e===f.RANGE},filterData:function(e,k){function c(){var a=0;e.forEach(function(b){a+=b});return a/e.length}if(!e.length)return[];e=e.slice().sort(g.compareNumeric);switch(k.method){case f.ABOVE_AVERAGE:var b=c();return e.filter(function(a){return a>b});case f.BELOW_AVERAGE:return b=c(),e.filter(function(a){return a<b});case f.TOP_N:var a=k.numElements;if(a>=e.length)return e;var d=e.slice().reverse()[a-1];return e.filter(function(a){return a>=d});case f.BOTTOM_N:a=
k.numElements;if(a>=e.length)return e;var h=e[a-1];return e.filter(function(a){return a<=h});case f.RANGE:return e.filter(function(a){return k.ranges.some(function(b){return f._checkValueMatchesRange(a,b)})});case f.NONE:return e;default:throw Error("Method is not supported!");}},_checkValueMatchesRange:function(e,f){function c(b,a,c){switch(a){case "\x3d":return b===c;case "\x3c":return b<c;case "\x3e":return b>c;case "\x3c\x3d":return b<=c;case "\x3e\x3d":return b>=c}return!1}return f.conditions.length&&
f.conditions.every(function(b){return c(e,b.operator,Number(b.value))})},getRangeStatistics:function(e){var f=-Infinity,c=Infinity;e&&e.forEach(function(b){b.conditions.forEach(function(a){"\x3e"===a.operator||"\x3e\x3d"===a.operator?f=Math.max(f,a.value):c=Math.min(c,a.value)})});return{min:f,max:c}}};return f})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function g(c,b,a,d){c=void 0===c||null===c;return c!=(void 0===b||null===b)?(b=c?-1:1,(void 0===d?a:d)?-b:b):c?
0:null}function f(c){var b=/^(.+)\s([1-9]\d*)$/.exec(c);return b?{base:b[1],number:b[2]}:/^[1-9]\d*$/.test(c)?{base:"",number:+c}:{base:c,number:0}}var e={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(c,b,a,d){d=g(c,b,a,d);if(null!==d)return d;c=Number(c);b=Number(b);d=c>b?1:c<b?-1:0;return a?-d:d},compareString:function(c,b,a,d){d=g(c,b,a,d);if(null!==d)return d;c=String(c);b=String(b);d=c.localeCompare(b);return a?-d:d}},k=/^(.+)\s([1-9]\d*)(\D*)$/;
e.compareNames=function(c,b,a,d){var h=f("string"===typeof c?c.toLowerCase():c),g=f("string"===typeof b?b.toLowerCase():b),m=null;if(h.base===g.base)m=e.compareNumeric(h.number,g.number,a,d);else{var n=k.exec(h.base);if(n){var p=k.exec(g.base);p&&n[1]===p[1]&&n[3]===p[3]&&(m=e.compareNumeric(n[2],p[2],a,d))}null===m&&(m=e.compareString(h.base,g.base,a,d))}return m||e.compareString(c,b,a,d)};e.compare=function(c,b,a,d){var f=g(c,b,a,d);if(null!==f)return f;f=typeof c;typeof b!=f&&(f="");switch(f){case "number":case "boolean":break;
case "object":c=c.valueOf();b=b.valueOf();break;default:return e.compareString(c,b,a,d)}f=c>b?1:c<b?-1:0;return a?-f:f};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridSortSupport":function(){define(["dojo/_base/declare","./coreUtils/sorting/GridSortUtil"],function(g,f){return g(null,{presetSorting:null,ignorePresetSorting:!1,allowSorting:!1,canSortCellFunc:null,_applySortingToStoreData:function(){!this.ignorePresetSorting&&f.applySortingToStoreData(this)},_buildSortControls:function(){f.buildSortControls(this)},
getSorting:function(){return f.getSorting(this)},setSorting:function(e,g){return f.setSorting(this,e,g)},getSortRowIndexMapping:function(){return f.getSortRowIndexMapping(this)},onSortingChanged:function(e){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_ResizableColumnsSupport":function(){define(["dojo/_base/declare"],function(g){return g(null,{_populateFieldForResizableColumns:function(f,e,g){var c=this;0===e.index&&(f.onManualWidthChange=function(){c._setCellWidth(f,f.getWidth());c.onColumnWidthChanged()})},
onColumnWidthChanged:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/ValueField":function(){define("dojo/_base/Color dojo/_base/declare dojo/_base/lang dojo/on dojo/sniff dojo/dom-construct dojo/dom-class dojo/dom-geometry dijit/Destroyable ./supportClasses/TextRenderer ./supportClasses/NumberAnimator esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q){function v(a){a.domNode=b.toDom("\x3cdiv class\x3d'esriGEAdjustableGridValueField'\x3e\x3cdiv class\x3d'valueField_contentBlock'\x3e\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");a.contentBlock=a.domNode.children[0];a.valueContainer=a.contentBlock.children[0];a.valueLabel=a.valueContainer.children[0]}var r=f(h,{_buildLayoutFunc:null,_parentNode:null,constructor:function(a,
b){e.mixin(this,a);this._parentNode=b;this.postCreate()},postCreate:function(){this._buildLayoutFunc(this);this["class"]&&a.add(this.domNode,this["class"]);this._parentNode&&this.placeAt(this._parentNode);this.value&&this.set("value",this.value)},get:function(a){return"value"===a?this._getValueAttr?this._getValueAttr():this.value:this[a]},set:function(a,b){"value"===a?this._setValueAttr?this._setValueAttr(b):this.value=b:this[a]=b},placeAt:function(a){b.place(this.domNode,a);return this},on:function(a,
b){this.own(k(this.domNode,a,b))},isLeftToRight:function(){return d.isBodyLtr(document)},destroy:function(){b.destroy(this.domNode);this._buildLayoutFunc=this.domNode=this._parentNode=null}});h={width:1,height:1,angle:1,opacity:1};var u={color:1,fontSize:1,lineHeight:1,fontFamily:1,fontWeight:1,fontStyle:1,textDecoration:1,backgroundColor:1,verticalAlign:1,horizontalAlign:1,horizontalPadding:1,verticalPadding:1,overrideStyle:1},y={borderTopColor:1,borderTopWidth:1,borderTopOpacity:1,borderTopStyle:1,
borderRightColor:1,borderRightWidth:1,borderRightOpacity:1,borderRightStyle:1,borderBottomColor:1,borderBottomWidth:1,borderBottomOpacity:1,borderBottomStyle:1,borderLeftColor:1,borderLeftWidth:1,borderLeftOpacity:1,borderLeftStyle:1},w=e.mixin({},h,u,y),A={verticalAlign:"top",horizontalAlign:"left",horizontalPadding:0,verticalPadding:0,angle:0,opacity:1};f=f(r,{__isValueField:!0,DEFAULT_STYLES:A,viewModel:null,fieldCellClass:null,trimTextIfOverflows:!1,autoDetectUrl:!1,valueLabel:null,fieldStyle:null,
defaultBorderStyle:null,_borderStyle:null,content:null,postCreate:function(){this._buildLayoutFunc=this._buildLayoutFunc||v;this.inherited(arguments);this.setStyle(this.fieldStyle);this.setContent(this.content);this.fieldCellClass&&(a.add(this.domNode,this.fieldCellClass),a.add(this.contentBlock,"contentBlock_"+this.fieldCellClass))},_destroyExistingContent:function(){this.content&&(this.content.destroy&&this.content.destroy(),this.contentContainer&&b.empty(this.contentContainer),this.content=null)},
getContentContainerNode:function(a){a||this._destroyExistingContent();this.contentContainer||(this.contentContainer=b.create("div",{"class":"valueField_valueBlock"},this.contentBlock,"first"));n.show(this.contentContainer);return this.contentContainer},setContent:function(a){this._destroyExistingContent();if(this.content=a)this.getContentContainerNode(!0),(a=this.content.domNode||this.content)&&a.parentNode!==this.contentContainer&&b.place(a,this.contentContainer);this.content?(b.destroy(this.valueContainer),
this.valueContainer=null):(b.destroy(this.contentContainer),this.contentContainer=null,this._restoreValueContainer());this.content||this.set("value",this._value)},_restoreValueContainer:function(){this.valueContainer||(this.valueContainer=b.toDom("\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e"),this.valueLabel=this.valueContainer.children[0])},_value:null,_getValueAttr:function(){return this._value},_setValueAttr:function(a){this._value!==
a&&(this._setValueLabelText(a),this._value=a)},_setValueLabelText:function(a){this.valueLabel&&l.renderText(this,a,this._benchmarkInfo);return a},hasOverflowText:function(){return!this.content&&l.hasOverflowText(this)},_benchmarkInfo:null,setBenchmarkInfo:function(a){this._benchmarkInfo=a},currentNumberValue:null,numberFormatFunction:null,_canAnimate:!1,setNumberValue:function(a,b,c){this.currentNumberValue=a;this.numberFormatFunction=b;this._canAnimate=c&&this.viewModel.isAnimationAllowed();this.currentNumberValue&&
this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},notifyShown:function(){this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},_animateNumber:function(){m.animateNumber(this,this.currentNumberValue,this.numberFormatFunction)},getFullStyle:function(){return e.mixin({},A,this.fieldStyle)},setStyle:function(a){a=a||{};this.fieldStyle=e.mixin(this.fieldStyle||{},a);"number"===typeof this.fieldStyle.opacity&&(this.fieldStyle.opacity=Math.max(0,Math.min(1,
this.fieldStyle.opacity)));a=void 0!==a.width||void 0!==a.height;this._applyAlignAndPaddingStyles();this._applyTransformStyles();this._applyTextStyleToDom(this.domNode);(a=this._setBorderStyle()||a)&&this._refreshLayout()},_applyAlignAndPaddingStyles:function(){this.domNode.style.textAlign=this.fieldStyle.horizontalAlign||A.horizontalAlign;var a=this.fieldStyle.verticalAlign||A.verticalAlign;this.valueLabel&&(this.valueLabel.style.paddingLeft="",this.valueLabel.style.paddingRight="",this.valueLabel.style.paddingTop=
"","number"===typeof this.fieldStyle.horizontalPadding&&(this.valueLabel.style.paddingLeft=this.fieldStyle.horizontalPadding+"px",this._allowRightPadding()&&(this.valueLabel.style.paddingRight=this.fieldStyle.horizontalPadding+"px")),"number"===typeof this.fieldStyle.verticalPadding&&"top"===a&&(this.valueLabel.style.paddingTop=this.fieldStyle.verticalPadding+"px"));this.valueContainer&&(this.valueContainer.style.verticalAlign=a);this.contentContainer&&(this.contentContainer.style.verticalAlign=a);
this.domNode.style.opacity="number"===typeof this.fieldStyle.opacity?this.fieldStyle.opacity:""},_allowRightPadding:function(){return this.viewModel&&this.viewModel.isGraphicStyle},_applyTransformStyles:function(){if(this.valueContainer){var a=c("webkit")?"webkitTransform":"transform";this.valueContainer.style[a]=0!==(Number(this.fieldStyle.angle)||0)?"rotate("+this.fieldStyle.angle+"deg)":""}},_supportedTextStyles:"color fontSize lineHeight fontFamily fontWeight fontStyle textDecoration backgroundColor".split(" "),
_applyTextStyleToDom:function(a){var b=this;this._supportedTextStyles.forEach(function(c){if(b.fieldStyle[c]){var d=b.fieldStyle[c]+("fontSize"===c||"lineHeight"===c?"px":"");"backgroundColor"===c?b._setNodeBackgroundColor(a,d):a.style[c]=d}else a.style[c]=""})},_setNodeBackgroundColor:function(a,b){var c=a===this.domNode&&this.fieldStyle.angle?this.valueContainer:a;c&&(c.style.backgroundColor=b);a===this.domNode&&this.fieldStyle.angle&&(this.domNode.style.backgroundColor="transparent")},clearTextStyle:function(){for(var a in u)delete this.fieldStyle[a];
this.setStyle()},clearLineHeight:function(){delete this.fieldStyle.lineHeight;this.setStyle()},_currentBorderKey:null,_SIDES:["Top","Right","Bottom","Left"],setDefaultBorderStyle:function(a){this.defaultBorderStyle=a;this._setBorderStyle()&&this._refreshLayout()},clearBorder:function(){for(var a in y)delete this.fieldStyle[a];this.setStyle()},_setBorderStyle:function(){var a=e.mixin({},this.defaultBorderStyle,this.fieldStyle);this._borderStyle=a;var b=this._getBorderKey(a);if(this._currentBorderKey===
b)return!1;this._currentBorderKey=b;this.domNode.style.border="";this._SIDES.forEach(function(b){var c="none",d=a["border"+b+"Color"],e=a["border"+b+"Width"],f=a["border"+b+"Style"]||"solid",h=a["border"+b+"Opacity"];d&&0<e&&0!==h&&"none"!==f&&(1>h&&(d=new g(d),d.a=h,d=d.toCss(!0)),c=e+"px "+f+" "+d);this.domNode.style["border"+b]=c},this);return!0},_getBorderKey:function(a){var b="",c;for(c in y)b+=a[c]+"_";return b},_getLeftBorder:function(){return this._borderStyle?this._borderStyle.borderLeftWidth||
0:0},_getLeftPadding:function(){return this.fieldStyle.horizontalPadding||0},_getRightBorder:function(){return this._borderStyle?this._borderStyle.borderRightWidth||0:0},_getRightPadding:function(){return this._allowRightPadding()?this.fieldStyle.horizontalPadding||0:0},_getTopBorder:function(){return this._borderStyle?this._borderStyle.borderTopWidth||0:0},_getTopPadding:function(){return this.fieldStyle.verticalPadding||0},_getBottomBorder:function(){return this._borderStyle?this._borderStyle.borderBottomWidth||
0:0},_getBottomPadding:function(){return this.fieldStyle.verticalPadding||0},getWidth:function(){return this.fieldStyle.width||0},getContentWidth:function(){return this.getWidth()-this._getLeftBorder()-this._getRightBorder()-this._getLeftPadding()-this._getRightPadding()},setWidth:function(a){this.contentBlock&&this.domNode&&(a=Math.max(0,a),this.fieldStyle.width=a,this.domNode.style.width=a+"px",a=this.getWidth()-this._getLeftBorder()-this._getRightBorder(),this.contentBlock.style.width=a+"px",this.valueContainer&&
(this.valueContainer.style.width=a+"px"),this.valueLabel&&(this.valueLabel.style.width=a-this._getLeftPadding()-this._getRightPadding()+"px"),this.contentContainer&&(this.contentContainer.style.width=a+"px"),l.renderText(this),this.onWidthChanged(),this.onSizeChanged())},getHeight:function(){return this.fieldStyle.height||0},getContentHeight:function(){return this.getHeight()-this._getTopBorder()-this._getBottomBorder()-this._getTopPadding()-this._getBottomPadding()},setHeight:function(a){this.contentBlock&&
this.domNode&&(a=Math.max(0,a),void 0!==this._minHeight&&(a=Math.max(a,this._minHeight)),this.fieldStyle.height=a,this.domNode.style.height=a+"px",a=this.getHeight()-this._getTopBorder()-this._getBottomBorder(),this.contentBlock.style.height=a+"px",this.valueContainer&&(this.valueContainer.style.height=a+"px"),this.contentContainer&&(this.contentContainer.style.height=a+"px"),l.renderText(this),this.onHeightChanged(),this.onSizeChanged())},getMinHeight:function(){return this._minHeight||0},_minHeight:void 0,
setMinHeight:function(a){this._minHeight=a;this.domNode.style.minHeight=a+"px";a=a-this._getTopPadding()-this._getBottomPadding();this.contentBlock.style.minHeight=a+"px";this.valueContainer&&(this.valueContainer.style.minHeight=a+"px");this.contentContainer&&(this.contentContainer.style.minHeight=a+"px");l.renderText(this)},_refreshLayout:function(){this.setWidth(this.getWidth());this.setHeight(this.getHeight());void 0!==this._minHeight&&this.setMinHeight(this.getMinHeight())},getAngle:function(){return this.content&&
this.content.getAngle?this.content.getAngle()||0:this.fieldStyle.angle||0},setAngle:function(a){this.content&&this.content.setAngle?this.content.setAngle(a):this.setStyle({angle:a||0})},isMouseOver:function(a){return this.domNode&&t.isMouseOverBox(this.getBBox())},getBBox:function(a){a=a&&a.noTransformation?n.noTransformPosition(this.domNode):d.position(this.domNode);return 0===this.getAngle()?a:p.getRotatedRectBox(a,this.getAngle())},_urlClickHandle:null,setUrl:function(b){this._urlClickHandle&&
this._urlClickHandle.remove();this.valueLabel&&(a[b?"add":"remove"](this.valueLabel,"esriGEAdjustableGridValueFieldHyperLink"),b&&(this._urlClickHandle=k(this.valueLabel,"click",function(){q.openUrl(q.toHttpUrl(b))})))},onWidthChanged:function(){},onHeightChanged:function(){},onSizeChanged:function(){},destroy:function(){this.viewModel=null;this._destroyExistingContent();this.inherited(arguments)}});f.SUPPORTED_LAYOUT_STYLES=h;f.SUPPORTED_TEXT_STYLES=u;f.SUPPORTED_BORDER_STYLES=y;f.SUPPORTED_STYLES=
w;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/TextRenderer":function(){define("dojo/_base/lang dojo/when dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil ./BenchmarkUtil".split(" "),function(g,f,e,k,c,b,a,d,h){return{renderText:function(b,c,d){b.valueLabel&&void 0!==c&&this._applyNewText(b,c,d);b.valueLabel&&(b.valueLabel.__hasTrimmedText=
!1);d&&(b.trimTextIfOverflows=!1);if(b.trimTextIfOverflows&&b.valueLabel&&this._getLabelInnerHTML(b)&&!a.isRichText(this._getLabelInnerHTML(b))&&(c=this.getFullText(b),c!==this._getLabelInnerHTML(b)&&this._setLabelInnerHTML(b,c),b.valueLabel.__untrimmedText=c,b.domNode.clientWidth)){c=c.trim();d=this._measureValueField(b,c);var e=d.parentH;if(!(b.valueLabel.clientHeight<=e)){var f=Math.floor(d.parentW/d.charWidth),h=c.length;c=c.substr(0,Math.max(1,Math.floor(e/d.lineHeight))*f);h>c.length&&(c=c.substr(0,
c.length-3),this._setLabelInnerHTML(b,c+"..."),b.valueLabel.__hasTrimmedText=!0);if(b.valueLabel.clientHeight>e)for(;!(!c||b.valueLabel.clientHeight<=e||this._getLabelInnerHTML(b).length<=f);)c=c.substr(0,c.length-1),this._setLabelInnerHTML(b,c+"..."),b.valueLabel.__hasTrimmedText=!0}}},_measureValueField:function(a,b){var d=c.getNodeFontSize(a.domNode),d=c.getTextBox(b,{style:"font-family:"+k.get(a.valueLabel,"fontFamily")+";font-size:"+d+"px;"});return{parentW:a.domNode.clientWidth-k.get(a.valueLabel,
"paddingLeft")-k.get(a.valueLabel,"paddingRight"),parentH:a.domNode.clientHeight-k.get(a.valueLabel,"paddingTop")-k.get(a.valueLabel,"paddingBottom"),lineHeight:d.h,charWidth:d.w/b.length,textBox:d}},getFullText:function(a){return a.valueLabel&&(a.valueLabel.__untrimmedText||this._getLabelInnerHTML(a))},hasOverflowText:function(a){return a.valueLabel&&a.valueLabel.__hasTrimmedText||a.valueLabel.clientHeight>a.domNode.clientHeight},_applyNewText:function(a,b,c){delete a.valueLabel.__untrimmedText;
c?this._applyTextForBenchmark(a,b,c):this._getLabelInnerHTML(a)!==b&&this._setLabelInnerHTML(a,b)},_applyTextForBenchmark:function(a,d,k){function m(b){return h.createBenchmarkedValue(g.mixin({text:d,fontSize:v,isGreater:k.isGreater,formattedValue:k.formattedValue,color:a.fieldStyle.color,nowrap:!0,noTextLimit:k.noTextLimit},b))}var l=this,n=a.parentGrid,v=c.getNodeFontSize(a.domNode);a.__benchmarkLabel&&e.destroy(a.__benchmarkLabel);delete a.__benchmarkLabel;if(n.infographicBenchmarkController)if(n.infographicBenchmarkController.isVariableInShape){var r=
n.infographicBenchmarkController.getIconTable();f(r.getRenderPromise(),function(){function f(a){return c.getNodesBox(a.getBoundingClientRect?[a]:a)}l._setLabelInnerHTML(a,m());var h=l._getInnerHTMLNode(a),g=f(h.children[0]),k=r.getFirstCell().content;if((k=f(k.getSvgNode?k.getSvgNode().children:k.content))&&!b.isRectInRect(g,k)){l._setLabelInnerHTML(a,d);g=f(h);h=e.create("div",null,a.domNode);h.style.position="absolute";h.style.fontSize="0px";h.innerHTML=m({text:"",color:n.infographicBenchmarkController.getOutsideShapeTextColor()});
a.__benchmarkLabel=h;var p=f(h),q=f(a.domNode),t=q.w/c.noTransformPosition(a.domNode).w;h.style.left=(k.x+k.w-q.x)/t+5+"px";h.style.top=(g.y+(g.h-p.h)/2-q.y)/t+"px"}})}else if(this._setLabelInnerHTML(a,m()),"center"===a.fieldStyle.horizontalAlign){var u=l._getInnerHTMLNode(a);a.domNode.style.marginLeft=Math.min(0,(a.getWidth()-u.children[0].clientWidth)/2)+"px"}else"right"===a.fieldStyle.horizontalAlign&&(u=l._getInnerHTMLNode(a),a.domNode.style.marginLeft=Math.min(0,a.getWidth()-u.children[0].clientWidth)+
"px");else this._setLabelInnerHTML(a,m())},_getLabelInnerHTML:function(a){return this._getInnerHTMLNode(a).innerHTML},_setLabelInnerHTML:function(b,c){c=String(c);var e=b.valueLabel;if(b.autoDetectUrl){var f=this.getFullText(b)||c;a.isUrl(f)?(b=this._getInnerHTMLNode(b),"A"===b.nodeName?(b.innerHTML=c,b.hasAttribute("href")&&b.removeAttribute("href"),b.setAttribute("href",f)):e.innerHTML="\x3ca href\x3d'"+d.toHttpsUrl(f)+"' target\x3d'_blank'\x3e"+c+"\x3c/a\x3e"):e.innerHTML=c}else e.innerHTML=c},
_getInnerHTMLNode:function(a){var b=a.valueLabel;return a.autoDetectUrl&&b.childNodes&&1===b.childNodes.length&&b.childNodes[0]&&"A"===b.childNodes[0].nodeName?b.childNodes[0]:b}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/BenchmarkUtil":function(){define(["dojo/string","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt"],function(g,
f,e){return{createBenchmarkedValue:function(k){var c="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:0px;"+(k.nowrap?"white-space:nowrap;":"")+"'\x3e";k.text&&(c+="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:"+k.fontSize+"px;'\x3e"+k.text+"\x3c/div\x3e");var b=Math.min(k.noTextLimit?100:15,k.fontSize,Math.max(k.noTextLimit?6:10,Math.round(.6*k.fontSize))),c=c+("\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:"+(k.text?2:0)+"px;font-size:0px;'\x3e"+g.substitute(k.isGreater?f:e,{fillColor:k.color||
"",size:Math.min(k.noTextLimit?100:16,k.fontSize,Math.max(k.noTextLimit?6:10,Math.round(.7*k.fontSize)))})+"\x3c/div\x3e");return c+="\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:2px;font-size:"+b+"px;color:"+k.color+"'\x3e"+k.formattedValue+"\x3c/div\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/NumberAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/Animator","esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState"],function(g,
f){return{animateNumber:function(e,k,c){f.isAnimationSuspended||(e.set("value","0"),e.__numberAnimation&&e.__numberAnimation.stop(),e.__numberAnimation=g.animateProperty({duration:375,properties:{p:{start:0,end:k,easing:"quadOut"}},progressFunction:function(b,a,d){e.domNode&&e.set("value",c(k*d))},endFunction:function(){delete e.__numberAnimation}}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/_ResizableField":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ./supportClasses/ResizeColumnRowTooltipVisualizer ./supportClasses/ResizeEngine esri/dijit/geoenrichment/utils/PageUnitsConverter esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t){t=t.geoenrichment.dijit.ReportPlayer.ValueField;return g(null,{resizable:!0,hasAllSidesSizers:!1,showSizeLabel:!1,showSizeLabelsInAllRelatedCells:!1,showColumnRowSizeTooltip:!1,showSizersOnFocus:!1,createSizersOnDemand:!0,resizeSnapNode:null,resizeRestrictNode:null,allowHorizontalResizing:!0,allowVerticalResizing:!0,sizeLabel:null,_tooltipHandles:null,postCreate:function(){this._tooltipHandles=[];this.inherited(arguments);this.resizable&&this._addCreateSizersTrigger()},
_isBeingResized:!1,_isBeingResizedDelayed:!1,_sizers:null,isBeingResized:function(){return this.resizable&&this._sizers?this._isBeingResized||this._sizers.some(function(a){return n.isMouseOver(a)})||!this.hasAllSidesSizers&&this._sizers.some(function(b){return 0<a.get(b,"opacity")}):!1},wasResizedRecently:function(){return this.isBeingResized()||this._isBeingResizedDelayed},_addCreateSizersTrigger:function(){var a=this;this.createSizersOnDemand||this._updateSizers();e(this.domNode,"mouseover",function(){a._updateSizers()})},
_createSizers:function(){var a=this;this.resizable&&!this._sizers&&(this._sizers=(this.hasAllSidesSizers?h.ALL_DIRECTIONS:[this.allowHorizontalResizing?"e":null,this.allowVerticalResizing?"s":null].filter(function(a){return!!a})).map(function(d){var e=b.create("div",null,a.domNode);a.hasAllSidesSizers?(c.add(e,(a.showSizersOnFocus?"valueField_allSidesSizer_showOnFocus":"valueField_allSidesSizer")+" "+d+"_fieldSizer"),a.fieldCellClass&&c.add(e,"fieldSizer_"+a.fieldCellClass)):"e"===d?(c.add(e,"valueField_widthSizer"),
a._tooltipHandles.push(p.setTooltipToNode(e,t.dragToChangeWidth)),a.fieldCellClass&&c.add(e,"widthSizer_"+a.fieldCellClass)):(c.add(e,"valueField_heightSizer"),a._tooltipHandles.push(p.setTooltipToNode(e,t.dragToChangeHeight)),a.fieldCellClass&&c.add(e,"heightSizer_"+a.fieldCellClass));e._dir=d;return e}),this._addResizeHandlers())},unitTesting_getSizerByDirection:function(a){this._updateSizers();return this._sizers.filter(function(b){return b._dir===a})[0]},_addResizeHandlers:function(){var a=this;
this._sizers.forEach(function(b){e(b,"mousedown",function(c){c.preventDefault();c.stopPropagation();a._setIsBeingResized(!0);a.stopEdit&&a.stopEdit();h.trackSizer({dir:b._dir,w:a.getWidth(),h:a.getHeight(),angle:a.getAngle(),supportsCtrlShift:a.hasAllSidesSizers,getThisBox:function(){return m.noTransformPosition(a.domNode)},getThisFullBox:function(){return a.getBBox({noTransformation:!0})},getSnapNodeBoxes:function(){if(!a.hasAllSidesSizers)return null;var b=a._getResizeSnapElements()||[],b=b.map(function(a){return{box:a.getBBox({noTransformation:!0}),
tolerance:3}});a.resizeSnapNode&&b.push({box:m.noTransformPosition(a.resizeSnapNode),tolerance:7});return b.length?b:null},getRestrictNodeBox:function(){return a.hasAllSidesSizers?a.resizeRestrictNode&&m.noTransformPosition(a.resizeRestrictNode):null},onPreChange:function(){a._onManualSizePreChange()},onSizeChanged:function(){a._onManualSizeChange(b._dir);a.onManualSizeChange();a._updateSizers()},onWidthChanged:function(b){a.onManualWidthChange(b)},onHeightChanged:function(b){a.onManualHeightChange(b)},
setWidth:function(b){a.parentGrid&&a.parentGrid.layoutDefaults.columnMinWidth&&(b=Math.max(b,a.parentGrid.layoutDefaults.columnMinWidth));a.setWidth(b)},setHeight:function(b){a.parentGrid&&a.parentGrid.layoutDefaults.rowMinHeight&&(b=Math.max(b,a.parentGrid.layoutDefaults.rowMinHeight));a.setHeight(b)},applyShift:function(b,c){a.onNeedShiftPositionFromResizing(b,c)},onEnd:function(){a._setIsBeingResized(!1)},onSnapped:function(b){a.onResizeSnapped(b)}})})});this.hasAllSidesSizers&&this.own(f.after(this,
"onSizeChanged",function(){(m.isNodeInLayout(a._sizers[0])||m.isNodeInLayout(a._sizers[1]))&&a._updateSizers()}))},_getResizeSnapElements:function(){},_setIsBeingResized:function(a){a?(this._isBeingResizedDelayed=this._isBeingResized=!0,c.add(this.domNode,"isBeingResized"),this.parentGrid&&c.add(this.parentGrid.domNode,"isBeingResized")):(this._isBeingResized&&this._onManualSizeChangeEnd(),this._isBeingResized=!1,c.remove(this.domNode,"isBeingResized"),this.parentGrid&&c.remove(this.parentGrid.domNode,
"isBeingResized"),m.stealFocus(),setTimeout(function(){this._isBeingResizedDelayed=!1}.bind(this),100));this._tooltipHandles.forEach(function(b){a?b.suspend():b.resume()})},updateSizers:function(){this._updateSizers()},_updateSizers:function(){function a(){var a=b.getAngle();b._sizers.forEach(function(c){h.positionSizer({sizer:c,dir:c._dir,w:b.getWidth(),h:b.getHeight(),angle:a})})}this._createSizers();if(this._sizers&&this.hasAllSidesSizers){var b=this;5<this.domNode.clientHeight?a():setTimeout(a,
100)}},_onManualSizePreChange:function(){this.onManualSizePreChange()},_onManualSizeChange:function(a){this.inherited(arguments);this.showSizeLabel&&this._showAndUpdateSizeLabel();this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&("e"===a?d.showColumnTooltip(this):"s"===a&&d.showRowTooltip(this))},_onManualSizeChangeEnd:function(){m.hide(this.sizeLabel);this.showSizeLabelsInAllRelatedCells&&this._hideRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&
d.removeTooltip();this.onManualSizeChangeEnd()},tryUpdateSizeLabel:function(){m.isNodeInLayout(this.sizeLabel)&&(this.showSizeLabel&&this._showAndUpdateSizeLabel(),this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels())},_showAndUpdateSizeLabel:function(){if(this.domNode){this.sizeLabel=this.sizeLabel||b.create("div",{"class":"elementSizeLabel"},this.domNode);m.show(this.sizeLabel);var a=this.domNode.clientWidth,c=this.domNode.clientHeight,d=l.convert(a,"px",this.viewModel.getUnits()),
e=l.convert(c,"px",this.viewModel.getUnits());this.sizeLabel.innerHTML=k.substitute(this.viewModel.provideUnits(t.elementSizeFormat),{width:this.viewModel.roundForUnits(d),height:this.viewModel.roundForUnits(e)});d=this.sizeLabel.clientHeight;this.sizeLabel.style.left=Math.round((a-this.sizeLabel.clientWidth)/2)+"px";this.sizeLabel.style.top=Math.round(20<c?(c-d)/2:-d-5)+"px"}},_showAndUpdateRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(a){a._showAndUpdateSizeLabel()})},
_hideRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(a){m.hide(a.sizeLabel)})},_getRelatedCells:function(){return this.parentGrid?this.parentGrid.getFieldCells().filter(function(a){return a!==this},this):[]},onManualSizePreChange:function(){},onManualSizeChangeEnd:function(){},onManualSizeChange:function(){},onManualWidthChange:function(a){},onManualHeightChange:function(a){},onNeedShiftPositionFromResizing:function(a,b){},onResizeSnapped:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeColumnRowTooltipVisualizer":function(){define("dojo/_base/declare dojo/string dojo/dom-construct dojo/dom-geometry esri/dijit/geoenrichment/utils/PageUnitsConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b){b=b.geoenrichment.dijit.ReportPlayer.ValueField;var a={},d=g(null,{_cell:null,_isColumn:null,_tooltip:null,constructor:function(a,b){this._cell=a;this._isColumn=b},show:function(){this.destroy();this._tooltip=e.create("div",{"class":"esriGEAdjustableGrid_resizableColumnTooltip"},document.body);this.update()},update:function(){setTimeout(this._doUpdate.bind(this))},_doUpdate:function(){if(this._tooltip&&this._cell.domNode){var a=k.position(this._cell.domNode),d=k.position(this._cell.parentGrid.domNode),
e=this._cell.viewModel;this._isColumn?(this._tooltip.innerHTML=f.substitute(e.provideUnits(b.columnWidth),{width:e.roundForUnits(c.convert(this._cell.domNode.clientWidth,"px",e.getUnits()))}),this._tooltip.style.left=a.x+(a.w-this._tooltip.clientWidth)/2+"px",this._tooltip.style.top=d.y-this._tooltip.clientHeight-10+"px"):(this._tooltip.innerHTML=f.substitute(e.provideUnits(b.rowHeight),{height:e.roundForUnits(c.convert(this._cell.domNode.clientHeight,"px",e.getUnits()))}),this._tooltip.style.left=
d.x-this._tooltip.clientWidth-10+"px",this._tooltip.style.top=a.y+(a.h-this._tooltip.clientHeight)/2+"px")}},destroy:function(){this._tooltip&&e.destroy(this._tooltip);this._tooltip=null}}),h,l;a.showColumnTooltip=function(b){a._showTooltip(b,!0)};a.showRowTooltip=function(b){a._showTooltip(b,!1)};a._showTooltip=function(b,c){l!==b&&a.removeTooltip();l=b;h?h.update():(h=new d(b,c),h.show())};a.removeTooltip=function(){h&&h.destroy();l=h=null};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeEngine":function(){define("dojo/on dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil".split(" "),
function(g,f,e,k,c,b){var a={ALL_DIRECTIONS:"e se s sw w nw n ne".split(" "),trackSizer:function(d){var e=a._getSizerInfo(d),f,m=b.getCursorPosition().clientX,n=b.getCursorPosition().clientY,p=d.w,t=d.h,q=0,v=0,r=g(document.body,"mousemove",function(h){h.preventDefault();h.stopPropagation();d.applyShift(-q,-v);v=q=0;var g=b.getCursorPosition().clientX,l=b.getCursorPosition().clientY,r=[0,0,g-m,l-n],l=g=0,u;u=d.supportsCtrlShift&&h.shiftKey;var y=d.supportsCtrlShift&&k.isCtrl(h);e.changeWVector&&e.changeHVector&&
u&&(u=c.normalizeVector(e.vector),r=c.calcDotProduct(r,u),r=[0,0,u[2]*r,u[3]*r]);d.onSnapped(null);e.changeWVector&&(g=c.calcAngleBetweenVectors(e.changeWVector,r),g=c.calcVectorLength(r)*Math.cos(g)||0);e.changeHVector&&(l=c.calcAngleBetweenVectors(e.changeHVector,r),l=c.calcVectorLength(r)*Math.cos(l)||0);g=g&&a._restricVectorDelta(g,e.changeWVector,d);l=l&&a._restricVectorDelta(l,e.changeHVector,d);r=g&&a._snapVectorDelta(g,e.calcBoundaryWVectors(p,t,l),d);u=l&&a._snapVectorDelta(l,e.calcBoundaryHVectors(p,
t,g),d);r&&r.canSnap&&u&&u.canSnap&&(r.canSnap=Math.abs(r.minDelta)<=Math.abs(u.minDelta),u.canSnap=Math.abs(u.minDelta)<Math.abs(r.minDelta));r&&r.canSnap&&(d.onSnapped(r.snapInfo),g=r.snappedDelta);u&&u.canSnap&&(d.onSnapped(u.snapInfo),l=u.snappedDelta);y&&(g*=2,l*=2);f||!g&&!l||(d.onPreChange(),f=!0);r=g||l;u=p+g;var E=t+l;r&&(y?(q=p/2-u/2,v=t/2-E/2):(y=e.calcOppositePoint(u,E),q=e.oppositePoint[0]-y[0],v=e.oppositePoint[1]-y[1]),d.applyShift(q,v),d.setWidth(u),d.setHeight(E));r&&d.onSizeChanged(h);
g&&d.onWidthChanged(h);l&&d.onHeightChanged(h)}),u=g.once(document.body,"mouseup, click",function(a){a.preventDefault();a.stopPropagation();u.remove();r.remove();d.onEnd()})},_getSizerInfo:function(a){function b(a,b){var f,h,g,k,m,l;switch(d){case "e":f=[a,b/2];h=g=[0,b/2];m=[[0,0,a,0],[0,b,a,b]];break;case "se":f=[a,b];h=[0,0];g=[0,b];k=[a,0];m=[[0,b,a,b],[0,0,a,0]];l=[[a,0,a,b],[0,0,0,b]];break;case "s":f=[a/2,b];h=k=[a/2,0];l=[[0,0,0,b],[a,0,a,b]];break;case "sw":f=[0,b];h=[a,0];g=[a,b];k=[0,0];
m=[[a,b,0,b],[a,0,0,0]];l=[[0,0,0,b],[a,0,a,b]];break;case "w":f=[0,b/2];h=g=[a,b/2];m=[[a,0,0,0],[a,b,0,b]];break;case "nw":f=[0,0];h=[a,b];g=[a,0];k=[0,b];m=[[a,0,0,0],[a,b,0,b]];l=[[0,b,0,0],[a,b,a,0]];break;case "n":f=[a/2,0];h=k=[a/2,b];l=[[0,b,0,0],[a,b,a,0]];break;case "ne":f=[a,0],h=[0,b],g=[0,0],k=[a,b],m=[[0,0,a,0],[0,b,a,b]],l=[[a,b,a,0],[0,b,0,0]]}var n=[a/2,b/2];f=c.rotatePointAroundPoint(n,f,e);h=c.rotatePointAroundPoint(n,h,e);g=g&&c.rotatePointAroundPoint(n,g,e);k=k&&c.rotatePointAroundPoint(n,
k,e);a=[h[0],h[1],f[0],f[1]];g=g&&[g[0],g[1],f[0],f[1]];k=k&&[k[0],k[1],f[0],f[1]];m=m&&m.map(function(a){return c.rotateVectorAroundPoint(a,n,e)});l=l&&l.map(function(a){return c.rotateVectorAroundPoint(a,n,e)});return{sizerPoint:f,oppositePoint:h,vector:a,changeWVector:g,changeHVector:k,boundaryWVectors:m,boundaryHVectors:l}}var d=a.dir,e=a.angle,f=b(a.w,a.h);return{oppositePoint:f.oppositePoint,vector:f.vector,changeWVector:f.changeWVector,changeHVector:f.changeHVector,calcOppositePoint:function(a,
c){return b(a,c).oppositePoint},calcBoundaryWVectors:function(a,d,e){a=b(a,d).boundaryWVectors;e&&(e=c.addLengthToVector(c.normalizeVector(f.changeHVector),e),a[0]=c.addPointToVector(a[0],[e[2],e[3]]));return a},calcBoundaryHVectors:function(a,d,e){a=b(a,d).boundaryHVectors;e&&(e=c.addLengthToVector(c.normalizeVector(f.changeWVector),e),a[0]=c.addPointToVector(a[0],[e[2],e[3]]));return a}}},_restricVectorDelta:function(a,b,e){var d=e.getRestrictNodeBox();if(!d||0>=a||!a)return a;e=e.getThisBox();
var f=c.calcVectorLength(b);b=c.addLengthToVector(b,a);b=c.addPointToVector(b,[e.x,e.y]);var h=[d.x+d.w,d.y,d.x+d.w,d.y+d.h],g=[d.x,d.y,d.x+d.w,d.y];a=[d.x,d.y+d.h,d.x+d.w,d.y+d.h];d=c.intersect2Lines(b,[d.x,d.y,d.x,d.y+d.h]);h=c.intersect2Lines(b,h);g=c.intersect2Lines(b,g);a=c.intersect2Lines(b,a);var k=c.calcVectorLength(b),l=b;[d,h,g,a].forEach(function(a){if(a&&(a=[b[0],b[1],a[0],a[1]],0<c.calcDotProduct(b,a))){var d=c.calcVectorLength(a);d<k&&(k=d,l=a)}});l=c.subtractPointFromVector(l,[e.x,
e.y]);return c.calcVectorLength(l)-f},_snapVectorDelta:function(a,b,e){var d=e.getSnapNodeBoxes()||[];if(!d.length||!a)return a;var f=e.getThisBox(),h,g,k,l=Infinity;b.forEach(function(b){b=c.addLengthToVector(b,a);b=c.addPointToVector(b,[f.x,f.y]);var e=c.calcVectorLength(b);d.forEach(function(a){var d=a.box,f=a.tolerance;[[d.x,d.y,d.x,d.y+d.h],[d.x+d.w,d.y,d.x+d.w,d.y+d.h],[d.x+d.w/2,d.y,d.x+d.w/2,d.y+d.h],[d.x,d.y,d.x+d.w,d.y],[d.x,d.y+d.h,d.x+d.w,d.y+d.h],[d.x,d.y+d.h/2,d.x+d.w,d.y+d.h/2]].forEach(function(a,
m){var n=c.intersect2Lines(b,a);n&&(n=[b[0],b[1],n[0],n[1]],0<c.calcDotProduct(b,n)&&(n=c.calcVectorLength(n)-e,Math.abs(n)<=Math.abs(l)&&Math.abs(n)<=f&&(l=n,h=a,k=d,g=2<m)))})})});return{canSnap:!!h,snapInfo:h&&{elementBox:e.getThisFullBox(),snapBox:k,to:g?h[1]:h[0],isHorizontal:g},minDelta:h?l:NaN,snappedDelta:h?a+l:NaN}},positionSizer:function(b){var d,g,k=b.sizer;k.style.display="block";var n=b.dir,p=b.w,t=b.h;b=b.angle;var q=k.offsetWidth||12,v=k.offsetHeight||12;switch(n){case "e":d=p;g=t/
2;break;case "se":d=p;g=t;break;case "s":d=p/2;g=t;break;case "sw":d=0;g=t;break;case "w":d=0;g=t/2;break;case "nw":g=d=0;break;case "n":d=p/2;g=0;break;case "ne":d=p,g=0}b&&(g=c.rotatePointAroundPoint({x:p/2,y:t/2},{x:d,y:g},b),d=g.x,g=g.y);f.set(k,{left:d-q/2+"px",top:g-v/2+"px",cursor:a._getCursorDirection(n,b)+"-resize"});if("w"===n||"e"===n)e[30>t?"hide":"show"](k);if("s"===n||"n"===n)e[30>p?"hide":"show"](k);k.style.display=""},_getCursorDirection:function(b,e){if(!e)return b;e=c.angleTo0_360Range(e);
e=Math.round(e/45);b=a.ALL_DIRECTIONS.indexOf(b)+e;return a.ALL_DIRECTIONS[b%a.ALL_DIRECTIONS.length]}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBackgroundForegroundUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(g,f){var e={renderBackground:function(f,c,b){return e._renderSection(f,c,b,!0)},renderForeground:function(f,c,b){return e._renderSection(f,c,b,!1)},_renderSection:function(k,c,b,a){var d=a?k.backgroundNode:k.foregroundNode;d&&f.empty(d);
if(!c)return null;d={};d["class"]="esriGEAbsoluteStretched "+(a?"adjustableGrid_backgroundSection":"adjustableGrid_foregroundSection");d.initialWidth=k.getAllowedWidth();d.initialHeight=k.getHeight();d.json=c;d.viewModel=k.viewModel;d.theme=k.theme;d.parentWidget=k;d.currentFeatureIndex=k.currentFeatureIndex;d.initialViewMode=k.getViewMode();d.initialSpecificViewMode=k.getSpecificViewMode();g.mixin(d,b);return k.viewModel.layoutBuilder.createElement("section",d,e._provideNode(k,a))},_provideNode:function(e,
c){return c?e.backgroundNode=e.backgroundNode||f.create("div",{"class":"adjustableGridBackgroundNode"},e.domNode,"first"):e.foregroundNode=e.foregroundNode||f.create("div",{"class":"adjustableGridForegroundNode"},e.domNode)}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFloatingTablesUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(g,f){var e={renderFloatingTables:function(k,c,b,a){var d=a?k.backgroundFloatingTablesNode:k.foregroundFloatingTablesNode;
d&&f.empty(d);if(!c)return null;d={"class":"esriGEAbsoluteStretched adjustableGrid_floatingTablesSection"};d.initialWidth=k.getAllowedWidth();d.initialHeight=k.getHeight();d.json=c;d.viewModel=k.viewModel;d.theme=k.theme;d.parentWidget=k;d.currentFeatureIndex=k.currentFeatureIndex;d.initialViewMode=k.getViewMode();d.initialSpecificViewMode=k.getSpecificViewMode();g.mixin(d,b);return k.viewModel.layoutBuilder.createElement("section",d,e._provideNode(k,a))},_provideNode:function(e,c){return c?e.backgroundFloatingTablesNode=
e.backgroundFloatingTablesNode||f.create("div",{"class":"adjustableGridFloatingTablesNode"},e.mainNode,"before"):e.foregroundFloatingTablesNode=e.foregroundFloatingTablesNode||f.create("div",{"class":"adjustableGridFloatingTablesNode"},e.mainNode,"after")}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBorderUtil":function(){define(["../../themes/PageBorderStyles","../../themes/ThemeLibrary","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes"],function(g,
f,e){var k={getBorderStyle:function(c,b,a,d,f){c=c.renderBordersFromTheme?k._getThemeBorderStyle(c,b,a,d,f):c.getViewMode()===e.EDIT?c.editModeBorderLineStyle&&k._getAllBorderStyle(d,f,c.editModeBorderLineStyle.width,c.editModeBorderLineStyle.color):c.previewModeBorderLineStyle&&k._getAllBorderStyle(d,f,c.previewModeBorderLineStyle.width,c.previewModeBorderLineStyle.color);return k._toBorderStyleFormat(c)},_getAllBorderStyle:function(c,b,a,d,e){return{l:a,r:c?a:0,t:a,b:b?a:0,color:d,style:e}},_getThemeBorderStyle:function(c,
b,a,d,e){var h=c.viewModel.getDocumentDefaultStyles(c.theme).border||f.getDefaultBorderSettings();if(h){var m=h.thickness,n=h.lineStyle,p=h.color;switch(h.style){case g.ALL:return k._getAllBorderStyle(d,e,m,p,n);case g.OUTER_ONLY:return{l:0===a.index?m:0,r:d?m:0,t:0===b.index?m:0,b:e?m:0,color:p,style:n};case g.INNER_ONLY:return{l:0<a.index?m:0,t:0<b.index?m:0,color:p,style:n};case g.HORIZONTAL_INNER_ONLY:return{t:0<b.index?m:0,color:p,style:n};case g.VERTICAL_INNER_ONLY:return{l:0<a.index?m:0,color:p,
style:n};default:return c.noThemeBorderLineStyle&&k._getAllBorderStyle(d,e,c.noThemeBorderLineStyle.width,c.noThemeBorderLineStyle.color)}}},_toBorderStyleFormat:function(c){return c&&{borderTopColor:c.color,borderTopWidth:c.t,borderTopOpacity:1,borderTopStyle:c.style,borderRightColor:c.color,borderRightWidth:c.r,borderRightOpacity:1,borderRightStyle:c.style,borderBottomColor:c.color,borderBottomWidth:c.b,borderBottomOpacity:1,borderBottomStyle:c.style,borderLeftColor:c.color,borderLeftWidth:c.l,
borderLeftOpacity:1,borderLeftStyle:c.style}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes":function(){define([],function(){return{EDIT:"edit",PREVIEW:"preview",PREVIEW_VALUES:"previewValues"}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/WaitingUtil ./GridDataUtil ./GridStyleUtil ./GridCellContentScaler ./GridCellContentSynchronizer ../../supportClasses/conditionalStyling/ConditionalStyleUtil ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes ./GridQueryUtil ./tooltip/GridCellTooltipBuilder esri/dijit/geoenrichment/ReportPlayer/config ../../../_devConfig".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y){function w(a){return a[a.parentGrid.hasRealBorders?"getContentWidth":"getWidth"]()}function A(a){return a[a.parentGrid.hasRealBorders?"getContentHeight":"getHeight"]()}var B={color:"#FF0000"},C={color:"#AAAAAA",fontStyle:"italic",fontSize:13,horizontalAlign:"center",verticalAlign:"middle"},z=g(null,{_parentState:null,constructor:function(a,b,c){var f=this;d.fitContentInsideCell(a);this._setParentState(a);c.forEach(function(c){var g=c[1];b.own(e.after(a,
c[0],function(){f._checkParentChanged(g,a)&&(d.fitContentInsideCell(a),h.syncParentFieldInfoWithElementState(a,b))}))})},_setParentState:function(a){var b=a.getFullStyle();this._parentState={width:w(a),height:A(a),horizontalAlign:b.horizontalAlign,verticalAlign:b.verticalAlign}},_checkParentChanged:function(a,b){var c;switch(a){case "width":a=w(b);this._parentState.width!==a&&(this._parentState.width=a,c=!0);break;case "height":a=A(b);this._parentState.height!==a&&(this._parentState.height=a,c=!0);
break;case "horizontalAlign":case "verticalAlign":if(a=b.getFullStyle(),this._parentState.horizontalAlign!==a.horizontalAlign||this._parentState.verticalAlign!==a.verticalAlign)this._parentState.horizontalAlign=a.horizontalAlign,this._parentState.verticalAlign=a.verticalAlign,c=!0}return c}});return g(null,{renderCellContent:function(a){var c=a.parentGrid,d=b.getFieldInfo(a);if(y.emulateErrors.reportContainerRenderError)throw Error("Error test: something crashed when building the UI layout!");try{if(d){if(d.isReportSection)return this._placeReportSectionInCell(c,
a);if(d.isInfographic)return this._placeInfographicInCell(c,a);if(d.isChart)return this._placeChartInCell(c,a);if(d.isMap)return this._placeMapInCell(c,a);if(d.isImage)return this._renderCellTooltip(a),this._placeImageInCell(c,a);if(d.isShape)return this._placeShapeInCell(c,a);d.isMissing&&a.setStyle(B);d.isUnsupportedContent&&a.setStyle(C)}this._applyRenderedContent(a,this._getRenderedContent(a));a.setContent(null);this._renderCellTooltip(a)}catch(D){if(console.log(D),!u.tables.leaveEmptyCellsUponError)throw D;
}},_renderCellTooltip:function(a){a.viewModel.dynamicReportInfo&&r.setDynamicTooltipToCell(a,a.viewModel.dynamicReportInfo.templateVariableProvider)},updateViewMode:function(a){var c=b.getFieldInfo(a);c&&(c.hasVariable||c.script||c.alias||c.isRichText)&&this._applyRenderedContent(a,this._getRenderedContent(a))},getRenderedContent:function(a){return this._getRenderedContent(a)},_getRenderedContent:function(a,c){var d=b.getFieldInfo(a);if(d)return a=this._prepareRenderContextForFieldCell(a),f.mixin(a,
c),d.isImage&&d.triggerJson&&d.triggerJson.fieldInfo&&(d=d.triggerJson.fieldInfo),m.renderFieldInfoInTableCell(d,a);c=a.gridData[a.column.field];return{formattedValue:null===c||void 0===c||"number"===typeof c&&isNaN(c)?"":c,value:c,formatFunction:null,isUnavailableData:!1,conditionalStyle:null}},_prepareRenderContextForFieldCell:function(a){var b=a.parentGrid,c=b.getViewMode()===t.EDIT,d=this._getCellBenchmarkInfoBuilder(a);return{previewValues:this._isPreviewValues(a),previewConditionalStyle:!c,
getPreviewValueFunction:b.getPreviewValueFunction,fieldData:b.viewModel.dynamicReportInfo&&b.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:b.getFeatureIndexForCell(a),rowIndex:a.gridData&&a.gridData.index,columnIndex:a.column&&a.column.index,columnField:a.column&&a.column.field,numRows:b.store.data.length,isGraphicReport:b.viewModel.isGraphicStyle,isMultiFeature:b.viewModel.dynamicReportInfo&&b.viewModel.dynamicReportInfo.isMultiFeature,presetFilter:!c&&b.presetFilter,presetSorting:!c&&
b.presetSorting,isBenchmarked:!!d,getBenchmarkInfo:d&&d.getBenchmarkInfo}},_isPreviewValues:function(a){var c=a.parentGrid;a=b.getFieldInfo(a);var d=c.getSpecificViewMode(),c=c.getViewMode()===t.PREVIEW_VALUES;a&&a.name&&0===a.name.indexOf("SiteNote")&&(c=!0);d&&a&&(d[q.RICH_TEXT]===t.PREVIEW_VALUES&&a.isRichText?c=!0:d[q.VARIABLE]===t.PREVIEW_VALUES&&(a.hasVariable||a.script)?c=!0:d[q.INFOGRAPHIC]===t.PREVIEW_VALUES&&a.isInfographic&&(c=!0));return c},_applyRenderedContent:function(c,d){d&&(this._setCellFormattedValue(c,
d),d.isUnavailableData||("number"!==typeof d.value||isNaN(d.value)||(b.setNumericCellValue(c,d.value),c.setNumberValue(d.value,d.formatFunction,c.parentGrid.enableNumberAnimation)),d.conditionalStyle?(c.setStyle(d.conditionalStyle.style),"string"===typeof d.conditionalStyle.formattedValue&&this._setCellFormattedValue(c,d.conditionalStyle),c.__hasConditionalStyle=!0):!1===d.conditionalStyle||c.__hasConditionalStyle?(delete c.__hasConditionalStyle,c.setStyle(a.combineCellStyle(c.parentGrid,c.gridData,
c.column))):d.modifiedValue&&"string"===typeof d.modifiedValue.formattedValue&&this._setCellFormattedValue(c,d.modifiedValue)),c.parentGrid&&c.parentGrid.viewModel.dynamicReportInfo&&c.setUrl(b.getFieldCellUrl(c)))},_setCellFormattedValue:function(a,c){if("number"===typeof c.value&&!isNaN(c.value)){var d=this._getCellBenchmarkInfoBuilder(a);d&&a.setBenchmarkInfo(d.getBenchmarkInfo(c.value))}b.setFieldCellContent(a,c.formattedValue)},_getCellBenchmarkInfoBuilder:function(a){var b=this,c=a.parentGrid;
return c.viewModel.isBenchmarkedArea&&c.viewModel.isBenchmarkedArea(c.getFeatureIndexForCell(a))&&{isBenchmarked:!0,getBenchmarkInfo:function(d,e){var f=a;e&&(f={gridData:{fieldInfos:{}},column:a.column,parentGrid:c},f.gridData.fieldInfos[f.column.field]=e);e=b._getRenderedContent(f,{currentFeatureIndex:c.viewModel.getBenchmarkController().getAreaIndex()});d-=e.value;return{isGreater:0<=d,value:Math.abs(d),formattedValue:e.formatFunction?e.formatFunction(Math.abs(d)):k.formatNumber(Math.abs(d)),noTextLimit:c.viewModel.getBenchmarkController().hasNoTextLimit()}}}},
_placeReportSectionInCell:function(a,d){function e(){if(d.domNode)return f._createReportSectionFromParams(a,d,g)}var f=this,g={"class":"adjustableGrid_inCellSection"};g.json=b.getFieldInfo(d).sectionJson;g.viewModel=a.viewModel;g.theme=a.theme;g.viewPortContainer=a.viewPortContainer;g.parentWidget=d;g.currentFeatureIndex=a.getFeatureIndexForCell(d);g.initialWidth=w(d);g.initialHeight=A(d);g.noContentOffset=v.cellHasFloatingTableParent(d);g.initialViewMode=a.getViewMode();g.onContentLoadingStart=a.onContentLoadingStart.bind(a);
g.onContentLoadingEnd=a.onContentLoadingEnd.bind(a);g.parentGridCell=d;g.elementUsageType=(a.isReportContainerPageGrid||a.parentGrid&&a.parentGrid.isReportContainerPageGrid)&&p.PAGE_PANEL_SECTION;var h=a.viewModel.layoutBuilder.getClass("section");return h.isAsync?c.showProgressPromise(d.domNode,h.loadModules()).then(e):e()},_createReportSectionFromParams:function(a,b,c){a=c.json&&c.json.stack&&c.json.type!==n.EMPTY?a.viewModel.layoutBuilder.createElement("section",c,b.getContentContainerNode()):
a.viewModel.layoutBuilder.createElement("emptySection",c,b.getContentContainerNode());b.setContent(a);new z(b,a,[["onWidthChanged","width"],["onHeightChanged","height"]]);return a},_placeInfographicInCell:function(a,d){function e(){if(d.domNode)return f._createInfographicFromParams(a,d,g,h)}var f=this,g=b.getFieldInfo(d).infographicJson,h={viewModel:a.viewModel,theme:a.theme,parentWidget:d,currentFeatureIndex:a.getFeatureIndexForCell(d),getPreviewValueFunction:a.getPreviewValueFunction,width:w(d),
height:A(d),adjustElementsWhenResized:v.cellHasFloatingTableParent(d),onContentLoadingStart:a.onContentLoadingStart.bind(a),onContentLoadingEnd:a.onContentLoadingEnd.bind(a)},k=a.viewModel.layoutBuilder.getClass("infographic");return k.isAsync?c.showProgressPromise(d.domNode,k.loadModules()).then(e):e()},_createInfographicFromParams:function(a,b,c,d){c=a.viewModel.layoutBuilder.createElement("infographic",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});
c.setViewMode&&c.setViewMode(a.getViewMode());new z(b,c,[["onWidthChanged","width"],["onHeightChanged","height"]]);return c},_placeChartInCell:function(a,d){function e(){if(d.domNode)return f._createChartPageFromParams(a,d,h,g)}var f=this,g={viewModel:a.viewModel,theme:a.theme,currentFeatureIndex:a.getFeatureIndexForCell(d),parentWidget:d,onContentLoadingStart:a.onContentLoadingStart.bind(a),onContentLoadingEnd:a.onContentLoadingEnd.bind(a)},h=b.getFieldInfo(d).chartJson;h.visualProperties.width=
d.getWidth();h.visualProperties.height=d.getHeight();var k=a.viewModel.layoutBuilder.getClass("chart");return k.isAsync?c.showProgressPromise(d.domNode,k.loadModules()).then(e):e()},_createChartPageFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("chart",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new z(b,a,[["onWidthChanged","width"],["onHeightChanged","height"]]);return a},_placeMapInCell:function(a,d){function e(){if(d.domNode)return h=
f._createMapFromParams(a,d,g,k)}var f=this,g=b.getFieldInfo(d).mapJson;w(d);A(d);var h,k={viewModel:a.viewModel,theme:a.theme,parentWidget:d,currentFeatureIndex:a.getFeatureIndexForCell(d),onContentLoadingStart:a.onContentLoadingStart.bind(a),onContentLoadingEnd:a.onContentLoadingEnd.bind(a)},l=a.viewModel.layoutBuilder.getClass("map");return l.isAsync?c.showProgressPromise(d.domNode,l.loadModules()).then(e):e()},_createMapFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("map",
{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new z(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a},_placeImageInCell:function(a,c){function d(){if(c.domNode)return p=e._createImageFromParams(a,c,g,q)}var e=this,f=b.getFieldInfo(c),g=f.imageJson,h=w(c),k=A(c);if(f.triggerJson)if(a.viewModel.dynamicReportInfo){var n=m.getValueFromFieldData(f.triggerJson.fieldInfo,{fieldData:a.viewModel.dynamicReportInfo.fieldData,
currentFeatureIndex:a.getFeatureIndexForCell(c)});l.processImageJsonForTrigger(g,n.value,f.triggerJson);n.isUnavailableData||"number"!==typeof n.value||isNaN(n.value)||(b.setNumericCellValue(c,n.value),c.setNumberValue(n.value,n.formatFunction,!1))}else(n=m.getConditionalStylePreview(f,c.gridData.index))&&"number"===typeof n.value&&!isNaN(n.value)&&(l.processImageJsonForTrigger(g,n.value,f.triggerJson),b.setNumericCellValue(c,n.value));g.style.width&&g.style.height&&!1!==g.ownSizeInsideParent&&Math.round(g.style.width)!==
Math.round(h)&&Math.round(g.style.height)!==Math.round(k)?g.ownSizeInsideParent=!0:(g.ownSizeInsideParent=!1,g.style.width=h,g.style.height=k);var p,q={viewModel:a.viewModel,theme:a.theme,parentWidget:c,currentFeatureIndex:a.getFeatureIndexForCell(c),alignParams:c.getFullStyle(),imageTriggerJson:f.triggerJson,onInitialized:function(){if(c.domNode){var a=w(c),b=A(c);p&&p.resize({w:a,h:b},c.getFullStyle())}},onContentLoadingStart:a.onContentLoadingStart.bind(a),onContentLoadingEnd:a.onContentLoadingEnd.bind(a)},
f=a.viewModel.layoutBuilder.getClass("image");return f.isAsync?f.loadModules().then(d):d()},_createImageFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("image",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new z(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a},_placeShapeInCell:function(a,c){function d(){if(c.domNode)return k=e._createShapeFromParams(a,c,f,l)}var e=this,
f=b.getFieldInfo(c).shapeJson,g=w(c),h=A(c);f.style.width=g;f.style.height=h;var k,l={viewModel:a.viewModel,theme:a.theme,parentWidget:c,currentFeatureIndex:a.getFeatureIndexForCell(c),alignParams:c.getFullStyle(),getPreviewValueFunction:a.getPreviewValueFunction,applyThemeStyle:a.applyThemeStyle,onInitialized:function(){if(c.domNode){var a=w(c),b=A(c);k&&k.resize({w:a,h:b},c.getFullStyle())}},onContentLoadingStart:a.onContentLoadingStart.bind(a),onContentLoadingEnd:a.onContentLoadingEnd.bind(a)},
g=a.viewModel.layoutBuilder.getClass("shape");return g.isAsync?g.loadModules().then(d):d()},_createShapeFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("shape",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new z(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridStyleUtil":function(){define(["./GridLayoutCalculator",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil","../valueField/ValueField"],function(g,f,e,k){var c={filterCellStyles:function(b){return c._filterCellStyles(b,k.SUPPORTED_STYLES)},filterCellTextStyles:function(b){return c._filterCellStyles(b,k.SUPPORTED_TEXT_STYLES)},_filterCellStyles:function(b,a){var c={},e;for(e in b)void 0!==b[e]&&a[e]&&(c[e]=b[e]);return c},combineCellStyle:function(b,a,d,h){var k={};if(c._isContainerCell(b,a,d))h=h||a.style.fields&&a.style.fields[d.field],
e.copyOwnJsonProperties(h,k),delete k.backgroundColor;else{var m=b.viewModel.getDocumentDefaultStyles&&b.viewModel.getDocumentDefaultStyles(b.theme);e.copyOwnJsonProperties(m,k);delete k.backgroundColor;c._canApplyDefaultTableStyle(b)&&b.viewModel.getTableDefaultStyles&&e.copyOwnJsonProperties(b.viewModel.getTableDefaultStyles(b.theme,"Default"),k);e.copyOwnJsonProperties(a.style,k);b.applyThemeStyle&&e.copyOwnJsonProperties(a.themeStyle&&a.themeStyle.fields&&a.themeStyle.fields[d.field],k);b.inheritThemeBackground||
f.isTransparent(k.backgroundColor)||delete k.backgroundColor;h=h||a.style.fields&&a.style.fields[d.field];e.copyOwnJsonProperties(h,k);if(k.overrideStyle&&b.viewModel.getTableDefaultStyles&&(h=b.viewModel.getTableDefaultStyles(b.theme,k.overrideStyle)))for(var n in h)if("backgroundColor"!==n||b.inheritThemeBackground||f.isTransparent(h[n]))k[n]=h[n]}k.width=g.calcFieldWidth(b,a,d.field);k.height=g.calcDataHeight(b,a,d.field);return c.filterCellStyles(k)},_isContainerCell:function(b,a,c){return b.viewModel.isGraphicStyle?
b.isReportContainerPageGrid?!0:(a=a.fieldInfos&&a.fieldInfos[c.field])?a.isReportSection?!0:b.isSingleCelledTable()&&(a.isImage||a.isShape||a.isInfographic||a.isChart||a.isMap):!1:!1},_canApplyDefaultTableStyle:function(b){return b.viewModel.isGraphicStyle?b.isMultiDataTable():!0}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentScaler":function(){define(["./GridDataUtil"],function(g){return{fitContentInsideCell:function(f){var e=g.getFieldInfo(f);if(e&&f.content){var k=
f.content,c=f.parentGrid,b=f[c.hasRealBorders?"getContentWidth":"getWidth"](),c=f[c.hasRealBorders?"getContentHeight":"getHeight"]();e.isReportSection?(k.setHeight(c,{resizeContentProportionally:!0}),k.setWidth(b,{resizeContentProportionally:!0})):e.isChart?k.resize(b,c):e.isInfographic?k.resize(b,c):e.isMap?k.resize({w:b,h:c}):(e.isImage||e.isShape)&&k.resize({w:b,h:c},f.getFullStyle())}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentSynchronizer":function(){define(["./GridDataUtil",
"../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],function(g,f){return{syncParentFieldInfoWithElementState:function(e,k){if(e&&k){var c=g.getFieldInfo(e);c&&(c.isChart?(c.chartJson.visualProperties.width=e.getWidth(),c.chartJson.visualProperties.height=e.getHeight()):c.isMap?g.setFieldInfo(e,f.createFieldInfoFromMap(k.toJson())):c.isImage?g.setFieldInfo(e,f.createFieldInfoFromImage(k.toJson(),k.imageTriggerJson)):c.isShape?g.setFieldInfo(e,f.createFieldInfoFromShape(k.toJson())):
c.isReportSection?g.setFieldInfo(e,f.createFieldInfoFromSection(k.toJson())):c.isInfographic&&g.setFieldInfo(e,f.createFieldInfoFromInfographic(k.toJson())))}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter"],function(g){var f={},e={FontSize:"fontSize",FontColor:"fontColor",FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},k={},c;for(c in e)k[e[c]]=c;
f.getConditionalStyle=function(a,b){return(a=f.getMatchedCase(a,b))?f.styleFromSetters(a.setters):null};f.getMatchedCase=function(a,b){if(null!==a&&""!==a&&(a=Number(a),b&&!isNaN(a))){var c;b.cases.some(function(b){if(f._checkValueMatchesCase(a,b))return c=b,!0});return c}};f._checkValueMatchesCase=function(a,b){function c(a,b,c){switch(b){case "\x3d":return a===c;case "\x3c":return a<c;case "\x3e":return a>c;case "\x3c\x3d":return a<=c;case "\x3e\x3d":return a>=c}return!1}return b.compareInfos.length&&
b.compareInfos.every(function(b){return c(a,b.operator,Number(b.value))})};f.styleFromSetters=function(a){if(!a)return null;var b={};a.forEach(function(a){e[a.property]&&(b[e[a.property]]=a.value);"IsBold"===a.property&&(b.fontWeight="True"===a.value?"bold":"normal");"IsItalic"===a.property&&(b.fontStyle="True"===a.value?"italic":"normal");"IsUnderlined"===a.property&&(b.textDecoration="True"===a.value?"underline":"none")});g.ptToPxObj(b);return b};f.settersFromStyle=function(a){var b=[];a=g.pxToPtObj(a,
!0);for(var c in a){var e=k[c],f=a[c];!e||"string"!==typeof f&&isNaN(f)||b.push({property:e,value:f});"fontWeight"===c?b.push({property:"IsBold",value:"bold"===f?"True":"False"}):"fontStyle"===c?b.push({property:"IsItalic",value:"italic"===f?"True":"False"}):"textDecoration"===c&&b.push({property:"IsUnderlined",value:"underline"===f?"True":"False"})}return b};f.processImageJsonForTrigger=function(a,b,c){var d=f.getMatchedCase(b,c);d||c.cases.some(function(a){if("default"===a.compareInfos[0].value)return d=
a,!0});d&&(a.fileName=d.setters[0].value)};f.getStatistics=function(a){var b=Infinity,c=-Infinity,e,f,g;a&&a.cases.forEach(function(a){a.compareInfos&&a.compareInfos.forEach(function(a){var d=Number(a.value);isNaN(d)||(d<b&&(b=d,f="\x3c"===a.operator||"\x3c\x3d"===a.operator),d>c&&(c=d,g="\x3e"===a.operator||"\x3e\x3d"===a.operator),e=!0)})});return e&&-1E12<b&&1E12>b&&-1E12<c&&1E12>c?{min:b,max:c,canFallBelowMin:f,canFallAboveMax:g}:null};var b=/\.png$/i;f.collectImageFileNames=function(a){var c=
[];a&&a.cases&&a.cases.forEach(function(a){a.setters&&a.setters.forEach(function(a){"Source"===a.property&&b.test(a.value)&&c.push(a.value)})});return c};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer":function(){define(["./utils","./_FieldInfoPreviewRenderer","./_FieldInfoDataRenderer","dojo/i18n!esri/nls/jsapi"],function(g,f,e,k){var c=k.geoenrichment.dijit.ReportPlayer.ReportPlayer.missingVariable,b=k.geoenrichment.dijit.ReportPlayer.ReportPlayer.unsupportedContent;
k=k.geoenrichment.dijit.ReportPlayer.VariableStates;var a={},d={renderPreview:function(a,b){return b.fieldData?e.getValueFromFieldData(a,b):f.getValuePreview(a,b)},tryProvideConditionalStylePreview:function(a,b,c){a.isUnavailableData||a.conditionalStyle||c.fieldData||!(b=f.getConditionalStylePreview(b,c))||(a.conditionalStyle=c.previewConditionalStyle?b:!1)},tryProvideRangeFilterPreview:function(a,b){a.isUnavailableData||a.modifiedValue||b.fieldData||!b.presetFilter||(a.modifiedValue=f.getRangeFilterPreview(b))},
tryProvideSortingPreview:function(a,b){a.isUnavailableData||b.fieldData||!b.presetSorting||(a.modifiedValue=f.getSortingPreview(b))}},h={buildVariableLabel:function(a){function b(a,b){return!a||a.length<=b?a:a.substr(0,b-3)+"..."}function c(a,b){switch(b){case "p":b=k.statePercent_short;break;case "a":b=k.stateAverage_short;break;case "i":b=k.stateIndex_short;break;case "r":b=k.stateReliability_short;break;default:return a}return a+" ("+b+")"}return"["+(a.isWebMap?b(a.webMapFieldName,15)+"(WebMap)":
a.isSiteAttribute?b(a.alias,15)+"(SiteAttribute)":a.isDataLayerAttribute?b(a.alias,15)+"(NearbyLocations)":a.isCustomDataCollection?b(a.alias,15)+"(CustomData)":c(a.variableID,a.statefulName&&a.statefulName.charAt(0).toLowerCase()))+"]"},buildScriptLabel:function(a){return"["+g.name.renderScriptName(a.name)+"]"}},l={renderRichTextFieldInfoInTableCell:function(b,c){return g.richText.createRichTextFromFieldInfo(b,function(b){var d=a.renderFieldInfoInTableCell(b,c),e=d.formattedValue;c&&c.isBenchmarked&&
(b=c.getBenchmarkInfo(d.value,b),e+=" ("+(b.isGreater?"+":"-")+b.formattedValue+")");return e},function(b){return a.renderFieldInfoInTableCell(b,c).formattedValue})}};a.renderFieldInfoInTableCell=function(a,e){e=e||{};var f={formattedValue:null,value:null,formatFunction:null,isUnavailableData:!1,conditionalStyle:null,modifiedValue:null};if(a.isRichText)return f.formattedValue=l.renderRichTextFieldInfoInTableCell(a,e),f;if(a.isMissing)return f.formattedValue=c,f.isUnavailableData=!0,f;if(a.isUnsupportedContent)return f.formattedValue=
b,f.isUnavailableData=!0,f;e.previewValues?f=d.renderPreview(a,e):f.formattedValue=a.hasVariable?h.buildVariableLabel(a):a.script?h.buildScriptLabel(a.script):"["+a.alias+"]";if(a.hasVariable||a.script)if(d.tryProvideConditionalStylePreview(f,a,e),d.tryProvideRangeFilterPreview(f,e),d.tryProvideSortingPreview(f,e),f.formattedValue=g.format.providePercentCurrencySymbols(f.formattedValue,a,{placePercentCurrencyInFront:!e.previewValues}),f.formatFunction){var k=f.formatFunction;f.formatFunction=function(b){return g.format.providePercentCurrencySymbols(k(b),
a,{placePercentCurrencyInFront:!e.previewValues})};f.conditionalStyle&&void 0===f.conditionalStyle.formattedValue&&(f.conditionalStyle.formattedValue=f.formatFunction(f.conditionalStyle.value));f.modifiedValue&&void 0===f.modifiedValue.formattedValue&&(f.modifiedValue.formattedValue=f.formatFunction(f.modifiedValue.value))}return f};a.getConditionalStylePreview=function(a,b){var c={};d.tryProvideConditionalStylePreview(c,a,{rowIndex:b,previewConditionalStyle:!0});return c.conditionalStyle};a.renderRichTextFieldInfoInTableCell=
l.renderRichTextFieldInfoInTableCell;a.getValueFromFieldData=e.getValueFromFieldData;a.getFieldDataValue=e.getFieldDataValue;return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoPreviewRenderer":function(){define("dojo/string ./utils ./FieldInfoPreviewSampleUtil ./FieldInfoPreviewAttributeUtil ../../conditionalStyling/ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/DateUtil ../../../grid/coreUtils/sorting/GridSortUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig ../../../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi ../../../../_devConfig".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n){m=m.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var p={percent:[10,15,20,25,33,46,72,90,95],percentSmall:[2,3,4,5,6,7],index:[80,99,105,111,113,118,121,130],number:[1150,2013,5006,10135,20456,36813],numberSep:[1150,2013,5006,10135,20456,36813],numberSmall:[10,5,3,7,15]},t=/^MEDAGE|^AVGHHSZ|^UNEMPRT|ECYHSZAVG|ECYPTAMED/,q={percent:{MP19013a_B:72,MP19014a_B:70,EMP_TO_POP:25,NOHS:10,HSG:20,SC:30,BGPD:40,X9074_A:326},percentSmall:{UNEMPRT_CY:5},index:{},number:{MEDHINC_CY:55650,
TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,POPGRWCYCY:1.05,POPGRWCYFY:1.12,ECYPTAPOP:20456,ECYHNIMED:55650},numberSep:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,
X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSmall:{AVGHHSZ_CY:2,MEDAGE_CY:36,ECYHSZAVG:2,ECYPTAMED:36},string:{TSEGNAME:"Bright Young Professionals",TLIFECODE:"L8",TLIFENAME:"Middle Ground",TSEGCODE:"8A",CONAME:"Coffee",NAICS:"1234",SIC:"5678",ADDR:"380 New York St, Redlands, CA",STATE:"CA",STATE_NAME:"California",ZIP:"92373",ZIP4:"92373",CITY:"Redlands",STREET:"New York st.",DIRECTION:"SW",FRNCOD:"24"}},
v={"Employee/ Population Ratio":"EMP_TO_POP","No High School Diploma":"NOHS","High School Graduate":"HSG","Some College":"SC","Bachelors/Grad/Prof Degree":"BGPD","Tickets to Movies/Museums/Parks: Average":"X9074_A"},r={};return{getValuePreview:function(a,b){return a.hasVariable||a.script?this._getVariableOrScriptPreview(a,b):this._getNonVariablePreview(a,b)},_getVariableOrScriptPreview:function(c,d){function f(a){return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}}function g(a,
d){function e(a){a=0<c.decimals?a+.5432123456789:Math.round(a);return b.formatNumber(a,{places:c.decimals||0,noSeparator:!c.useThousandsSeparator})}d=a;d=0<c.decimals?Number((d+.5432123456789).toFixed(c.decimals)):Math.round(d);return{formattedValue:e(a),value:d,formatFunction:function(a){return e(a)},isUnavailableData:!1}}var h=this._getSampleCacheType(c);if(n.preview.bigValues&&("number"===h||"numberSep"===h))return g(1E12,h);if(d.getPreviewValueFunction)return h=0===h.indexOf("percent")?"percent":
"number",d=d.getPreviewValueFunction(),d=d.fields&&d.fields[c.name]||d,g(d[h],h);d=e.findNonEmptySample(c);if("string"===typeof d)return f(d);if("number"===typeof d)return g(d,h);var l=c.type||c.isSiteAttribute&&c.attribute.type;d=c.isSiteAttribute&&k.getAttributePreviewValue(c.attribute);if("esriFieldTypeDate"===l)return h=new Date,d&&h.setTime(d),f(a.formatDateShort(h));if("esriFieldTypeString"===l)return f(q.string[c.isDataLayerAttribute?c.attribute.name:c.variableID]||d||m.sampleTextValue);if("number"===
typeof d)return g(d,h);d=r[h]=r[h]||{};var l=c.name+";"+c.decimals,u=d[l];if(!u){var u=q[h],t;t=c.variableID?c.variableID:c.script&&v[c.script.alias];u=u[t];u||(u=p[h],u=u[Math.round((u.length-1)*Math.random())]);u=d[l]=u}return g(u,h)},_getSampleCacheType:function(a){var b=a.statefulName?"p"===a.statefulName.charAt(0):a.showPercent,c=a.statefulName&&"i"===a.statefulName.charAt(0),d=a.hasVariable&&t.test(a.variableID);return b?d?"percentSmall":"percent":c?"index":d?"numberSmall":a.useThousandsSeparator?
"numberSep":"number"},_getNonVariablePreview:function(a,b){b.getPreviewValueFunction?(b=b.getPreviewValueFunction(),b=b.fields&&b.fields[a.name]||b,a=b.formattedValue||b.number):"headers.AREA_DESC"===a.name&&-1<b.currentFeatureIndex?(a=1+2*b.currentFeatureIndex,a=1===a?h.getSingleUnits()?"1 "+h.getSingleUnits():g.substitute(m.fieldPreviewAreaDescWithRadiusSingular,{radius:a}):h.getPluralUnits()?a+" "+h.getPluralUnits():g.substitute(m.fieldPreviewAreaDescWithRadiusPlural,{radius:a})):a=f.fields.getPreview(a.name,
b.isGraphicReport,b.isMultiFeature)||a.alias;return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}},getConditionalStylePreview:function(a,b){if(a.triggerJson&&void 0!==b.rowIndex&&(b=a.triggerJson.cases[b.rowIndex%a.triggerJson.cases.length])){a=c.styleFromSetters(b.setters);var d;1===b.compareInfos.length?(d=Number(b.compareInfos[0].value),b=b.compareInfos[0].operator,"\x3e"===b?d++:"\x3c"===b&&d--):2===b.compareInfos.length&&(d=(Number(b.compareInfos[1].value)+Number(b.compareInfos[0].value))/
2);return{style:a,value:d}}return null},getRangeFilterPreview:function(a){if(a.presetFilter&&l.isRangeType(a.presetFilter.method)){if(a.presetFilter.columnIndex!==a.columnIndex)return null;var b=l.getRangeStatistics(a.presetFilter.ranges),c=b.min,b=b.max;isFinite(c)||isFinite(b)?isFinite(b)?isFinite(c)||(c=0===b?0:0<b?b/2:2*b):b=0!==c?Math.abs(2*c):100:(c=0,b=100);var d=(b-c)/a.numRows;return{value:c+d*a.rowIndex,_min:c,_max:b,_step:d}}},getSortingPreview:function(a){var b=a.presetFilter&&this.getRangeFilterPreview(a);
if(!a.presetSorting.order||a.presetSorting.field!==a.columnField)return b;var c=100,e=0,f=e+a.numRows*c;b&&(e=b._min,f=b._max,c=b._step);return{value:a.presetSorting.order===d.ORDER_ASC?e+a.rowIndex*c:f-a.rowIndex*c}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewSampleUtil":function(){define(["dojo/_base/lang"],function(g){var f={findNonEmptySample:function(e){if(!e)return null;var g;return e.isSiteAttribute?(e.attribute.domain&&e.attribute.domain.codedValues&&
e.attribute.domain.codedValues.some(function(c){if(f._isNonEmptySample(c.name))return g=c.name,!0}),g):e.isDataLayerAttribute&&e.attribute.samples&&e.attribute.samples.length?(e.attribute.samples.some(function(c){if(f._isNonEmptySample(c))return g=c,!0}),g):null},getNonEmptySamples:function(e){if(!e)return null;if(e.isSiteAttribute){if(e.attribute.domain&&e.attribute.domain.codedValues)return e.attribute.domain.codedValues.map(function(e){return e.name}).filter(f._isNonEmptySample)}else if(e.isDataLayerAttribute&&
e.attribute.samples&&e.attribute.samples.length)return e.attribute.samples.filter(f._isNonEmptySample);return null},_isNonEmptySample:function(e){return"string"===typeof e?!!e.trim():!!e},provideSamplesFromLocatorSettings:function(e,k){e&&e.isDataLayerAttribute&&k&&k.searchText&&(e.attribute=g.clone(e.attribute),e.attribute.samples=f.getSamplesFromSearchText(k,20)||e.attribute.samples)},getSamplesFromSearchText:function(e,f){if(!e||!e.searchText)return null;var c=[];e=e.searchText.charAt(0).toUpperCase()+
e.searchText.substr(1);for(var b=0;b<f;b++)c.push(e+" "+(b+1));return c}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewAttributeUtil":function(){define(["esri/dijit/geoenrichment/utils/FieldUtil","dojo/i18n!esri/nls/jsapi"],function(g,f){f=f.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var e={},k={BUILDING_AREA:5E3,SITE_AREA:1E4,FRONTAGE:800,PARKING:300};e.getAttributePreviewValue=function(c){if(!c)return"";if(c.domain&&"codedValue"===
c.domain.type)return c.domain.codedValues[0].name;if("esriFieldTypeString"===c.type)return f.sampleTextValue;if("esriFieldTypeDate"===c.type){var b=new Date;c.domain&&"range"===c.domain.type&&b.setTime(c.domain.range[0]);return b.getTime()}b=c.domain&&"range"===c.domain.type?c.domain.range[0]:k[c.name]||Number((100*Math.random()+50).toFixed(1));return"i"===g.isNumericField(c)?Math.round(b):b};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoDataRenderer":function(){define("esri/dijit/geoenrichment/ReportPlayer/config ../../conditionalStyling/ConditionalStyleUtil ../../../../dataProvider/supportClasses/data/AreaDataUtil ../../../../dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a){a=a.geoenrichment.dijit.ReportPlayer.ReportPlayer;var d={getValueFromFieldData:function(b,e){function h(){console.log("Error: can't calculate value for \x3d\x3e "+b.name);l=NaN;p=g.tables.showUnavailableData?a.unavailableDataShort:"";q=!0}e=e||{};var l,p,t,q=!1,v;if(e.getPreviewValueFunction){var r=e.getPreviewValueFunction({currentFeatureIndex:e.currentFeatureIndex}),r=r.fields&&r.fields[b.name]||r;l=r.number;"string"===typeof r.formattedValue&&(p=r.formattedValue)}else l=
d._getFieldDataValue(b,e.fieldData,e.currentFeatureIndex,e.isMultiFeature);r=(!b.type||c.isNumericField(b))&&(b.hasVariable||b.script);l&&"object"===typeof l?(e=l,l=e.value,p=k.formatAttributeValue(e,{skipFormattedValue:!0,unavailableDataValue:void 0,format:b}),void 0===p&&h()):!e.getPreviewValueFunction&&(void 0===l||null===l||"number"===typeof l&&isNaN(l)||"NaN"===l||"undefined"===l||"null"===l||r&&"number"!==typeof l)?h():void 0===p&&(r?(p=d._formatValue(l,b),t=function(a){return d._formatValue(a,
b)}):p=String(l));b.triggerJson&&(v={style:f.getConditionalStyle(l,b.triggerJson),value:l,formattedValue:p});return{value:l,formattedValue:p,formatFunction:t,isUnavailableData:q,conditionalStyle:v}},_formatValue:function(a,c){return b.formatNumber(a,{places:c.decimals||0,noSeparator:!c.useThousandsSeparator,preserveTrailingZeroes:!0})},getFieldDataValue:function(a,b,c,e){return(a=d._getFieldDataValue(a,b,c,e))&&"object"===typeof a?a.value:a},_getFieldDataValue:function(a,b,c,d){return a&&e.getAreaDataValue({fieldName:a.templateName||
a.name,fieldData:b,featureIndex:c,isMultiFeature:d,comparisonIndex:a.comparisonIndex})}};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes":function(){define([],function(){var g={PAGE_PANEL_SECTION:"pagePanelSection",INFOGRAPHIC_HEADER_SECTION:"infographicHeaderSection",INFOGRAPHIC_SECTION:"infographicSection",isInfographicLike:function(f){return f===g.INFOGRAPHIC_HEADER_SECTION||f===g.INFOGRAPHIC_SECTION}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes":function(){define([],
function(){return{RICH_TEXT:"richText",VARIABLE:"variable",INFOGRAPHIC:"infographic"}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/GridCellTooltipBuilder":function(){define("dojo/_base/declare ../GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../valueField/supportClasses/TextRenderer ./_ScriptExpressionBuilder esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var l=g(null,{_content:"",getContent:function(){return this._content?"\x3cdiv class\x3d'esriGEAdjustableGridValueField_cellTooltipContent'\x3e"+this._content+"\x3c/div\x3e":null},addValue:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+a+"\x3c/div\x3e"},addImageValue:function(a){var c=f.getNumericCellValue(a);isNaN(c)||"number"!==typeof c||(a=a.numberFormatFunction?
a.numberFormatFunction(c):b.formatNumber(c),this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+a+"\x3c/div\x3e")},addAlias:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e\x3cb\x3e"+h.variable+"\x3c/b\x3e "+a+"\x3c/div\x3e"},addExpression:function(a,b,d){if(a=c.buildTooltipExpression(a,b))this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+h.variableIsBasedOnExpression+"\x3c/div\x3e",this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+
a+"\x3c/div\x3e"},addConditionalStyleLegend:function(a){var b=f.getNumericCellValue(a),c=f.getConditionalFormatting(a);a=f.getFieldInfo(a).isImage;this._content+=e.createLegendNode(c,a?"image":"text",b).outerHTML},addTextBlock:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a+"\x3c/div\x3e"},addSeparator:function(){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentSeparator'\x3e\x3c/div\x3e"}}),m=/<\w/,n={setDynamicTooltipToCell:function(b,
c,d){var e=f.getFieldInfo(b),g=f.getConditionalFormatting(b),g=g&&g.fieldInfo;if(b.hasOverflowText()||f.isVariableLikeFieldCell(b)||f.isImageTriggerCell(b))e=e&&(e.script||e.expressionText)||g&&(g.script||g.expressionText),b.own(a.setTooltipToNode(b.domNode,function(){return n.renderCellTooltip(b,c,d)},{classes:"esriGEAdjustableGridValueField_cellTooltip",notRestricted:e,stayOnHover:e}))},renderCellTooltip:function(a,b,c){c=c||{};var e=c.getExpressionText||function(a){return d.modules.complexCellTooltips&&
a.expressionText},g=k.getFullText(a),h=f.getConditionalFormatting(a),n=f.getFieldInfo(a),p=n&&(n.hasVariable||n.script),q=n&&n.isImage,t=n&&n.isRichText||g&&m.test(g),C=new l;!g||t||q||c.hideValue||C.addValue(g);if(p){C.addAlias(n.script?n.script.alias:n.alias);var z=e(n);z&&C.addExpression(z,b,c.makeExpressionExpandable)}else q&&h&&h.fieldInfo&&(!c.hideValue&&C.addImageValue(a),C.addAlias(h.fieldInfo.script?h.fieldInfo.script.alias:h.fieldInfo.alias),(z=e(h.fieldInfo))&&C.addExpression(z,b,c.makeExpressionExpandable));
h&&d.modules.complexCellTooltips&&(z&&C.addSeparator(),c.conditionalLegendDesc&&C.addTextBlock(c.conditionalLegendDesc),C.addConditionalStyleLegend(a));return C.getContent()}};return n})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleLegendBuilder":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../images/ImageDataHolder ./ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d){d=d.geoenrichment.dijit.ReportPlayer.ConditionalLegend;var h={},l={"\x3d":"equals","\x3c":"less","\x3e":"greater","\x3c\x3d":"lessOrEquals","\x3e\x3d":"greaterOrEquals"};h.createLegendNode=function(h,n,p){function m(b){function c(b){var c=a.parseNumber(b);return isNaN(c)?b:a.formatNumber(c)}if(!b.compareInfos||!b.compareInfos.length)return!1;if("image"===n&&"default"===b.compareInfos[0].value)return d.conditionalLegend_default;b=b.compareInfos.map(function(a){return g.substitute(d["conditionalLegend_operator_"+
l[a.operator]],{value:c(a.value)})});return 1===b.length?b[0]:g.substitute(d.conditionalLegend_interval,{from:b[0],to:b[1]})}if(!n)return null;var q=e.create("div",{"class":"esriGEConditionalStylingLegend esriGEConditionalStylingLegend_"+n});e.create("div",{"class":"esriGEConditionalStylingLegend_row",innerHTML:d.conditionalLegend_title},q);var v=b.getMatchedCase(p,h);h.cases.some(function(a){var g=m(a),h=b.styleFromSetters(a.setters);if(g&&h){var l=e.create("div",{"class":"esriGEConditionalStylingLegend_row"},
q),p=e.create("div",{"class":"dijitInline"},l);"image"===n?e.create("div",{"class":"esriGEConditionalStylingLegend_symbolImage dijitInline"},p).style.backgroundImage="url("+(c.getImageData(a.setters[0].value)||"")+")":("chart"===n?f.add(p,"esriGEConditionalStylingLegend_symbolChart"):(f.add(p,"esriGEConditionalStylingLegend_text"),p.innerHTML=d.conditionalLegend_preview),p.style.backgroundImage="none",k.set(p,h));e.create("div",{"class":"dijitInline esriGESpaceBeforeBig",innerHTML:g},l);v===a&&f.add(l,
"esriGEConditionalStylingLegend_currentValue")}});return q};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/_ScriptExpressionBuilder":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil"],function(g){var f=/\s*/g,e=/(!.*?!|\+|\-|\*|\/|\(|\)|\^|\d+\.\d+|\d+)/g,k=/___.*?___/g,c=/___(.*?)___/g,b=/!/g,a=/\d+/;return{buildTooltipExpression:function(a,b){a=this._maskAndValidateExpressionText(a,b);if(!a||!a.length)return null;var c="";a.forEach(function(a){a.variable?
c+="\x3cdiv class\x3d'dijitInline'\x3e\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expressionVariable'\x3e"+a.variable.alias+"\x3c/div\x3e\x3c/div\x3e":a.operator?c+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionOperator'\x3e"+a.operator+"\x3c/div\x3e":void 0!==a.number&&(c+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionNumber'\x3e"+a.number+"\x3c/div\x3e")});return"\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expression'\x3e"+c+
"\x3c/div\x3e"},_maskAndValidateExpressionText:function(d,h){d=d.replace(f,"");d=d.replace(e,"___$1___");return d.replace(k,"").length?null:d.match(k).map(function(d){d=d.replace(c,"$1");return 0===d.indexOf("!")?{variable:h.get(d.replace(b,""))}:d.match(a)?{number:g.formatNumber(Number(d))}:{operator:d}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutSizer":function(){define(["./GridLayoutCalculator"],function(g){var f={resizeToFitAllowedWidth:function(e,g){f._resizeWidthForParams(e,
{resetWidth:!0,columnsToPreserve:e.columns,stickToRight:!0,rightOffsetWeight:g&&g.rightOffsetWeight})},resizeToFitWidth:function(e,g){g&&!isNaN(g)&&f._resizeWidthForParams(e,{resetWidth:!0,columnsToPreserve:e.columns,newWidth:g})},_resizeWidthForParams:function(e,k){g.recalcColumns(e,k);e.getFieldCells().forEach(function(c){c.setWidth(g.calcFieldWidth(e,c.gridData,c.column.field))});f._makeFinalAdjustments(e)},_makeFinalAdjustments:function(e){g.positionCells(e);e.getFieldCells().forEach(function(e){e.updateSizers&&
e.updateSizers()});e.getFieldCells().forEach(function(e){e.updateRotationControls&&e.updateRotationControls()})},resizeToFitHeight:function(e,k){g.recalcRowsToFitHeight(e,k);e.getFieldCells().forEach(function(c){c.setHeight(g.calcDataHeight(e,c.gridData,c.column.field))});f._makeFinalAdjustments(e)},scaleProportionallyWithinParent:function(e,g){var c=e.getTableBox();e.setPosition(c.l*g.xScale,c.t*g.yScale);1!==g.xScale&&f.resizeToFitWidth(e,c.w*g.xScale);1!==g.yScale&&f.resizeToFitHeight(e,c.h*g.yScale)},
scaleProportionallyPreservingCenter:function(e,g){var c=e.getTableBox(),b=c.w*g.xScale,a=c.h*g.yScale;e.setPosition(c.l+(c.w-b)/2,c.t+(c.h-a)/2);1!==g.xScale&&f.resizeToFitWidth(e,b);1!==g.yScale&&f.resizeToFitHeight(e,a)}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/_GridDebugUtil":function(){define(["esri/dijit/geoenrichment/when","../../../_devConfig"],function(g,f){var e={},k=0;e.refreshStart=function(c){f.table.printGridRefresh&&(c=e._getGridInfo(c,!0),console.log("AdjustableGrid.js "+
c.key+" \x3d\x3e refresh \x3d\x3e start"))};e.refreshEnd=function(c){f.table.printGridRefresh&&g(c.getRenderPromise(),function(){var b=e._getGridInfo(c,!1);console.log("AdjustableGrid.js "+b.key+" \x3d\x3e refresh \x3d\x3e end ("+b.refreshTime+" ms)")})};e._getGridInfo=function(c,b){var a;if(c.isReportContainerPageGrid)a="Page grid";else{var d=[];for(a=c.parentWidget;a;){d.push(a);if(a.isReportContainerPageGrid)break;a=a.parentWidget}a=d[d.length-1].getFieldCells().indexOf(d[d.length-2]);for(var d=
d.length,e="",f=0;f<d;f++)e+="\x3e";void 0===c._debugId&&(c._debugId=k++);a="panel "+a+" "+e+"("+c._debugId+")"}var g;b?c._degubStartTime=(new Date).getTime():g=(new Date).getTime()-c._degubStartTime;return{key:a,refreshTime:g}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartContainer":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/when dijit/_WidgetBase dijit/_TemplatedMixin ./_ChartLegendSupport ./_ChartEventSupport ./_ChartComparisonSupport ./utils/ChartTypes ./utils/ChartSorting ./utils/ChartJsonUtil ./utils/builder/ChartPlots ./utils/ChartFilterUtil esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/WaitingUtil ../sections/dynamicSettings/supportClasses/FilterUtil dojo/text!../templates/ChartContainer.html dojo/i18n!esri/nls/jsapi ../../_devConfig".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A,B,C,z,E,G,F){function D(){if(a)return a.promise;var a=new k;g("dojox/charting/Chart dojox/charting/action2d/Magnify ./utils/action2d/Highlight ./utils/builder/ChartBuilder ./utils/ChartCalculator ./utils/ChartStyleUtil ./tooltips/ChartTooltip ./iconRendering/IconRenderer ./textRendering/TextRenderer ./tableViewRendering/TableViewRenderer".split(" "),function(b,c,d,e,g,h,k,l,m,n){J=b;M=c;H=d;K=e;N=g;O=h;L=k;P=l;Q=m;R=n;I=f(J,{_renderPlotBackground:function(a,
b,c,d){this.theme.plotarea.backgroundImageData?this.surface.createImage({src:this.theme.plotarea.backgroundImageData,x:b.l-1,y:b.t-1,width:c+2,height:d+2}):this.inherited(arguments)}});a.resolve()});return a.promise}G=G.geoenrichment.dijit.ReportPlayer.ChartContainer;var I,J,M,H,K,N,O,L,P,Q,R;return f([h,l,m,n,p],{templateString:E,nls:G,viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,immediateRender:!1,chartTheme:null,enableAxisLabelsAutoTilt:!1,isEditMode:!1,chart:null,_currentSeries:null,
_iconRenderer:null,_textRenderer:null,_tableViewRenderer:null,_tableViewInfo:null,_renderChartPendingFlag:!1,postCreate:function(){this.inherited(arguments);this._showError(!1);w.hide(this.missingVariablesDiv);this.viewModel.isGraphicStyle&&c.add(this.domNode,"graphicReportChart");c.add(this.domNode,this.viewModel.isLightDocumentTheme(this.theme)?"light":"dark");this._showEmptyView(!1)},_currentSeriesItems:null,_currentSeriesItemsUnfiltered:null,_originalSeriesItems:null,_currentVisualProperties:null,
_currentChartType:null,_currentComparisonInfo:null,_isMultiFeatureChart:null,_initPromise:null,_firstRenderPromise:null,_hasPresetFilter:null,updateChart:function(b){var c=this;this._destroyChart();if(b)return this._checkForMissingVariables(b),this._currentChartType=b.type,this._currentSeriesItems=(this._isMultiFeatureChart=b.isMultiFeatureChart)?v.getSeriesItemsForMultiFeatureChart(b.type,b.seriesItems,this.viewModel.dynamicReportInfo&&this.viewModel.dynamicReportInfo.fieldData.areaData):b.seriesItems,
this._originalSeriesItems=b.seriesItems&&b.seriesItems.slice(),this._currentVisualProperties=b.visualProperties,this._currentComparisonInfo=b.comparisonInfo,a.set(this.domNode,{width:this._currentVisualProperties.width+"px",height:this._currentVisualProperties.height+"px"}),this.domNode.style.backgroundColor=this._currentVisualProperties.panelBackgroundColor||"",w.hide(this.chartLabel),this._initPromise=D().then(function(){c.domNode&&(c._initChartComparisonSelect(),c._updateLabels(),c._createChart(),
c._addPlotEventListeners(),c._createLegend())}),this._firstRenderPromise=d(this._initPromise,function(){var a=c._currentVisualProperties.filter;c._hasPresetFilter=!!a;return!a||a.ranges&&!c.viewModel.dynamicReportInfo?c._updateSeries():d(c.getFilterRanges(),function(b){b=b.map(function(b){var c=z.filterData(b.dataArray,a);return{fieldName:b.fieldName,min:c[0],max:c[c.length-1]}});return c._setFilterRanges(b)})}),C.showProgressPromise(this.domNode,this._initPromise)},getRenderPromise:function(){return this._firstRenderPromise},
_checkForMissingVariables:function(a){var b=a.seriesItems.some(function(a){return a.points.some(function(a){return a.fieldInfo&&a.fieldInfo.isMissing})});w[b?"show":"hide"](this.missingVariablesDiv);b&&(this.missingVariablesDiv.style.top=(a.visualProperties.height-this.missingVariablesDiv.clientHeight)/2+"px")},isMultiFeatureChart:function(){return this._isMultiFeatureChart},getLegendNode:function(){return this.legendContainerDiv},getChartSeries:function(){return this._currentSeries},_updateLabels:function(){this.chartLabel.innerHTML=
this._currentVisualProperties.title.text;w[this.chartLabel.innerHTML?"show":"hide"](this.chartLabel);this.chartLabel.style.textAlign=this._currentVisualProperties.title.align;this.chartLabel.style.marginTop=(this._currentVisualProperties.title.verticalShift||0)+"px";var b=e.mixin({},this.viewModel.getChartDefaultStyles(this.theme).titleStyle,this._currentVisualProperties.title.style);delete b.backgroundColor;a.set(this.chartLabel,O.getStyleObjWithUnits(b))},_createChart:function(){var a=b.create("div",
{"class":"chartContainerDiv_innerChartNode"},this.chartContainerDiv),c=new I(a,{margins:this._getChartMargins()});this.chart=c;c.setTheme(this.chartTheme);K.getChartBuilder(this._currentChartType).configureChart({chart:c,seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,chartType:this._currentChartType,comparisonInfo:this._currentComparisonInfo,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),viewModel:this.viewModel,currentFeatureIndex:this.currentFeatureIndex});
if(this.viewModel.dynamicReportInfo||F.charts.enableEffects)this._currentChartType===t.PIE&&new M(c,r.PRIMARY,{scale:1.03}),r.getWorkingPlots(c).forEach(function(a,b){0===b||this._getComparisonChartType();new H(c,a)},this);this._setChartTooltip()},_getChartMargins:function(){function a(a){return"number"===typeof b._currentVisualProperties[a]?b._currentVisualProperties[a]:10}var b=this;return{t:a("marginTop"),r:a("marginRight"),b:a("marginBottom"),l:a("marginLeft")}},_setChartTooltip:function(){r.getWorkingPlots(this.chart).forEach(function(a,
b){b=0===b?this._currentChartType:this._getComparisonChartType();a=new L(this.chart,a,{duration:50});a.showStatistics=!!this.viewModel.dynamicReportInfo||F.charts.showStatisticsInTooltips;a.setChartType(b)},this)},_destroyChart:function(){this._levelLineBuilder&&this._levelLineBuilder.hideLevelLine();this.chartContainerDiv&&b.empty(this.chartContainerDiv);this.chart&&this.chart.destroy();this.chart=null;this._destroyLegend()},_updateSeries:function(){var a=this;this._removeSeries();if(this.chart){if(!this._currentSeriesItems)return this.resize();
this._seriesTotalStats={};this._currentSeries=K.getChartBuilder(this._currentChartType).calcSeries({chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,currentFeatureIndex:this.currentFeatureIndex,plotStats:this._seriesTotalStats,excludedSeriesHash:this._excludedSeriesHash,sorting:this._sorting||
this._currentVisualProperties.sorting,comparisonInfo:this._currentComparisonInfo,comparisonFeatureAttributes:this._getComparisonFeatureAttributes()});var b=K.checkSeriesAreValid(this._currentSeries);this._showError(!b);var c;b&&(this._currentSeries.forEach(function(b){a._excludedSeriesHash[b.name]||a.chart.addSeries(b.name,b.data,b.params)}),c=this.resize());return d(c,function(){a.onContentUpdated()})}},_removeSeries:function(){var a=this;this._currentSeries=this._currentSeries||[];this._currentSeries.forEach(function(b){a.chart.removeSeries(b.name)});
this._currentSeries.length=0},_chartWidth:0,_chartHeight:0,_resizedFlag:!1,_resizeDfd:null,_pendingResizeObj:!1,resize:function(b,c,e){if(this._currentVisualProperties)return void 0!==b&&a.set(this.domNode,{width:b+"px",height:c+"px"}),d(this._initPromise,function(){if(w.isNodeInLayout(this.domNode))return void 0!==b&&N.resizeVisualProperties(this._currentVisualProperties,b,c),this._resizedFlag||(this.domNode.style.opacity="0"),this._resizeDfd=this._resizeDfd||new k,e||this.immediateRender?this._doResizeChart():
A.invoke(this,"_doResizeChart",50);this._pendingResizeObj={width:b,height:c,immediate:e}}.bind(this))},_doResizeChart:function(){var a=this;if(this.chart){this._resizedFlag||(this.domNode.style.opacity="1");this._resizedFlag=!0;this._updateLegend();var b=N.calcChartDimentions(this,{visualProps:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chartType:this._currentChartType,maxIconSize:P.AXIS_ICON_MAX_SIZE,numPoints:this._currentSeries[0]?this._currentSeries[0].data.length:
0}),c=b.w,b=b.h;if(this.enableAxisLabelsAutoTilt&&this.viewModel.isGraphicStyle&&t.hasAxis(this._currentChartType)&&!t.isXAxisVertical(this._currentChartType)){var d=N.calcAxisLabelsAutoTilt(c,this._currentSeries,this._currentVisualProperties,this.viewModel.getChartDefaultStyles(this.theme));this.chart.getAxis("x").opt.rotation=d?-d:-this._currentVisualProperties.xAxis.labelsAngle}this._chartWidth=c;this._chartHeight=b;this._adjustErrorMessage();if(this._tableViewInfo)this._refreshTableView(),this._renderChartPendingFlag=
!0;else{try{this.chart&&(this.chart.isPreRenderMode=t.isColumnBarLike(this._currentChartType),this.chart.resize(this._chartWidth,this._chartHeight),this.chart.dirty&&this.chart.render(),t.isColumnBarLike(this._currentChartType)&&(K.getChartBuilder(this._currentChartType).updateBarSize({chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,currentFeatureIndex:this.currentFeatureIndex,viewModel:this.viewModel,seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,
chartSize:this.chart.plotArea[t.isColumnLike(this._currentChartType)?"width":"height"],excludedSeriesHash:this._excludedSeriesHash,comparisonInfo:this._currentComparisonInfo,numComparisonFeatures:this._getNumComparisonFeatures()}),K.getChartBuilder(this._currentChartType).prettifyColumnBarYAxis({totalStat:this._seriesTotalStats,chart:this.chart,chartType:this._currentChartType,chartSeries:this._currentSeries,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),visualProperties:this._currentVisualProperties,
chartSize:this.chart.plotArea[t.isColumnLike(this._currentChartType)?"height":"width"],viewModel:this.viewModel})),this.chart.isPreRenderMode=!1,this.chart.dirty&&this.chart.render())}catch(S){console.log(S)}return y.delay(function(){a._updateLegend();a._updateIcons();a._updateTexts();a._resizeDfd&&a._resizeDfd.resolve();a._resizeDfd=null;a.onRendered()})}}},notifyShown:function(){var a=this;return d(this._initPromise,function(){w.isNodeInLayout(a.domNode)&&d(a._pendingResizeObj&&a.resize(a._pendingResizeObj.width,
a._pendingResizeObj.height,a._pendingResizeObj.immediate),function(){a._pendingResizeObj=null;a.viewModel.isAnimationAllowed()&&r.getWorkingPlots(a.chart).forEach(function(b,c){a.chart.getPlot(b).renderAnimation&&a.chart.getPlot(b).renderAnimation()})})})},onRendered:function(){},_getIconRendererClass:function(){return P},_updateIcons:function(){this._iconRenderer||(this._iconRenderer=(new this._getIconRendererClass)(),this.own(this._iconRenderer),this._iconRenderer.setViewMode(this._viewMode));this._iconRenderer.renderIcons({viewModel:this.viewModel,
theme:this.theme,parentWidget:this,chartType:this._currentChartType,iconNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chart:this.chart})},_getTextRendererClass:function(){return Q},_updateTexts:function(){this._textRenderer||(this._textRenderer=(new this._getTextRendererClass)(),this._textRenderer.currentFeatureIndex=this.currentFeatureIndex,this.own(this._textRenderer),this._textRenderer.setViewMode(this._viewMode));
this._textRenderer.renderTexts({viewModel:this.viewModel,theme:this.theme,parentWidget:this,textNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,chart:this.chart})},_viewMode:null,setViewMode:function(a){if(this._viewMode!==a)return this._viewMode=a,d(this._initPromise,function(){this._iconRenderer&&this._iconRenderer.setViewMode(a);this._textRenderer&&this._textRenderer.setViewMode(a);this._tableViewRenderer&&this._tableViewRenderer.setViewMode(a)}.bind(this))},
_showError:function(a){F.emulateErrors.contentErrors&&(a=!0);w[a?"show":"hide"](this.errorDiv);w[a?"hide":"show"](this.chartNormalViewDiv)},_adjustErrorMessage:function(){this.errorDiv.style.paddingTop=a.get(this.domNode,"height")/2-20+"px"},_sorting:null,getSorting:function(){return this._sorting},sortChart:function(a){this._sorting=a&&a!==q.NONE?a:null;return d(this._initPromise,function(){this._updateSeries()}.bind(this))},_filterStats:null,_numShownElements:null,_filterRanges:null,canFilterAreas:function(){return this._isMultiFeatureChart&&
!!this._getGeoenrichment()},canFilterVariables:function(){return t.canFilterVariables(this._currentChartType,this._isMultiFeatureChart)},getFilterRanges:function(){return this.canFilterAreas()||this.canFilterVariables()?d(this._initPromise,function(){this.canFilterAreas()?this._filterStats=this._getGeoenrichment().collectFilterRangesStats():this._filterStats=u.collectStatsForVariables(this._currentChartType,this._currentSeriesItemsUnfiltered||this._currentSeriesItems,this._currentVisualProperties,
this.viewModel,this.currentFeatureIndex);return this._filterStats.filterRanges}.bind(this)):this._filterStats=null},setFilterRanges:function(a){this._hasPresetFilter=!1;return this._setFilterRanges(a)},_setFilterRanges:function(a){this._filterRanges=a;return d(this._initPromise,function(){this._currentSeriesItemsUnfiltered&&(this._currentSeriesItems=this._currentSeriesItemsUnfiltered,this._currentSeriesItemsUnfiltered=null);this._currentSeriesItemsUnfiltered=this._currentSeriesItems;var b=u.filterSeriesItems(this._currentChartType,
this._currentSeriesItems,this._currentVisualProperties,a,this.viewModel,this.currentFeatureIndex,this.canFilterAreas());this._currentSeriesItems=b.seriesItems;this._numShownElements=b.numShownElements;var c;this.canFilterAreas()&&this._setFilterRangesForComparison(a)?this._numShownElements+=this._getGeoenrichment().getAllGeographyAttributes().length:c=this._updateSeries();this._showEmptyView(!this._numShownElements);return c}.bind(this))},getNumElementsTotal:function(){return this._filterStats&&(this.canFilterAreas()?
this._filterStats.numAreasTotal:this._filterStats.numVariablesTotal)||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()},_showEmptyView:function(a){w[a?"hide":"show"](this.chartNormalViewDiv);w[a?"show":"hide"](this.noDataPlaceHolder);a&&this._syncEmptyViewPlaceholder()},_syncEmptyViewPlaceholder:function(){this.noDataPlaceHolder&&a.set(this.noDataPlaceHolder,"paddingTop",(a.get(this.domNode,"height")-a.get(this.noDataPlaceHolder,
"height"))/2+"px")},chartToTable:function(a){return d(this._initPromise,function(){this._removeTable();this._setIsTableView(a);w.hide([this.chartContainerDiv,this.legendContainerDiv]);for(var b=0;b<this.chartContainerWithAxis.children.length;b++){var c=this.chartContainerWithAxis.children[b];c!==this.tableContainerDiv&&w.hide(c)}this._tableViewRenderer||(this._tableViewRenderer=new R,this.own(this._tableViewRenderer),this._tableViewRenderer.setViewMode(this._viewMode));return this._refreshTableView(!0)}.bind(this))},
_refreshTableView:function(b){return this._tableViewRenderer.renderTableForChart({chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,parentWidget:this,tableNode:this.tableContainerDiv,width:a.get(this.domNode,"width"),height:this._chartHeight,chartSeries:this._currentSeries,visualProperties:this._currentVisualProperties,hasComparison:!!this._currentComparisonInfo,chart:this.chart,showAnimation:b,tableViewInfo:this._tableViewInfo})},
tableToChart:function(){if(this._tableViewInfo)return d(this._initPromise,function(){this._removeTable();if(this._renderChartPendingFlag)return this._renderChartPendingFlag=!1,d(this.resize(),this.notifyShown.bind(this));this.notifyShown()}.bind(this))},_removeTable:function(){this._setIsTableView(null);w.show([this.chartContainerDiv,this.legendContainerDiv]);for(var a=0;a<this.chartContainerWithAxis.children.length;a++)w.show(this.chartContainerWithAxis.children[a]);this._tableViewRenderer&&this._tableViewRenderer.destroyTable()},
_setIsTableView:function(a){this._tableViewInfo=a;c[this._tableViewInfo?"add":"remove"](this.domNode,"isChartDataInTableView");this._updateComparisonLabel()},getVisualState:function(){return{type:"chart",sorting:this.getSorting(),hasPresetFilter:this._hasPresetFilter,filterRanges:this._filterRanges&&e.clone(this._filterRanges),comparisonAttributes:this._comparisonAttributes,additionalAttributes:this._additionalAttributes&&this._additionalAttributes.slice(),tableViewInfo:this._tableViewInfo&&e.clone(this._tableViewInfo),
tableViewRenderer:this._tableViewRenderer&&this._tableViewRenderer.getVisualState(),excludedSeriesHash:this._excludedSeriesHash&&e.clone(this._excludedSeriesHash)}},setVisualState:function(a){if(a){this._excludedSeriesHash=a.excludedSeriesHash;var b=this;return d(this._initPromise,function(){return d(b._resizeDfd&&b._resizeDfd.promise,function(){return d(a.sorting&&b.sortChart(a.sorting),function(){return d(a.filterRanges&&b.setFilterRanges(a.filterRanges),function(){a.additionalAttributes&&(b._additionalAttributes=
a.additionalAttributes);return d(a.comparisonAttributes&&b._setComparisonAttributes(a.comparisonAttributes),function(){return d(a.tableViewInfo&&b.chartToTable(a.tableViewInfo),function(){return b._tableViewRenderer&&b._tableViewRenderer.setVisualState(a.tableViewRenderer)})})})})})})}},isMouseOver:function(a){return B.isMouseOver(this.domNode,{event:a})||this.comparisonSelect&&this.comparisonSelect.isMouseOver(a)},getWidth:function(){return this._currentVisualProperties.width},getHeight:function(){return this._currentVisualProperties.height},
onContentUpdated:function(){},destroy:function(){this._destroyChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartLegendSupport":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style ./utils/ChartTypes ./utils/ChartStyleUtil ./utils/ChartCalculator ./legends/ChartLegendTypes ./legends/ChartLegendPlacements ./legends/MinMaxLegend ./legends/SelectableLegend ./legends/ChartLegendSymbols".split(" "),function(g,f,e,k,c,b,a,d,h,
l,m,n){return g(null,{legend:null,_placements:[h.LEFT,h.RIGHT,h.TOP,h.BOTTOM],_excludedSeriesHash:null,_createLegend:function(){this._excludedSeriesHash={};this._placements.forEach(function(a){e.remove(this.domNode,"legendPlacement"+a)},this);this._currentVisualProperties.legend&&(this._currentVisualProperties.legend.type===d.MIN_MAX?this._createMinMaxLegend():this._createSeriesLegend())},_createSeriesLegend:function(){var a=this._currentVisualProperties.legend.series.placement;a!==h.NONE&&(this.legend=
(new m(f.mixin({chart:this.chart,chartType:this._currentChartType,allowSelect:!!this.viewModel.dynamicReportInfo&&(c.isColumnBarLike(this._currentChartType)||c.isLineLike(this._currentChartType)),isStacked:h.isOnSide(a),isRtlPlacement:a===h.LEFT&&!this.viewModel.isGraphicStyle,keepItemsTheSameWidth:!0,customLegendSymbol:this._currentVisualProperties.legend.series.symbol,defaultLegendSymbol:n.getDefaultSymbol(this._currentChartType,this.viewModel.isGraphicStyle),showValues:this._currentChartType===
c.WAFFLE,hideLastPoint:this._currentVisualProperties.legend.series.hideOthers,onSeriesExclusionChanged:f.hitch(this,this._onSeriesExclusionChanged)},this._getAdditionalLegendParams()))).placeAt(this.getLegendNode()),this._applyStyleToSeriesLegend(),e.add(this.domNode,"legendPlacement"+a))},_applyStyleToSeriesLegend:function(){var a=this.viewModel.getChartDefaultStyles(this.theme),a=f.mixin({},a.legendStyle,this._currentVisualProperties.legend.series.style);this.viewModel.isGraphicStyle||delete a.backgroundColor;
k.set(this.legend.domNode,b.getStyleObjWithUnits(a));this._currentVisualProperties.legend.series.hasBorder||k.set(this.legend.domNode,"border","none")},_createMinMaxLegend:function(){this._currentVisualProperties.legend.minMax&&this._currentVisualProperties.legend.minMax.placement!==h.NONE&&(this.legend=(new l({viewModel:this.viewModel,theme:this.theme,chartType:this._currentChartType})).placeAt(this.getLegendNode()),e.add(this.domNode,"hasMinMaxLegend"),e.add(this.domNode,"legendPlacement"+this._currentVisualProperties.legend.minMax.placement))},
_getAdditionalLegendParams:function(){return null},_onSeriesExclusionChanged:function(a){this._excludedSeriesHash=a;this._updateSeries()},_updateLegend:function(){this.legend&&(this._currentVisualProperties.legend.type===d.MIN_MAX?this._updateMinMaxLegend():this._updateSeriesLegend())},_updateSeriesLegend:function(){this.legend.chartWidth=this.domNode.clientWidth-2*a.PRETTY_PADDING;var b=(!this._isMultiFeatureChart||c.isLineLike(this._currentChartType))&&this._currentComparisonInfo&&this._currentVisualProperties.legend.series.showComparison,
d=this._currentSeries.filter(function(a){return!a.isComparisonSeries||b});this.legend.series=d;this.legend.showSeriesData=1===d.length&&!c.isLineLike(this._currentChartType);d=!!this.viewModel.dynamicReportInfo&&1<d.length;d!==this.legend.allowSelect&&(this.legend.allowSelect=d);this.legend.refresh()},_updateMinMaxLegend:function(){var a=this._currentSeries.filter(function(a){return!a.isComparisonSeries});this.legend.refresh(a,this._currentVisualProperties)},_destroyLegend:function(){this.legend&&
this.legend.destroy();this.legend=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartStyleUtil":function(){define(["dojo/_base/lang"],function(g){var f={},e={left:1,right:1,top:1,bottom:1,width:1,height:1,fontSize:1};f.getStyleObjWithUnits=function(f,c){c=c||"px";f=g.mixin({},f);for(var b in f)if(e[b]){var a=f[b];!a||"string"===typeof a&&-1!==a.indexOf(c)||(f[b]=a+c)}return f};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartCalculator":function(){define("dojo/_base/lang dojo/dom-style ./ChartTypes ../legends/ChartLegendTypes ../legends/ChartLegendPlacements ../../themes/ThemeLibrary esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(g,f,e,k,c,b,a){return{PRETTY_PADDING:10,calcChartDimentions:function(b,h){var d=h.visualProps,m=h.comparisonInfo,n=h.chartType,p=h.maxIconSize,t=h.numPoints;h=d.width;var q=d.height,v=0,r=0,u=0,y,w,A,B,C=!a.isHidden(b.chartLabel),z=0;e.isColumnLike(n)&&!d.xAxis.show&&d.showAxisIcons&&(q+=30);C&&(z=f.get(b.chartLabel,"height")+(d.title.verticalShift||0),q-=z);d.showAxisIcons&&(e.isColumnLike(n)?q-=Math.min(p,(h-100)/t*.8)+10:e.isBarLike(n)&&(p=Math.min(p,(q-50)/t*.8)+10,v+=p,h-=p));var d=
d.legend||{},t=d[d.type===k.MIN_MAX?"minMax":"series"]||{},p=t.placement||c.NONE,t=(t.placementOffset||0)/100,E=p===c.LEFT||p===c.RIGHT,G=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetWidth+20,F=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetHeight+20;!m||!e.isComparisonSupported(n)||d.type===k.MIN_MAX&&E||(q-=F);E||f.set(b.getLegendNode(),{width:h-20+"px"});n=b.legend&&a.noTransformPosition(b.legend.domNode);n=g.mixin({w:0,h:0},n);E||f.set(b.getLegendNode(),{width:""});var D=E?q-
48:0;n.h=D?Math.min(n.h,D):n.h;n.h+=20;d.type===k.MIN_MAX&&E&&(n.w=Math.max(n.w,G));switch(p){case c.LEFT:y=10;w=z+q*t;v+=2*y+n.w;h-=v;break;case c.RIGHT:A=10;w=z+q*t;r+=2*A+n.w;h-=r;break;case c.TOP:q-=n.h;w=C?z+10:10;A=y=10;u+=n.h;break;case c.BOTTOM:q-=n.h,B=A=y=10,m&&(B+=F-10)}f.set(b.chartLabel,{marginLeft:"10px",marginRight:"10px"});f.set(b.chartContainerWithAxis,{marginTop:u+"px",marginLeft:v+"px",marginRight:r+"px"});b.legend&&f.set(b.legend.domNode,{maxHeight:D?D+"px":""});f.set(b.getLegendNode(),
{left:void 0!==y?y+"px":"",right:void 0!==A?A+"px":"",top:void 0!==w?w+"px":"",bottom:void 0!==B?B+"px":""});return{w:h,h:q}},calcAxisLabelsAutoTilt:function(c,e,f,k){if(!e||!e.length||0!==f.xAxis.labelsAngle)return!1;var d=!1,h=(c-50)/e[0].data.length-20;c=g.mixin({},k.xAxis.axisStyle,k.xAxis.style,f.xAxis.style);var l=a.getMeasureContext({style:"font-size:"+(c.fontSize||b.CHART_DATA_FONT_SIZE-1)+"px;font-family:"+(c.fontFamily||b.DEFAULT_FONT_FAMILY_GRAPHIC)});e[0].data.some(function(a){return l.measureText(a.name).w>
h})&&(d=20);l.destroy();return d},resizeVisualProperties:function(a,b,c){var d=a.width,e=a.height;a.width=b;a.height=c;a.floatingTexts&&a.floatingTexts.forEach(function(a){a.style.left*=b/d;a.style.top*=c/e});a.floatingIcons&&a.floatingIcons.forEach(function(a){a.style.left*=b/d;a.style.top*=c/e})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/MinMaxLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ../utils/ChartStyleUtil ../utils/ChartTypes dojo/text!../../templates/MinMaxLegend.html dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.MinMaxLegend;return g([k,c],{templateString:d,nls:h,viewModel:null,theme:null,chartType:null,refresh:function(c,d){function g(a){var b=a.fieldInfo;return b&&(b.script?b.script.alias:b.alias)||a.label}var h,k,l=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,r,u;c.forEach(function(a){a.data.forEach(function(b){var c=b.originalValue;c<l&&(l=c,h=b,r=a);c>m&&(m=c,k=b,u=a)})});if(k&&h){var y=this.viewModel.getChartDefaultStyles(this.theme);
c=f.mixin({},y.minMaxLegend.titleStyle,d.legend.minMax.titleStyle);var w=f.mixin({},y.minMaxLegend.minVariableLabelStyle,d.legend.minMax.minVariableLabelStyle);d=f.mixin({},y.minMaxLegend.maxVariableLabelStyle,d.legend.minMax.maxVariableLabelStyle);e.set(this.largestGroupTitleDiv,b.getStyleObjWithUnits(c));e.set(this.smallestGroupTitleDiv,b.getStyleObjWithUnits(c));this.largestGroupDiv.innerHTML=g(k.point);this.smallestGroupDiv.innerHTML=g(h.point);e.set(this.largestGroupDiv,b.getStyleObjWithUnits(d));
e.set(this.smallestGroupDiv,b.getStyleObjWithUnits(w));d.color||(this.largestGroupDiv.style.color=a.isLineLike(this.chartType)?u.params.stroke.color:k.fill);w.color||(this.smallestGroupDiv.style.color=a.isLineLike(this.chartType)?r.params.stroke.color:h.fill)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/SelectableLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/lists/FlowList ../utils/ThemeCalculator ./LegendSymbolRenderer".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p){var t=g(null,{createPresentation:function(d,f,g,h,m){var n=this,q=k.create("div",{"class":"selectableLegendRoot "+(this.isStacked()?"":"dijitInline")},g);q.style.paddingLeft=(this.isStacked()?3:10)+"px";q.style.paddingRight=(this.isStacked()?3:10)+"px";m=this.canSelect()&&new l(q,{"class":"dijitInline selectableLegendRootCheckbox"});h=p.renderSymbol({defaultSymbol:this.getDefaultLegendSymbol(),customSymbol:this.getCusomLegendSymbol(),marker:d.marker,stroke:d.stroke,
fill:d.fill,width:8,height:15});f=k.create("div",{innerHTML:d.label,"class":"dijitInline selectableLegendRootLabel TrimWithEllipses"});if(g=d.valueText&&k.create("div",{innerHTML:this.isStacked()?d.valueText:"("+d.valueText+")","class":"dijitInline selectableLegendRootValue TrimWithEllipses"}))g.style.marginLeft="10px";this.isRtlPlacement()?(k.place(f,q),g&&k.place(g,q),k.place(h,q)):(k.place(h,q),k.place(f,q),g&&k.place(g,q));m&&(m.set("checked",!d.unchecked),e[d.unchecked?"add":"remove"](q,"selectableLegendRoot_unselected"),
m.onClick=function(a){e[a.checked?"remove":"add"](q,"selectableLegendRoot_unselected");n.onSelectionChanged(d.label,a.checked)});(m=this.getItemMaxWidth())&&this.needFormatAsTable()&&(g&&(h=m-c.getMarginBox(h).w-c.getMarginBox(f).w-g.clientWidth,g.style.marginLeft=h+"px"),q.style.width=m+"px");this.setItemWidth(b.get(q,"width"),q.clientWidth);this.canEditLabel(d)&&(e.add(f,"isEditable"),a(f,"click",function(a){a.stopPropagation();n.onLabelClicked(d,q)}));return q},isRtlPlacement:function(){},isStacked:function(){},
needFormatAsTable:function(){},canSelect:function(){},onSelectionChanged:function(a,b){},getDefaultLegendSymbol:function(){},getCusomLegendSymbol:function(){},canEditLabel:function(a){},onLabelClicked:function(a,b){},getItemMaxWidth:function(){},setItemWidth:function(a,b){}});return g([d,h],{templateString:"\x3cdiv class\x3d'esriGESelectableLegend'\x3e\x3cdiv data-dojo-attach-point\x3d'listDiv'\x3e\x3c/div\x3e\x3c/div\x3e",series:null,allowSelect:!0,allowEditLabels:!1,showSeriesData:!1,isRtlPlacement:!1,
keepItemsTheSameWidth:!1,customLegendSymbol:null,defaultLegendSymbol:null,showValues:!1,isStacked:!1,hideLastPoint:!1,chartWidth:0,chartType:null,list:null,_isCollectingWidthsFlag:!1,_uncheckedSeriesHash:null,_itemMaxWidth:0,_itemFullWidths:null,_isFlowStacked:!1,postCreate:function(){var a=this;this._uncheckedSeriesHash={};var b=f.mixin(new t,{onSelectionChanged:function(b,c){c?delete a._uncheckedSeriesHash[b]:a._uncheckedSeriesHash[b]=!0;a.onSeriesExclusionChanged(a._uncheckedSeriesHash)},onLabelClicked:function(b,
c){if(a.showSeriesData)a.onPointLabelClickedAt(void 0!==b.unsortedIndex?b.unsortedIndex:a.list.items.indexOf(b),c);else a.onSeriesLabelClickedAt(a.list.items.indexOf(b),c)},isStacked:function(){return a.isStacked},needFormatAsTable:function(){return a.isStacked||a._isFlowStacked},canSelect:function(){return a.allowSelect},getDefaultLegendSymbol:function(){return a.defaultLegendSymbol},getCusomLegendSymbol:function(){return a.customLegendSymbol},canEditLabel:function(b){return!b.isComparisonSeries&&
a.allowEditLabels},isRtlPlacement:function(){return a.isRtlPlacement},getItemMaxWidth:function(){return a._isCollectingWidthsFlag?0:a._itemMaxWidth},setItemWidth:function(b,c){a._isCollectingWidthsFlag&&(a._itemFullWidths.push(c),a._itemMaxWidth=Math.max(a._itemMaxWidth,b))}});this.list=new m({"class":"selectableLegendFlowList",itemRenderer:b},this.listDiv);this.own(this.list);this.isRtlPlacement&&(this.domNode.style.textAlign="right")},refresh:function(){var a=this._getItems();this.list.domNode.style.width=
"";this._itemMaxWidth=0;this._itemFullWidths=[];this._isCollectingWidthsFlag=!0;this._isFlowStacked=!1;this.list.setItems(a);this._isCollectingWidthsFlag=!1;var b=0;this._itemFullWidths.forEach(function(a){b+=a});this._isFlowStacked=!this.isStacked&&this.chartWidth&&b>this.chartWidth;this.keepItemsTheSameWidth&&this.list.refresh();!this.isStacked&&this.chartWidth&&(this._isFlowStacked?(a=this.list.domNode.children[0].clientWidth,a=Math.max(1,Math.floor(this.chartWidth/a))*a+2):a=b+2,this.list.domNode.style.width=
a+"px")},_getItems:function(){var a=this,b=[];this.showSeriesData?(this.series&&this.series[0]&&this.series[0].data.forEach(function(c){var d={label:c.name||"",valueText:a.showValues?c.tooltip.valueLabel:null,unsortedIndex:c.unsortedIndex};c=a._getDataFillAndStrokeColors(null,c);d.fill=c.fill;d.stroke=c.stroke;d.marker=c.marker;b.push(d)}),this.hideLastPoint&&b.pop()):this.series&&this.series.forEach(function(c){var d={label:c.name,unchecked:!0===a._uncheckedSeriesHash[c.name],isComparisonSeries:c.isComparisonSeries};
c=a._getDataFillAndStrokeColors(c.params,c.data[0]);d.fill=c.fill;d.stroke=c.stroke;d.marker=c.marker;b.push(d)});return b},_getDataFillAndStrokeColors:function(a,b){a=a||{};var c=n.getPointIconStyle(b),d=a.markerFill||a.fill;d||(d=b.point&&b.point.hidden&&b.unhiddenFillColor||b.fill);d||(d=c.fillColor);var e=a.markerStroke&&a.markerStroke.color;e||(e=a.stroke&&a.stroke.color&&0<a.stroke.width?a.stroke.color:b.stroke&&b.stroke.color&&0<b.stroke.width?b.point&&b.point.hidden&&b.unhiddenLineColor||
b.stroke.color:c.borderColor);return{fill:d,stroke:e,marker:a.unscaledMarker||a.marker||b.marker}},resetExclusion:function(){this._uncheckedSeriesHash={}},onSeriesLabelClickedAt:function(a,b){},onPointLabelClickedAt:function(a,b){},onSeriesExclusionChanged:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/LegendSymbolRenderer":function(){define(["dojo/dom-class","dojo/dom-construct","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ShapeUtil","./ChartLegendSymbols"],
function(g,f,e,k,c){return{renderSymbol:function(b){var a=f.create("div",{"class":"dijitInline esriGEReportPlayerChartLegendSymbol"}),d=b.stroke&&e.toCSSColor(b.stroke),h=b.fill&&e.toCSSColor(b.fill);if(b.marker&&!b.customSymbol){g.add(a,"isSVGSymbol");var l=k.createSVGNode({xmin:0,ymin:0,width:6,height:6},{width:(b.width||8)+"px",height:(b.height||8)+"px",overflow:"visible"});l.appendChild(k.createPathNode(b.marker,{borderColor:d||"transparent",borderWidth:1,fillColor:h||"transparent"}));f.place(l,
a)}else g.add(a,(b.customSymbol||b.defaultSymbol||c.SQUARE).toLowerCase()),h&&(a.style.backgroundColor=h),d&&(a.style.border="1px solid "+d);return a}}})},"esri/dijit/geoenrichment/utils/ShapeUtil":function(){define(["dojo/dom-style","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(g,f,e){var k={fillColor:"#FFFFFF",fillAlpha:1,borderAlpha:0,borderWidth:1},c={createSVGNode:function(b,a){var c=document.createElementNS("http://www.w3.org/2000/svg","svg");a&&g.set(c,a);b=[b.xmin||
0,b.ymin||0,b.width,b.height].join(" ");c.setAttribute("viewBox",b);c.setAttribute("xmlns","http://www.w3.org/2000/svg");return c},createPathNode:function(b,a){var d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",b);c._setSettingsToNode(d,a);return d},createEllipseNode:function(b,a,d,e,f){var g=document.createElementNS("http://www.w3.org/2000/svg","ellipse");g.setAttribute("cx",b||0);g.setAttribute("cy",a||0);g.setAttribute("rx",d);g.setAttribute("ry",e);c._setSettingsToNode(g,
f);return g},createCircleNode:function(b,a,d,e){var f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.setAttribute("cx",b||0);f.setAttribute("cy",a||0);f.setAttribute("r",d);c._setSettingsToNode(f,e);return f},createRectNode:function(b,a,d,e,f){var g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.setAttribute("x",b||0);g.setAttribute("y",a||0);g.setAttribute("width",d);g.setAttribute("height",e);c._setSettingsToNode(g,f);return g},createLineNode:function(b,a,d,e,
f){var g=document.createElementNS("http://www.w3.org/2000/svg","line");g.setAttribute("x1",b||0);g.setAttribute("y1",a||0);g.setAttribute("x2",d||0);g.setAttribute("y2",e||0);c._setSettingsToNode(g,f);return g},createPolygonNode:function(b,a){var d=document.createElementNS("http://www.w3.org/2000/svg","polygon");d.setAttribute("points",b);c._setSettingsToNode(d,a);return d},createNodeByAttributes:function(b,a,d){var e=null;switch(b.name){case "path":e=c.createPathNode(b.d,a);break;case "ellipse":e=
c.createEllipseNode(b.cx,b.cy,b.rx,b.ry,a);break;case "circle":e=c.createCircleNode(b.cx,b.cy,b.r,a);break;case "rect":e=c.createRectNode(b.x,b.y,b.width,b.height,a);break;case "line":e=c.createLineNode(b.x1,b.y1,b.x2,b.y2,a);break;case "polygon":e=c.createPolygonNode(b.points,a)}e&&(b=b["fill-opacity"],void 0===b||d&&d.overrideFillOpacity||(e.hasAttribute("fill-opacity")&&(b*=e.getAttribute("fill-opacity")),e.setAttribute("fill-opacity",b)));return e},_setSettingsToNode:function(b,a){if(a.borderWidth){var d=
c.toColor(a,"border","#000000");b.setAttribute("stroke",e.toCSSColor(d,!0));b.setAttribute("stroke-width",a.borderWidth);b.setAttribute("stroke-opacity",d.a);a.borderDashArray&&b.setAttribute("stroke-dasharray",Array.isArray(a.borderDashArray)?a.borderDashArray.join(","):a.borderDashArray);a.strokeMiterLimit&&b.setAttribute("stroke-miterlimit",a.strokeMiterLimit);a.borderScale||b.setAttribute("vector-effect","non-scaling-stroke")}a.fillColor&&(d=c.toColor(a,"fill","#FFFFFF"),b.setAttribute("fill",
e.toCSSColor(d,!0)),b.setAttribute("fill-opacity",d.a))},toColor:function(b,a,c,f){c=e.toColor(b[a+"Color"],c);1===c.a&&(b=b[a+"Alpha"],isNaN(b)&&(b=f),isNaN(b)||(c.a=b));return c},createSVGfromJson:function(b,a,d,e){e=f.mixin({},k,e);void 0===e.borderColor&&(e.borderColor=e.fillColor);var g=c.createSVGNode(b.viewBox,{width:a+"px",height:d+"px",overflow:"visible"});b.g.forEach(function(a){g.appendChild(c.createNodeByAttributes(a,e))});return g}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendSymbols":function(){define(["../utils/ChartTypes"],
function(g){var f={SQUARE:"Square",CIRCLE:"Circle",RECTANGLE:"Rectangle",LINE:"Line",isSupported:function(e){for(var g in f)if(f[g]===e)return!0;return!1},getDefaultSymbol:function(e,k){return k&&e!==g.WAFFLE?f.CIRCLE:f.SQUARE}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartEventSupport":function(){define(["dojo/_base/declare","./utils/builder/ChartPlots","./utils/ChartTypes","./level/LevelLineBuilder"],function(g,f,e,k){return g(null,{showLevelLine:!0,_levelLineBuilder:null,
_addPlotEventListeners:function(){var c=this;this.chart&&e.hasAxis(this._currentChartType)&&(this._levelLineBuilder=this._levelLineBuilder||this.showLevelLine&&new k({lineContainerNode:this.domNode}),f.getWorkingPlots(this.chart).forEach(function(b,a){this.chart.connectToPlot(b,function(b){if(b.shape&&b.shape.shape&&b.shape.rawNode){var d=b.type,f=b.shape.rawNode,g=0===a?c._currentChartType:c._getComparisonChartType(),k=!1,p=!e.isXAxisVertical(c._currentChartType);c._currentVisualProperties.renderColumnBarsInOppositeDirections?
(k=c.chart.series.filter(function(a){return b.run.plot===a.plot}),k=k.indexOf(b.run)>=k.length/2):k=b.y<c._currentVisualProperties.yAxis.baseLineValue;c._levelLineBuilder&&c._levelLineBuilder.supportsLevelLine(g)&&("onmouseout"===d?c._levelLineBuilder.hideLevelLine():"onmouseover"===d&&c._levelLineBuilder.showLevelLine(c.chart,f,g,p,k))}})},this))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/ChartPlots":function(){define([],function(){var g={GRID:"grid",PRIMARY:"default",
SECONDARY:"secondary",getWorkingPlots:function(f){var e=[];f.getPlot(g.PRIMARY)&&e.push(g.PRIMARY);f.getPlot(g.SECONDARY)&&e.push(g.SECONDARY);return e}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/level/LevelLineBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style ../utils/ChartTypes esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(g,f,e,k,c,b,a){var d={updateLine:function(b,d){e.remove(b,"esriGEReportPlayer_chartContainerLevelLineH esriGEReportPlayer_chartContainerLevelLineV");
d?e.add(b,"esriGEReportPlayer_chartContainerLevelLineH"):e.add(b,"esriGEReportPlayer_chartContainerLevelLineV");a.show(b);c.set(b,{pointerEvents:"none",left:"",top:"",width:"",height:""})}};return g(null,{lineContainerNode:null,_levelLineDiv:null,_secondaryLineDiv:null,constructor:function(a){f.mixin(this,a)},supportsLevelLine:function(a){return a===b.COLUMN||a===b.BAR||b.isLineLike(a)},showLevelLine:function(a,c,d,e,f){this._levelLineDiv=this._levelLineDiv||k.create("div",null,this.lineContainerNode);
this._drawLine(this._levelLineDiv,a,c,d,e,f);b.isLineLike(d)&&(this._secondaryLineDiv=this._secondaryLineDiv||k.create("div",null,this.lineContainerNode),this._drawLine(this._secondaryLineDiv,a,c,d,!e,f))},_drawLine:function(e,f,g,k,p,t){f=f.calculateGeometry();g=a.noTransformPosition(g);var h=a.noTransformPosition(f.node),l=c.get(f.node,"width"),n=c.get(f.node,"height"),m=a.noTransformPosition(this.lineContainerNode);d.updateLine(e,p);switch(k){case b.COLUMN:p&&c.set(e,{top:(t?g.y+g.h-m.y:g.y-m.y-
1)+"px",left:h.x-m.x+f.offsets.l+"px",width:l-f.offsets.l-f.offsets.r+"px"});break;case b.BAR:p||c.set(e,{left:(t?g.x-m.x:g.x+g.w-m.x)+"px",top:h.y-m.y+f.offsets.t+"px",height:n-f.offsets.t-f.offsets.b+"px"});break;case b.LINE:case b.VERTICAL_LINE:p?c.set(e,{top:g.y+g.h/2-m.y-1+"px",left:h.x-m.x+f.offsets.l+"px",width:l-f.offsets.l-f.offsets.r+"px"}):c.set(e,{left:g.x+.5*g.w-m.x+"px",top:h.y-m.y+f.offsets.t+"px",height:n-f.offsets.t-f.offsets.b+"px"})}},hideLevelLine:function(){a.hide([this._levelLineDiv,
this._secondaryLineDiv])}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartComparisonSupport":function(){define("dojo/_base/declare ../comparison/ComparisonSelect ./utils/ChartTypes ../../dataProvider/supportClasses/ge/LocalGEChart ./dummyData/DummyGE esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),function(g,f,e,k,c,b,a){function d(a,b){return a&&b&&a.StdGeographyLevel===b.StdGeographyLevel&&a.StdGeographyID===b.StdGeographyID}a=a.geoenrichment.dijit.ReportPlayer.ChartContainer;
return g(null,{comparisonSelect:null,_comparisonAttributes:null,_additionalAttributes:null,_ge:null,_stdPolygonsController:null,_initChartComparisonSelect:function(){var c=this;this._additionalAttributes=[];b.hide(this.comparisonSelectBlock);if(this._currentComparisonInfo){this._updateComparisonLabel();var e=this._getGeoenrichment().getData().features;this.comparisonSelect=(new f({defaultLevelId:this._currentComparisonInfo.defaultLevel,fields:this._getGeoenrichment().getAttributeFields(),canAddFeatures:this._canAddRemoveFeatures(),
addFeatureMessage:a.addToChart,featureIsAlreadyAddedMessage:a.alreadyAdded,canRemoveFeatures:this._canAddRemoveFeatures(),removeFeatureMessage:a.removeFromChart,onFeatureSelected:function(a,b,d){c._setComparisonAttributes(d)},isFeatureAdded:function(a,b,e){return d(c._comparisonAttributes,e)||c._additionalAttributes.some(function(a){return d(a,e)})},canRemoveFeature:function(a,b,e){return!d(c._comparisonAttributes,e)},onAddFeature:function(a,b,d){c._additionalAttributes.push(d);c._updateSeries();
c._syncWithShownFeatures()},onRemoveFeature:function(a,b,e){c._additionalAttributes=c._additionalAttributes.filter(function(a){return!d(a,e)});c._updateSeries();c._syncWithShownFeatures()}})).placeAt(this.comparisonSelectDiv);this.own(this.comparisonSelect);this.comparisonSelect.setFeatures(e);this.comparisonSelect.setDefaultValue();this._comparisonAttributes=this.comparisonSelect.getSelectedAttributes();this.comparisonSelect.get("options").length?(b.show(this.comparisonSelectBlock),b.enableContent(this.comparisonSelectBlock,
!!this.viewModel.dynamicReportInfo),this.viewModel.dynamicReportInfo&&(this._stdPolygonsController=this.viewModel.getStdPolygonsController(this._currentComparisonInfo.calculatorName,this.currentFeatureIndex),this.own(this._stdPolygonsController),this._syncWithShownFeatures())):(this.comparisonSelect.destroy(),this._currentComparisonInfo=null)}},_canAddRemoveFeatures:function(){return this._isMultiFeatureChart&&!e.isLineLike(this._currentChartType)},_updateComparisonLabel:function(){if(this._currentComparisonInfo){var b;
b=this._canAddRemoveFeatures()?a.selectOrAddGeographyToCompare:this._tableViewInfo?a.compareWith:e.isColumnBarLike(this._getComparisonChartType())?a.comparisonLabelBars:a.comparisonLabelDots;this.comparisonLabel.innerHTML=b;this.comparisonLabel.style.color=this.viewModel.getDocumentDefaultStyles(this.theme).color}},_syncWithShownFeatures:function(){if(this._stdPolygonsController){this._stdPolygonsController.setAttributeFields(this._getGeoenrichment().getAttributeFields());var a=this._getGeoenrichment().getAllGeographyAttributes({ignoreFilters:!0});
this._stdPolygonsController.setShownFeatureAttributes(this._getComparisonFeatureAttributes());this._stdPolygonsController.setAllFeatureAttributes(a)}},_getComparisonChartType:function(){return this._currentComparisonInfo&&this._currentComparisonInfo.chartType||this._currentChartType},_getGeoenrichment:function(){return this._currentComparisonInfo?this._ge?this._ge:this._ge=this.viewModel.dynamicReportInfo?new k(this._originalSeriesItems,this._currentComparisonInfo.calculatorName,this.viewModel.dynamicReportInfo.fieldData.areaData,
this._isMultiFeatureChart,this.viewModel.dynamicReportInfo.analysisAreas.map(function(a){return a.shortName||a.name}),this.currentFeatureIndex):this._createDummyGE():null},_createDummyGE:function(){return c.getInstance()},_setFilterRangesForComparison:function(a){if(!this._currentComparisonInfo)return!1;this._getGeoenrichment().setFilterRanges(a);a=this._getGeoenrichment().getData().features;this.comparisonSelect.setFeatures(a);this.comparisonSelect.setDefaultValue();this._setComparisonAttributes(this.comparisonSelect.getSelectedAttributes());
b[this.comparisonSelect.get("options").length?"show":"hide"](this.comparisonSelectBlock);return!0},_setComparisonAttributes:function(a){this._comparisonAttributes=a;this.comparisonSelect.get("options").length?d(this.comparisonSelect.getSelectedAttributes(),this._comparisonAttributes)||this.comparisonSelect.setSelectedAttributes(this._comparisonAttributes):this._comparisonAttributes=null;a=this._updateSeries();this._syncWithShownFeatures();return a},_getComparisonFeatureAttributes:function(){if(!this._currentComparisonInfo)return null;
var a=this._additionalAttributes.filter(function(a){return 0<=this.comparisonSelect.getFeatureIndexById(a.StdGeographyLevel,a.StdGeographyID)},this),b=this._comparisonAttributes&&a.some(function(a){return d(a,this._comparisonAttributes)},this),a=a.slice();!b&&this._comparisonAttributes&&a.push(this._comparisonAttributes);return a},_getNumComparisonFeatures:function(){var a=this._getComparisonFeatureAttributes();return a&&a.length||0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonSelect":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/OnDemandSelect esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../../dataProvider/supportClasses/areas/AreasInfoTemplateBuilder ./ComparisonListUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),
function(g,f,e,k,c,b,a,d,h,l){var m=g(b,{createLabelNode:!0,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,_createImageNode:function(a,b){var c=this;if(a.isArea){if(this.fields&&!h.isMobileDevice()){var d=k.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEInfoIcon esriGEComparisonSelect_infoIcon"},b);l.setTooltipToNode(d,function(){return c._buildGeographyTooltip(a)},{notRestricted:!0})}this.canRemoveFeatures&&
(d=k.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_removeButton"},b),this.isAdded(a)&&this.canRemoveFeature(a)?(f(d,"click",function(b){b.stopPropagation();c.onRemoveFeature(a)}),l.setTooltipToNode(d,this.removeFeatureMessage)):e.add(d,"disabled"));this.canAddFeatures&&(b=k.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_addButton"},b),this.isAdded(a)?(e.add(b,"disabled"),l.setTooltipToNode(b,this.featureIsAlreadyAddedMessage)):(f(b,
"click",function(b){b.stopPropagation();c.onAddFeature(a)}),l.setTooltipToNode(b,this.addFeatureMessage)))}},_buildGeographyTooltip:function(b){var c=this.fields.map(function(a){return{label:a.label,value:a.formatFunction(b.attributes[a.name])}});return a.buildAttributesTable(null,c,{padding:10,maxHeight:document.body.clientHeight-40})},isAdded:function(a){},onAddFeature:function(a){},canRemoveFeature:function(a){},onRemoveFeature:function(a){}});return g(c,{listClass:"esriGEOnDemandSelectSpacedOut esriGEOnDemandSelectVeryTallList600",
defaultLevelId:null,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,showTitleForSingleGroup:!1,buildRendering:function(){var a=this;h.isMobileDevice()&&(this.listClass+=" esriGEComparisonSelectListMobile");var b=new m;b.fields=this.fields;b.addFeatureMessage=this.addFeatureMessage;b.featureIsAlreadyAddedMessage=this.featureIsAlreadyAddedMessage;b.canAddFeatures=this.canAddFeatures;b.isAdded=function(b){return a.isFeatureAdded(b.levelId,
b.featureId,b.attributes)};b.onAddFeature=function(b){a.closePopup();a.onAddFeature(b.levelId,b.featureId,b.attributes)};b.canRemoveFeatures=this.canRemoveFeatures;b.removeFeatureMessage=this.removeFeatureMessage;b.canRemoveFeature=function(b){return a.canRemoveFeature(b.levelId,b.featureId,b.attributes)};b.onRemoveFeature=function(b){a.closePopup();a.onRemoveFeature(b.levelId,b.featureId,b.attributes)};this.itemRenderer=b;this.inherited(arguments)},setGroups:function(a){this.set("options",d.getOptionsFromGroups(a,
{hideTitleForSingleGroup:!this.showTitleForSingleGroup}))},setFeatures:function(a){this.set("options",d.getListOptionsFromFeatures(a))},setDefaultValue:function(a){var b=d.getDefaultOptionValue(this.options,this.defaultLevelId);this.set("value",b);if(a&&a.emitEvent)this.onChange();return b},isFeatureAdded:function(a,b,c){return!1},canRemoveFeature:function(a,b,c){return!0},onChange:function(){var a=this.getSelectedItem();a&&this.onFeatureSelected(a.levelId,a.featureId,a.attributes)},getFeatureIndexById:function(a,
b){return d.getFeatureIndexInOptionsById(this.options,a,b)},selectFeatureByIndex:function(a){a=d.getOptionValueByFeatureIndex(this.options,a||0);this.set("value",a);return a},getNumFeatures:function(){return d.getNumFeaturesFromOptions(this.options)},getValue:function(){var a=this.getSelectedItem();return a&&{value:a.value,featureId:a.featureId,levelId:a.levelId,attributes:a.attributes}},setValue:function(a,b){this.set("value",a+"."+b)},getSelectedAttributes:function(){var a=this.getSelectedItem();
return a&&a.attributes},setSelectedAttributes:function(a){a&&this.setValue(a.StdGeographyLevel,a.StdGeographyID)},onFeatureSelected:function(a,b,c){},onAddFeature:function(a,b,c){},onRemoveFeature:function(a,b,c){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasInfoTemplateBuilder":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/PopupTemplate ../attachments/AttributesUtil esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b){b=b.geoenrichment.dijit.ReportPlayer.AreasInfoTemplateBuilder;var a={buildInfoTemplates:function(a,b,c){var d=this,e={};b=b.map(function(b,c){return g(d._getAttributesAndNotesForAreaAt(a,c),function(a){e[c]=a;d._buildAreaInfoTemplate(b,a.attributesText,a.notesText)})});return f(b).then(function(){c.groups&&c.groups.forEach(function(a){var b=e[a.indexes[0]];d._buildGroupInfoTemplate(a,b.attributesText,b.notesText)})})},buildInfoTemplateForFeature:function(a,b,c,e){var d=this;
return g(this._getAttributesAndNotesForAreaAt(a,c),function(a){d._buildFeatureInfosInfoTemplate([{feature:b,title:e}],a.attributesText,a.notesText)})},_getAttributesAndNotesForAreaAt:function(c,e){c.supportsMultipleAreas&&c.setCurrentAnalysisAreaIndex(e);return f([function(){return g(c.getAttributes(),function(c){return c&&c.length?a.buildAttributesTable(b.attributes,c.map(function(a){return{label:a.alias,value:k.formatAttributeValue(a,{unavailableDataValue:b.unavailableData})}})):null})}(),function(){return g(c.getNotes(),
function(c){return c&&c.length?a.formatArrayOfTexts(b.notes,c.map(function(a){return a.text})):null})}()]).then(function(a){return{attributesText:a[0]||"",notesText:a[1]||""}})},_buildAreaInfoTemplate:function(a,b,c){var d=[{feature:a.feature,title:a.name}];a.location&&d.push({feature:a.location,title:a.locationName||a.name});this._buildFeatureInfosInfoTemplate(d,b,c)},_buildGroupInfoTemplate:function(a,b,c){var d=[];a.location&&d.push({feature:a.location,title:a.locationName||a.name});this._buildFeatureInfosInfoTemplate(d,
b,c)},_buildFeatureInfosInfoTemplate:function(a,b,c){a.forEach(function(a){b||c?a.feature.setInfoTemplate(new e({title:a.title,fieldInfos:[],description:b+c})):a.feature.setInfoTemplate(null)})},formatArrayOfTexts:function(a,b){return"\x3cp\x3e"+a+"\x3c/p\x3e"+("\x3cp style\x3d'padding-left:10px'\x3e"+b.join("\x3cbr/\x3e\x3cbr/\x3e")+"\x3c/p\x3e")},buildAttributesTable:function(a,e,f){f=f||{};var d=f.padding?f.padding+"px":"0px 5px",g=null;if(f.maxHeight){var h=f.padding||0,k=c.getTextBox("Text").h,
h=(2*h+k)*(e.length+(a?1:0));f.maxHeight<h&&(h=f.maxHeight/h,g=Math.floor(k*h)+"px",f.padding&&(d=Math.floor(f.padding*h*.5)+"px "+f.padding+"px"))}var l="";a&&(l+="\x3cp\x3e"+a+"\x3c/p\x3e");var v="padding:"+d+";"+(g?"font-size:"+g+";":""),l=l+"\x3ctable\x3e";e.forEach(function(a){l+="\x3ctr style\x3d'text-align:left;'\x3e";var c=l+="\x3ctd style\x3d'"+v+"'\x3e"+a.label+"\x3c/td\x3e";a=a.value;a=null===a||void 0===a||"number"===typeof a&&isNaN(a)?b.unavailableData:a;l=c+("\x3ctd style\x3d'"+v+"'\x3e"+
a+"\x3c/td\x3e");l+="\x3c/tr\x3e"});return l+="\x3c/table\x3e"}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonListUtil":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(g,f,e,k){var c={getListOptionsFromFeatures:function(b,a){b=c.getFeatureGroups(b,a);return c.getOptionsFromGroups(b,a)},getFeatureGroups:function(b,a){var c={},e=[];b.forEach(function(a){if(!a.attributes.isThisArea){var b=
a.attributes.StdGeographyLevel||"",d=c[b];d||(d=(d=k.getGeographiesModel())?d.getLevelPluralName(b):b,d={levelId:b,label:d,features:[]},c[b]=d,e.push(d));d.features.push(a)}});e.forEach(function(a){a.features.sort(function(a,b){return(a.attributes.StdGeographyName||"").localeCompare(b.attributes.StdGeographyName||"")})});return e},getOptionsFromGroups:function(b,a){function c(a){a.features.forEach(function(b){g.push({isArea:!0,value:e||!b.attributes.StdGeographyID?String(k++):b.attributes.StdGeographyLevel+
"."+b.attributes.StdGeographyID,label:b.attributes.StdGeographyName||"",attributes:b.attributes,featureId:b.attributes.StdGeographyID,levelId:a.levelId})})}var e=a&&a.isIndexBased,f=a&&a.hideTitleForSingleGroup,g=[],k=0;1!==b.length||b[0].levelId?b.forEach(function(a,d){0<d&&g.push({isSeparator:!0});(1<b.length||!f)&&g.push({isTitle:!0,enabled:!1,value:a.levelId,label:a.label+":"});c(a)}):c(b[0]);return g},getDefaultOptionValue:function(b,a){function c(a){var c;b.some(function(b){if(b.isArea&&(!a||
!e||b.levelId===e.id))return c=b,!0});return c}var e;a&&(e=k.getGeographiesModel().getLevel(a));return(a=c(!0)||c(!1))&&a.value},getFeatureIndexInOptionsById:function(b,a,c){var d=a+"."+c,e=-1,f=0;b.some(function(a){if(a.isArea){if(a.value===d)return e=f,!0;f++}});return e},getOptionValueByFeatureIndex:function(b,a){var c,e=0;b.some(function(b){if(b.isArea){if(e===a)return c=b,!0;e++}});return c&&c.value},getNumFeaturesFromOptions:function(b){var a=0;b.forEach(function(b){b.isArea&&a++});return a}};
g=g(e,{createPresentation:function(b,a,c,e,g){var d=this.inherited(arguments);b.isArea&&f.add(d,"esriGEComparisonList_areaItemRoot");return d}});c.ComparisonListItemRenderer=g;return c})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart":function(){define(["dojo/_base/declare","dojo/_base/lang","./LocalGEBase","../data/AreaDataUtil"],function(g,f,e,k){return g(e,{_fieldNameToPointCache:null,constructor:function(c,b,a,d,e,g){this._fieldNameToPointCache={};c[0]&&c[0].points.forEach(function(a){a.fieldInfo&&
(this._fieldNameToPointCache[a.fieldInfo.name]=a)},this);(this._skipThisArea=d)?(a=k.combineAreaDataObjectCalculators(a,b,{removeDuplicates:!0}),d=a.thisAreas.map(function(a,b){a=f.mixin({},a);a.StdGeographyName=e[b];a.isThisArea=!0;return a}),c={},c[b]={data:d.shift(),comparisonLevels:d.concat(a.comparisonLevels)}):c=a[g||0];this._initGE(null,c,b)},_createField:function(c,b){var a=this.inherited(arguments),d=this._fieldNameToPointCache[c];if(d&&d.fieldInfo){var e=d.fieldInfo;a.alias=d.label||e.alias;
a.decimals="number"===typeof e.decimals?e.decimals:-1;a.units=e.showPercent?"pct":e.showCurrency?"currency":a.units;a.type=e.type||a.type}else a.noVariableField=!0;return a},_filterAttributeField:function(c){return!c.noVariableField}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/dummyData/DummyGE":function(){define(["esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart","dojo/i18n!esri/nls/jsapi"],function(g,f){f=f.geoenrichment.dijit.ReportPlayer.DummyGE;return{_ge:null,
getInstance:function(){this._ge||(this._ge=this._createGE());return this._ge},_createGE:function(){return new g([],"dummyCalc",[{dummyCalc:{data:{StdGeographyName:null,StdGeographyID:null},comparisonLevels:[{StdGeographyName:f.sampleData,StdGeographyID:"sampleData"}]}}])}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartSorting":function(){define([],function(){var g={NONE:"None",ASC:"Ascending",DESC:"Descending",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},
toSupportedValue:function(f){return g.isSupported(f)?f:g.NONE}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartFilterUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ChartTypes","./builder/utils/ChartDataUtil"],function(g,f,e,k){var c={collectStatsForVariables:function(b,a,c,e,g){var d=0,h={min:Infinity,max:-Infinity,decimals:0,dataArray:[]};a.forEach(function(a,l){a.points.forEach(function(m,n){m=k.getPointValue({point:m,viewModel:e,
currentFeatureIndex:g,index:n,seriesIndex:l,chartType:b,visualProperties:c,numPoints:a.points.length});h.min=Math.min(h.min,m);h.max=Math.max(h.max,m);h.decimals=Math.max(h.decimals,f.getPlaces(m));h.dataArray.push(m);d++})});return{filterRanges:[h],numVariablesTotal:d}},filterSeriesItems:function(b,a,d,e,f,g,k){return k?c._filterAreas(b,a,e,f):c._filterVariables(b,a,d,e,f,g)},_filterAreas:function(b,a,c,f){var d=0,h={};c.forEach(function(a){h[a.fieldName]=a});if(e.isLineLike(b))b=a.filter(function(a,
b){return!a.points.some(function(a){var c=k.getPointValue({point:a,viewModel:f,currentFeatureIndex:b});a=h[a.fieldInfo.name];return c<a.min||c>a.max})}),d=b.length,b.length||(b.__firstSeriesItem=a[0]);else{var n={};a.forEach(function(a){a.points.forEach(function(a,b){if(!n[b]){var c=k.getPointValue({point:a,viewModel:f,currentFeatureIndex:b});a=h[a.fieldInfo.name];if(c<a.min||c>a.max)n[b]=!0}})});b=a.map(function(a){a=g.mixin({},a);a.__firstPoint=a.points[0];a.points=a.points.filter(function(a,b){return!n[b]});
d=a.points.length;return a})}return{seriesItems:b,numShownElements:d}},_filterVariables:function(b,a,c,e,f,m){var d,h=0,l=e[0];d=[];var q=1<a.length;a.forEach(function(a,e){var h=g.mixin({},a);h.points=[];a.points.forEach(function(d,n){d.originalIndex=n;n=k.getPointValue({point:d,viewModel:f,currentFeatureIndex:m,index:n,seriesIndex:e,chartType:b,visualProperties:c,numPoints:a.points.length});n<l.min||n>l.max?q&&(d=g.mixin({},d),d.hidden=!0,h.points.push(d)):h.points.push(d)});q?d.push(h):h.points.length&&
d.push(h)});if(q){var v=0;d.forEach(function(a){v=Math.max(v,a.points.length)});for(var r=0;r<v;r++)d.every(function(a){a=a.points[r];return!a||a.hidden})&&d.forEach(function(a){if(a=a.points[r])a._toRemove=!0});d=d.filter(function(a){a.points=a.points.filter(function(a){return!a._toRemove});return a.points.length})}d.forEach(function(a){a.points.forEach(function(a){a.hidden||h++})});return{seriesItems:d,numShownElements:h}},getFirstSeriesPoint:function(b){return b.__firstPoint},getFirstSeriesItem:function(b){return b.__firstSeriesItem}};
return c})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/ChartDataUtil":function(){define(["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(g,f,e,k){function c(b){return a||(b&&b.yAxis&&b.yAxis.nonZeroInclusive?h:d)}var b={formatNumber:function(a,b,c,d){a=a||0;b={places:b.dataLabelsDecimals||0,preserveTrailingZeroes:!0};
if(d)return f.formatNumberAsCurrency(a,k.getCurrencyFormat(),b);a=f.formatNumber(a,b);c&&(a+="%");return a},undefinedToDefault:function(a,b){return void 0===a?b:a}},a,d=[1E3,1100,1200,150,70,900,110,300,80,200,1700],h=[1E3,1100,1250,1200,1050,990],l=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],m=[.91,.92,.9,1.2,1.2,1.3];b.CHART_DATA_SMOOTH=[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];b.getPointValue=function(a){var b=a.point,d=a.index,h=a.seriesIndex,k=a.chartType,n=a.visualProperties,
u=a.viewModel,y=a.currentFeatureIndex,w=a.chartData,A=a.isComparisonSeries,B=a.comparisonFeatureAttribute;a=a.numPoints;if(b.value&&(b.value.value||u.dynamicReportInfo))return b.value.value;if(u.dynamicReportInfo)w=A?B&&B[b.fieldInfo.name]||0:g.getFieldDataValue(b.fieldInfo,u.dynamicReportInfo.fieldData,y),w=f.parseNumber(w),isNaN(w)&&console.log("Can't render chart value for field \x3d\x3e "+(b.fieldInfo?b.fieldInfo.name:"missing field"));else if(b=b.fieldInfo&&b.fieldInfo.statefulName&&b.fieldInfo.statefulName.charAt(0),
w=w||c(n),w=w[d%w.length],k===e.GAUGE&&"p"!==b&&n.gaugeRangeMax)a=n.gaugeRangeMin||0,w=.425123*(n.gaugeRangeMax-a)+a;else if(k===e.WAFFLE)"p"===b||"number"!==typeof n.waffleRangeMin&&"number"!==typeof n.waffleRangeMax?a&&(w="p"===b?90.85/a:w/a):(d=n.waffleRangeMin,n=n.waffleRangeMax,"number"===typeof d&&"number"!==typeof n?n=0===d?1E3:d*((1<a?a:2)+1):"number"!==typeof d&&"number"===typeof n&&(d=0),w=.9085*(n-d)/(a||1)+d);else if(w*=l[h%l.length]*(0===h?1:m[d%m.length]),!n.conditionalStyling){a=w;
if("p"===b||n.dataLabelsShowValuePercentSymbol||n.yAxis&&n.yAxis.showPercentSymbol||n.yAxis&&n.yAxis.showValuesAsWeightsInSeries)a=Number((a/24.5123).toFixed(n.dataLabelsDecimals||1));"i"===b&&(a=Number((a/7).toFixed(n.dataLabelsDecimals||1)));w=a}return w};b.getCaptionValue=function(a,b){return a.captionFieldInfo?b.dynamicReportInfo?g.getFieldDataValue(a.captionFieldInfo,b.dynamicReportInfo.fieldData):g.renderFieldInfoInTableCell(a.captionFieldInfo).formattedValue:""};b.allowNegativeValuesInPreview=
function(a,b){return e.supportsNegativeValues(a)&&!b.isStacked&&!b.renderColumnBarsInOppositeDirections};b.getChartData=function(a){function b(){f=Infinity;g=-Infinity;e.forEach(function(a){f=Math.min(f,a);g=Math.max(g,a)})}function d(a,b,c){var d=g-f,h=f;f=isFinite(a)?a:Math.min(0,f);g=isFinite(b)?b:g>=f?g:2*f;c&&(a=.1*(g-f),f+=a,g-=a);var k=(g-f)/d;e=e.map(function(a){return(a-h)*k+f})}var e=a.chartData,e=(e||c(a.visualProperties)).slice();e.length=Math.min(e.length,a.numPoints);var f,g;if(a.filterRangesStats)return b(),
d(a.filterRangesStats.min,a.filterRangesStats.max,!0),e;if(a.conditionalStats){b();var h=a.conditionalStats.min;a=a.conditionalStats.max;d(0===h?-10:0>h?1.2*h:.8*h,0===a?10:0>a?.8*a:1.2*a,!1)}return e};b.setPreviewChartData_dev=function(b){a=b};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/_config":function(){define("./panels/US/Population ./panels/US/Households ./panels/US/Income ./panels/US/NetWorth ./panels/US/HomeValue ./panels/US/Spending ./panels/US/Electronics ./panels/US/Internet ./panels/US/Pets ./panels/US/Businesses ./panels/US/Employees ./panels/US/Education ./panels/US/Mortgage ./panels/US/Housing ./panels/US/JourneyToWork ./panels/US/Health ./panels/US/Tapestry ./panels/US/AtRisk ./panels/US/LifeStyle ./panels/US/Crime dojo/i18n!esri/nls/jsapi".split(" "),
function(g,f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A){A=A.geoenrichment.dijit.ReportPlayer.VariableStates;var B={US:{"TOTPOP_CY, POPGRW10CY, POPGRWCYFY":[g.annualGrowth],MEDAGE_CY:[g.agePyramid],"ACSOTNOA65, ACSSPNOA65":[g.pop65PlusNoEnglish],DPOP_CY:[g.daytimePopulation],"ACSCIVNINS, ACS0ONEHI, ACS19ONEHI, ACS35ONEHI, ACS65ONEHI, ACSCIVNI0, ACSCIVNI19, ACSCIVNI35, ACSCIVNI65, ACS0NOHI, ACS19NOHI, ACS35NOHI, ACS65NOHI":[g.populationACS],"GENALPHACY, GENZ_CY, MILLENN_CY, GENX_CY, BABYBOOMCY, OLDRGENSCY":[g.generationComparison],
"GENALPHAFY, GENZ_FY, MILLENN_FY, GENX_FY, BABYBOOMFY, OLDRGENSFY":[g.generationComparison],MEDHINC_CY:[e.householdsByIncome],MEDDI_CY:[e.disposableIncome],PCI_CY:[e.perCapitaIncome],MHIGRWCYFY:[e.annualGrowth],"AVGHHSZ_CY, TOTHH_CY":[f.avgHouseholdSize],ACSOVEH0:[f.householdsWithNoVehicles],"EDUCBASECY, NOHS_CY, SOMEHS_CY, HSGRAD_CY, SMCOLL_CY, ASSCDEG_CY":[n.educationalAttainment],S01_BUS:[l.businessSummaryBySIC],"S01_EMP, UNEMPRT_CY":[m.civilianPopulation16Plus],EMP_CY:[m.laborForceByOccupation],
MEDNW_CY:[k.netWorth],MEDVAL_CY:[c.homeValue],"X5001_A, X5001_X":[b.apparelMenVsWomen],X8001_A:[b.healthCare],"X1130_A, X1131_X":[b.eatingOut],"X4100_A, MP19013a_B":[b.purchasedMostRecentComputers],X1003_A:[b.avgSpentOnFoodAtStores],X7001_A:[b.travel],X9008_A:[b.interestInSports],X9024_X:[b.purchasedMusic],X9045_A:[b.timeOnline],"X9078_A, X9079_A":[b.movieGenre],X8002_X:[b.annualHealthExpenditures],X8018_X:[b.medicalServices],"ACS65MEDCR, ACS65HI2PM, ACS65HI2EM, ACS65HI2MM":[b.medicarePopulation65Plus],
X9001_X:[b.entertainmentRecreation],X15001_X:[b.householdGoods],X4008_X:[b.householdServices],X3004_X:[p.dwellingMortgage],"X3036_X, X3004_A, ACSMEDCRNT, ACSAVGCRNT":[t.renterExpenses],"ACSWORKERS, ACSDRALONE, ACSPUBTRAN, ACSCARPOOL, ACSWALKED, ACSBICYCLE, MP28108A_B":[q.jorneyToWork],"MP14001a_B, MP14002a_B":[v.exercise],MP19014a_B:[a.cellPhonePlan],"MP19003A_B, MP19004A_B, MP19005A_B, MP19007A_B, MP19001A_B":[d.internetConnectionHome],MP26004h_B:[h.dogProducts],MP26003h_B:[h.catProducts],MP26001h_B:[h.hhOnwsAnyPet],
TSEGNAME:[r.tapestry],ACSHHDIS:[u.householdsWithDisability],X9073_A:[y.musicAndTheater],"CRMCYPROC, CRMCYTOTC, CRMCYPERC":[w.crimeIndex]}},C={US:{Population:g,Households:f,Income:e,NetWorth:k,HomeValue:c,Spending:b,Electronics:a,Internet:d,Pets:h,Businesses:l,Employees:m,Education:n,Mortgage:p,Housing:t,JourneyToWork:q,Health:v,Tapestry:r,AtRisk:u,LifeStyle:y,Crime:w}};g={n:A.stateNumber_short,p:A.statePercent_short,a:A.stateAverage_short,i:A.stateIndex_short,r:A.stateReliability_short};A={p:A.statePercent,
a:A.stateAverage,i:A.stateIndex,r:A.stateReliability};for(var z in B){var E=B[z];Object.keys(E).forEach(function(a){-1!==a.indexOf(",")&&(a.split(",").forEach(function(b){b=b.trim();var c=E[a];c.forEach(function(a){a.fieldInfo.infographicJson&&(a.fieldInfo.infographicJson.style=a.fieldInfo.infographicJson.style||{});!a.name&&a.fieldInfo.isChart&&(a.name=a.fieldInfo.chartJson.visualProperties.title.text)});E[b]=c}),delete E[a])})}var G=/\$\{.*?\}/g;return{LIBRARY:B,STATE_LOCALIZATION_MAP:A,STATE_LOCALIZATION_MAP_SHORT:g,
getById:function(a){var b,c;a=a.split(".");return b=C[a[0]],c=b&&b[a[1]],c&&c[a[2]]},collectSubstitutionVariables:function(){var a={},b;for(b in C){var c={fields:[],variables:[]};a[b]=c;this._traversePanels(function(a,b){(a=(a=a[b])&&a.match(G))&&a.forEach(function(a){a=a.replace("${","").replace("}","").split(":");-1===c.variables.indexOf(a[0])&&c.variables.push(a[0]);-1===c.fields.indexOf(a[1])&&c.fields.push(a[1])})})}return a},replaceSubstitutionVariables:function(a){var b={},c;for(c in a){var d=
a[c];d.variables.forEach(function(a){d.fields.forEach(function(c){b["${"+a.fullName+":"+c+"}"]=a[c]})})}this._traversePanels(function(a,c){var d=a[c],e=d&&d.match(G);e&&(e.forEach(function(a){d=d.replace(a,b[a])}),a[c]=d)})},_traversePanels:function(a){var b=C[z],c;for(c in b){var d=b[c],e;for(e in d){var f=d[e];if(f.fieldInfo&&f.fieldInfo.chartJson){var f=f.fieldInfo.chartJson,g=f.visualProperties;a(g.title,"text");g.xAxis&&a(g.xAxis,"title");g.yAxis&&a(g.yAxis,"title");f.seriesItems.forEach(function(b){a(b,
"label");b.points.forEach(function(b){a(b,"label")})})}}}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Population":function(){define(["../../ChartBuilder"],function(g){var f={agePyramid:{name:"Age Pyramid",fieldInfo:{isInfographic:!0,infographicJson:{type:"AgePyramid",variables:["Age.*"]}}}};f.annualGrowth={states:"n,i",stateSettings:{n:{visualProps:{dataLabelsDecimals:2,dataLabelsShowValuePercentSymbol:!0}}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Annual Growth Rate",
seriesItems:[{label:"${keyusfacts.totpop10:vintage}-${keyusfacts.totpop_cy:vintage}",points:[{label:"Population",fullName:"KeyUSFacts.POPGRW10CY"},{label:"Households",fullName:"KeyUSFacts.HHGRW10CY"},{label:"Families",fullName:"KeyUSFacts.FAMGRW10CY"}]},{label:"${keyusfacts.totpop_cy:vintage}-${keyusfacts.totpop_fy:vintage}",points:[{label:"Population",fullName:"KeyUSFacts.POPGRWCYFY"},{label:"Households",fullName:"KeyUSFacts.HHGRWCYFY"},{label:"Families",fullName:"KeyUSFacts.FAMGRWCYFY"}]}]})}};
f.pop65PlusNoEnglish={states:"n,p",defaultState:"p",fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Pop 65+ Language Spoken at Home - No English (ACS)",points:[{label:"Spanish",fullName:"AtRisk.ACSSPNOA65"},{label:"Indo-European",fullName:"AtRisk.ACSIENOA65"},{label:"Asian-Pacific Islander",fullName:"AtRisk.ACSAPNOA65"},{label:"Other Language",fullName:"AtRisk.ACSOTNOA65"}],visualProps:{sorting:"Descending"}})}};f.daytimePopulation={states:"n,p",defaultState:"p",fieldInfo:{isChart:!0,chartJson:g.createDonutChart({title:"Daytime Population",
points:[{label:"Workers",fullName:"DaytimePopulation.DPOPWRK_CY"},{label:"Residents",fullName:"DaytimePopulation.DPOPRES_CY"}]})}};f.populationACS={states:"n,p",defaultState:"p",fieldInfo:{isChart:!0,chartJson:g.createDonutChart({title:"Population (ACS)",points:[{label:"0-18",fullName:"Health.ACSCIVNI0"},{label:"19-34",fullName:"Health.ACSCIVNI19"},{label:"35-64",fullName:"Health.ACSCIVNI35"},{label:"65+",fullName:"Health.ACSCIVNI65"}]})}};f.generationComparison={states:"n,p",defaultState:"p",fieldInfo:{isChart:!0,
chartJson:g.createChart({title:"Generation Comparison",seriesItems:[{label:"${generations.genalphacy:vintage}",points:[{label:"Alpha (Born 2017 or Later)",fullName:"Generations.GENALPHACY"},{label:"Z (Born 1999 to 2016)",fullName:"Generations.GENZ_CY"},{label:"Millennial (Born 1981 to 1998)",fullName:"Generations.MILLENN_CY"},{label:"X (Born 1965 to 1980)",fullName:"Generations.GENX_CY"},{label:"Baby Boomer (Born 1946 to 1964)",fullName:"Generations.BABYBOOMCY"},{label:"Silent \x26 Greatest (Born 1945/Earlier)",
fullName:"Generations.OLDRGENSCY"}]},{label:"${generations.genalphafy:vintage}",points:[{label:"Alpha (Born 2017 or Later)",fullName:"Generations.GENALPHAFY"},{label:"Z (Born 1999 to 2016)",fullName:"Generations.GENZ_FY"},{label:"Millennial (Born 1981 to 1998)",fullName:"Generations.MILLENN_FY"},{label:"X (Born 1965 to 1980)",fullName:"Generations.GENX_FY"},{label:"Baby Boomer (Born 1946 to 1964)",fullName:"Generations.BABYBOOMFY"},{label:"Silent \x26 Greatest (Born 1945/Earlier)",fullName:"Generations.OLDRGENSFY"}]}]})}};
return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/ChartBuilder":function(){define("dojo/_base/lang ../../utils/InfographicJsonUtil ../../../charts/utils/ChartJsonUtil ../../../charts/utils/ChartTypes ../../../charts/utils/ChartBarThickness ../../../charts/legends/ChartLegendTypes ./EnrichUtil".split(" "),function(g,f,e,k,c,b,a){return{createChart:function(d){var h=d.type||k.BAR,l=d.title,m=d.seriesItems||[{label:"",points:d.points}];d=d.visualProps;
var n=1!==m.length||!k.isComparisonSupported(h),h={isChart:!0,type:h,seriesItems:m,visualProperties:g.mixin({width:100,height:100,barBorders:!1,dataLabels:"Value",view3D:!1,origin:0,lineThickness:1,columnThickness:c.LARGE,dataLabelsStyle:{fontSize:12},dataLabelsDecimals:0,backgroundColor:null,title:{text:l,align:"center",style:{fontSize:16}},xAxis:{show:!0,showTicks:!0,style:{fontSize:12},title:"",gridLines:!1,gridLinesCentered:!1,titleStyle:{fontSize:13},labelsAngle:0},yAxis:{show:!0,showTicks:!0,
style:{fontSize:12},title:"",gridLines:!1,gridLinesCentered:!1,titleStyle:{fontSize:13},labelsAngle:0},legend:{type:b.SERIES,series:{hasBorder:!0,labelParts:"Label",placement:1===m.length?"None":"Bottom",placementOffset:10,style:{fontSize:12}},minMax:{}},isStacked:!1,dataLabelsInside:!1},d),comparisonInfo:n?null:{levels:f.getDefaultLevels(),calculatorName:null,chartType:k.LINE}};a.buildCalculatorNameForChart(h);return e.provideDefaultValueForMissing(h)},createDonutChart:function(a){return this._createRoundChart(k.DONUT,
a)},createGaugeChart:function(a){a.points.length.length=1;return this._createRoundChart(k.GAUGE,a)},_createRoundChart:function(a,c){return e.provideDefaultValueForMissing({isChart:!0,type:a,seriesItems:[{points:c.points}],visualProperties:{width:100,height:100,barBorders:!1,dataLabels:"Value",view3D:!1,origin:0,dataLabelsStyle:{fontSize:12},dataLabelsDecimals:0,backgroundColor:null,title:{text:c.title||"",align:"center",style:{fontSize:16}},xAxis:{show:!0},yAxis:{show:!0},legend:{type:b.SERIES,series:{hasBorder:!0,
labelParts:"Label",placement:a===k.GAUGE?"None":"Bottom",placementOffset:10,style:{fontSize:12}},minMax:{}},donutHolePercent:50,donutGap:3,dataLabelsInside:!1,dataLabelsStackedInColumns:!0}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartBarThickness":function(){define([],function(){var g={SMALL:"Small",MEDIUM:"Medium",LARGE:"Large",GAP:"Gap",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Households":function(){define(["../../ChartBuilder",
"../../../../../charts/utils/ChartTypes"],function(g,f){var e={avgHouseholdSize:{fieldInfo:{isInfographic:!0,infographicJson:{type:"OneVar",variables:["KeyGlobalFacts.AVGHHSZ"]}}}};e.householdsWithNoVehicles={states:"n,p",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({type:f.COLUMN,title:"Households with No Vehicles Available (ACS)",points:[{label:"Owner Occupied HHs",fullName:"AtRisk.ACSOVEH0"},{label:"Renter HHs",
fullName:"vehiclesavailable.ACSRVEH0"}]})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Income":function(){define(["../../ChartBuilder"],function(g){var f={householdsByIncome:{name:"Househols by Income",fieldInfo:{isInfographic:!0,infographicJson:{type:"RelatedVariables",variables:["HouseholdsByIncome.*"]}}}};f.disposableIncome={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},
fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Disposable Income",points:[{label:"$0-14999",fullName:"Wealth.DI0_CY"},{label:"$15000-24999",fullName:"Wealth.DI15_CY"},{label:"$25000-34999",fullName:"Wealth.DI25_CY"},{label:"$35000-49999",fullName:"Wealth.DI35_CY"},{label:"$50000-74999",fullName:"Wealth.DI50_CY"},{label:"$75000-99999",fullName:"Wealth.DI75_CY"},{label:"$100000-149999",fullName:"Wealth.DI100_CY"},{label:"$150000-199999",fullName:"Wealth.DI150_CY"},{label:"$200000+",fullName:"Wealth.DI200_CY"}]})}};
f.perCapitaIncome={states:"n,i",stateSettings:{n:{isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Per Capita Income",points:[{label:"${keyusfacts.pci_cy:vintage}",fullName:"KeyUSFacts.PCI_CY"},{label:"${keyusfacts.pci_fy:vintage}",fullName:"KeyUSFacts.PCI_FY"}]})}};f.annualGrowth={states:"n,i",stateSettings:{n:{visualProps:{dataLabelsDecimals:2,dataLabelsShowValuePercentSymbol:!0}}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Annual Growth Rate (${keyusfacts.totpop_cy:vintage}-${keyusfacts.totpop_fy:vintage})",
points:[{label:"Median HH Income",fullName:"KeyUSFacts.MHIGRWCYFY"},{label:"Per Capita Income",fullName:"KeyUSFacts.PCIGRWCYFY"}]})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/NetWorth":function(){define(["../../ChartBuilder"],function(g){var f={};f.netWorth={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Net Worth",
points:[{label:"0-14999",fullName:"Wealth.NW0_CY"},{label:"15000-34999",fullName:"Wealth.NW15_CY"},{label:"35000-49999",fullName:"Wealth.NW35_CY"},{label:"50000-74999",fullName:"Wealth.NW50_CY"},{label:"75000-99999",fullName:"Wealth.NW75_CY"},{label:"100000-149999",fullName:"Wealth.NW100_CY"},{label:"150000-249999",fullName:"Wealth.NW150_CY"},{label:"250000-499999",fullName:"Wealth.NW250_CY"},{label:"500000+",fullName:"Wealth.NW500_CY"}]})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/HomeValue":function(){define(["../../ChartBuilder"],
function(g){var f={};f.homeValue={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of owner occupied housing units"},p:{yAxisTitle:"Percent of owner occupied housing units"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Home Value",points:[{label:"$0-49999",fullName:"Wealth.VAL0_CY"},{label:"$50000-99999",fullName:"Wealth.VAL50K_CY"},{label:"$100000-149999",fullName:"Wealth.VAL100K_CY"},{label:"$150000-199999",fullName:"Wealth.VAL150K_CY"},{label:"$200000-249999",fullName:"Wealth.VAL200K_CY"},
{label:"$250000-299999",fullName:"Wealth.VAL250K_CY"},{label:"$300000-399999",fullName:"Wealth.VAL300K_CY"},{label:"$400000-499999",fullName:"Wealth.VAL400K_CY"},{label:"$500000-749999",fullName:"Wealth.VAL500K_CY"},{label:"$750000-999999",fullName:"Wealth.VAL750K_CY"},{label:"$1000000+",fullName:"Wealth.VAL1M_CY"}]})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Spending":function(){define(["../../ChartBuilder","../../../../../charts/utils/ChartTypes"],
function(g,f){var e={};e.apparelMenVsWomen={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{title:"Apparel Men vs Women (Avg per Household)",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createDonutChart({title:"Apparel Men vs Women",points:[{label:"Men`s Apparel",fullName:"clothing.X5002_X"},{label:"Women`s Apparel",fullName:"clothing.X5016_X"}]})}};e.healthCare={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",
isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Health Care",points:[{label:"Health Insurance",fullName:"Health.X8002_X"},{label:"Medicare Payments",fullName:"Health.X8013_X"},{label:"Medical Care",fullName:"HealthPersonalCareCEX.X8018_X"},{label:"Medical Services",fullName:"HealthPersonalCareCEX.X8019_X"},{label:"Drugs and Vitamins",fullName:"Health.X8028_X"},{label:"Medical Supplies",fullName:"HealthPersonalCareCEX.X8033_X"}],visualProps:{sorting:"Descending"}})}};e.eatingOut=
{states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Eating Out",points:[{label:"Lunch",fullName:"food.X1132_X"},{label:"Dinner",fullName:"food.X1137_X"},{label:"Snacks",fullName:"food.X1142_X"},{label:"Breakfast",fullName:"food.X1147_X"}],visualProps:{sorting:"Descending"}})}};e.purchasedMostRecentComputers={states:"n,p,i",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of households"},
p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({type:f.COLUMN,title:"Purchased Most Recent Computer",points:[{label:"1-2 years ago",fullName:"ElectronicsInternet.MP09048h_B"},{label:"3-4 years ago",fullName:"ElectronicsInternet.MP09049h_B"},{label:"5+ years ago",fullName:"ElectronicsInternet.MP09050h_B"}]})}};e.avgSpentOnFoodAtStores={states:"n,p,i",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},
fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Avg Spent per Household at Food Stores",points:[{label:"\x3c$100",fullName:"GroceryAlcoholicBeverages.MP13001h_B"},{label:"$100-$149",fullName:"GroceryAlcoholicBeverages.MP13002h_B"},{label:"$150+",fullName:"GroceryAlcoholicBeverages.MP13003h_B"}]})}};e.travel={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Spending on Travel",
points:[{label:"Transportation Costs",fullName:"TravelCEX.X7002_X"},{label:"Lodging on Trips",fullName:"TravelCEX.X7015_X"},{label:"Vacation Clubs",fullName:"TravelCEX.X7016_X"},{label:"Food \x26 Drink on Trips",fullName:"TravelCEX.X7017_X"},{label:"Entertainment on Trips",fullName:"TravelCEX.X7021_X"}],visualProps:{sorting:"Descending"}})}};e.interestInSports={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of adults"},p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,
chartJson:g.createChart({title:"Interest in Sports (Market Potential)",points:[{label:"College basketball Super Fan",fullName:"sports.MP33100a_B"},{label:"College football Super Fan",fullName:"sports.MP33101a_B"},{label:"Golf Super Fan",fullName:"sports.MP33102a_B"},{label:"High school sports Super Fan",fullName:"sports.MP33103a_B"},{label:"MLB Super Fan",fullName:"sports.MP33104a_B"},{label:"NASCAR Super Fan",fullName:"sports.MP33105a_B"},{label:"NBA Super Fan",fullName:"sports.MP33106a_B"},{label:"NFL Super Fan",
fullName:"sports.MP33107a_B"},{label:"NHL Super Fan",fullName:"sports.MP33108a_B"},{label:"Soccer Super Fan",fullName:"sports.MP33113a_B"}],visualProps:{sorting:"Descending"}})}};e.purchasedMusic={states:"n,p,i",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of adults"},p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Purchased Music",points:[{label:"At electronics store",fullName:"MediaRadioOtherAudio.MP22081a_B"},{label:"At discount department store",
fullName:"MediaRadioOtherAudio.MP22082a_B"},{label:"At music store",fullName:"MediaRadioOtherAudio.MP22083a_B"},{label:"Through amazon prime",fullName:"MediaRadioOtherAudio.MP22084a_B"},{label:"Through google play",fullName:"MediaRadioOtherAudio.MP22085a_B"},{label:"Through iTunes",fullName:"MediaRadioOtherAudio.MP22086a_B"},{label:"Through other online site",fullName:"MediaRadioOtherAudio.MP22087a_B"}],visualProps:{sorting:"Descending"}})}};e.timeOnline={states:"n,p,i",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of adults"},
p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Time Online",points:[{label:"10+ hours",fullName:"ElectronicsInternet.MP19066a_B"},{label:"5-9.9 hours",fullName:"ElectronicsInternet.MP19067a_B"},{label:"2-4.9 hours",fullName:"ElectronicsInternet.MP19068a_B"},{label:"1-1.9 hours",fullName:"ElectronicsInternet.MP19069a_B"},{label:"0.5-0.9 hours",fullName:"ElectronicsInternet.MP19070a_B"},{label:"\x3c0.5 hours",fullName:"ElectronicsInternet.MP19071a_B"}]})}};
e.movieGenre={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of adults"},p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Movie Genre - Watched in the last 6 Months",points:[{label:"Action",fullName:"LeisureActivitiesLifestyle.MP20049a_B"},{label:"Adventure",fullName:"LeisureActivitiesLifestyle.MP20050a_B"},{label:"Comedy",fullName:"LeisureActivitiesLifestyle.MP20051a_B"},{label:"Crime",fullName:"LeisureActivitiesLifestyle.MP20052a_B"},
{label:"Drama",fullName:"LeisureActivitiesLifestyle.MP20053a_B"},{label:"Family",fullName:"LeisureActivitiesLifestyle.MP20054a_B"},{label:"Fantasy",fullName:"LeisureActivitiesLifestyle.MP20055a_B"},{label:"Horror",fullName:"LeisureActivitiesLifestyle.MP20056a_B"},{label:"Romance",fullName:"LeisureActivitiesLifestyle.MP20057a_B"},{label:"Science fiction",fullName:"LeisureActivitiesLifestyle.MP20058a_B"},{label:"Thriller",fullName:"LeisureActivitiesLifestyle.MP20059a_B"}],visualProps:{sorting:"Descending"}})}};
e.annualHealthExpenditures={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Average Health Insurance Expenditures",points:[{label:"Blue Cross/Blue Shield",fullName:"Health.X8006_X"},{label:"Medical Payments",fullName:"Health.X8013_X"},{label:"Physician Services",fullName:"Health.X8020_X"},{label:"Dental Services",fullName:"Health.X8021_X"},{label:"Eyecare Services",
fullName:"Health.X8022_X"},{label:"Lab Tests/X-rays",fullName:"Health.X8024_X"},{label:"Hospital Room \x26 Hospital Service",fullName:"Health.X8025_X"},{label:"Convalescent/Nursing Home Care",fullName:"Health.X8026_X"}],visualProps:{sorting:"Descending"}})}};e.medicalServices={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Medical Services",points:[{label:"Physician",
fullName:"Health.X8020_X"},{label:"Dental",fullName:"Health.X8021_X"},{label:"Eyecare",fullName:"Health.X8022_X"},{label:"Lab Tests/X-rays",fullName:"Health.X8024_X"},{label:"Hospital Room \x26 Service",fullName:"Health.X8025_X"},{label:"Convalescent/Nursing Home Care",fullName:"Health.X8026_X"},{label:"Other",fullName:"HealthPersonalCareCEX.X8027_X"}],visualProps:{sorting:"Descending"}})}};e.medicarePopulation65Plus={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of households"},
p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Medicare: Population 65+",points:[{label:"Medicare Only",fullName:"Health.ACS65MEDCR"},{label:"Direct-Purchase \x26 Medicare",fullName:"healthinsurancecoverage.ACS65HI2PM"},{label:"Employer \x26 Medicare",fullName:"healthinsurancecoverage.ACS65HI2EM"},{label:"Medicare \x26 Medicaid",fullName:"healthinsurancecoverage.ACS65HI2MM"}],visualProps:{sorting:"Descending"}})}};e.entertainmentRecreation={states:"n,a,i",
defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Entertainment/Recreation",points:[{label:"Fees \x26 Admissions",fullName:"entertainment.X9004_X"},{label:"TV/Video/Audio",fullName:"entertainment.X9011_X"},{label:"Pets",fullName:"entertainment.X9035_X"},{label:"Toys \x26 Games",fullName:"entertainment.X9040_X"},{label:"Recreational Vehicles \x26 Fees",fullName:"entertainment.X9046_X"},
{label:"Sports/Rec/Exercise Equip",fullName:"entertainment.X9051_X"},{label:"Photo Equipment/Supplies",fullName:"entertainment.X9060_X"},{label:"Reading",fullName:"entertainment.X9065_X"}],visualProps:{sorting:"Descending"}})}};e.householdGoods={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Household Goods",points:[{label:"Housekeeping Supplies",fullName:"HousingHousehold.X4033_X"},
{label:"Household Textiles",fullName:"HousingHousehold.X4044_X"},{label:"Furniture",fullName:"HousingHousehold.X4052_X"},{label:"Rugs",fullName:"HousingHousehold.X4062_X"},{label:"Major Appliances",fullName:"HousingHousehold.X4063_X"},{label:"Housewares",fullName:"HousingHousehold.X4074_X"},{label:"Small Appliances",fullName:"HousingHousehold.X4082_X"},{label:"Other HH Items",fullName:"HousingHousehold.X4085_X"}],visualProps:{sorting:"Descending"}})}};e.householdServices={states:"n,a,i",defaultState:"a",
stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Household Services",points:[{label:"Household Operations",fullName:"HousingHousehold.X4001_X"},{label:"Child Care",fullName:"HousingHousehold.X4003_X"},{label:"Lawn \x26 Garden",fullName:"HousingHousehold.X4009_X"},{label:"Home Security System",fullName:"HousingHousehold.X4015_X"},{label:"Termite/Pest Control",fullName:"HousingHousehold.X4020_X"},
{label:"Appliance Repair",fullName:"HousingHousehold.X4025_X"},{label:"Housekeeping",fullName:"HousingHousehold.X4016_X"}],visualProps:{sorting:"Descending"}})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Electronics":function(){define(["../../ChartBuilder"],function(g){var f={};f.cellPhonePlan={states:"n,p,i",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of adults"},p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,
chartJson:g.createChart({title:"Cell Phone Plan",points:[{label:"AT\x26T",fullName:"PhonesYellowPages.MP27042a_B"},{label:"MetroPCS",fullName:"PhonesYellowPages.MP27043a_B"},{label:"Sprint",fullName:"PhonesYellowPages.MP27044a_B"},{label:"T-Mobile",fullName:"PhonesYellowPages.MP27045a_B"},{label:"Verizon Wireless",fullName:"PhonesYellowPages.MP27046a_B"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Internet":function(){define(["../../ChartBuilder"],
function(g){var f={};f.internetConnectionHome={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of adults"},p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Internet Access at Home",points:[{label:"Cable modem",fullName:"ElectronicsInternet.MP19003A_B"},{label:"DSL",fullName:"ElectronicsInternet.MP19004A_B"},{label:"Fiber optic",fullName:"ElectronicsInternet.MP19005A_B"},{label:"High speed connection",fullName:"ElectronicsInternet.MP19007A_B"}],
visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Pets":function(){define(["../../ChartBuilder","../../../../../charts/utils/ChartTypes"],function(g,f){var e={};e.hhOnwsAnyPet={states:"n,p,i",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({type:f.COLUMN,title:"Households: Own Any Pet",points:[{label:"Pet",
fullName:"AtRisk.MP26001h_B"},{label:"Cat",fullName:"PetsPetProducts.MP26003h_B"},{label:"Dog",fullName:"PetsPetProducts.MP26004h_B"}],visualProps:{sorting:"Descending"}})}};e.dogProducts={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Dog Products",points:[{label:"Canned/wet dog food in last 6 mos",fullName:"PetsPetProducts.MP26019h_B"},{label:"Packaged dry dog food in last 6 mos",
fullName:"PetsPetProducts.MP26022h_B"},{label:"Dog biscuits/treats in last 6 mos",fullName:"PetsPetProducts.MP26025h_B"},{label:"Flea/tick/parasite product for cat/dog",fullName:"PetsPetProducts.MP26027h_B"}],visualProps:{sorting:"Descending"}})}};e.catProducts={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of households"},p:{yAxisTitle:"Percent of households"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Cat Products",points:[{label:"Canned/wet cat food in last 6 mos",
fullName:"PetsPetProducts.MP26009h_B"},{label:"Packaged dry cat food in last 6 mos",fullName:"PetsPetProducts.MP26012h_B"},{label:"Cat treats in last 6 mos",fullName:"PetsPetProducts.MP26015h_B"},{label:"Cat litter in last 6 mos",fullName:"PetsPetProducts.MP26017h_B"},{label:"Flea/tick/parasite product for cat/dog",fullName:"PetsPetProducts.MP26027h_B"}],visualProps:{sorting:"Descending"}})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Businesses":function(){define(["../../ChartBuilder"],
function(g){var f={};f.businessSummaryBySIC={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of businesses"},p:{yAxisTitle:"Percent of businesses"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Business Summary by SIC",points:[{label:"Agriculture/Mining",fullName:"businesses.S02_BUS"},{label:"Construction",fullName:"businesses.S03_BUS"},{label:"Manufacturing",fullName:"businesses.S04_BUS"},{label:"Transportation",fullName:"businesses.S05_BUS"},{label:"Communication",fullName:"businesses.S06_BUS"},
{label:"Utility",fullName:"businesses.S07_BUS"},{label:"Wholesale Trade",fullName:"businesses.S08_BUS"},{label:"Retail Trade",fullName:"businesses.S09_BUS"},{label:"Home Improvement",fullName:"businesses.S10_BUS"},{label:"General Merchandise",fullName:"businesses.S11_BUS"},{label:"Food Stores",fullName:"businesses.S12_BUS"},{label:"Auto Dealer/Gas Station",fullName:"businesses.S13_BUS"},{label:"Apparel/Accessory",fullName:"businesses.S14_BUS"},{label:"Furniture/Home Furnish",fullName:"businesses.S15_BUS"},
{label:"Eating \x26 Drinking",fullName:"businesses.S16_BUS"},{label:"Misc Retail",fullName:"businesses.S17_BUS"},{label:"Finance/Ins/Real Estate",fullName:"businesses.S18_BUS"},{label:"Banks",fullName:"businesses.S19_BUS"},{label:"Securities Broker",fullName:"businesses.S20_BUS"},{label:"Insurance",fullName:"businesses.S21_BUS"},{label:"Real Estate/Holding",fullName:"businesses.S22_BUS"},{label:"Service",fullName:"businesses.S23_BUS"},{label:"Hotel/Lodging",fullName:"businesses.S24_BUS"},{label:"Auto Services",
fullName:"businesses.S25_BUS"},{label:"Movie/Amusement",fullName:"businesses.S26_BUS"},{label:"Health Services",fullName:"Health.S27_BUS"},{label:"Legal Services",fullName:"businesses.S28_BUS"},{label:"Education/Library",fullName:"businesses.S29_BUS"},{label:"Other Service",fullName:"businesses.S30_BUS"},{label:"Government",fullName:"businesses.S31_BUS"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Employees":function(){define(["../../ChartBuilder"],
function(g){var f={};f.civilianPopulation16Plus={states:"n,p",fieldInfo:{isChart:!0,chartJson:g.createDonutChart({title:"Civilian Population 16+",points:[{label:"Employed Civilian Pop 16+",fullName:"industry.EMP_CY"},{label:"Unemployed Population 16+",fullName:"industry.UNEMP_CY"}]})}};f.laborForceByOccupation={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of adults 16+"},p:{yAxisTitle:"Percent of adults 16+"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Labor Force by Occupation",
points:[{label:"Management",fullName:"occupation.OCCMGMT_CY"},{label:"Business/Financial",fullName:"occupation.OCCBUS_CY"},{label:"Computer/Mathmatical",fullName:"occupation.OCCCOMP_CY"},{label:"Architecture/Engineer",fullName:"occupation.OCCARCH_CY"},{label:"Life/Social Sciences",fullName:"occupation.OCCSSCI_CY"},{label:"Social Service",fullName:"occupation.OCCSSRV_CY"},{label:"Legal",fullName:"occupation.OCCLEGL_CY"},{label:"Education/Library",fullName:"occupation.OCCEDUC_CY"},{label:"Arts/Entertainment/Rec",
fullName:"occupation.OCCENT_CY"},{label:"Health Practices",fullName:"occupation.OCCHTCH_CY"},{label:"Health Support",fullName:"occupation.OCCHLTH_CY"},{label:"Protective Service",fullName:"occupation.OCCPROT_CY"},{label:"Food Preperation",fullName:"occupation.OCCFOOD_CY"},{label:"Building Maintenance",fullName:"occupation.OCCBLDG_CY"},{label:"Personal Care",fullName:"occupation.OCCPERS_CY"},{label:"Sales",fullName:"occupation.OCCSALE_CY"},{label:"Office/Admin",fullName:"occupation.OCCADMN_CY"},{label:"Farm/Fish/Forestry",
fullName:"occupation.OCCFARM_CY"},{label:"Construction/Extraction",fullName:"occupation.OCCCONS_CY"},{label:"Maintenance/Repair",fullName:"occupation.OCCMAIN_CY"},{label:"Production",fullName:"occupation.OCCPROD_CY"},{label:"Transportation/Moving",fullName:"occupation.OCCTRAN_CY"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Education":function(){define(["../../ChartBuilder"],function(g){var f=
{};f.educationalAttainment={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of adults 25+"},p:{yAxisTitle:"Percent of adults 25+"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Educational Attainment",points:[{label:"\x3c 9th Grade",fullName:"educationalattainment.NOHS_CY"},{label:"High School/No Diploma",fullName:"educationalattainment.SOMEHS_CY"},{label:"High School Diploma",fullName:"educationalattainment.HSGRAD_CY"},{label:"GED",fullName:"educationalattainment.GED_CY"},
{label:"Some College/No Degree",fullName:"educationalattainment.SMCOLL_CY"},{label:"Associate's Degree",fullName:"educationalattainment.ASSCDEG_CY"},{label:"Bachelor's Degree",fullName:"educationalattainment.BACHDEG_CY"},{label:"Grad/Professional Degree",fullName:"educationalattainment.GRADDEG_CY"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Mortgage":function(){define(["../../ChartBuilder","../../../../../charts/utils/ChartTypes"],
function(g,f){var e={};e.dwellingMortgage={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({type:f.COLUMN,title:"Owner Dwellings: Mortgage Payment",points:[{label:"Interest",fullName:"HousingHousehold.X3005_X"},{label:"Principal",fullName:"HousingHousehold.X3006_X"}]})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Housing":function(){define(["../../ChartBuilder"],
function(g){var f={};f.renterExpenses={states:"n,a,i",defaultState:"a",stateSettings:{n:{isCurrency:!0},a:{yAxisTitle:"Average dollars spent per household",isCurrency:!0}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Renter Expenses",points:[{label:"Renter's Insurance",fullName:"HousingHousehold.X3038_X"},{label:"Rent-Maint \x26 Repair Services",fullName:"HousingHousehold.X3039_X"},{label:"Rent-Maint \x26 Repair Material",fullName:"HousingHousehold.X3040_X"},{label:"Rent-Paint/Wallpaper \x26 Supplies",
fullName:"HousingHousehold.X3041_X"},{label:"Rent-Paint \x26 Paper Tools/Equip",fullName:"HousingHousehold.X3042_X"},{label:"Rent-Other Supplies \x26 Equip",fullName:"HousingHousehold.X3043_X"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/JourneyToWork":function(){define(["../../ChartBuilder"],function(g){var f={};f.jorneyToWork={states:"n,p",defaultState:"p",stateSettings:{n:{yAxisTitle:"Number of adults 16+"},
p:{yAxisTitle:"Percent of adults 16+"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Journey to Work (ACS)",points:[{label:"Drove Alone",fullName:"commute.ACSDRALONE"},{label:"Carpooled",fullName:"commute.ACSCARPOOL"},{label:"Public Transportation",fullName:"commute.ACSPUBTRAN"},{label:"Bus",fullName:"commute.ACSBUS"},{label:"Streetcar",fullName:"commute.ACSSTRTCAR"},{label:"Subway",fullName:"commute.ACSSUBWAY"},{label:"Railroad",fullName:"commute.ACSRAILRD"},{label:"Ferryboat",fullName:"commute.ACSFERRY"},
{label:"Taxicab",fullName:"commute.ACSTAXICAB"},{label:"Motorcycle",fullName:"commute.ACSMCYCLE"},{label:"Bicycle",fullName:"commute.ACSBICYCLE"},{label:"Walked",fullName:"commute.ACSWALKED"},{label:"Other Means",fullName:"commute.ACSOTHTRAN"},{label:"Worked at Home",fullName:"commute.ACSWRKHOME"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Health":function(){define(["../../ChartBuilder"],function(g){var f=
{};f.exercise={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of adults"},p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Exercise",points:[{label:"Exercise at home 2+ times per week",fullName:"HealthPersonalCare.MP14001a_B"},{label:"Exercise at club 2+ times per week",fullName:"HealthPersonalCare.MP14002a_B"},{label:"Exercise at other facility (not club) 2+ times/wk",fullName:"HealthPersonalCare.MP14003a_B"},{label:"Used exercise program for diet method",
fullName:"HealthPersonalCare.MP14016a_B"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Tapestry":function(){define([],function(){return{tapestry:{name:"Tapestry",fieldInfo:{isInfographic:!0,infographicJson:{type:"Tapestry",variables:["TapestryNEW.*"]}}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/AtRisk":function(){define(["../../ChartBuilder"],
function(g){var f={};f.householdsWithDisability={states:"p",defaultState:"p",fieldInfo:{isChart:!0,chartJson:g.createGaugeChart({title:"Households with Disability",points:[{label:"Households with 1+ Persons with a Disability",fullName:"AtRisk.ACSHHDIS"}]})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/LifeStyle":function(){define(["../../ChartBuilder"],function(g){var f={};f.musicAndTheater={states:"n,p,i",defaultState:"i",stateSettings:{n:{yAxisTitle:"Number of adults"},
p:{yAxisTitle:"Percent of adults"}},fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Attended Performance in last 12 months",points:[{label:"Classical music or opera",fullName:"LeisureActivitiesLifestyle.MP20061A_B"},{label:"Country music",fullName:"LeisureActivitiesLifestyle.MP20062A_B"},{label:"Rock music",fullName:"LeisureActivitiesLifestyle.MP20063A_B"},{label:"Live theater",fullName:"LeisureActivitiesLifestyle.MP20069A_B"}],visualProps:{sorting:"Descending"}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrilling/panels/US/Crime":function(){define(["../../ChartBuilder"],
function(g){var f={};f.crimeIndex={states:"n",defaultState:"n",fieldInfo:{isChart:!0,chartJson:g.createChart({title:"Crime Index",points:[{label:"Personal",fullName:"crime.CRMCYPERC"},{label:"Murder",fullName:"crime.CRMCYMURD"},{label:"Rape",fullName:"crime.CRMCYRAPE"},{label:"Robbery",fullName:"crime.CRMCYROBB"},{label:"Assault",fullName:"crime.CRMCYASST"},{label:"Property",fullName:"crime.CRMCYPROC"},{label:"Burglary",fullName:"crime.CRMCYBURG"},{label:"Larceny",fullName:"crime.CRMCYLARC"},{label:"Motor Vehicle Theft",
fullName:"crime.CRMCYMVEH"}],visualProps:{sorting:"Descending"}})}};return f})},"url:esri/dijit/geoenrichment/templates/OnDemandSelect.html":'\x3cdiv class\x3d"esriGEOnDemandSelect"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openButton" class\x3d"onDemandSelect_openButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"arrow" class\x3d"onDemandSelect_arrow"\x3e\x26nbsp;\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedLabel" class\x3d"onDemandSelect_selectedLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedItemHolder" class\x3d"onDemandSelect_selectedItem TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ComparisonSettings.html":'\x3cdiv class\x3d"esriGEReportPlayerToolbar_comparisonSettings esriGENonSelectable"\x3e\r\n    \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n        ${nls.comparisonSettings}\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriGESpaceBefore20"\x3e\r\n        \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"showBackgroundImageLabel"\x3e\x26nbsp;${nls.showBackgroundImage}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"splitPanelsLabel"\x3e\x26nbsp;${nls.splitPanels}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"splitPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e${nls.zoomPanels}\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"zoomPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomSplitBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomSplitLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetSplitButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ReportPlayer.html":'\x3cdiv class\x3d"esriGEReportPlayer esriGENonSelectable"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"printBackgroundView" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"normalViewDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"playerToolbarDiv"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"printableDivContainer" class\x3d"reportPalyer_printableDivContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableDiv" class\x3d"reportPalyer_printableDiv"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"reportContainerDiv"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"reportPlayer_sidePageNavigator" data-dojo-attach-point\x3d"sidePageNavigator"\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowUp" data-dojo-attach-point\x3d"prevPageButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowDown" data-dojo-attach-point\x3d"nextPageButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"playerAfterToolbarDiv" class\x3d"reportPlayer_playerAfterToolbarDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"errorViewDiv" class\x3d"esriGEReportPlayerErrorMessage"\x3e\r\n        ${nls.cantPlayReportError}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.79 4.71L8 0.5L12.21 4.71L10.8 4.71L8.5 2.42L8.5 15.5L7.51 15.5L7.51 2.4L5.2 4.71L3.79 4.71Z"/\x3e\r\n\x3c/svg\x3e\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.9 11.45L8.12 15.67L12.33 11.45L10.91 11.45L8.62 13.74L8.62 0.56L7.63 0.56L7.63 13.76L5.32 11.45L3.9 11.45Z"/\x3e\r\n\x3c/svg\x3e\r\n',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/AdjustableGrid.html":'\x3cdiv class\x3d"esriGEAdjustableGrid"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"mainNode" class\x3d"adjustableGridMainNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/MinMaxLegend.html":'\x3cdiv class\x3d"esriGEMinMaxLegend"\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"largestGroupTitleDiv"\x3e${nls.largestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"largestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"smallestGroupTitleDiv"\x3e${nls.smallestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"smallestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/ChartContainer.html":'\x3cdiv class\x3d"esriGEReportPlayer_chartContainer esriGENonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartLabel" class\x3d"chartContainer_chartLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"noDataPlaceHolder" class\x3d"esriGENoDataPlaceHolder"\x3e\r\n        \x3cdiv class\x3d"esriGENoDataPlaceHolderLabel"\x3e${nls.noChartData}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartNormalViewDiv"\x3e\r\n        \x3cdiv class\x3d"chartContainer_chartContainerWithAxis" data-dojo-attach-point\x3d"chartContainerWithAxis"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chartContainerDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"tableContainerDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"legendContainerDiv" class\x3d"chartContainer_legendContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"comparisonSelectBlock" class\x3d"chartContainer_comparisonSelectBlock"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonLabel" class\x3d"chartContainer_comparisonLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonSelectDiv" class\x3d"chartContainer_comparisonSelectDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"errorDiv" class\x3d"esriGEReportPlayerPanelErrorMessage"\x3e${nls.chartLoadError}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"missingVariablesDiv" class\x3d"chartContainer_missingVariablesMessage"\x3e${nls.chartContainerMissingVariables}\x3c/div\x3e\r\n\x3c/div\x3e',
"*noref":1}});
define("esri/dijit/geoenrichment/ReportPlayer/ReportPlayer","dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./config ./playerSupports/_CommandSupport ./playerSupports/_LogoSupport ./playerSupports/_MapSupport ./playerSupports/_PageNavigationSupport ./playerSupports/_PrintSupport ./playerSupports/_ReportContainersSwitcher ./playerSupports/_SmartLayoutSupport ./playerSupports/_ZoomSupport ./playerSupports/_WaitingSupport ./supportClasses/PlayerConfigurator ./supportClasses/PlayerToFullScreenAnimator ./toolbar/PlayerToolbar ./ReportPlayerViewModel ./PlayerResizeModes ./PlayerThemes ./PlayerViewModes ./ReportPlayerState ./DataProviderGE esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue dojo/text!./templates/ReportPlayer.html dojo/i18n!esri/nls/jsapi ./_devConfig".split(" "),function(g,
f,e,k,c,b,a,d,h,l,m,n,p,t,q,v,r,u,y,w,A,B,C,z,E,G,F,D,I,J,M,H,K,N,O,L,P){L=L.geoenrichment.dijit.ReportPlayer.ReportPlayer;return g([h,l,n,p,t,v,r,u,y,q,w],{templateString:O,nls:L,dataProvider:null,exportCommands:null,config:null,theme:void 0,viewMode:void 0,enableDataDrilling:void 0,showDataDrillingInsidePanel:void 0,showToolbarInPopup:void 0,showAreaTitle:void 0,scaleSlidesToFitWindow:void 0,showCloseButton:!1,showToFullScreenAnimation:!1,allowAutoOrientation:!0,mobileLandscapeViewMode:void 0,canAddMoreAreas:!1,
areasSelectButtons:null,resizeMode:void 0,printConfig:{subtitle:L.preparedByEsri,printDialogClass:"esri/dijit/geoenrichment/ReportPlayer/printing/PageOptionsDialog/PageOptionsDialog"},showProgressBar:!0,defaultZoomBehavior:void 0,nlsMap:null,isDataDrillingPlayer:!1,isPlayerOnServer:!1,_viewModel:null,_reportData:null,_analysisAreaIndex:0,_originalAreaViewMode:null,_showAllAreasSideBySide:!1,playerToolbar:null,postCreate:function(){this.config=f.mixin(m,this.config);this._viewModel=new (this._getViewModelClass());
this._setUpDataProvider();A.configurePlayer(this);this._initToolbar();this._initContainerSwither();this._initSmartLayout();this._initCommands();this._initPageNavigationControls();this._initZoomControls();this._applyTheme();this._showError(!1);this._initProgressController();M.isMobileDevice()&&(d.add(this.domNode,"esriGEReportPlayerMobile"),this._setUpMobileOrientationHandling())},_setUpDataProvider:function(){this.dataProvider=this.dataProvider||new I;this.exportCommands&&this.exportCommands.forEach(function(a){this.dataProvider.registerCommand(a)},
this)},_orientationDfd:null,_setUpMobileOrientationHandling:function(){var a=this;this.allowAutoOrientation&&this.own(b(window,"orientationchange",function(){a._orientationDfd&&a._orientationDfd.resolve("cancel");var b=a._orientationDfd=new k;a._showWaiting(b.promise,"orientationchange");b.promise.then(function(b){"cancel"!==b&&(a._setViewMode(a.viewMode),a.refresh())});c(a.getRenderPromise(),function(){J.delay(500).then(b.resolve,b.resolve)})}))},_getViewModelClass:function(){return z},_setViewMode:function(a){this.viewMode=
a;this.defaultZoomBehavior=null;A.configurePlayer(this);this._refreshZoomControls()},_initToolbar:function(){var c=this;this.playerToolbar=(new C({player:this,popupButtonDiv:this.playerAfterToolbarDiv,showToolbarInPopup:this.showToolbarInPopup,showAreaTitle:this.showAreaTitle,stretchToolbarNode:!this.showToolbarInPopup&&(this.resizeMode===E.FIT_WINDOW?document.body:this.domNode),showCloseButton:this.showCloseButton,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowAnalysisAreaAt:function(a){c.showAnalysisAreaAt(a)},
onCompareAreasSideBySide:function(){c._showAllAnalysisAreasSideBySide()},onShowPageAt:function(a){c.showPageAt(a)},isScrollShown:function(){var a=c.getCurrentReportContainer();return a&&a.isScrollShown&&a.isScrollShown()},onClose:function(){c._onClose()},onAddMoreAreas:function(){c.onAddMoreAreas()},onRemoveAreas:function(a){c.onAreasPreRemoved(a);a.forEach(function(a){a.hidden=!0});if(c.viewMode===F.PANELS_IN_STACK_ALL)if(2>c.getAnalysisAreas().filter(function(a){return!a.hidden}).length)c._setAllAreasVisible(!1);
else{var b={};a.forEach(function(a){b[a.index]=!1});c.getCurrentReportContainer().setAreasVisibilityState(b,{append:!0});c._updateAreaSelect()}else if(c.getCurrentAnalysisArea().hidden){var d=c.getAnalysisAreas().filter(function(a){return!a.hidden})[0];d?c.showAnalysisAreaAt(d.index):c.refresh()}else c._updateAreaSelect();c.onAreasRemoved(a)}})).placeAt(this.playerToolbarDiv);this.own(this.playerToolbar);this.showCloseButton&&this.own(b(window,"keyup",function(b){c.getWaitingPromise()||D.isViewingDataDrillingZoom||
D.isImageViewerShown||b.keyCode===a.ESCAPE&&c._onClose()}));H.hide(this.playerToolbarDiv)},_applyTheme:function(){d.remove(this.domNode,"playerThemeDark playerThemeLight");d.add(this.domNode,this.theme===G.DARK?"playerThemeDark":"playerThemeLight");this.playerToolbar.setTheme(this.theme)},playReport:function(a,b){return this._showWaiting(this._callAfterRendering("_doPlayReport",[a,b]),"playReport")},_doPlayReport:function(a,b){this.playerToolbar.closePopup();var d=this;this._showError(!1);this._progressController&&
this._progressController.reset();this.showToFullScreenAnimation&&this.resizeMode===E.FIT_WINDOW&&B.animateTo(this);this.dataProvider._onCreateReportStarted=function(){d._viewModel.preInitialize()};this._viewModel.reset();return c(this.dataProvider.getReportData(a,{progressCallback:function(a){d._progressController&&d._progressController.setLoadDataProgress(a)}}),function(a){if(d.viewMode===F.PANELS_IN_STACK_ALL){var c=d.viewMode;1<a.analysisAreas.length&&!a.isMultiFeature?d._originalAreaViewMode||
(d._showAllAreasSideBySide=!0,d._originalAreaViewMode=A.getDefaultViewMode(d)):(d._showAllAreasSideBySide=!1,c=d._originalAreaViewMode||A.getDefaultViewMode(d));d._setViewMode(c)}return d.setReportData(a,b)},function(a){d._showError(a)})},refresh:function(a){return this._reportData&&c(this.setReportData(this._reportData,{waitUntilAllContentIsReady:!(!a||!a.waitUntilAllContentIsReady)}),function(){this.showPageAt(0);return this.resize()}.bind(this))},_isDataBeingSetFlag:!1,_notifyShownPendingFlag:!1,
setReportData:function(a,b){return this._showWaiting(this._callAfterRendering("_doSetReportData",[a,b]),"setReportData")},_doSetReportData:function(a,b){var c=this;b=b||{};this._reportData=a;H.show(this.playerToolbarDiv);if(a){this._isDataBeingSetFlag=!0;D.isAnimationSuspended=!0;this.onSetReportDataStart();var d=new k;this._viewModel.setAnimationAllowed(!b.disableAnimation);this._configureViewModel(a);J.delay(0).then(function(){if(1===a.analysisAreas.length||a.isMultiFeature)c._destroyAllContainers(),
c._resetMapBuilder(),c._applyReportData({analysisAreaIndex:0,rerenderContent:!0}).then(d.resolve,d.reject);else{var e=function(){for(;0<=f&&a.analysisAreas[f].hidden;)f--;0>f?d.resolve():c._applyReportData({analysisAreaIndex:f--,rerenderContent:!1,isFinalArea:0>f}).then(function(){setTimeout(e,0)},d.reject)};!1!==b._resetLoadedContents&&(c._destroyAllContainers(),c._resetMapBuilder());var f=a.analysisAreas.length-1;e()}});this._progressController&&this._progressController.setNumAreas(a.analysisAreas.length);
this._progressController&&this._progressController.setLoadDataProgress(1);return d.promise.then(function(){return c._progressController&&c._progressController.finalize()}).otherwise(function(a){c._showError(a)}).always(function(){var a=c.getCurrentReportContainer();if(a&&a.domNode)return J.delay(300).then(function(){c._isDataBeingSetFlag=!1;c._notifyShownPendingFlag=!H.isNodeInLayout(c.domNode);D.isAnimationSuspended=!1;c.onSetReportDataEnd();c._emitPendingResizedEvent();c._progressController&&c._progressController.reset();
if(b.waitUntilAllContentIsReady)return c.getRenderPromise()})})}this._showError(!0)},showAnalysisAreaAt:function(a){return this._callAfterRendering("_doShowAnalysisAreaAt",[a])},_doShowAnalysisAreaAt:function(a){var b=this;return c(this._setAllAreasVisible(!1),function(){if(b._analysisAreaIndex!==a&&b.getAnalysisAreas()[a]&&!b.getAnalysisAreas()[a].hidden)return b._applyReportData({analysisAreaIndex:a,rerenderContent:!1})})},_showAllAnalysisAreasSideBySide:function(){return this._callAfterRendering("_doShowAllAnalysisAreasSideBySide")},
_doShowAllAnalysisAreasSideBySide:function(){return this._setAllAreasVisible(!0)},_setAllAreasVisible:function(a){if(this._showAllAreasSideBySide!==a)return a?(this._showAllAreasSideBySide=!0,this._originalAreaViewMode=this.viewMode===F.PANELS_IN_STACK_ALL?A.getDefaultViewMode(this):this.viewMode,this._setViewMode(F.PANELS_IN_STACK_ALL)):(this._showAllAreasSideBySide=!1,this._setViewMode(this._originalAreaViewMode),this._originalAreaViewMode=null),this.refresh()},_applyReportData:function(a){var b=
this;a=a||{};var d=this._reportData&&this._reportData.isMultiFeature?0:a.analysisAreaIndex||0,e=!1!==a.rerenderContent;this._analysisAreaIndex=d;this._showError(!this._reportData);if(this._reportData)return c(this._viewModel.initialize(this._reportData.isClassic,this.viewMode),function(){return b._setReportContainer(e)?b._doApplyTemplateJson({analysisAreaIndex:d,isFinalArea:a.isFinalArea}):b._updateAreaSelect()})},_doApplyTemplateJson:function(a){var b=this,d=this.getCurrentReportContainer(),e=d.fromJson(f.clone(this._reportData.templateJson),
{waitUntilAllContentIsReady:!0,progressCallback:function(c){b._progressController&&b._progressController.setProgressForAreaAt(c,a.analysisAreaIndex)},analysisAreaIndex:a.analysisAreaIndex,isFinalArea:a.isFinalArea}),g=d.getPagePromise?d.getPagePromise():e,d=d.getContentPromise?d.getContentPromise():e;this._registerContainerLoadPromise(d||g);this._updateAreaSelect();return c(g,function(){b._setCurrentContainerLoaded();b.showPageAt(b._currentPageIndex);return b.resize()})},_updateAreaSelect:function(){this.playerToolbar.updateAreaSelect({analysisAreas:this._reportData.analysisAreas,
combinedAreasInfo:this._reportData.combinedAreasInfo,currentAreaIndex:this._showAllAreasSideBySide?"all":this.getCurrentAnalysisAreaIndex(),isMultiFeature:this._reportData.isMultiFeature})},getReportData:function(){return this._reportData},getReportTitle:function(){return this._reportData&&this._reportData.reportTitle||""},getCurrentAnalysisAreaIndex:function(){return this._analysisAreaIndex},getCurrentAnalysisArea:function(){return this._reportData&&this._reportData.analysisAreas[this._analysisAreaIndex]},
getAnalysisAreas:function(){return this._reportData&&this._reportData.analysisAreas},reportDataToJson:function(a){return this._showWaiting(this.dataProvider.reportDataToJson(this.getReportData(),a),"reportDataToJson")},reportDataFromJson:function(a,b){var d=this;this._showError(!1);return this._showWaiting(c(this.dataProvider.reportDataFromJson(a),function(a){return d.setReportData(a,b)}),"reportDataFromJson")},_configureViewModel:function(a){var b=this;this._viewModel.setTheme(this._reportData.templateJson.theme);
this._viewModel.enableDataDrilling=this.enableDataDrilling;this._viewModel.showDataDrillingInsidePanel=this.showDataDrillingInsidePanel;this._viewModel.setDynamicReportInfo({fieldData:this._reportData.fieldData,analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,infographicOptions:this._reportData.infographicOptions,attachmentsStore:this._reportData.attachmentsStore,createMapFunc:f.hitch(this,this._createMap),reportType:this._reportData.reportType,reportObject:this._reportData.reportObject,
isClassic:this._reportData.isClassic,isMultiFeature:this._reportData.isMultiFeature,isFixedDataMode:!this._reportData.config.geoenrichmentUrl,geClient:this._reportData.geClient,templateVariableProvider:this._reportData.templateVariableProvider,countryID:this._reportData.config.countryID,hierarchy:this._reportData.config.hierarchy,templateJson:this._reportData.templateJson});this._viewModel.getDynamicImageFunc=f.hitch(this,this._getReportLogo);this._viewModel.enrichFieldData=function(a){return b.dataProvider.enrichFieldData(a,
f.mixin({analysisAreas:b._reportData.analysisAreas,fieldData:b._reportData.fieldData},b._reportData.config))}},notifyShown:function(){!this._isDataBeingSetFlag&&this._notifyShownPendingFlag&&(this.getCurrentReportContainer()&&this.getCurrentReportContainer().notifyShown(),this._notifyShownPendingFlag=!1)},_isErrorShown:!1,_showError:function(a){P.emulateErrors.playerError&&(a=!0);H[a?"hide":"show"](this.printableDivContainer);H[a?"show":"hide"](this.errorViewDiv);d[a?"add":"remove"](this.domNode,
"esriGEReportPlayerError");this._isErrorShown=!!a;a&&H.hide(this.sidePageNavigator);this.playerToolbar.setErrorShown(!!a);a&&(this._progressController&&this._progressController.reset(),console.log(a),this.onError(a))},isErrorShown:function(){return this._isErrorShown},setPrintMode:function(a){d[a?"add":"remove"](this.domNode,"esriGEReportPlayerInPrinting")},resize:function(a,b){this._resize({width:a,height:b});this._updatePageNavigator();this._updateZoomControls();this.playerToolbar.update()},_pendingResizeEvent:null,
_emitResizedEvent:function(a){this._pendingResizeEvent={isPaginating:!!a};this._isDataBeingSetFlag||this._emitPendingResizedEvent()},_emitPendingResizedEvent:function(){this._pendingResizeEvent&&(this.onResized(this._pendingResizeEvent.isPaginating),this._pendingResizeEvent=null)},_onClose:function(){var a;this.showToFullScreenAnimation&&this.resizeMode===E.FIT_WINDOW&&(a=B.animateFrom(this));c(a,function(){this.onClose()}.bind(this))},getVisualState:function(){return{type:"reportPlayer",viewMode:this.viewMode,
reportContainers:this.getAllReportContainers().map(function(a){return a.getVisualState&&a.getVisualState()})}},setVisualState:function(a){return this._callAfterRendering("_doSetVisualState",[a])},_doSetVisualState:function(a){var b=a&&this.getAllReportContainers().map(function(b,c){return b.setVisualState&&b.setVisualState(a.reportContainers[c])});return e(b)},_renderQueue:null,getRenderPromise:function(){return this._renderQueue&&this._renderQueue.getPromise()},_registerContainerLoadPromise:function(a){this._renderQueue=
this._renderQueue||new N;this._renderQueue.add(a);this.playerToolbar.setContentLoadPromise(this.getRenderPromise())},_safeFuncCaller:null,_callAfterRendering:function(a,b){var d=this;this._safeFuncCaller=this._safeFuncCaller||{};this._safeFuncCaller[a]=function(){return d[a].apply(d,b)};return c(this.getRenderPromise(),function(){return K.invoke(d._safeFuncCaller,a)})},onSetReportDataStart:function(){},onSetReportDataEnd:function(){},onResized:function(a){},onClose:function(){},onError:function(a){},
onAddMoreAreas:function(){},onAreasPreRemoved:function(a){},onAreasRemoved:function(a){}})});