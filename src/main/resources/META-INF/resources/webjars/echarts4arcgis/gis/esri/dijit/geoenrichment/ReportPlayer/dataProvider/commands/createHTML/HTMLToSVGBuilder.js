// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/createHTML/HTMLToSVGBuilder","dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/when ./CSSFilesLoader ./HTMLPageBuilder esri/dijit/geoenrichment/utils/htmlToSvg/HTMLtoSVGConverter esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/imageUtils/ImageOptimizer esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),function(q,r,b,d,t,u,v,w,x,y){var h={htmlToSvg:function(a,
m,c,e,b,f,g){return this._htmlToSvg(a,m,c,e,b,f,g)},htmlToSvgInHtml:function(a,b,c,e,n,f,g,p){return d(this._htmlToSvg(a,c,e,n,f,g,p),function(a){return d(t.loadCssFontFiles(),function(c){return u.composeHtmlStringFromParts({reportTitle:b,contentString:a.join(""),cssFiles:c})})})},_htmlToSvg:function(a,m,c,e,n,f,g){var p=this,k=b.create("div",{"class":"esriGEBehindScreen"},document.body);k.innerHTML=a;for(var l=[];k.children.length;)a=b.create("div",{"class":"esriGEBehindScreen"},document.body),b.place(k.children[0],
a),l.push(a);var d=new x,h=[];l.map(function(a,c){d.add(function(){return p._nodeToSvg(a,{fitParams:m,convertUrlImages:n,hideUrlImages:f,getItemResourceUrl:g}).then(function(a){h.push(a);e(c,l.length);return y.delay(50)})})});return d.getPromise().then(function(){b.destroy(k);l.forEach(function(a){b.destroy(a)});return w.optimizeSize(h,c)})},_NODES_TO_CLIP:["shapeContainer_svgContainerShowAsBar","imageNavigator_imagePaginationRoot","infographicPageStack_infographicSectionNode_stackNode","infographicPageStack_infographicSectionNode_background"],
_nodeToSvg:function(a,b){return v.htmlToSvg(a,q.mixin({iterationsPerScript:100,clipFunc:function(a){return a&&h._NODES_TO_CLIP.some(function(b){return r.contains(a,b)})}},b))}};return h});